<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/items/model/_item.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/items/model';
filename='_item.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/items/model/</a> -> <a href="_item.class.php.html">_item.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_item.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_item.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the Item class.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Includes:</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> */</span>
<a name="l20"><span class="linenum">  20</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'items/model/_item.funcs.php');
<a name="l21"><span class="linenum">  21</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'slugs/model/_slug.class.php', 'Slug' );
<a name="l22"><span class="linenum">  22</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'links/model/_linkowner.class.php', 'LinkOwner' );
<a name="l23"><span class="linenum">  23</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'links/model/_linkitem.class.php', 'LinkItem' );
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">/**</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * Item Class</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @package evocore</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> */</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Item')" href="../../../_classes/item.html" onMouseOver="classPopup(event,'item')">Item</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('ItemLight')" href="../../../_classes/itemlight.html" onMouseOver="classPopup(event,'itemlight')">ItemLight</a>
<a name="l31"><span class="linenum">  31</span></a>  {
<a name="l32"><span class="linenum">  32</span></a>      <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">     * Creation date (timestamp)</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     * @var integer</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     */</span>
<a name="l36"><span class="linenum">  36</span></a>      var <a class="var it1205" onMouseOver="hilite(1205)" onMouseOut="lolite()" onClick="logVariable('datecreated')" href="../../../_variables/datecreated.html">$datecreated</a>;
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>      <span class="comment">/**</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * The User who has created the Item (lazy-filled).</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * @see Item::get_creator_User()</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @see Item::set_creator_User()</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * @var User</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @access protected</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      var <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>;
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>      <span class="comment">/**</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * The User who has edited the Item last time (lazy-filled).</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @see Item::get_lastedit_User()</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * @var User</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @access protected</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     */</span>
<a name="l54"><span class="linenum">  54</span></a>      var <a class="var it1444" onMouseOver="hilite(1444)" onMouseOut="lolite()" onClick="logVariable('lastedit_User')" href="../../../_variables/lastedit_User.html">$lastedit_User</a>;
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * ID of the user who has edited the Item last time</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * @var integer</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     */</span>
<a name="l61"><span class="linenum">  61</span></a>      var <a class="var it1445" onMouseOver="hilite(1445)" onMouseOut="lolite()" onClick="logVariable('lastedit_user_ID')" href="../../../_variables/lastedit_user_ID.html">$lastedit_user_ID</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>      <span class="comment">/**</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * Date when comments or links were added/edited/deleted for this Item last time (timestamp)</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * @see Item::update_last_touched_date()</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * @var integer</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     */</span>
<a name="l68"><span class="linenum">  68</span></a>      var <a class="var it1446" onMouseOver="hilite(1446)" onMouseOut="lolite()" onClick="logVariable('last_touched_ts')" href="../../../_variables/last_touched_ts.html">$last_touched_ts</a>;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      <span class="comment">/**</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * The latest Comment on this Item (lazy-filled).</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @see Item::get_latest_Comment()</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @var Comment</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @access protected</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     */</span>
<a name="l77"><span class="linenum">  77</span></a>      var <a class="var it1447" onMouseOver="hilite(1447)" onMouseOut="lolite()" onClick="logVariable('latest_Comment')" href="../../../_variables/latest_Comment.html">$latest_Comment</a>;
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>      <span class="comment">/**</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     * @deprecated by {@link $creator_User}</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * @var User</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     */</span>
<a name="l84"><span class="linenum">  84</span></a>      var <a class="var it1448" onMouseOver="hilite(1448)" onMouseOut="lolite()" onClick="logVariable('Author')" href="../../../_variables/Author.html">$Author</a>;
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>      <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * ID of the user that created the item</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * @var integer</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     */</span>
<a name="l91"><span class="linenum">  91</span></a>      var <a class="var it373" onMouseOver="hilite(373)" onMouseOut="lolite()" onClick="logVariable('creator_user_ID')" href="../../../_variables/creator_user_ID.html">$creator_user_ID</a>;
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     * Login of the user that created the item (lazy-filled)</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * @var string</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     */</span>
<a name="l98"><span class="linenum">  98</span></a>      var <a class="var it1449" onMouseOver="hilite(1449)" onMouseOut="lolite()" onClick="logVariable('creator_user_login')" href="../../../_variables/creator_user_login.html">$creator_user_login</a>;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * The assigned User to the item.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * Can be NULL</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     * @see Item::get_assigned_User()</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * @see Item::assign_to()</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     *</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * @var User</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * @access protected</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      var <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a>;
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>      <span class="comment">/**</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * ID of the user that created the item</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * Can be NULL</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     *</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @var integer</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      var <a class="var it1451" onMouseOver="hilite(1451)" onMouseOut="lolite()" onClick="logVariable('assigned_user_ID')" href="../../../_variables/assigned_user_ID.html">$assigned_user_ID</a>;
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>      <span class="comment">/**</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * The visibility status of the item.</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     *</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * 'published', 'community', 'deprecated', 'protected', 'private', 'review' or 'draft'</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     *</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @var string</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     */</span>
<a name="l127"><span class="linenum"> 127</span></a>      var <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>;
<a name="l128"><span class="linenum"> 128</span></a>      <span class="comment">/**</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * Locale code for the Item content.</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     *</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     * Examples: en-US, zh-CN-utf-8</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     *</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * @var string</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     */</span>
<a name="l135"><span class="linenum"> 135</span></a>      var <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a>;
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      var <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>      var <a class="var it1452" onMouseOver="hilite(1452)" onMouseOut="lolite()" onClick="logVariable('titletag')" href="../../../_variables/titletag.html">$titletag</a>;
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>      <span class="comment">/**</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     * Lazy filled, use split_page()</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     */</span>
<a name="l144"><span class="linenum"> 144</span></a>      var <a class="var it1453" onMouseOver="hilite(1453)" onMouseOut="lolite()" onClick="logVariable('content_pages')" href="../../../_variables/content_pages.html">$content_pages</a> = NULL;
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      var <a class="var it1454" onMouseOver="hilite(1454)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../_variables/wordcount.html">$wordcount</a>;
<a name="l148"><span class="linenum"> 148</span></a>      <span class="comment">/**</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * The list of renderers, imploded by '.'.</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * @var string</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     * @access protected</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     */</span>
<a name="l153"><span class="linenum"> 153</span></a>      var <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>;
<a name="l154"><span class="linenum"> 154</span></a>      <span class="comment">/**</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * Comments status</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     *</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * &quot;open&quot;, &quot;disabled&quot; or &quot;closed</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     *</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     * @var string</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">     */</span>
<a name="l161"><span class="linenum"> 161</span></a>      var <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a>;
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      var <a class="var it1215" onMouseOver="hilite(1215)" onMouseOut="lolite()" onClick="logVariable('pst_ID')" href="../../../_variables/pst_ID.html">$pst_ID</a>;
<a name="l164"><span class="linenum"> 164</span></a>      var <a class="var it1456" onMouseOver="hilite(1456)" onMouseOut="lolite()" onClick="logVariable('datedeadline')" href="../../../_variables/datedeadline.html">$datedeadline</a> = '';
<a name="l165"><span class="linenum"> 165</span></a>      var <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../_variables/priority.html">$priority</a>;
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>      <span class="comment">/**</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @var float</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     */</span>
<a name="l170"><span class="linenum"> 170</span></a>      var <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../_variables/order.html">$order</a>;
<a name="l171"><span class="linenum"> 171</span></a>      <span class="comment">/**</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @var boolean</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     */</span>
<a name="l174"><span class="linenum"> 174</span></a>      var <a class="var it381" onMouseOver="hilite(381)" onMouseOut="lolite()" onClick="logVariable('featured')" href="../../../_variables/featured.html">$featured</a>;
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * Have post processing notifications been handled?</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * @var string</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     */</span>
<a name="l180"><span class="linenum"> 180</span></a>      var <a class="var it1458" onMouseOver="hilite(1458)" onMouseOut="lolite()" onClick="logVariable('notifications_status')" href="../../../_variables/notifications_status.html">$notifications_status</a>;
<a name="l181"><span class="linenum"> 181</span></a>      <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * Which cron task is responsible for handling notifications?</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * @var integer</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     */</span>
<a name="l185"><span class="linenum"> 185</span></a>      var <a class="var it1459" onMouseOver="hilite(1459)" onMouseOut="lolite()" onClick="logVariable('notifications_ctsk_ID')" href="../../../_variables/notifications_ctsk_ID.html">$notifications_ctsk_ID</a>;
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      <span class="comment">/**</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * array of IDs or NULL if we don't know...</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     *</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * @var array</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     */</span>
<a name="l192"><span class="linenum"> 192</span></a>      var <a class="var it1460" onMouseOver="hilite(1460)" onMouseOut="lolite()" onClick="logVariable('extra_cat_IDs')" href="../../../_variables/extra_cat_IDs.html">$extra_cat_IDs</a> = NULL;
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <span class="comment">/**</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * Has the publish date been explicitly set?</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">      *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * @var integer</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     */</span>
<a name="l199"><span class="linenum"> 199</span></a>      var <a class="var it1461" onMouseOver="hilite(1461)" onMouseOut="lolite()" onClick="logVariable('dateset')" href="../../../_variables/dateset.html">$dateset</a> = 1;
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      var <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('priorities')" href="../../../_variables/priorities.html">$priorities</a>;
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>      <span class="comment">/**</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * @access protected</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     * @see Item::get_excerpt()</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     * @var string</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     */</span>
<a name="l208"><span class="linenum"> 208</span></a>      var <a class="var it1463" onMouseOver="hilite(1463)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>;
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>      <span class="comment">/**</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     * Is the excerpt autogenerated?</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @access protected</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @var boolean</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     */</span>
<a name="l215"><span class="linenum"> 215</span></a>      var <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('excerpt_autogenerated')" href="../../../_variables/excerpt_autogenerated.html">$excerpt_autogenerated</a> = true;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <span class="comment">/**</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * Location IDs</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * @var integer</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     */</span>
<a name="l221"><span class="linenum"> 221</span></a>      var <a class="var it1129" onMouseOver="hilite(1129)" onMouseOut="lolite()" onClick="logVariable('ctry_ID')" href="../../../_variables/ctry_ID.html">$ctry_ID</a> = NULL;
<a name="l222"><span class="linenum"> 222</span></a>      var <a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('rgn_ID')" href="../../../_variables/rgn_ID.html">$rgn_ID</a> = NULL;
<a name="l223"><span class="linenum"> 223</span></a>      var <a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('subrg_ID')" href="../../../_variables/subrg_ID.html">$subrg_ID</a> = NULL;
<a name="l224"><span class="linenum"> 224</span></a>      var <a class="var it1126" onMouseOver="hilite(1126)" onMouseOut="lolite()" onClick="logVariable('city_ID')" href="../../../_variables/city_ID.html">$city_ID</a> = NULL;
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * ID of parent Item.</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     * @var integer</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     */</span>
<a name="l230"><span class="linenum"> 230</span></a>      var <a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../_variables/parent_ID.html">$parent_ID</a> = NULL;
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <span class="comment">/**</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     * Parent Item.</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">     * @var object</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     */</span>
<a name="l236"><span class="linenum"> 236</span></a>      var <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('parent_Item')" href="../../../_variables/parent_Item.html">$parent_Item</a> = NULL;
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <span class="comment">/**</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * Additional settings for the items.  lazy filled.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">      *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     * @see Item::get_setting()</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * @see Item::set_setting()</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * @see Item::load_ItemSettings()</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * Any non vital params should go into there.</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     *</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * @var ItemSettings</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     */</span>
<a name="l248"><span class="linenum"> 248</span></a>      var <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('ItemSettings')" href="../../../_variables/ItemSettings.html">$ItemSettings</a>;
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * Current User read status on this post content ( Only about the post content and not about the post's comments ).</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     * This value is not saved into the db. Lazy filled.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     *</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @var string ( read, new, updated )</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     */</span>
<a name="l256"><span class="linenum"> 256</span></a>      var <a class="var it1468" onMouseOver="hilite(1468)" onMouseOut="lolite()" onClick="logVariable('content_read_status')" href="../../../_variables/content_read_status.html">$content_read_status</a> = NULL;
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>      <span class="comment">/**</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * The Type of the Item (lazy filled, use {@link get_ItemType()} to access it.</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * @access protected</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @var object ItemType</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     */</span>
<a name="l263"><span class="linenum"> 263</span></a>      var <a class="var it322" onMouseOver="hilite(322)" onMouseOut="lolite()" onClick="logVariable('ItemType')" href="../../../_variables/ItemType.html">$ItemType</a>;
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      <span class="comment">/**</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * Constructor</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     *</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * @param object table Database row</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @param string</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param string</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @param string</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @param string for derived classes</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     */</span>
<a name="l278"><span class="linenum"> 278</span></a>  	function <a class="function" onClick="logFunction('Item')" href="../../../_functions/item.html" onMouseOver="funcPopup(event,'item')">Item</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> = NULL, <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../_variables/dbtable.html">$dbtable</a> = 'T_items__item', <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a> = 'post_', <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a> = 'post_ID', <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('objtype')" href="../../../_variables/objtype.html">$objtype</a> = 'Item',
<a name="l279"><span class="linenum"> 279</span></a>                     <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../_variables/datecreated_field.html">$datecreated_field</a> = 'datecreated', <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../_variables/datemodified_field.html">$datemodified_field</a> = 'datemodified',
<a name="l280"><span class="linenum"> 280</span></a>                     <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../_variables/creator_field.html">$creator_field</a> = 'creator_user_ID', <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../_variables/lasteditor_field.html">$lasteditor_field</a> = 'lastedit_user_ID' )
<a name="l281"><span class="linenum"> 281</span></a>      {
<a name="l282"><span class="linenum"> 282</span></a>          global <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">        // Call parent constructor:</span>
<a name="l285"><span class="linenum"> 285</span></a>          parent::<a class="function" onClick="logFunction('ItemLight')" href="../../../_functions/itemlight.html" onMouseOver="funcPopup(event,'itemlight')">ItemLight</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>, <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../_variables/dbtable.html">$dbtable</a>, <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a>, <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('objtype')" href="../../../_variables/objtype.html">$objtype</a>,
<a name="l286"><span class="linenum"> 286</span></a>                     <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../_variables/datecreated_field.html">$datecreated_field</a>, <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../_variables/datemodified_field.html">$datemodified_field</a>,
<a name="l287"><span class="linenum"> 287</span></a>                     <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../_variables/creator_field.html">$creator_field</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../_variables/lasteditor_field.html">$lasteditor_field</a> );
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>) )
<a name="l290"><span class="linenum"> 290</span></a>          { // <span class="keyword">New </span><a class="class" onClick="logClass('item')" href="../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a>:
<a name="l291"><span class="linenum"> 291</span></a>              global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>              if( isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>) )
<a name="l294"><span class="linenum"> 294</span></a>              { // use current user as default, if available (which won't be the case during install)
<a name="l295"><span class="linenum"> 295</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>;
<a name="l296"><span class="linenum"> 296</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_creator_User')" href="../../../_functions/set_creator_user.html" onMouseOver="funcPopup(event,'set_creator_user')">set_creator_User</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a> );
<a name="l297"><span class="linenum"> 297</span></a>              }
<a name="l298"><span class="linenum"> 298</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'dateset', 0 );    <span class="comment">// Date not explicitly set yet</span>
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notifications_status', 'noreq' );
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">            // Set the renderer list to 'default' will trigger all 'opt-out' renderers:</span>
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'renderers', array('default') );
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">            // we prolluy don't need this: $this-&gt;set( 'status', 'published' );</span>
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'locale', <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a> );
<a name="l304"><span class="linenum"> 304</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'priority', 3 );
<a name="l305"><span class="linenum"> 305</span></a>              if( ! empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l306"><span class="linenum"> 306</span></a>              { // Get default post type from blog setting
<a name="l307"><span class="linenum"> 307</span></a>                  <a class="var it1478" onMouseOver="hilite(1478)" onMouseOut="lolite()" onClick="logVariable('default_post_type')" href="../../../_variables/default_post_type.html">$default_post_type</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('default_post_type');
<a name="l308"><span class="linenum"> 308</span></a>              }
<a name="l309"><span class="linenum"> 309</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'ityp_ID', ( empty( <a class="var it1478" onMouseOver="hilite(1478)" onMouseOut="lolite()" onClick="logVariable('default_post_type')" href="../../../_variables/default_post_type.html">$default_post_type</a> ) ? 1 <span class="comment">/* Post */</span> : <a class="var it1478" onMouseOver="hilite(1478)" onMouseOut="lolite()" onClick="logVariable('default_post_type')" href="../../../_variables/default_post_type.html">$default_post_type</a> ) );
<a name="l310"><span class="linenum"> 310</span></a>          }
<a name="l311"><span class="linenum"> 311</span></a>          else
<a name="l312"><span class="linenum"> 312</span></a>          {
<a name="l313"><span class="linenum"> 313</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datecreated.html">datecreated</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_datecreated')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_datecreated.html">post_datecreated</a>;                     <span class="comment">// When Item was created in the system</span>
<a name="l314"><span class="linenum"> 314</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last_touched_ts')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/last_touched_ts.html">last_touched_ts</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;post_last_touched_ts;        <span class="comment">// When Item received last visible change (edit, comment, etc.)</span>
<a name="l315"><span class="linenum"> 315</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_ID.html">creator_user_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_creator_user_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_creator_user_ID.html">post_creator_user_ID</a>;     <span class="comment">// Needed for history display</span>
<a name="l316"><span class="linenum"> 316</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_user_ID.html">lastedit_user_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;post_lastedit_user_ID; <span class="comment">// Needed for history display</span>
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_assigned_user_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_assigned_user_ID.html">post_assigned_user_ID</a>;
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dateset')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dateset.html">dateset</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_dateset')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_dateset.html">post_dateset</a>;
<a name="l319"><span class="linenum"> 319</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_status')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_status.html">post_status</a>;
<a name="l320"><span class="linenum"> 320</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_content')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_content.html">post_content</a>;
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('titletag')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/titletag.html">titletag</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_titletag')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_titletag.html">post_titletag</a>;
<a name="l322"><span class="linenum"> 322</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pst_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pst_ID.html">pst_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_pst_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_pst_ID.html">post_pst_ID</a>;
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datedeadline')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datedeadline.html">datedeadline</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_datedeadline')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_datedeadline.html">post_datedeadline</a>;
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('priority')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/priority.html">priority</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_priority')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_priority.html">post_priority</a>;
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_locale')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_locale.html">post_locale</a>;
<a name="l326"><span class="linenum"> 326</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('wordcount')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/wordcount.html">wordcount</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_wordcount')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_wordcount.html">post_wordcount</a>;
<a name="l327"><span class="linenum"> 327</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notifications_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notifications_status.html">notifications_status</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_notifications_status')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_notifications_status.html">post_notifications_status</a>;
<a name="l328"><span class="linenum"> 328</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notifications_ctsk_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notifications_ctsk_ID.html">notifications_ctsk_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_notifications_ctsk_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_notifications_ctsk_ID.html">post_notifications_ctsk_ID</a>;
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_comment_status')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_comment_status.html">post_comment_status</a>;            <span class="comment">// Comments status</span>
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('order')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_order')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_order.html">post_order</a>;
<a name="l331"><span class="linenum"> 331</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_featured')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_featured.html">post_featured</a>;
<a name="l332"><span class="linenum"> 332</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_ID.html">parent_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_parent_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_parent_ID.html">post_parent_ID</a>;
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">            // echo 'renderers=', $db_row-&gt;post_renderers;</span>
<a name="l335"><span class="linenum"> 335</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers.html">renderers</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_renderers')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_renderers.html">post_renderers</a>;
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_excerpt')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_excerpt.html">post_excerpt</a>;
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt_autogenerated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt_autogenerated.html">excerpt_autogenerated</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_excerpt_autogenerated')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_excerpt_autogenerated.html">post_excerpt_autogenerated</a>;
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">            // Location</span>
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>              if ( ! empty ( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_ctry_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_ctry_ID.html">post_ctry_ID</a> ) )
<a name="l343"><span class="linenum"> 343</span></a>              {
<a name="l344"><span class="linenum"> 344</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ctry_ID.html">ctry_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_ctry_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_ctry_ID.html">post_ctry_ID</a>;
<a name="l345"><span class="linenum"> 345</span></a>              }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>              if ( ! empty ( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_rgn_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_rgn_ID.html">post_rgn_ID</a> ) )
<a name="l348"><span class="linenum"> 348</span></a>              {
<a name="l349"><span class="linenum"> 349</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rgn_ID.html">rgn_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_rgn_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_rgn_ID.html">post_rgn_ID</a>;
<a name="l350"><span class="linenum"> 350</span></a>              }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>              if ( ! empty ( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_subrg_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_subrg_ID.html">post_subrg_ID</a> ) )
<a name="l353"><span class="linenum"> 353</span></a>              {
<a name="l354"><span class="linenum"> 354</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/subrg_ID.html">subrg_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_subrg_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_subrg_ID.html">post_subrg_ID</a>;
<a name="l355"><span class="linenum"> 355</span></a>              }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>              if ( ! empty ( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_city_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_city_ID.html">post_city_ID</a> ) )
<a name="l358"><span class="linenum"> 358</span></a>              {
<a name="l359"><span class="linenum"> 359</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('city_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/city_ID.html">city_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_city_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_city_ID.html">post_city_ID</a>;
<a name="l360"><span class="linenum"> 360</span></a>              }
<a name="l361"><span class="linenum"> 361</span></a>  
<a name="l362"><span class="linenum"> 362</span></a>          }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>          <a class="function" onClick="logFunction('modules_call_method')" href="../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'constructor_item', array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l365"><span class="linenum"> 365</span></a>      }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>      <span class="comment">/**</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * Compare two Items based on the title</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     *</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * @param Item A</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     * @param Item B</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * @return number -1 if A-&gt;title &lt; B-&gt;title, 1 if A-&gt;title &gt; B-&gt;title, 0 if A-&gt;title == B-&gt;title</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     */</span>
<a name="l375"><span class="linenum"> 375</span></a>  	static function <a class="function" onClick="logFunction('compare_items_by_title')" href="../../../_functions/compare_items_by_title.html" onMouseOver="funcPopup(event,'compare_items_by_title')">compare_items_by_title</a>( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>, <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a> )
<a name="l376"><span class="linenum"> 376</span></a>      {
<a name="l377"><span class="linenum"> 377</span></a>          if( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a> == NULL || <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a> == NULL )
<a name="l378"><span class="linenum"> 378</span></a>          {
<a name="l379"><span class="linenum"> 379</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>('Invalid item objects received to compare.');
<a name="l380"><span class="linenum"> 380</span></a>          }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>          return <a class="phpfunction" onClick="logFunction('strcmp')" href="../../../_functions/strcmp.html" onMouseOver="phpfuncPopup(event,'strcmp')">strcmp</a>( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>-&gt;<a onClick="logVariable('title')" class="var it10951" onMouseOver="hilite(10951)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>, <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a>-&gt;<a onClick="logVariable('title')" class="var it10952" onMouseOver="hilite(10952)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> );
<a name="l383"><span class="linenum"> 383</span></a>      }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>      <span class="comment">/**</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     * Compare two Items based on the order field</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">     *</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">     * @param Item A</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * @param Item B</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     * @return number -1 if A-&gt;order &lt; B-&gt;order, 1 if A-&gt;order &gt; B-&gt;order, 0 if A-&gt;order == B-&gt;order</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     */</span>
<a name="l393"><span class="linenum"> 393</span></a>  	static function <a class="function" onClick="logFunction('compare_items_by_order')" href="../../../_functions/compare_items_by_order.html" onMouseOver="funcPopup(event,'compare_items_by_order')">compare_items_by_order</a>( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>, <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a> )
<a name="l394"><span class="linenum"> 394</span></a>      {
<a name="l395"><span class="linenum"> 395</span></a>          if( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a> == NULL || <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a> == NULL )
<a name="l396"><span class="linenum"> 396</span></a>          {
<a name="l397"><span class="linenum"> 397</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>('Invalid item objects received to compare.');
<a name="l398"><span class="linenum"> 398</span></a>          }
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>          if( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10951" onMouseOver="hilite(10951)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> == NULL )
<a name="l401"><span class="linenum"> 401</span></a>          {
<a name="l402"><span class="linenum"> 402</span></a>              return <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10952" onMouseOver="hilite(10952)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> == NULL ? 0 : 1;
<a name="l403"><span class="linenum"> 403</span></a>          }
<a name="l404"><span class="linenum"> 404</span></a>          elseif( <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10952" onMouseOver="hilite(10952)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> == NULL )
<a name="l405"><span class="linenum"> 405</span></a>          {
<a name="l406"><span class="linenum"> 406</span></a>              return -1;
<a name="l407"><span class="linenum"> 407</span></a>          }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          return ( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10951" onMouseOver="hilite(10951)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> &lt; <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10952" onMouseOver="hilite(10952)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> ) ? -1 : ( ( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('a_Item')" href="../../../_variables/a_Item.html">$a_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10951" onMouseOver="hilite(10951)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> &gt; <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('b_Item')" href="../../../_variables/b_Item.html">$b_Item</a>-&gt;<a onClick="logVariable('order')" class="var it10952" onMouseOver="hilite(10952)" onMouseOut="lolite()" href="../../../_variables/order.html">order</a> ) ? 1 : 0 );
<a name="l410"><span class="linenum"> 410</span></a>      }
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>      <span class="comment">/**</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * Set creator user</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     *</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @param string login</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     */</span>
<a name="l418"><span class="linenum"> 418</span></a>  	function <a class="function" onClick="logFunction('set_creator_by_login')" href="../../../_functions/set_creator_by_login.html" onMouseOver="funcPopup(event,'set_creator_by_login')">set_creator_by_login</a>( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> )
<a name="l419"><span class="linenum"> 419</span></a>      {
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l421"><span class="linenum"> 421</span></a>          if( ( <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a> = &amp;<a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ) ) !== false )
<a name="l422"><span class="linenum"> 422</span></a>          {
<a name="l423"><span class="linenum"> 423</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_field.html">creator_field</a>, <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l424"><span class="linenum"> 424</span></a>          }
<a name="l425"><span class="linenum"> 425</span></a>      }
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      <span class="comment">/**</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * Assign user to the item by user ID or by user login</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     *</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     * @todo use extended dbchange instead of set_param...</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * @todo Normalize to set_assigned_User!?</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     *</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     * @param integer User ID</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * @param string User login</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * @param boolean TRUE to update DB</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     * @return boolean TRUE on success, FALSE if user cannot be assigned on this item</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     */</span>
<a name="l439"><span class="linenum"> 439</span></a>  	function <a class="function" onClick="logFunction('assign_to')" href="../../../_functions/assign_to.html" onMouseOver="funcPopup(event,'assign_to')">assign_to</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> = '', <a class="var it1498" onMouseOver="hilite(1498)" onMouseOut="lolite()" onClick="logVariable('dbupdate')" href="../../../_variables/dbupdate.html">$dbupdate</a> = true <span class="comment">/* BLOAT!? */</span> )
<a name="l440"><span class="linenum"> 440</span></a>      {
<a name="l441"><span class="linenum"> 441</span></a>          global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>          if( ! empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l444"><span class="linenum"> 444</span></a>          { // Get an user by ID to check perms
<a name="l445"><span class="linenum"> 445</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l446"><span class="linenum"> 446</span></a>              <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, false, false );
<a name="l447"><span class="linenum"> 447</span></a>          }
<a name="l448"><span class="linenum"> 448</span></a>          else if( ! empty( <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> ) )
<a name="l449"><span class="linenum"> 449</span></a>          { // If an assigned user ID is empty find it by user login
<a name="l450"><span class="linenum"> 450</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l451"><span class="linenum"> 451</span></a>              <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> );
<a name="l452"><span class="linenum"> 452</span></a>              if( empty( <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a> ) )
<a name="l453"><span class="linenum"> 453</span></a>              { // Invalid user login was entered
<a name="l454"><span class="linenum"> 454</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User %s doesn\'t exist!'), '&lt;b&gt;'.<a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a>.'&lt;/b&gt;' ), 'error' );
<a name="l455"><span class="linenum"> 455</span></a>                  return false;
<a name="l456"><span class="linenum"> 456</span></a>              }
<a name="l457"><span class="linenum"> 457</span></a>          }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>          if( ! empty( <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a> ) )
<a name="l460"><span class="linenum"> 460</span></a>          { // Check if the selected user can be assigned to this item
<a name="l461"><span class="linenum"> 461</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l462"><span class="linenum"> 462</span></a>              if( <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_can_be_assignee', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID ) )
<a name="l463"><span class="linenum"> 463</span></a>              { // User exists and has permission to be assigned user to items of the blog
<a name="l464"><span class="linenum"> 464</span></a>                  <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> = <a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10953" onMouseOver="hilite(10953)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l465"><span class="linenum"> 465</span></a>              }
<a name="l466"><span class="linenum"> 466</span></a>              else
<a name="l467"><span class="linenum"> 467</span></a>              { // No permission to be assigned
<a name="l468"><span class="linenum"> 468</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User %s cannot be assigned to the items of this blog!'), '&lt;b&gt;'.<a class="var it1450" onMouseOver="hilite(1450)" onMouseOut="lolite()" onClick="logVariable('assigned_User')" href="../../../_variables/assigned_User.html">$assigned_User</a>-&gt;<a onClick="logVariable('login')" class="var it10953" onMouseOver="hilite(10953)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>.'&lt;/b&gt;' ), 'error' );
<a name="l469"><span class="linenum"> 469</span></a>                  return false;
<a name="l470"><span class="linenum"> 470</span></a>              }
<a name="l471"><span class="linenum"> 471</span></a>          }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>          if( ! empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l474"><span class="linenum"> 474</span></a>          {
<a name="l475"><span class="linenum"> 475</span></a>              if( <a class="var it1498" onMouseOver="hilite(1498)" onMouseOut="lolite()" onClick="logVariable('dbupdate')" href="../../../_variables/dbupdate.html">$dbupdate</a> )
<a name="l476"><span class="linenum"> 476</span></a>              { // Record ID for DB:
<a name="l477"><span class="linenum"> 477</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'assigned_user_ID', 'number', <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, true );
<a name="l478"><span class="linenum"> 478</span></a>              }
<a name="l479"><span class="linenum"> 479</span></a>              else
<a name="l480"><span class="linenum"> 480</span></a>              {
<a name="l481"><span class="linenum"> 481</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a> = <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>;
<a name="l482"><span class="linenum"> 482</span></a>              }
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l484"><span class="linenum"> 484</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> );
<a name="l485"><span class="linenum"> 485</span></a>          }
<a name="l486"><span class="linenum"> 486</span></a>          else
<a name="l487"><span class="linenum"> 487</span></a>          {
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">            // fp&gt;&gt; DO NOT set (to null) immediately OR it may KILL the current User object (big problem if it's the Current User)</span>
<a name="l489"><span class="linenum"> 489</span></a>              unset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a> );
<a name="l490"><span class="linenum"> 490</span></a>              if( <a class="var it1498" onMouseOver="hilite(1498)" onMouseOut="lolite()" onClick="logVariable('dbupdate')" href="../../../_variables/dbupdate.html">$dbupdate</a> )
<a name="l491"><span class="linenum"> 491</span></a>              { // Record ID for DB:
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'assigned_user_ID', 'number', NULL, true );
<a name="l493"><span class="linenum"> 493</span></a>              }
<a name="l494"><span class="linenum"> 494</span></a>              else
<a name="l495"><span class="linenum"> 495</span></a>              {
<a name="l496"><span class="linenum"> 496</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a> = NULL;
<a name="l497"><span class="linenum"> 497</span></a>              }
<a name="l498"><span class="linenum"> 498</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a> = NULL;
<a name="l499"><span class="linenum"> 499</span></a>          }
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>          return true;
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>      <span class="comment">/**</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     * Template function: display author/creator of item</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     *</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     */</span>
<a name="l509"><span class="linenum"> 509</span></a>  	function <a class="function" onClick="logFunction('author')" href="../../../_functions/author.html" onMouseOver="funcPopup(event,'author')">author</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l510"><span class="linenum"> 510</span></a>      {
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l512"><span class="linenum"> 512</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l513"><span class="linenum"> 513</span></a>                  'before'         =&gt; ' ',
<a name="l514"><span class="linenum"> 514</span></a>                  'after'          =&gt; ' ',
<a name="l515"><span class="linenum"> 515</span></a>                  'link_text'      =&gt; 'preferredname', // avatar_name | avatar_login | only_avatar | name | login | nickname | firstname | lastname | fullname | preferredname
<a name="l516"><span class="linenum"> 516</span></a>                  'thumb_size'     =&gt; 'crop-top-32x32',
<a name="l517"><span class="linenum"> 517</span></a>                  'thumb_class'    =&gt; '',
<a name="l518"><span class="linenum"> 518</span></a>                  'thumb_zoomable' =&gt; false,
<a name="l519"><span class="linenum"> 519</span></a>                  'login_mask'     =&gt; '', // example: 'text <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>$ text'
<a name="l520"><span class="linenum"> 520</span></a>                  'display_bubbletip' =&gt; true,
<a name="l521"><span class="linenum"> 521</span></a>                  'nowrap'         =&gt; true,
<a name="l522"><span class="linenum"> 522</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">        // Load User</span>
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l526"><span class="linenum"> 526</span></a>  
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;<a class="function" onClick="logFunction('get_identity_link')" href="../../../_functions/get_identity_link.html" onMouseOver="funcPopup(event,'get_identity_link')">get_identity_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l530"><span class="linenum"> 530</span></a>      }
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>      <span class="comment">/**</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * Template function: display user who edited the item last time</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     *</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     */</span>
<a name="l537"><span class="linenum"> 537</span></a>  	function <a class="function" onClick="logFunction('lastedit_user')" href="../../../_functions/lastedit_user.html" onMouseOver="funcPopup(event,'lastedit_user')">lastedit_user</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l538"><span class="linenum"> 538</span></a>      {
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l541"><span class="linenum"> 541</span></a>                  'profile_tab'    =&gt; 'user',
<a name="l542"><span class="linenum"> 542</span></a>                  'before'         =&gt; ' ',
<a name="l543"><span class="linenum"> 543</span></a>                  'after'          =&gt; ' ',
<a name="l544"><span class="linenum"> 544</span></a>                  'format'         =&gt; 'htmlbody',
<a name="l545"><span class="linenum"> 545</span></a>                  'link_to'        =&gt; 'userpage',
<a name="l546"><span class="linenum"> 546</span></a>                  'link_text'      =&gt; 'preferredname', // avatar_name | avatar_login | only_avatar | name | login | nickname | firstname | lastname | fullname | preferredname
<a name="l547"><span class="linenum"> 547</span></a>                  'link_rel'       =&gt; '',
<a name="l548"><span class="linenum"> 548</span></a>                  'link_class'     =&gt; '',
<a name="l549"><span class="linenum"> 549</span></a>                  'thumb_size'     =&gt; 'crop-top-32x32',
<a name="l550"><span class="linenum"> 550</span></a>                  'thumb_class'    =&gt; '',
<a name="l551"><span class="linenum"> 551</span></a>                  'thumb_zoomable' =&gt; false,
<a name="l552"><span class="linenum"> 552</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">        // Load User</span>
<a name="l555"><span class="linenum"> 555</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_lastedit_User();
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_User.html">lastedit_User</a> )
<a name="l558"><span class="linenum"> 558</span></a>          {    // Get a link to user profile page
<a name="l559"><span class="linenum"> 559</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_User.html">lastedit_User</a>-&gt;<a class="function" onClick="logFunction('get_identity_link')" href="../../../_functions/get_identity_link.html" onMouseOver="funcPopup(event,'get_identity_link')">get_identity_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l560"><span class="linenum"> 560</span></a>          }
<a name="l561"><span class="linenum"> 561</span></a>          else
<a name="l562"><span class="linenum"> 562</span></a>          {    // User was deleted
<a name="l563"><span class="linenum"> 563</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('(deleted user)');
<a name="l564"><span class="linenum"> 564</span></a>          }
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l567"><span class="linenum"> 567</span></a>      }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>  
<a name="l570"><span class="linenum"> 570</span></a>      <span class="comment">/**</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">     * Load data from Request form fields.</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">     *</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * This requires the blog (e.g. {@link $blog_ID} or {@link $main_cat_ID} to be set).</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     *</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * @param boolean true if we are returning to edit mode (new, switchtab...)</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * @return boolean true if loaded data seems valid.</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     */</span>
<a name="l578"><span class="linenum"> 578</span></a>  	function <a class="function" onClick="logFunction('load_from_Request')" href="../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>( <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../../_variables/editing.html">$editing</a> = false, <a class="var it1500" onMouseOver="hilite(1500)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../_variables/creating.html">$creating</a> = false )
<a name="l579"><span class="linenum"> 579</span></a>      {
<a name="l580"><span class="linenum"> 580</span></a>          global <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l581"><span class="linenum"> 581</span></a>          global <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('posttypes_reserved_IDs')" href="../../../_variables/posttypes_reserved_IDs.html">$posttypes_reserved_IDs</a>, <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a>;
<a name="l582"><span class="linenum"> 582</span></a>  
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">        // LOCALE:</span>
<a name="l584"><span class="linenum"> 584</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_locale', 'string', NULL ) !== NULL )
<a name="l585"><span class="linenum"> 585</span></a>          {
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'locale' );
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">        // POST TYPE:</span>
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> = <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'item_typ_ID' );
<a name="l591"><span class="linenum"> 591</span></a>          if( empty( <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> ) )
<a name="l592"><span class="linenum"> 592</span></a>          { // Try to get this from request if it has been not initialized by controller:
<a name="l593"><span class="linenum"> 593</span></a>              <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_typ_ID', 'integer', NULL );
<a name="l594"><span class="linenum"> 594</span></a>          }
<a name="l595"><span class="linenum"> 595</span></a>          if( ! empty( <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> ) )
<a name="l596"><span class="linenum"> 596</span></a>          { // Set new post type ID only if it is defined on request:
<a name="l597"><span class="linenum"> 597</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'ityp_ID', <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> );
<a name="l598"><span class="linenum"> 598</span></a>          }
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">        // URL associated with Item:</span>
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it330" onMouseOver="hilite(330)" onMouseOut="lolite()" onClick="logVariable('post_url')" href="../../../_variables/post_url.html">$post_url</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_url', 'string', NULL );
<a name="l602"><span class="linenum"> 602</span></a>          if( <a class="var it330" onMouseOver="hilite(330)" onMouseOut="lolite()" onClick="logVariable('post_url')" href="../../../_variables/post_url.html">$post_url</a> !== NULL )
<a name="l603"><span class="linenum"> 603</span></a>          {
<a name="l604"><span class="linenum"> 604</span></a>              <a class="function" onClick="logFunction('param_check_url')" href="../../../_functions/param_check_url.html" onMouseOver="funcPopup(event,'param_check_url')">param_check_url</a>( 'post_url', 'posting', '' );
<a name="l605"><span class="linenum"> 605</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'url' );
<a name="l606"><span class="linenum"> 606</span></a>          }
<a name="l607"><span class="linenum"> 607</span></a>          if( empty( <a class="var it330" onMouseOver="hilite(330)" onMouseOut="lolite()" onClick="logVariable('post_url')" href="../../../_variables/post_url.html">$post_url</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_url' ) == 'required' )
<a name="l608"><span class="linenum"> 608</span></a>          { // URL must be entered
<a name="l609"><span class="linenum"> 609</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'post_url', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a &quot;Link To&quot; URL.'), '' );
<a name="l610"><span class="linenum"> 610</span></a>          }
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">        // Item parent ID:</span>
<a name="l613"><span class="linenum"> 613</span></a>          <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('post_parent_ID')" href="../../../_variables/post_parent_ID.html">$post_parent_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_parent_ID', 'integer', NULL );
<a name="l614"><span class="linenum"> 614</span></a>          if( <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('post_parent_ID')" href="../../../_variables/post_parent_ID.html">$post_parent_ID</a> !== NULL )
<a name="l615"><span class="linenum"> 615</span></a>          {    // If item parent ID is entered:
<a name="l616"><span class="linenum"> 616</span></a>              <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l617"><span class="linenum"> 617</span></a>              if( <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('post_parent_ID')" href="../../../_variables/post_parent_ID.html">$post_parent_ID</a>, false, false ) )
<a name="l618"><span class="linenum"> 618</span></a>              {    // Save only ID of existing item:
<a name="l619"><span class="linenum"> 619</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'parent_ID' );
<a name="l620"><span class="linenum"> 620</span></a>              }
<a name="l621"><span class="linenum"> 621</span></a>              else
<a name="l622"><span class="linenum"> 622</span></a>              {    // Display an error of the entered item parent ID is incorrect:
<a name="l623"><span class="linenum"> 623</span></a>                  <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( 'post_parent_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The parent ID is not a correct Item ID.') );
<a name="l624"><span class="linenum"> 624</span></a>              }
<a name="l625"><span class="linenum"> 625</span></a>          }
<a name="l626"><span class="linenum"> 626</span></a>          if( empty( <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('post_parent_ID')" href="../../../_variables/post_parent_ID.html">$post_parent_ID</a> ) )
<a name="l627"><span class="linenum"> 627</span></a>          {    // If empty parent ID is entered:
<a name="l628"><span class="linenum"> 628</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_parent' ) == 'required' )
<a name="l629"><span class="linenum"> 629</span></a>              {    // Item parent ID must be entered:
<a name="l630"><span class="linenum"> 630</span></a>                  <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'post_parent_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a parent ID.'), '' );
<a name="l631"><span class="linenum"> 631</span></a>              }
<a name="l632"><span class="linenum"> 632</span></a>              else
<a name="l633"><span class="linenum"> 633</span></a>              {    // Remove parent ID:
<a name="l634"><span class="linenum"> 634</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'parent_ID' );
<a name="l635"><span class="linenum"> 635</span></a>              }
<a name="l636"><span class="linenum"> 636</span></a>          }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'redirected' &amp;&amp; empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a> ) )
<a name="l639"><span class="linenum"> 639</span></a>          { // Note: post_url is not part of the simple form, so this message can be a little bit awkward there
<a name="l640"><span class="linenum"> 640</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( 'post_url',
<a name="l641"><span class="linenum"> 641</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If you want to redirect this post, you must specify an URL!').' ('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Advanced properties panel').')',
<a name="l642"><span class="linenum"> 642</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If you want to redirect this post, you must specify an URL!') );
<a name="l643"><span class="linenum"> 643</span></a>          }
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">        // ISSUE DATE / TIMESTAMP:</span>
<a name="l646"><span class="linenum"> 646</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l647"><span class="linenum"> 647</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) &amp;&amp;
<a name="l648"><span class="linenum"> 648</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_edit_ts', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID ) )
<a name="l649"><span class="linenum"> 649</span></a>          { // Allow to update timestamp fields only if user has a permission to edit such fields
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">          //    and also if user has an access to back-office</span>
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it1501" onMouseOver="hilite(1501)" onMouseOut="lolite()" onClick="logVariable('item_dateset')" href="../../../_variables/item_dateset.html">$item_dateset</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_dateset', 'integer', NULL );
<a name="l652"><span class="linenum"> 652</span></a>              if( <a class="var it1501" onMouseOver="hilite(1501)" onMouseOut="lolite()" onClick="logVariable('item_dateset')" href="../../../_variables/item_dateset.html">$item_dateset</a> !== NULL )
<a name="l653"><span class="linenum"> 653</span></a>              {
<a name="l654"><span class="linenum"> 654</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'dateset', <a class="var it1501" onMouseOver="hilite(1501)" onMouseOut="lolite()" onClick="logVariable('item_dateset')" href="../../../_variables/item_dateset.html">$item_dateset</a> );
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>                  if( <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../../_variables/editing.html">$editing</a> || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dateset')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dateset.html">dateset</a> == 1 )
<a name="l657"><span class="linenum"> 657</span></a>                  { // We can use user date:
<a name="l658"><span class="linenum"> 658</span></a>                      if( <a class="function" onClick="logFunction('param_date')" href="../../../_functions/param_date.html" onMouseOver="funcPopup(event,'param_date')">param_date</a>( 'item_issue_date', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a valid issue date.'), true )
<a name="l659"><span class="linenum"> 659</span></a>                          &amp;&amp; <a class="function" onClick="logFunction('param_time')" href="../../../_functions/param_time.html" onMouseOver="funcPopup(event,'param_time')">param_time</a>( 'item_issue_time' ) )
<a name="l660"><span class="linenum"> 660</span></a>                      { // only set it, if a (valid) date and time was given:
<a name="l661"><span class="linenum"> 661</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'issue_date', <a class="function" onClick="logFunction('form_date')" href="../../../_functions/form_date.html" onMouseOver="funcPopup(event,'form_date')">form_date</a>( <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'item_issue_date' ), <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'item_issue_time' ) ) ); <span class="comment">// TODO: cleanup...</span>
<a name="l662"><span class="linenum"> 662</span></a>                      }
<a name="l663"><span class="linenum"> 663</span></a>                  }
<a name="l664"><span class="linenum"> 664</span></a>                  elseif( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dateset')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dateset.html">dateset</a> == 0 )
<a name="l665"><span class="linenum"> 665</span></a>                  { // Set date to NOW:
<a name="l666"><span class="linenum"> 666</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'issue_date', <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( 'Y-m-d H:i:s', <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) );
<a name="l667"><span class="linenum"> 667</span></a>                  }
<a name="l668"><span class="linenum"> 668</span></a>              }
<a name="l669"><span class="linenum"> 669</span></a>          }
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">        // DEADLINE:</span>
<a name="l672"><span class="linenum"> 672</span></a>          if( <a class="function" onClick="logFunction('param_date')" href="../../../_functions/param_date.html" onMouseOver="funcPopup(event,'param_date')">param_date</a>( 'item_deadline', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a valid deadline.'), false, NULL ) !== NULL ) {
<a name="l673"><span class="linenum"> 673</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'datedeadline', 'item_deadline', true );
<a name="l674"><span class="linenum"> 674</span></a>          }
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">        // SLUG:</span>
<a name="l677"><span class="linenum"> 677</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_urltitle', 'string', NULL ) !== NULL ) {
<a name="l678"><span class="linenum"> 678</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'urltitle' );
<a name="l679"><span class="linenum"> 679</span></a>          }
<a name="l680"><span class="linenum"> 680</span></a>  
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">        // &lt;title&gt; TAG:</span>
<a name="l682"><span class="linenum"> 682</span></a>          <a class="var it1452" onMouseOver="hilite(1452)" onMouseOut="lolite()" onClick="logVariable('titletag')" href="../../../_variables/titletag.html">$titletag</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'titletag', 'string', NULL );
<a name="l683"><span class="linenum"> 683</span></a>          if( <a class="var it1452" onMouseOver="hilite(1452)" onMouseOut="lolite()" onClick="logVariable('titletag')" href="../../../_variables/titletag.html">$titletag</a> !== NULL )
<a name="l684"><span class="linenum"> 684</span></a>          {
<a name="l685"><span class="linenum"> 685</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'titletag', 'titletag' );
<a name="l686"><span class="linenum"> 686</span></a>          }
<a name="l687"><span class="linenum"> 687</span></a>          if( empty( <a class="var it1452" onMouseOver="hilite(1452)" onMouseOut="lolite()" onClick="logVariable('titletag')" href="../../../_variables/titletag.html">$titletag</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_title_tag' ) == 'required' )
<a name="l688"><span class="linenum"> 688</span></a>          { // Title tag must be entered
<a name="l689"><span class="linenum"> 689</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'titletag', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a title tag.'), '' );
<a name="l690"><span class="linenum"> 690</span></a>          }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">        // &lt;meta&gt; DESC:</span>
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('metadesc')" href="../../../_variables/metadesc.html">$metadesc</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'metadesc', 'string', NULL );
<a name="l694"><span class="linenum"> 694</span></a>          if( <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('metadesc')" href="../../../_variables/metadesc.html">$metadesc</a> !== NULL ) {
<a name="l695"><span class="linenum"> 695</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'metadesc', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'metadesc' ) );
<a name="l696"><span class="linenum"> 696</span></a>          }
<a name="l697"><span class="linenum"> 697</span></a>          if( empty( <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('metadesc')" href="../../../_variables/metadesc.html">$metadesc</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_meta_desc' ) == 'required' )
<a name="l698"><span class="linenum"> 698</span></a>          { // Meta description must be entered
<a name="l699"><span class="linenum"> 699</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'metadesc', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a meta description.'), '' );
<a name="l700"><span class="linenum"> 700</span></a>          }
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        // &lt;meta&gt; KEYWORDS:</span>
<a name="l703"><span class="linenum"> 703</span></a>          <a class="var it1503" onMouseOver="hilite(1503)" onMouseOut="lolite()" onClick="logVariable('metakeywords')" href="../../../_variables/metakeywords.html">$metakeywords</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'metakeywords', 'string', NULL );
<a name="l704"><span class="linenum"> 704</span></a>          if( <a class="var it1503" onMouseOver="hilite(1503)" onMouseOut="lolite()" onClick="logVariable('metakeywords')" href="../../../_variables/metakeywords.html">$metakeywords</a> !== NULL ) {
<a name="l705"><span class="linenum"> 705</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'metakeywords', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'metakeywords' ) );
<a name="l706"><span class="linenum"> 706</span></a>          }
<a name="l707"><span class="linenum"> 707</span></a>          if( empty( <a class="var it1503" onMouseOver="hilite(1503)" onMouseOut="lolite()" onClick="logVariable('metakeywords')" href="../../../_variables/metakeywords.html">$metakeywords</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_meta_keywds' ) == 'required' )
<a name="l708"><span class="linenum"> 708</span></a>          { // Meta keywords must be entered
<a name="l709"><span class="linenum"> 709</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'metakeywords', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide the meta keywords.'), '' );
<a name="l710"><span class="linenum"> 710</span></a>          }
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">        // TAGS:</span>
<a name="l713"><span class="linenum"> 713</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l714"><span class="linenum"> 714</span></a>          { // User should has an access to back-office to edit tags
<a name="l715"><span class="linenum"> 715</span></a>              <a class="var it1504" onMouseOver="hilite(1504)" onMouseOut="lolite()" onClick="logVariable('item_tags')" href="../../../_variables/item_tags.html">$item_tags</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_tags', 'string', NULL );
<a name="l716"><span class="linenum"> 716</span></a>              if( <a class="var it1504" onMouseOver="hilite(1504)" onMouseOut="lolite()" onClick="logVariable('item_tags')" href="../../../_variables/item_tags.html">$item_tags</a> !== NULL )
<a name="l717"><span class="linenum"> 717</span></a>              {
<a name="l718"><span class="linenum"> 718</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_tags_from_string')" href="../../../_functions/set_tags_from_string.html" onMouseOver="funcPopup(event,'set_tags_from_string')">set_tags_from_string</a>( <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>('item_tags') );
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">                // Update setting 'suggest_item_tags' of the current User</span>
<a name="l720"><span class="linenum"> 720</span></a>                  global <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l721"><span class="linenum"> 721</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'suggest_item_tags', <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'suggest_item_tags', 'integer', 0 ) );
<a name="l722"><span class="linenum"> 722</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l723"><span class="linenum"> 723</span></a>              }
<a name="l724"><span class="linenum"> 724</span></a>              if( empty( <a class="var it1504" onMouseOver="hilite(1504)" onMouseOut="lolite()" onClick="logVariable('item_tags')" href="../../../_variables/item_tags.html">$item_tags</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_tags' ) == 'required' )
<a name="l725"><span class="linenum"> 725</span></a>              { // Tags must be entered
<a name="l726"><span class="linenum"> 726</span></a>                  <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'item_tags', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide at least one tag.'), '' );
<a name="l727"><span class="linenum"> 727</span></a>              }
<a name="l728"><span class="linenum"> 728</span></a>          }
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">        // WORKFLOW stuff:</span>
<a name="l731"><span class="linenum"> 731</span></a>          <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_st_ID', 'integer', NULL );
<a name="l732"><span class="linenum"> 732</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'pst_ID', 'item_st_ID', true );
<a name="l733"><span class="linenum"> 733</span></a>  
<a name="l734"><span class="linenum"> 734</span></a>          <a class="var it338" onMouseOver="hilite(338)" onMouseOut="lolite()" onClick="logVariable('item_assigned_user_ID')" href="../../../_variables/item_assigned_user_ID.html">$item_assigned_user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_assigned_user_ID', 'integer', NULL );
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it1505" onMouseOver="hilite(1505)" onMouseOut="lolite()" onClick="logVariable('item_assigned_user_login')" href="../../../_variables/item_assigned_user_login.html">$item_assigned_user_login</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_assigned_user_login', 'string', NULL );
<a name="l736"><span class="linenum"> 736</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_to')" href="../../../_functions/assign_to.html" onMouseOver="funcPopup(event,'assign_to')">assign_to</a>( <a class="var it338" onMouseOver="hilite(338)" onMouseOut="lolite()" onClick="logVariable('item_assigned_user_ID')" href="../../../_variables/item_assigned_user_ID.html">$item_assigned_user_ID</a>, <a class="var it1505" onMouseOver="hilite(1505)" onMouseOut="lolite()" onClick="logVariable('item_assigned_user_login')" href="../../../_variables/item_assigned_user_login.html">$item_assigned_user_login</a> );
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>          <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('item_priority')" href="../../../_variables/item_priority.html">$item_priority</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_priority', 'integer', NULL );
<a name="l739"><span class="linenum"> 739</span></a>          if( <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('item_priority')" href="../../../_variables/item_priority.html">$item_priority</a> !== NULL )
<a name="l740"><span class="linenum"> 740</span></a>          { // Set task priority only if it is gone from form
<a name="l741"><span class="linenum"> 741</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'priority', 'item_priority', true );
<a name="l742"><span class="linenum"> 742</span></a>          }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">        // FEATURED checkbox:</span>
<a name="l745"><span class="linenum"> 745</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'featured', <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_featured', 'integer', 0 ), false );
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // HIDE TEASER checkbox:</span>
<a name="l748"><span class="linenum"> 748</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'hide_teaser', <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_hideteaser', 'integer', 0 ) );
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'goal_ID', 'integer', NULL );
<a name="l750"><span class="linenum"> 750</span></a>          if( <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a> !== NULL )
<a name="l751"><span class="linenum"> 751</span></a>          { // Goal ID
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'goal_ID', <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a>, true );
<a name="l753"><span class="linenum"> 753</span></a>          }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">        // ORDER:</span>
<a name="l756"><span class="linenum"> 756</span></a>          <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_order', 'double', NULL );
<a name="l757"><span class="linenum"> 757</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'order', 'item_order', true );
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">        // OWNER:</span>
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_owner_login', 'string', NULL );
<a name="l761"><span class="linenum"> 761</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'edit' ) &amp;&amp; <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_owner_login_displayed', 'string', NULL ) !== NULL )
<a name="l762"><span class="linenum"> 762</span></a>          {    // only admins can change the owner..
<a name="l763"><span class="linenum"> 763</span></a>              if( <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'item_owner_login', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter valid owner login.') ) &amp;&amp; <a class="function" onClick="logFunction('param_check_login')" href="../../../_functions/param_check_login.html" onMouseOver="funcPopup(event,'param_check_login')">param_check_login</a>( 'item_owner_login', true ) )
<a name="l764"><span class="linenum"> 764</span></a>              {
<a name="l765"><span class="linenum"> 765</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_creator_by_login')" href="../../../_functions/set_creator_by_login.html" onMouseOver="funcPopup(event,'set_creator_by_login')">set_creator_by_login</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a> );
<a name="l766"><span class="linenum"> 766</span></a>              }
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">        // LOCATION COORDINATES:</span>
<a name="l770"><span class="linenum"> 770</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_coordinates' ) != 'never' )
<a name="l771"><span class="linenum"> 771</span></a>          { // location coordinates are enabled, save map settings
<a name="l772"><span class="linenum"> 772</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_latitude', 'double', NULL ); <span class="comment">// get par value</span>
<a name="l773"><span class="linenum"> 773</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'latitude', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'item_latitude' ), true );
<a name="l774"><span class="linenum"> 774</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_longitude', 'double', NULL ); <span class="comment">// get par value</span>
<a name="l775"><span class="linenum"> 775</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'longitude', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'item_longitude' ), true );
<a name="l776"><span class="linenum"> 776</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'google_map_zoom', 'integer', NULL ); <span class="comment">// get par value</span>
<a name="l777"><span class="linenum"> 777</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'map_zoom', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'google_map_zoom' ), true );
<a name="l778"><span class="linenum"> 778</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'google_map_type', 'string', NULL ); <span class="comment">// get par value</span>
<a name="l779"><span class="linenum"> 779</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'map_type', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'google_map_type' ), true );
<a name="l780"><span class="linenum"> 780</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_coordinates' ) == 'required' )
<a name="l781"><span class="linenum"> 781</span></a>              { // The location coordinates are required
<a name="l782"><span class="linenum"> 782</span></a>                  <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'item_latitude', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a latitude.'), '' );
<a name="l783"><span class="linenum"> 783</span></a>                  <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'item_longitude', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a longitude.'), '' );
<a name="l784"><span class="linenum"> 784</span></a>              }
<a name="l785"><span class="linenum"> 785</span></a>          }
<a name="l786"><span class="linenum"> 786</span></a>  
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">        // CUSTOM FIELDS:</span>
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it348" onMouseOver="hilite(348)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../_variables/custom_fields.html">$custom_fields</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_custom_fields')" href="../../../_functions/get_type_custom_fields.html" onMouseOver="funcPopup(event,'get_type_custom_fields')">get_type_custom_fields</a>();
<a name="l789"><span class="linenum"> 789</span></a>          foreach( <a class="var it348" onMouseOver="hilite(348)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../_variables/custom_fields.html">$custom_fields</a> as <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a> )
<a name="l790"><span class="linenum"> 790</span></a>          { // update each custom field
<a name="l791"><span class="linenum"> 791</span></a>              <a class="var it939" onMouseOver="hilite(939)" onMouseOut="lolite()" onClick="logVariable('param_name')" href="../../../_variables/param_name.html">$param_name</a> = 'item_'.<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['type'].'_'.<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['ID'];
<a name="l792"><span class="linenum"> 792</span></a>              if( <a class="function" onClick="logFunction('isset_param')" href="../../../_functions/isset_param.html" onMouseOver="funcPopup(event,'isset_param')">isset_param</a>( <a class="var it939" onMouseOver="hilite(939)" onMouseOut="lolite()" onClick="logVariable('param_name')" href="../../../_variables/param_name.html">$param_name</a> ) )
<a name="l793"><span class="linenum"> 793</span></a>              { // param is set
<a name="l794"><span class="linenum"> 794</span></a>                  <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('param_type')" href="../../../_variables/param_type.html">$param_type</a> = ( <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['type'] == 'varchar' ) ? 'string' : <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['type'];
<a name="l795"><span class="linenum"> 795</span></a>                  <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( <a class="var it939" onMouseOver="hilite(939)" onMouseOut="lolite()" onClick="logVariable('param_name')" href="../../../_variables/param_name.html">$param_name</a>, <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('param_type')" href="../../../_variables/param_type.html">$param_type</a>, NULL ); <span class="comment">// get par value</span>
<a name="l796"><span class="linenum"> 796</span></a>                  <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('custom_field_make_null')" href="../../../_variables/custom_field_make_null.html">$custom_field_make_null</a> = <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['type'] != 'double'; <span class="comment">// store '0' values in DB for numeric fields</span>
<a name="l797"><span class="linenum"> 797</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'custom_'.<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['type'].'_'.<a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('custom_field')" href="../../../_variables/custom_field.html">$custom_field</a>['ID'], <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( <a class="var it939" onMouseOver="hilite(939)" onMouseOut="lolite()" onClick="logVariable('param_name')" href="../../../_variables/param_name.html">$param_name</a> ), <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('custom_field_make_null')" href="../../../_variables/custom_field_make_null.html">$custom_field_make_null</a> );
<a name="l798"><span class="linenum"> 798</span></a>              }
<a name="l799"><span class="linenum"> 799</span></a>          }
<a name="l800"><span class="linenum"> 800</span></a>  
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">        // COMMENTS:</span>
<a name="l802"><span class="linenum"> 802</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('allow_comment_statuses')" href="../../../_functions/allow_comment_statuses.html" onMouseOver="funcPopup(event,'allow_comment_statuses')">allow_comment_statuses</a>() )
<a name="l803"><span class="linenum"> 803</span></a>          { // Save status of &quot;Allow comments for this item&quot; (only if comments are allowed in this blog, and by current post type
<a name="l804"><span class="linenum"> 804</span></a>              <a class="var it335" onMouseOver="hilite(335)" onMouseOut="lolite()" onClick="logVariable('post_comment_status')" href="../../../_variables/post_comment_status.html">$post_comment_status</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_comment_status', 'string', 'open' );
<a name="l805"><span class="linenum"> 805</span></a>              if( !empty( <a class="var it335" onMouseOver="hilite(335)" onMouseOut="lolite()" onClick="logVariable('post_comment_status')" href="../../../_variables/post_comment_status.html">$post_comment_status</a> ) )
<a name="l806"><span class="linenum"> 806</span></a>              { // 'open' or 'closed' or ...
<a name="l807"><span class="linenum"> 807</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'comment_status' );
<a name="l808"><span class="linenum"> 808</span></a>              }
<a name="l809"><span class="linenum"> 809</span></a>          }
<a name="l810"><span class="linenum"> 810</span></a>  
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">        // EXPIRY DELAY:</span>
<a name="l812"><span class="linenum"> 812</span></a>          <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> = <a class="function" onClick="logFunction('param_duration')" href="../../../_functions/param_duration.html" onMouseOver="funcPopup(event,'param_duration')">param_duration</a>( 'expiry_delay' );
<a name="l813"><span class="linenum"> 813</span></a>          if( empty( <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> ) )
<a name="l814"><span class="linenum"> 814</span></a>          { // Check if we have 'expiry_delay' param set as string from simple or mass form
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'expiry_delay', 'string', NULL );
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          if( empty( <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_comment_expiration' ) == 'required' )
<a name="l818"><span class="linenum"> 818</span></a>          { // Comment expiration must be entered
<a name="l819"><span class="linenum"> 819</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'expiry_delay', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a comment expiration delay.'), '' );
<a name="l820"><span class="linenum"> 820</span></a>          }
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'comment_expiry_delay', <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a>, true );
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">        // EXTRA PARAMS FROM MODULES:</span>
<a name="l824"><span class="linenum"> 824</span></a>          <a class="function" onClick="logFunction('modules_call_method')" href="../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'update_item_settings', array( 'edited_Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">        // RENDERERS:</span>
<a name="l827"><span class="linenum"> 827</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'renderers_displayed', 'integer', 0 ) )
<a name="l828"><span class="linenum"> 828</span></a>          { // use &quot;renderers&quot; value only if it has been displayed (may be empty)
<a name="l829"><span class="linenum"> 829</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l830"><span class="linenum"> 830</span></a>              <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('validate_renderer_list')" href="../../../_functions/validate_renderer_list.html" onMouseOver="funcPopup(event,'validate_renderer_list')">validate_renderer_list</a>( <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'renderers', 'array:string', array() ), array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l831"><span class="linenum"> 831</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'renderers', <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> );
<a name="l832"><span class="linenum"> 832</span></a>          }
<a name="l833"><span class="linenum"> 833</span></a>          else
<a name="l834"><span class="linenum"> 834</span></a>          {
<a name="l835"><span class="linenum"> 835</span></a>              <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>();
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">        // CONTENT + TITLE:</span>
<a name="l839"><span class="linenum"> 839</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_html' ) )
<a name="l840"><span class="linenum"> 840</span></a>          {    // HTML is allowed for this post, we'll accept HTML tags:
<a name="l841"><span class="linenum"> 841</span></a>              <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../../_variables/text_format.html">$text_format</a> = 'html';
<a name="l842"><span class="linenum"> 842</span></a>          }
<a name="l843"><span class="linenum"> 843</span></a>          else
<a name="l844"><span class="linenum"> 844</span></a>          {    // HTML is disallowed for this post, we'll encode all special chars:
<a name="l845"><span class="linenum"> 845</span></a>              <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../../_variables/text_format.html">$text_format</a> = 'htmlspecialchars';
<a name="l846"><span class="linenum"> 846</span></a>          }
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>          <a class="var it1509" onMouseOver="hilite(1509)" onMouseOut="lolite()" onClick="logVariable('editor_code')" href="../../../_variables/editor_code.html">$editor_code</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'editor_code', 'string', NULL );
<a name="l849"><span class="linenum"> 849</span></a>          if( <a class="var it1509" onMouseOver="hilite(1509)" onMouseOut="lolite()" onClick="logVariable('editor_code')" href="../../../_variables/editor_code.html">$editor_code</a> )
<a name="l850"><span class="linenum"> 850</span></a>          { // Update item editor code if it was explicitly set
<a name="l851"><span class="linenum"> 851</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'editor_code', <a class="var it1509" onMouseOver="hilite(1509)" onMouseOut="lolite()" onClick="logVariable('editor_code')" href="../../../_variables/editor_code.html">$editor_code</a> );
<a name="l852"><span class="linenum"> 852</span></a>          }
<a name="l853"><span class="linenum"> 853</span></a>  
<a name="l854"><span class="linenum"> 854</span></a>          <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'content', <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../../_variables/text_format.html">$text_format</a>, NULL );
<a name="l855"><span class="linenum"> 855</span></a>          if( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> !== NULL )
<a name="l856"><span class="linenum"> 856</span></a>          {
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">            // Never allow html content on post titles:  (fp&gt; probably so as to not mess up backoffice and all sorts of tools)</span>
<a name="l858"><span class="linenum"> 858</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_title', 'htmlspecialchars', NULL );
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">            // Do some optional filtering on the content</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">            // Typically stuff that will help the content to validate</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">            // Useful for code display.</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">            // Will probably be used for validation also.</span>
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../../_variables/Plugins_admin.html">$Plugins_admin</a> = &amp; get_Plugins_admin();
<a name="l865"><span class="linenum"> 865</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(
<a name="l866"><span class="linenum"> 866</span></a>                      'object_type' =&gt; 'Item',
<a name="l867"><span class="linenum"> 867</span></a>                      'object'      =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l868"><span class="linenum"> 868</span></a>                      'object_Blog' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;Blog
<a name="l869"><span class="linenum"> 869</span></a>                  );
<a name="l870"><span class="linenum"> 870</span></a>              <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('filter_contents')" href="../../../_functions/filter_contents.html" onMouseOver="funcPopup(event,'filter_contents')">filter_contents</a>( <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>['post_title'] <span class="comment">/* by ref */</span>, <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>['content'] <span class="comment">/* by ref */</span>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> <span class="comment">/* by ref */</span> );
<a name="l871"><span class="linenum"> 871</span></a>  
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">            // Title checking:</span>
<a name="l873"><span class="linenum"> 873</span></a>              <a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('use_title')" href="../../../_variables/use_title.html">$use_title</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_title' );
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>              if( ( ! <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../../_variables/editing.html">$editing</a> || <a class="var it1500" onMouseOver="hilite(1500)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../_variables/creating.html">$creating</a> ) &amp;&amp; <a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('use_title')" href="../../../_variables/use_title.html">$use_title</a> == 'required' ) // creating is important, when the action is create_edit
<a name="l876"><span class="linenum"> 876</span></a>              {
<a name="l877"><span class="linenum"> 877</span></a>                  <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'post_title', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a title.'), '' );
<a name="l878"><span class="linenum"> 878</span></a>              }
<a name="l879"><span class="linenum"> 879</span></a>  
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">            // Format raw HTML input to cleaned up and validated HTML:</span>
<a name="l881"><span class="linenum"> 881</span></a>              <a class="function" onClick="logFunction('param_check_html')" href="../../../_functions/param_check_html.html" onMouseOver="funcPopup(event,'param_check_html')">param_check_html</a>( 'content', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Invalid content.') );
<a name="l882"><span class="linenum"> 882</span></a>              <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('prepare_item_content')" href="../../../_functions/prepare_item_content.html" onMouseOver="funcPopup(event,'prepare_item_content')">prepare_item_content</a>( <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'content' ) );
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'content', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'post_title' ) );
<a name="l887"><span class="linenum"> 887</span></a>          }
<a name="l888"><span class="linenum"> 888</span></a>          if( empty( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_text' ) == 'required' )
<a name="l889"><span class="linenum"> 889</span></a>          { // Content must be entered
<a name="l890"><span class="linenum"> 890</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'content', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter some text.'), '' );
<a name="l891"><span class="linenum"> 891</span></a>          }
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">        // EXCERPT: (must come after content (to handle excerpt_autogenerated))</span>
<a name="l894"><span class="linenum"> 894</span></a>          <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('post_excerpt')" href="../../../_variables/post_excerpt.html">$post_excerpt</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_excerpt', 'text', NULL );
<a name="l895"><span class="linenum"> 895</span></a>          if( <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('post_excerpt')" href="../../../_variables/post_excerpt.html">$post_excerpt</a> !== NULL &amp;&amp; <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('post_excerpt')" href="../../../_variables/post_excerpt.html">$post_excerpt</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> )
<a name="l896"><span class="linenum"> 896</span></a>          {
<a name="l897"><span class="linenum"> 897</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'excerpt_autogenerated', 0 ); <span class="comment">// Set this to the '0' for saving a field 'excerpt' from a request</span>
<a name="l898"><span class="linenum"> 898</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'excerpt' );
<a name="l899"><span class="linenum"> 899</span></a>          }
<a name="l900"><span class="linenum"> 900</span></a>          if( empty( <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('post_excerpt')" href="../../../_variables/post_excerpt.html">$post_excerpt</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_excerpt' ) == 'required' )
<a name="l901"><span class="linenum"> 901</span></a>          { // Content must be entered
<a name="l902"><span class="linenum"> 902</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'post_excerpt', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide an excerpt.'), '' );
<a name="l903"><span class="linenum"> 903</span></a>          }
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">        // LOCATION (COUNTRY -&gt; CITY):</span>
<a name="l906"><span class="linenum"> 906</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">        // Check if this item has a special post type. Location is not required for special posts.</span>
<a name="l908"><span class="linenum"> 908</span></a>          <a class="var it1511" onMouseOver="hilite(1511)" onMouseOut="lolite()" onClick="logVariable('not_special_post')" href="../../../_variables/not_special_post.html">$not_special_post</a> = ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_special')" href="../../../_functions/is_special.html" onMouseOver="funcPopup(event,'is_special')">is_special</a>();
<a name="l909"><span class="linenum"> 909</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('country_visible')" href="../../../_functions/country_visible.html" onMouseOver="funcPopup(event,'country_visible')">country_visible</a>() )
<a name="l910"><span class="linenum"> 910</span></a>          { // Save country
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it1162" onMouseOver="hilite(1162)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../../_variables/country_ID.html">$country_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_ctry_ID', 'integer', 0 );
<a name="l912"><span class="linenum"> 912</span></a>              <a class="var it1512" onMouseOver="hilite(1512)" onMouseOut="lolite()" onClick="logVariable('country_is_required')" href="../../../_variables/country_is_required.html">$country_is_required</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_country' ) == 'required'
<a name="l913"><span class="linenum"> 913</span></a>                      &amp;&amp; <a class="var it1511" onMouseOver="hilite(1511)" onMouseOut="lolite()" onClick="logVariable('not_special_post')" href="../../../_variables/not_special_post.html">$not_special_post</a>
<a name="l914"><span class="linenum"> 914</span></a>                      &amp;&amp; <a class="function" onClick="logFunction('countries_exist')" href="../../../_functions/countries_exist.html" onMouseOver="funcPopup(event,'countries_exist')">countries_exist</a>();
<a name="l915"><span class="linenum"> 915</span></a>              <a class="function" onClick="logFunction('param_check_number')" href="../../../_functions/param_check_number.html" onMouseOver="funcPopup(event,'param_check_number')">param_check_number</a>( 'item_ctry_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please select a country'), <a class="var it1512" onMouseOver="hilite(1512)" onMouseOut="lolite()" onClick="logVariable('country_is_required')" href="../../../_variables/country_is_required.html">$country_is_required</a> );
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'ctry_ID', 'item_ctry_ID', true );
<a name="l917"><span class="linenum"> 917</span></a>          }
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('region_visible')" href="../../../_functions/region_visible.html" onMouseOver="funcPopup(event,'region_visible')">region_visible</a>() )
<a name="l920"><span class="linenum"> 920</span></a>          { // Save region
<a name="l921"><span class="linenum"> 921</span></a>              <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../../_variables/region_ID.html">$region_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_rgn_ID', 'integer', 0 );
<a name="l922"><span class="linenum"> 922</span></a>              <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('region_is_required')" href="../../../_variables/region_is_required.html">$region_is_required</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_region' ) == 'required'
<a name="l923"><span class="linenum"> 923</span></a>                      &amp;&amp; <a class="var it1511" onMouseOver="hilite(1511)" onMouseOut="lolite()" onClick="logVariable('not_special_post')" href="../../../_variables/not_special_post.html">$not_special_post</a>
<a name="l924"><span class="linenum"> 924</span></a>                      &amp;&amp; <a class="function" onClick="logFunction('regions_exist')" href="../../../_functions/regions_exist.html" onMouseOver="funcPopup(event,'regions_exist')">regions_exist</a>( <a class="var it1162" onMouseOver="hilite(1162)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../../_variables/country_ID.html">$country_ID</a> );
<a name="l925"><span class="linenum"> 925</span></a>              <a class="function" onClick="logFunction('param_check_number')" href="../../../_functions/param_check_number.html" onMouseOver="funcPopup(event,'param_check_number')">param_check_number</a>( 'item_rgn_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please select a region'), <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('region_is_required')" href="../../../_variables/region_is_required.html">$region_is_required</a> );
<a name="l926"><span class="linenum"> 926</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'rgn_ID', 'item_rgn_ID', true );
<a name="l927"><span class="linenum"> 927</span></a>          }
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('subregion_visible')" href="../../../_functions/subregion_visible.html" onMouseOver="funcPopup(event,'subregion_visible')">subregion_visible</a>() )
<a name="l930"><span class="linenum"> 930</span></a>          { // Save subregion
<a name="l931"><span class="linenum"> 931</span></a>              <a class="var it1164" onMouseOver="hilite(1164)" onMouseOut="lolite()" onClick="logVariable('subregion_ID')" href="../../../_variables/subregion_ID.html">$subregion_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_subrg_ID', 'integer', 0 );
<a name="l932"><span class="linenum"> 932</span></a>              <a class="var it1514" onMouseOver="hilite(1514)" onMouseOut="lolite()" onClick="logVariable('subregion_is_required')" href="../../../_variables/subregion_is_required.html">$subregion_is_required</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_sub_region' ) == 'required'
<a name="l933"><span class="linenum"> 933</span></a>                      &amp;&amp; <a class="var it1511" onMouseOver="hilite(1511)" onMouseOut="lolite()" onClick="logVariable('not_special_post')" href="../../../_variables/not_special_post.html">$not_special_post</a>
<a name="l934"><span class="linenum"> 934</span></a>                      &amp;&amp; <a class="function" onClick="logFunction('subregions_exist')" href="../../../_functions/subregions_exist.html" onMouseOver="funcPopup(event,'subregions_exist')">subregions_exist</a>( <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../../_variables/region_ID.html">$region_ID</a> );
<a name="l935"><span class="linenum"> 935</span></a>              <a class="function" onClick="logFunction('param_check_number')" href="../../../_functions/param_check_number.html" onMouseOver="funcPopup(event,'param_check_number')">param_check_number</a>( 'item_subrg_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please select a sub-region'), <a class="var it1514" onMouseOver="hilite(1514)" onMouseOut="lolite()" onClick="logVariable('subregion_is_required')" href="../../../_variables/subregion_is_required.html">$subregion_is_required</a> );
<a name="l936"><span class="linenum"> 936</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'subrg_ID', 'item_subrg_ID', true );
<a name="l937"><span class="linenum"> 937</span></a>          }
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('city_visible')" href="../../../_functions/city_visible.html" onMouseOver="funcPopup(event,'city_visible')">city_visible</a>() )
<a name="l940"><span class="linenum"> 940</span></a>          { // Save city
<a name="l941"><span class="linenum"> 941</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_city_ID', 'integer', 0 );
<a name="l942"><span class="linenum"> 942</span></a>              <a class="var it1515" onMouseOver="hilite(1515)" onMouseOut="lolite()" onClick="logVariable('city_is_required')" href="../../../_variables/city_is_required.html">$city_is_required</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_city' ) == 'required'
<a name="l943"><span class="linenum"> 943</span></a>                      &amp;&amp; <a class="var it1511" onMouseOver="hilite(1511)" onMouseOut="lolite()" onClick="logVariable('not_special_post')" href="../../../_variables/not_special_post.html">$not_special_post</a>
<a name="l944"><span class="linenum"> 944</span></a>                      &amp;&amp; <a class="function" onClick="logFunction('cities_exist')" href="../../../_functions/cities_exist.html" onMouseOver="funcPopup(event,'cities_exist')">cities_exist</a>( <a class="var it1162" onMouseOver="hilite(1162)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../../_variables/country_ID.html">$country_ID</a>, <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../../_variables/region_ID.html">$region_ID</a>, <a class="var it1164" onMouseOver="hilite(1164)" onMouseOut="lolite()" onClick="logVariable('subregion_ID')" href="../../../_variables/subregion_ID.html">$subregion_ID</a> );
<a name="l945"><span class="linenum"> 945</span></a>              <a class="function" onClick="logFunction('param_check_number')" href="../../../_functions/param_check_number.html" onMouseOver="funcPopup(event,'param_check_number')">param_check_number</a>( 'item_city_ID', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please select a city'), <a class="var it1515" onMouseOver="hilite(1515)" onMouseOut="lolite()" onClick="logVariable('city_is_required')" href="../../../_variables/city_is_required.html">$city_is_required</a> );
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'city_ID', 'item_city_ID', true );
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>          return ! <a class="function" onClick="logFunction('param_errors_detected')" href="../../../_functions/param_errors_detected.html" onMouseOver="funcPopup(event,'param_errors_detected')">param_errors_detected</a>();
<a name="l950"><span class="linenum"> 950</span></a>      }
<a name="l951"><span class="linenum"> 951</span></a>  
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>      <span class="comment">/**</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     * Template function: display anchor for permalinks to refer to.</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">     */</span>
<a name="l956"><span class="linenum"> 956</span></a>  	function <a class="function" onClick="logFunction('anchor')" href="../../../_functions/anchor.html" onMouseOver="funcPopup(event,'anchor')">anchor</a>()
<a name="l957"><span class="linenum"> 957</span></a>      {
<a name="l958"><span class="linenum"> 958</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>          echo '&lt;a id=&quot;'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor_id')" href="../../../_functions/get_anchor_id.html" onMouseOver="funcPopup(event,'get_anchor_id')">get_anchor_id</a>().'&quot;&gt;&lt;/a&gt;';
<a name="l961"><span class="linenum"> 961</span></a>      }
<a name="l962"><span class="linenum"> 962</span></a>  
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>      <span class="comment">/**</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">     * @return string</span>
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment">     */</span>
<a name="l967"><span class="linenum"> 967</span></a>  	function <a class="function" onClick="logFunction('get_anchor_id')" href="../../../_functions/get_anchor_id.html" onMouseOver="funcPopup(event,'get_anchor_id')">get_anchor_id</a>()
<a name="l968"><span class="linenum"> 968</span></a>      {
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">        // In case you have old cafelog permalinks, uncomment the following line:</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment">        // return preg_replace( '/[^a-zA-Z0-9_\.-]/', '_', $this-&gt;title );</span>
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>          return 'item_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l973"><span class="linenum"> 973</span></a>      }
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>      <span class="comment">/**</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">     * Template tag</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">     */</span>
<a name="l979"><span class="linenum"> 979</span></a>  	function <a class="function" onClick="logFunction('anchor_id')" href="../../../_functions/anchor_id.html" onMouseOver="funcPopup(event,'anchor_id')">anchor_id</a>()
<a name="l980"><span class="linenum"> 980</span></a>      {
<a name="l981"><span class="linenum"> 981</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor_id')" href="../../../_functions/get_anchor_id.html" onMouseOver="funcPopup(event,'get_anchor_id')">get_anchor_id</a>();
<a name="l982"><span class="linenum"> 982</span></a>      }
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>      <span class="comment">/**</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * Template function: display assignee of item</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     *</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">     * @param string</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">     * @param string</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">     */</span>
<a name="l992"><span class="linenum"> 992</span></a>  	function <a class="function" onClick="logFunction('assigned_to')" href="../../../_functions/assigned_to.html" onMouseOver="funcPopup(event,'assigned_to')">assigned_to</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l993"><span class="linenum"> 993</span></a>      {
<a name="l994"><span class="linenum"> 994</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assigned_User')" href="../../../_functions/get_assigned_user.html" onMouseOver="funcPopup(event,'get_assigned_user')">get_assigned_User</a>() )
<a name="l995"><span class="linenum"> 995</span></a>          {
<a name="l996"><span class="linenum"> 996</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l997"><span class="linenum"> 997</span></a>              echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>-&gt;<a class="function" onClick="logFunction('get_identity_link')" href="../../../_functions/get_identity_link.html" onMouseOver="funcPopup(event,'get_identity_link')">get_identity_link</a>( array(
<a name="l998"><span class="linenum"> 998</span></a>                      'format'    =&gt; <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>,
<a name="l999"><span class="linenum"> 999</span></a>                      'link_text' =&gt; 'name',
<a name="l1000"><span class="linenum">1000</span></a>                  ) );
<a name="l1001"><span class="linenum">1001</span></a>              echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1002"><span class="linenum">1002</span></a>          }
<a name="l1003"><span class="linenum">1003</span></a>      }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>  
<a name="l1006"><span class="linenum">1006</span></a>      <span class="comment">/**</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     * Get list of assigned user options</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">     *</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment">     * @uses UserCache::get_blog_member_option_list()</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">     * @return string HTML select options list</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment">     */</span>
<a name="l1012"><span class="linenum">1012</span></a>  	function <a class="function" onClick="logFunction('get_assigned_user_options')" href="../../../_functions/get_assigned_user_options.html" onMouseOver="funcPopup(event,'get_assigned_user_options')">get_assigned_user_options</a>()
<a name="l1013"><span class="linenum">1013</span></a>      {
<a name="l1014"><span class="linenum">1014</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1015"><span class="linenum">1015</span></a>          return <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('get_blog_member_option_list')" href="../../../_functions/get_blog_member_option_list.html" onMouseOver="funcPopup(event,'get_blog_member_option_list')">get_blog_member_option_list</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a>,
<a name="l1016"><span class="linenum">1016</span></a>                              true,    (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> != 0) <span class="comment">/* if this Item is already serialized we'll load the default anyway */</span> );
<a name="l1017"><span class="linenum">1017</span></a>      }
<a name="l1018"><span class="linenum">1018</span></a>  
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>      <span class="comment">/**</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">     * Check if user can see comments on this post, which he cannot if they</span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">     * are disabled for the Item or never allowed for the blog.</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">     *</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">     * @param boolean true will display why user can't see comments</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     */</span>
<a name="l1027"><span class="linenum">1027</span></a>  	function <a class="function" onClick="logFunction('can_see_comments')" href="../../../_functions/can_see_comments.html" onMouseOver="funcPopup(event,'can_see_comments')">can_see_comments</a>( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> = false )
<a name="l1028"><span class="linenum">1028</span></a>      {
<a name="l1029"><span class="linenum">1029</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> == 'terms' )
<a name="l1032"><span class="linenum">1032</span></a>          {    // Don't display the comments on page with terms &amp; conditions:
<a name="l1033"><span class="linenum">1033</span></a>              return false;
<a name="l1034"><span class="linenum">1034</span></a>          }
<a name="l1035"><span class="linenum">1035</span></a>  
<a name="l1036"><span class="linenum">1036</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_comments' ) )
<a name="l1037"><span class="linenum">1037</span></a>          { // Comments are not allowed on this post by post type
<a name="l1038"><span class="linenum">1038</span></a>              return false;
<a name="l1039"><span class="linenum">1039</span></a>          }
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_disabling_comments' ) &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> == 'disabled' ) )
<a name="l1042"><span class="linenum">1042</span></a>          { // Comments are disabled on this post
<a name="l1043"><span class="linenum">1043</span></a>              return false;
<a name="l1044"><span class="linenum">1044</span></a>          }
<a name="l1045"><span class="linenum">1045</span></a>  
<a name="l1046"><span class="linenum">1046</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_blog_settings')" href="../../../_functions/check_blog_settings.html" onMouseOver="funcPopup(event,'check_blog_settings')">check_blog_settings</a>( 'allow_view_comments' ) )
<a name="l1047"><span class="linenum">1047</span></a>          { // User is allowed to see comments
<a name="l1048"><span class="linenum">1048</span></a>              return true;
<a name="l1049"><span class="linenum">1049</span></a>          }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>          if( !<a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l1052"><span class="linenum">1052</span></a>          {
<a name="l1053"><span class="linenum">1053</span></a>              return false;
<a name="l1054"><span class="linenum">1054</span></a>          }
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1057"><span class="linenum">1057</span></a>          <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_number_of_comments')" href="../../../_functions/get_number_of_comments.html" onMouseOver="funcPopup(event,'get_number_of_comments')">get_number_of_comments</a>( 'published' );
<a name="l1058"><span class="linenum">1058</span></a>          <a class="var it1517" onMouseOver="hilite(1517)" onMouseOut="lolite()" onClick="logVariable('allow_view_comments')" href="../../../_variables/allow_view_comments.html">$allow_view_comments</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_view_comments' );
<a name="l1059"><span class="linenum">1059</span></a>          <a class="var it1518" onMouseOver="hilite(1518)" onMouseOut="lolite()" onClick="logVariable('user_can_be_validated')" href="../../../_variables/user_can_be_validated.html">$user_can_be_validated</a> = <a class="function" onClick="logFunction('check_user_status')" href="../../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_be_validated' );
<a name="l1060"><span class="linenum">1060</span></a>  
<a name="l1061"><span class="linenum">1061</span></a>          if( ( <a class="var it1517" onMouseOver="hilite(1517)" onMouseOut="lolite()" onClick="logVariable('allow_view_comments')" href="../../../_variables/allow_view_comments.html">$allow_view_comments</a> != 'any' ) &amp;&amp; ( <a class="var it1518" onMouseOver="hilite(1518)" onMouseOut="lolite()" onClick="logVariable('user_can_be_validated')" href="../../../_variables/user_can_be_validated.html">$user_can_be_validated</a> ) )
<a name="l1062"><span class="linenum">1062</span></a>          { // change allow view comments to activated, because user is logged in but the account is not activated, and anomnymous users can't see comments
<a name="l1063"><span class="linenum">1063</span></a>              <a class="var it1517" onMouseOver="hilite(1517)" onMouseOut="lolite()" onClick="logVariable('allow_view_comments')" href="../../../_variables/allow_view_comments.html">$allow_view_comments</a> = 'active_users';
<a name="l1064"><span class="linenum">1064</span></a>          }
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">        // Set display text</span>
<a name="l1067"><span class="linenum">1067</span></a>          switch( <a class="var it1517" onMouseOver="hilite(1517)" onMouseOut="lolite()" onClick="logVariable('allow_view_comments')" href="../../../_variables/allow_view_comments.html">$allow_view_comments</a> )
<a name="l1068"><span class="linenum">1068</span></a>          {
<a name="l1069"><span class="linenum">1069</span></a>              case 'active_users':
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">                // users must activate their accounts before they can see the comments</span>
<a name="l1071"><span class="linenum">1071</span></a>                  if( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 0 )
<a name="l1072"><span class="linenum">1072</span></a>                  {
<a name="l1073"><span class="linenum">1073</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account to see the comments.' );
<a name="l1074"><span class="linenum">1074</span></a>                  }
<a name="l1075"><span class="linenum">1075</span></a>                  elseif ( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 1 )
<a name="l1076"><span class="linenum">1076</span></a>                  {
<a name="l1077"><span class="linenum">1077</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There is &lt;b&gt;one comment&lt;/b&gt; on this post but you must activate your account to see the comments.' );
<a name="l1078"><span class="linenum">1078</span></a>                  }
<a name="l1079"><span class="linenum">1079</span></a>                  else
<a name="l1080"><span class="linenum">1080</span></a>                  {
<a name="l1081"><span class="linenum">1081</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There are &lt;b&gt;%s comments&lt;/b&gt; on this post but you must activate your account to see the comments.' ), <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> );
<a name="l1082"><span class="linenum">1082</span></a>                  }
<a name="l1083"><span class="linenum">1083</span></a>                  break;
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>              case 'registered':
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">                // only registered users can see this post's comments</span>
<a name="l1087"><span class="linenum">1087</span></a>                  if( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 0 )
<a name="l1088"><span class="linenum">1088</span></a>                  {
<a name="l1089"><span class="linenum">1089</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must be logged in to see the comments.' );
<a name="l1090"><span class="linenum">1090</span></a>                  }
<a name="l1091"><span class="linenum">1091</span></a>                  elseif ( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 1 )
<a name="l1092"><span class="linenum">1092</span></a>                  {
<a name="l1093"><span class="linenum">1093</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There is &lt;b&gt;one comment&lt;/b&gt; on this post but you must be logged in to see the comments.' );
<a name="l1094"><span class="linenum">1094</span></a>                  }
<a name="l1095"><span class="linenum">1095</span></a>                  else
<a name="l1096"><span class="linenum">1096</span></a>                  {
<a name="l1097"><span class="linenum">1097</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There are &lt;b&gt;%s comments&lt;/b&gt; on this post but you must be logged in to see the comments.' ), <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> );
<a name="l1098"><span class="linenum">1098</span></a>                  }
<a name="l1099"><span class="linenum">1099</span></a>                  break;
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>              case 'member':
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">                // only members can see this post's comments</span>
<a name="l1103"><span class="linenum">1103</span></a>                  if( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 0 )
<a name="l1104"><span class="linenum">1104</span></a>                  {
<a name="l1105"><span class="linenum">1105</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must be a member of this blog to see the comments.' );
<a name="l1106"><span class="linenum">1106</span></a>                  }
<a name="l1107"><span class="linenum">1107</span></a>                  elseif ( <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> == 1 )
<a name="l1108"><span class="linenum">1108</span></a>                  {
<a name="l1109"><span class="linenum">1109</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There is one comment on this post but you must be a member of this blog to see the comments.' );
<a name="l1110"><span class="linenum">1110</span></a>                  }
<a name="l1111"><span class="linenum">1111</span></a>                  else
<a name="l1112"><span class="linenum">1112</span></a>                  {
<a name="l1113"><span class="linenum">1113</span></a>                      <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'There are %s comments on this post but you must be a member of this blog to see the comments.' ), <a class="var it1516" onMouseOver="hilite(1516)" onMouseOut="lolite()" onClick="logVariable('number_of_comments')" href="../../../_variables/number_of_comments.html">$number_of_comments</a> );
<a name="l1114"><span class="linenum">1114</span></a>                  }
<a name="l1115"><span class="linenum">1115</span></a>                  break;
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>              default:
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">                // any is already handled, moderators shouldn't get any message</span>
<a name="l1119"><span class="linenum">1119</span></a>                  return false;
<a name="l1120"><span class="linenum">1120</span></a>          }
<a name="l1121"><span class="linenum">1121</span></a>  
<a name="l1122"><span class="linenum">1122</span></a>          echo '&lt;div class=&quot;comment_posting_disabled_msg&quot;&gt;';
<a name="l1123"><span class="linenum">1123</span></a>  
<a name="l1124"><span class="linenum">1124</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1125"><span class="linenum">1125</span></a>          { // user is not logged in at all
<a name="l1126"><span class="linenum">1126</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'#comments';
<a name="l1127"><span class="linenum">1127</span></a>              <a class="var it1520" onMouseOver="hilite(1520)" onMouseOut="lolite()" onClick="logVariable('login_link')" href="../../../_variables/login_link.html">$login_link</a> = '&lt;a href=&quot;'.<a class="function" onClick="logFunction('get_login_url')" href="../../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( 'cannot see comments', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> ).'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Log in now!' ).'&lt;/a&gt;';
<a name="l1128"><span class="linenum">1128</span></a>              echo '&lt;p&gt;'.<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a>.' '.<a class="var it1520" onMouseOver="hilite(1520)" onMouseOut="lolite()" onClick="logVariable('login_link')" href="../../../_variables/login_link.html">$login_link</a>.'&lt;/p&gt;';
<a name="l1129"><span class="linenum">1129</span></a>              if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'newusers_canregister' ) == 'yes' &amp;&amp; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'registration_is_public' ) )
<a name="l1130"><span class="linenum">1130</span></a>              { // needs to display register link
<a name="l1131"><span class="linenum">1131</span></a>                  echo '&lt;p&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'If you have no account yet, you can &lt;a href=&quot;%s&quot;&gt;register now&lt;/a&gt;...&lt;br /&gt;(It only takes a few seconds!)' ),
<a name="l1132"><span class="linenum">1132</span></a>                              <a class="function" onClick="logFunction('get_user_register_url')" href="../../../_functions/get_user_register_url.html" onMouseOver="funcPopup(event,'get_user_register_url')">get_user_register_url</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>, 'reg to see comments' ) ).'&lt;/p&gt;';
<a name="l1133"><span class="linenum">1133</span></a>              }
<a name="l1134"><span class="linenum">1134</span></a>          }
<a name="l1135"><span class="linenum">1135</span></a>          elseif( <a class="var it1518" onMouseOver="hilite(1518)" onMouseOut="lolite()" onClick="logVariable('user_can_be_validated')" href="../../../_variables/user_can_be_validated.html">$user_can_be_validated</a> )
<a name="l1136"><span class="linenum">1136</span></a>          { // user is logged in but not activated
<a name="l1137"><span class="linenum">1137</span></a>              <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../../_variables/activateinfo_link.html">$activateinfo_link</a> = '&lt;a href=&quot;'.<a class="function" onClick="logFunction('get_activate_info_url')" href="../../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'#comments', '&amp;amp;'  ).'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'More info &amp;raquo;' ).'&lt;/a&gt;';
<a name="l1138"><span class="linenum">1138</span></a>              echo '&lt;p&gt;'.<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a>.' '.<a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../../_variables/activateinfo_link.html">$activateinfo_link</a>.'&lt;/p&gt;';
<a name="l1139"><span class="linenum">1139</span></a>          }
<a name="l1140"><span class="linenum">1140</span></a>          else
<a name="l1141"><span class="linenum">1141</span></a>          { // user is activated, but not allowed to view comments
<a name="l1142"><span class="linenum">1142</span></a>              echo <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('display_text')" href="../../../_variables/display_text.html">$display_text</a>;
<a name="l1143"><span class="linenum">1143</span></a>          }
<a name="l1144"><span class="linenum">1144</span></a>  
<a name="l1145"><span class="linenum">1145</span></a>          echo '&lt;/div&gt;';
<a name="l1146"><span class="linenum">1146</span></a>  
<a name="l1147"><span class="linenum">1147</span></a>          return false;
<a name="l1148"><span class="linenum">1148</span></a>      }
<a name="l1149"><span class="linenum">1149</span></a>  
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>      <span class="comment">/**</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">     * Template function: Check if user can leave comment on this post or display error</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment">     *</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">     * @param string|NULL string to display before any error message; NULL to not display anything, but just return boolean</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">     * @param string string to display after any error message</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">     * @param string error message for non published posts, '#' for default</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">     * @param string error message for closed comments posts, '#' for default</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">     * @param string section title</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     * @param array Skin params</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">     * @return boolean true if user can post, false if s/he cannot</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">     */</span>
<a name="l1162"><span class="linenum">1162</span></a>  	function <a class="function" onClick="logFunction('can_comment')" href="../../../_functions/can_comment.html" onMouseOver="funcPopup(event,'can_comment')">can_comment</a>( <a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('before_error')" href="../../../_variables/before_error.html">$before_error</a> = '&lt;p&gt;&lt;em&gt;', <a class="var it1523" onMouseOver="hilite(1523)" onMouseOut="lolite()" onClick="logVariable('after_error')" href="../../../_variables/after_error.html">$after_error</a> = '&lt;/em&gt;&lt;/p&gt;', <a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('non_published_msg')" href="../../../_variables/non_published_msg.html">$non_published_msg</a> = '#', <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('closed_msg')" href="../../../_variables/closed_msg.html">$closed_msg</a> = '#', <a class="var it1526" onMouseOver="hilite(1526)" onMouseOut="lolite()" onClick="logVariable('section_title')" href="../../../_variables/section_title.html">$section_title</a> = '', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1163"><span class="linenum">1163</span></a>      {
<a name="l1164"><span class="linenum">1164</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> == 'terms' )
<a name="l1167"><span class="linenum">1167</span></a>          {    // Don't allow comment a page with terms &amp; conditions:
<a name="l1168"><span class="linenum">1168</span></a>              return false;
<a name="l1169"><span class="linenum">1169</span></a>          }
<a name="l1170"><span class="linenum">1170</span></a>  
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> = ( ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('before_error')" href="../../../_variables/before_error.html">$before_error</a>) );
<a name="l1172"><span class="linenum">1172</span></a>  
<a name="l1173"><span class="linenum">1173</span></a>          if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l1174"><span class="linenum">1174</span></a>          { // display a comment form section even if comment form won't be displayed, &quot;add <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a>&quot; links should point to this section
<a name="l1175"><span class="linenum">1175</span></a>              echo '&lt;a id=&quot;form_p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot;&gt;&lt;/a&gt;';
<a name="l1176"><span class="linenum">1176</span></a>          }
<a name="l1177"><span class="linenum">1177</span></a>  
<a name="l1178"><span class="linenum">1178</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_comments' ) )
<a name="l1179"><span class="linenum">1179</span></a>          { // Comments are not allowed on this post by post type
<a name="l1180"><span class="linenum">1180</span></a>              return false;
<a name="l1181"><span class="linenum">1181</span></a>          }
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_blog_settings')" href="../../../_functions/check_blog_settings.html" onMouseOver="funcPopup(event,'check_blog_settings')">check_blog_settings</a>( 'allow_comments' ) )
<a name="l1184"><span class="linenum">1184</span></a>          {
<a name="l1185"><span class="linenum">1185</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_disabling_comments' ) &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> == 'disabled' ) )
<a name="l1186"><span class="linenum">1186</span></a>              { // Comments are disabled on this post
<a name="l1187"><span class="linenum">1187</span></a>                  return false;
<a name="l1188"><span class="linenum">1188</span></a>              }
<a name="l1189"><span class="linenum">1189</span></a>  
<a name="l1190"><span class="linenum">1190</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> == 'closed' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>() )
<a name="l1191"><span class="linenum">1191</span></a>              { // Comments are closed on this post
<a name="l1192"><span class="linenum">1192</span></a>  
<a name="l1193"><span class="linenum">1193</span></a>                  if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a>)
<a name="l1194"><span class="linenum">1194</span></a>                  {
<a name="l1195"><span class="linenum">1195</span></a>                      if( <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('closed_msg')" href="../../../_variables/closed_msg.html">$closed_msg</a> == '#' )
<a name="l1196"><span class="linenum">1196</span></a>                          <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('closed_msg')" href="../../../_variables/closed_msg.html">$closed_msg</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Comments are closed for this post.' );
<a name="l1197"><span class="linenum">1197</span></a>  
<a name="l1198"><span class="linenum">1198</span></a>                      echo <a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('before_error')" href="../../../_variables/before_error.html">$before_error</a>;
<a name="l1199"><span class="linenum">1199</span></a>                      echo <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('closed_msg')" href="../../../_variables/closed_msg.html">$closed_msg</a>;
<a name="l1200"><span class="linenum">1200</span></a>                      echo <a class="var it1523" onMouseOver="hilite(1523)" onMouseOut="lolite()" onClick="logVariable('after_error')" href="../../../_variables/after_error.html">$after_error</a>;
<a name="l1201"><span class="linenum">1201</span></a>                  }
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>                  return false;
<a name="l1204"><span class="linenum">1204</span></a>              }
<a name="l1205"><span class="linenum">1205</span></a>  
<a name="l1206"><span class="linenum">1206</span></a>              if( (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'draft') || (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'deprecated' ) || (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'redirected' ) )
<a name="l1207"><span class="linenum">1207</span></a>              { // Post is not published
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>                  if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l1210"><span class="linenum">1210</span></a>                  {
<a name="l1211"><span class="linenum">1211</span></a>                      if( <a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('non_published_msg')" href="../../../_variables/non_published_msg.html">$non_published_msg</a> == '#' )
<a name="l1212"><span class="linenum">1212</span></a>                          <a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('non_published_msg')" href="../../../_variables/non_published_msg.html">$non_published_msg</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This post is not published. You cannot leave comments.' );
<a name="l1213"><span class="linenum">1213</span></a>  
<a name="l1214"><span class="linenum">1214</span></a>                      echo <a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('before_error')" href="../../../_variables/before_error.html">$before_error</a>;
<a name="l1215"><span class="linenum">1215</span></a>                      echo <a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('non_published_msg')" href="../../../_variables/non_published_msg.html">$non_published_msg</a>;
<a name="l1216"><span class="linenum">1216</span></a>                      echo <a class="var it1523" onMouseOver="hilite(1523)" onMouseOut="lolite()" onClick="logVariable('after_error')" href="../../../_variables/after_error.html">$after_error</a>;
<a name="l1217"><span class="linenum">1217</span></a>                  }
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>                  return false;
<a name="l1220"><span class="linenum">1220</span></a>              }
<a name="l1221"><span class="linenum">1221</span></a>  
<a name="l1222"><span class="linenum">1222</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'advanced_perms' ) ) &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_comment_statuses', 'create', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID ) )
<a name="l1223"><span class="linenum">1223</span></a>              { // User doesn't have permission to create comments and advanced perms are enabled
<a name="l1224"><span class="linenum">1224</span></a>                  if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l1225"><span class="linenum">1225</span></a>                  {
<a name="l1226"><span class="linenum">1226</span></a>                      echo <a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('before_error')" href="../../../_variables/before_error.html">$before_error</a>;
<a name="l1227"><span class="linenum">1227</span></a>                      echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You don\'t have permission to reply on this post.');
<a name="l1228"><span class="linenum">1228</span></a>                      echo <a class="var it1523" onMouseOver="hilite(1523)" onMouseOut="lolite()" onClick="logVariable('after_error')" href="../../../_variables/after_error.html">$after_error</a>;
<a name="l1229"><span class="linenum">1229</span></a>                  }
<a name="l1230"><span class="linenum">1230</span></a>                  return false;
<a name="l1231"><span class="linenum">1231</span></a>              }
<a name="l1232"><span class="linenum">1232</span></a>              return true; <span class="comment">// OK, user can comment!</span>
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>          if( ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_comments' ) != 'never' ) &amp;&amp; <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l1236"><span class="linenum">1236</span></a>          {
<a name="l1237"><span class="linenum">1237</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> == 'closed' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a> == 'disabled' )
<a name="l1238"><span class="linenum">1238</span></a>              {    // Don't display the disabled comment form because we cannot create the comments for this post
<a name="l1239"><span class="linenum">1239</span></a>                  return false;
<a name="l1240"><span class="linenum">1240</span></a>              }
<a name="l1241"><span class="linenum">1241</span></a>              echo <a class="var it1526" onMouseOver="hilite(1526)" onMouseOut="lolite()" onClick="logVariable('section_title')" href="../../../_variables/section_title.html">$section_title</a>;
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">            // set item_url for redirect after login, if login required</span>
<a name="l1243"><span class="linenum">1243</span></a>              <a class="var it1527" onMouseOver="hilite(1527)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../_variables/item_url.html">$item_url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'#form_p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment">            // display disabled comment form</span>
<a name="l1245"><span class="linenum">1245</span></a>              <a class="function" onClick="logFunction('echo_disabled_comments')" href="../../../_functions/echo_disabled_comments.html" onMouseOver="funcPopup(event,'echo_disabled_comments')">echo_disabled_comments</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_comments' ), <a class="var it1527" onMouseOver="hilite(1527)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../_variables/item_url.html">$item_url</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1246"><span class="linenum">1246</span></a>          }
<a name="l1247"><span class="linenum">1247</span></a>  
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">        // Current user not allowed to comment in this blog</span>
<a name="l1249"><span class="linenum">1249</span></a>          return false;
<a name="l1250"><span class="linenum">1250</span></a>      }
<a name="l1251"><span class="linenum">1251</span></a>  
<a name="l1252"><span class="linenum">1252</span></a>  
<a name="l1253"><span class="linenum">1253</span></a>      <span class="comment">/**</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment">     * Check if current user is allowed for several action in this post's blog</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">     *</span>
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment">     * @private function</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment">     *</span>
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">     * @param string blog settings name. Param value can be 'allow_comments', 'allow_attachments','allow_rating_items'</span>
<a name="l1259"><span class="linenum">1259</span></a>  <span class="comment">     * @return boolean  true if user is allowed for the corresponding action</span>
<a name="l1260"><span class="linenum">1260</span></a>  <span class="comment">     */</span>
<a name="l1261"><span class="linenum">1261</span></a>  	function <a class="function" onClick="logFunction('check_blog_settings')" href="../../../_functions/check_blog_settings.html" onMouseOver="funcPopup(event,'check_blog_settings')">check_blog_settings</a>( <a class="var it1528" onMouseOver="hilite(1528)" onMouseOut="lolite()" onClick="logVariable('settings_name')" href="../../../_variables/settings_name.html">$settings_name</a> )
<a name="l1262"><span class="linenum">1262</span></a>      {
<a name="l1263"><span class="linenum">1263</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1264"><span class="linenum">1264</span></a>  
<a name="l1265"><span class="linenum">1265</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1266"><span class="linenum">1266</span></a>  
<a name="l1267"><span class="linenum">1267</span></a>          switch( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it1528" onMouseOver="hilite(1528)" onMouseOut="lolite()" onClick="logVariable('settings_name')" href="../../../_variables/settings_name.html">$settings_name</a> ) )
<a name="l1268"><span class="linenum">1268</span></a>          {
<a name="l1269"><span class="linenum">1269</span></a>              case 'never':
<a name="l1270"><span class="linenum">1270</span></a>                  return false;
<a name="l1271"><span class="linenum">1271</span></a>              case 'any':
<a name="l1272"><span class="linenum">1272</span></a>                  return true;
<a name="l1273"><span class="linenum">1273</span></a>              case 'registered':
<a name="l1274"><span class="linenum">1274</span></a>                  return <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false );
<a name="l1275"><span class="linenum">1275</span></a>              case 'member':
<a name="l1276"><span class="linenum">1276</span></a>                  return (<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 'view', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() ) );
<a name="l1277"><span class="linenum">1277</span></a>              case 'moderator':
<a name="l1278"><span class="linenum">1278</span></a>                  return (<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_comments', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() ) );
<a name="l1279"><span class="linenum">1279</span></a>              default:
<a name="l1280"><span class="linenum">1280</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid blog '.<a class="var it1528" onMouseOver="hilite(1528)" onMouseOut="lolite()" onClick="logVariable('settings_name')" href="../../../_variables/settings_name.html">$settings_name</a>.' settings!' );
<a name="l1281"><span class="linenum">1281</span></a>          }
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>          return false;
<a name="l1284"><span class="linenum">1284</span></a>      }
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>  
<a name="l1287"><span class="linenum">1287</span></a>      <span class="comment">/**</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     * Template function: Check if user can attach files to this post comments</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     *</span>
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">     * @return boolean true if user can attach files to this post comments, false if s/he cannot</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">     */</span>
<a name="l1292"><span class="linenum">1292</span></a>  	function <a class="function" onClick="logFunction('can_attach')" href="../../../_functions/can_attach.html" onMouseOver="funcPopup(event,'can_attach')">can_attach</a>()
<a name="l1293"><span class="linenum">1293</span></a>      {
<a name="l1294"><span class="linenum">1294</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>          <a class="var it1529" onMouseOver="hilite(1529)" onMouseOut="lolite()" onClick="logVariable('attachments_quota_is_full')" href="../../../_variables/attachments_quota_is_full.html">$attachments_quota_is_full</a> = false;
<a name="l1297"><span class="linenum">1297</span></a>          if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1298"><span class="linenum">1298</span></a>          {    // We can check the attachments quota only for registered users
<a name="l1299"><span class="linenum">1299</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1300"><span class="linenum">1300</span></a>              <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> = (int)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'max_attachments' );
<a name="l1301"><span class="linenum">1301</span></a>              if( <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> &gt; 0 )
<a name="l1302"><span class="linenum">1302</span></a>              {    // Check attachments quota only when Blog setting &quot;Max # of attachments&quot; is defined
<a name="l1303"><span class="linenum">1303</span></a>                  global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>;
<a name="l1304"><span class="linenum">1304</span></a>  
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">                // Get a number of attachments for current user on this post</span>
<a name="l1306"><span class="linenum">1306</span></a>                  <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('attachments_count')" href="../../../_variables/attachments_count.html">$attachments_count</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attachments_number')" href="../../../_functions/get_attachments_number.html" onMouseOver="funcPopup(event,'get_attachments_number')">get_attachments_number</a>();
<a name="l1307"><span class="linenum">1307</span></a>  
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">                // Get the attachments from preview comment</span>
<a name="l1309"><span class="linenum">1309</span></a>                  global <a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('checked_attachments')" href="../../../_variables/checked_attachments.html">$checked_attachments</a>;
<a name="l1310"><span class="linenum">1310</span></a>                  if( !empty( <a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('checked_attachments')" href="../../../_variables/checked_attachments.html">$checked_attachments</a> ) )
<a name="l1311"><span class="linenum">1311</span></a>                  {    // Calculate also the attachments in the PREVIEW mode
<a name="l1312"><span class="linenum">1312</span></a>                      <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('attachments_count')" href="../../../_variables/attachments_count.html">$attachments_count</a> += <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('checked_attachments')" href="../../../_variables/checked_attachments.html">$checked_attachments</a> ) );
<a name="l1313"><span class="linenum">1313</span></a>                  }
<a name="l1314"><span class="linenum">1314</span></a>  
<a name="l1315"><span class="linenum">1315</span></a>                  if( <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('attachments_count')" href="../../../_variables/attachments_count.html">$attachments_count</a> &gt;= <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> )
<a name="l1316"><span class="linenum">1316</span></a>                  {    // Current user already has max number of attachments on this post
<a name="l1317"><span class="linenum">1317</span></a>                      <a class="var it1529" onMouseOver="hilite(1529)" onMouseOut="lolite()" onClick="logVariable('attachments_quota_is_full')" href="../../../_variables/attachments_quota_is_full.html">$attachments_quota_is_full</a> = true;
<a name="l1318"><span class="linenum">1318</span></a>                  }
<a name="l1319"><span class="linenum">1319</span></a>              }
<a name="l1320"><span class="linenum">1320</span></a>          }
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>          return !<a class="var it1529" onMouseOver="hilite(1529)" onMouseOut="lolite()" onClick="logVariable('attachments_quota_is_full')" href="../../../_variables/attachments_quota_is_full.html">$attachments_quota_is_full</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_blog_settings')" href="../../../_functions/check_blog_settings.html" onMouseOver="funcPopup(event,'check_blog_settings')">check_blog_settings</a>( 'allow_attachments' ) &amp;&amp; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'upload_enabled' );
<a name="l1323"><span class="linenum">1323</span></a>      }
<a name="l1324"><span class="linenum">1324</span></a>  
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>      <span class="comment">/**</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">     * Check if the post contains inline file placeholders without corresponding attachemnt file.</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">     * Removes the invalid inline file placeholders from the item content.</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment">     *</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">     * @param string Content</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment">     * @return string Prepared content</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">     */</span>
<a name="l1333"><span class="linenum">1333</span></a>  	function <a class="function" onClick="logFunction('check_and_clear_inline_files')" href="../../../_functions/check_and_clear_inline_files.html" onMouseOver="funcPopup(event,'check_and_clear_inline_files')">check_and_clear_inline_files</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l1334"><span class="linenum">1334</span></a>      {
<a name="l1335"><span class="linenum">1335</span></a>          <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( '/\[(image|file):(\d+):?[^\]]*\]/i', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it1533" onMouseOver="hilite(1533)" onMouseOut="lolite()" onClick="logVariable('inline_images')" href="../../../_variables/inline_images.html">$inline_images</a> );
<a name="l1336"><span class="linenum">1336</span></a>  
<a name="l1337"><span class="linenum">1337</span></a>          if( empty( <a class="var it1533" onMouseOver="hilite(1533)" onMouseOut="lolite()" onClick="logVariable('inline_images')" href="../../../_variables/inline_images.html">$inline_images</a>[1] ) )
<a name="l1338"><span class="linenum">1338</span></a>          { // There are no inline image placeholders in the post content
<a name="l1339"><span class="linenum">1339</span></a>              return <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l1340"><span class="linenum">1340</span></a>          }
<a name="l1341"><span class="linenum">1341</span></a>  
<a name="l1342"><span class="linenum">1342</span></a>  <span class="comment">        // There are inline image placeholders</span>
<a name="l1343"><span class="linenum">1343</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &gt; 0 )
<a name="l1344"><span class="linenum">1344</span></a>          { // The post is saved, so it can actually have attachments:
<a name="l1345"><span class="linenum">1345</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1346"><span class="linenum">1346</span></a>              <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l1347"><span class="linenum">1347</span></a>              <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'link_ID' );
<a name="l1348"><span class="linenum">1348</span></a>              <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_links' );
<a name="l1349"><span class="linenum">1349</span></a>              <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'link_itm_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l1350"><span class="linenum">1350</span></a>              <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'link_position = &quot;inline&quot;' );
<a name="l1351"><span class="linenum">1351</span></a>              <a class="var it1535" onMouseOver="hilite(1535)" onMouseOut="lolite()" onClick="logVariable('inline_links_IDs')" href="../../../_variables/inline_links_IDs.html">$inline_links_IDs</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it1534" onMouseOver="hilite(1534)" onMouseOut="lolite()" onClick="logVariable('links_SQL')" href="../../../_variables/links_SQL.html">$links_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), 0, 'Get item links IDs of the inline images' );
<a name="l1352"><span class="linenum">1352</span></a>  
<a name="l1353"><span class="linenum">1353</span></a>              <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a> = array();
<a name="l1354"><span class="linenum">1354</span></a>              foreach( <a class="var it1533" onMouseOver="hilite(1533)" onMouseOut="lolite()" onClick="logVariable('inline_images')" href="../../../_variables/inline_images.html">$inline_images</a>[2] as <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> =&gt; <a class="var it1537" onMouseOver="hilite(1537)" onMouseOut="lolite()" onClick="logVariable('inline_link_ID')" href="../../../_variables/inline_link_ID.html">$inline_link_ID</a> )
<a name="l1355"><span class="linenum">1355</span></a>              {
<a name="l1356"><span class="linenum">1356</span></a>                  if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1537" onMouseOver="hilite(1537)" onMouseOut="lolite()" onClick="logVariable('inline_link_ID')" href="../../../_variables/inline_link_ID.html">$inline_link_ID</a>, <a class="var it1535" onMouseOver="hilite(1535)" onMouseOut="lolite()" onClick="logVariable('inline_links_IDs')" href="../../../_variables/inline_links_IDs.html">$inline_links_IDs</a> ) )
<a name="l1357"><span class="linenum">1357</span></a>                  { // This inline image must be removed from content
<a name="l1358"><span class="linenum">1358</span></a>                      <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a>[] = <a class="var it1533" onMouseOver="hilite(1533)" onMouseOut="lolite()" onClick="logVariable('inline_images')" href="../../../_variables/inline_images.html">$inline_images</a>[0][ <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> ];
<a name="l1359"><span class="linenum">1359</span></a>                  }
<a name="l1360"><span class="linenum">1360</span></a>              }
<a name="l1361"><span class="linenum">1361</span></a>          }
<a name="l1362"><span class="linenum">1362</span></a>          else
<a name="l1363"><span class="linenum">1363</span></a>          { // The post is not saved yet, so it can not contains attachments. None of the placeholders are used.
<a name="l1364"><span class="linenum">1364</span></a>              <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a> = <a class="var it1533" onMouseOver="hilite(1533)" onMouseOut="lolite()" onClick="logVariable('inline_images')" href="../../../_variables/inline_images.html">$inline_images</a>[0];
<a name="l1365"><span class="linenum">1365</span></a>          }
<a name="l1366"><span class="linenum">1366</span></a>  
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">        // Clear the unused inline images from content</span>
<a name="l1368"><span class="linenum">1368</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a> ) )
<a name="l1369"><span class="linenum">1369</span></a>          { // Remove all unused inline images from the content
<a name="l1370"><span class="linenum">1370</span></a>              global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l1371"><span class="linenum">1371</span></a>              <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a> );
<a name="l1372"><span class="linenum">1372</span></a>              <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('replace_content_outcode')" href="../../../_functions/replace_content_outcode.html" onMouseOver="funcPopup(event,'replace_content_outcode')">replace_content_outcode</a>( <a class="var it1536" onMouseOver="hilite(1536)" onMouseOut="lolite()" onClick="logVariable('unused_inline_images')" href="../../../_variables/unused_inline_images.html">$unused_inline_images</a>, '', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'replace_content', 'str' );
<a name="l1373"><span class="linenum">1373</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Invalid inline file placeholders won\'t be displayed.'), 'note' );
<a name="l1374"><span class="linenum">1374</span></a>          }
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>          return <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l1377"><span class="linenum">1377</span></a>      }
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>      <span class="comment">/**</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment">     * Get a number of attachments on this post</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment">     *</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment">     * @param object User</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment">     * @return integer Number of attachments</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">     */</span>
<a name="l1386"><span class="linenum">1386</span></a>  	function <a class="function" onClick="logFunction('get_attachments_number')" href="../../../_functions/get_attachments_number.html" onMouseOver="funcPopup(event,'get_attachments_number')">get_attachments_number</a>( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = NULL )
<a name="l1387"><span class="linenum">1387</span></a>      {
<a name="l1388"><span class="linenum">1388</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a>;
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> ) )
<a name="l1391"><span class="linenum">1391</span></a>          {    // Use current user by default
<a name="l1392"><span class="linenum">1392</span></a>              global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1393"><span class="linenum">1393</span></a>              <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1394"><span class="linenum">1394</span></a>          }
<a name="l1395"><span class="linenum">1395</span></a>  
<a name="l1396"><span class="linenum">1396</span></a>          if( !isset( <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a> ) )
<a name="l1397"><span class="linenum">1397</span></a>          {    // Init cache variable at first time
<a name="l1398"><span class="linenum">1398</span></a>              <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a> = array();
<a name="l1399"><span class="linenum">1399</span></a>          }
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>          if( isset( <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a>[<a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] ) )
<a name="l1402"><span class="linenum">1402</span></a>          {    // Get a number of attachments from cache variable
<a name="l1403"><span class="linenum">1403</span></a>              return <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a>[<a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>];
<a name="l1404"><span class="linenum">1404</span></a>          }
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">        // Get a number of attachments from DB</span>
<a name="l1407"><span class="linenum">1407</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l1408"><span class="linenum">1408</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>( link_ID )' );
<a name="l1409"><span class="linenum">1409</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_links' );
<a name="l1410"><span class="linenum">1410</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_comments ON comment_ID = link_cmt_ID' );
<a name="l1411"><span class="linenum">1411</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'link_creator_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l1412"><span class="linenum">1412</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'comment_item_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l1413"><span class="linenum">1413</span></a>          <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a>[<a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] = (int)<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l1414"><span class="linenum">1414</span></a>  
<a name="l1415"><span class="linenum">1415</span></a>          return <a class="var it1538" onMouseOver="hilite(1538)" onMouseOut="lolite()" onClick="logVariable('cache_item_attachments_number')" href="../../../_variables/cache_item_attachments_number.html">$cache_item_attachments_number</a>[<a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>];
<a name="l1416"><span class="linenum">1416</span></a>      }
<a name="l1417"><span class="linenum">1417</span></a>  
<a name="l1418"><span class="linenum">1418</span></a>  
<a name="l1419"><span class="linenum">1419</span></a>      <span class="comment">/**</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment">     * Get how much files user can attach on this post yet</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">     *</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">     * @param object User</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment">     * @return integer|string Number of files which current user can attach to this post | 'unlimit'</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">     */</span>
<a name="l1425"><span class="linenum">1425</span></a>  	function <a class="function" onClick="logFunction('get_attachments_limit')" href="../../../_functions/get_attachments_limit.html" onMouseOver="funcPopup(event,'get_attachments_limit')">get_attachments_limit</a>( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = NULL )
<a name="l1426"><span class="linenum">1426</span></a>      {
<a name="l1427"><span class="linenum">1427</span></a>          if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1428"><span class="linenum">1428</span></a>          {    // We can check the attachments quota only for registered users
<a name="l1429"><span class="linenum">1429</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1430"><span class="linenum">1430</span></a>              <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> = (int)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'max_attachments' );
<a name="l1431"><span class="linenum">1431</span></a>              if( <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> &gt; 0 )
<a name="l1432"><span class="linenum">1432</span></a>              {    // Get a limit only when Blog setting &quot;Max # of attachments&quot; is defined
<a name="l1433"><span class="linenum">1433</span></a>                  return <a class="var it1530" onMouseOver="hilite(1530)" onMouseOut="lolite()" onClick="logVariable('max_attachments')" href="../../../_variables/max_attachments.html">$max_attachments</a> - <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attachments_number')" href="../../../_functions/get_attachments_number.html" onMouseOver="funcPopup(event,'get_attachments_number')">get_attachments_number</a>( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> );
<a name="l1434"><span class="linenum">1434</span></a>              }
<a name="l1435"><span class="linenum">1435</span></a>          }
<a name="l1436"><span class="linenum">1436</span></a>  
<a name="l1437"><span class="linenum">1437</span></a>          return 'unlimit';
<a name="l1438"><span class="linenum">1438</span></a>      }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>  
<a name="l1441"><span class="linenum">1441</span></a>      <span class="comment">/**</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">     * Template function: Check if user can rate this post</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">     *</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">     * @return boolean true if user can post, false if s/he cannot</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">     */</span>
<a name="l1446"><span class="linenum">1446</span></a>  	function <a class="function" onClick="logFunction('can_rate')" href="../../../_functions/can_rate.html" onMouseOver="funcPopup(event,'can_rate')">can_rate</a>()
<a name="l1447"><span class="linenum">1447</span></a>      {
<a name="l1448"><span class="linenum">1448</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_blog_settings')" href="../../../_functions/check_blog_settings.html" onMouseOver="funcPopup(event,'check_blog_settings')">check_blog_settings</a>( 'allow_rating_items' );
<a name="l1449"><span class="linenum">1449</span></a>      }
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>      <span class="comment">/**</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     * Get the prerendered content. If it has not been generated yet, it will.</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     *</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * NOTE: This calls {@link Item::dbupdate()}, if renderers get changed (from Plugin hook).</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     *       (not for preview though)</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     *</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     * @param string Format, see {@link format_to_output()}.</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     *        Only &quot;htmlbody&quot;, &quot;entityencoded&quot;, &quot;xml&quot; and &quot;text&quot; get cached.</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">     * @return string</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment">     */</span>
<a name="l1462"><span class="linenum">1462</span></a>  	function <a class="function" onClick="logFunction('get_prerendered_content')" href="../../../_functions/get_prerendered_content.html" onMouseOver="funcPopup(event,'get_prerendered_content')">get_prerendered_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l1463"><span class="linenum">1463</span></a>      {
<a name="l1464"><span class="linenum">1464</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l1465"><span class="linenum">1465</span></a>          global <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>;
<a name="l1466"><span class="linenum">1466</span></a>  
<a name="l1467"><span class="linenum">1467</span></a>          if( <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a> )
<a name="l1468"><span class="linenum">1468</span></a>          {
<a name="l1469"><span class="linenum">1469</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_renderers_from_Plugins')" href="../../../_functions/update_renderers_from_plugins.html" onMouseOver="funcPopup(event,'update_renderers_from_plugins')">update_renderers_from_Plugins</a>();
<a name="l1470"><span class="linenum">1470</span></a>              <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>();
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">            // Call RENDERER plugins:</span>
<a name="l1473"><span class="linenum">1473</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>;
<a name="l1474"><span class="linenum">1474</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> <span class="comment">/* by ref */</span>, <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array( 'Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ), 'Render' );
<a name="l1475"><span class="linenum">1475</span></a>  
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">            // Check and clear inline files, to avoid to have placeholders without corresponding attachment</span>
<a name="l1477"><span class="linenum">1477</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_and_clear_inline_files')" href="../../../_functions/check_and_clear_inline_files.html" onMouseOver="funcPopup(event,'check_and_clear_inline_files')">check_and_clear_inline_files</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1478"><span class="linenum">1478</span></a>  
<a name="l1479"><span class="linenum">1479</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_breaks' ) )
<a name="l1480"><span class="linenum">1480</span></a>              {    // Don't use the content separators for intro items and if it is disabled by item type:
<a name="l1481"><span class="linenum">1481</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('replace_content_outcode')" href="../../../_functions/replace_content_outcode.html" onMouseOver="funcPopup(event,'replace_content_outcode')">replace_content_outcode</a>( array( '[teaserbreak]', '[pagebreak]' ), '', <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, 'replace_content', 'str' );
<a name="l1482"><span class="linenum">1482</span></a>              }
<a name="l1483"><span class="linenum">1483</span></a>  
<a name="l1484"><span class="linenum">1484</span></a>              return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1485"><span class="linenum">1485</span></a>          }
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>  
<a name="l1488"><span class="linenum">1488</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = null;
<a name="l1489"><span class="linenum">1489</span></a>  
<a name="l1490"><span class="linenum">1490</span></a>          <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>();
<a name="l1491"><span class="linenum">1491</span></a>          <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> = <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.'/'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('.', <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>); <span class="comment">// logic gets used below, for setting cache, too.</span>
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>          <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array('htmlbody', 'entityencoded', 'xml', 'text') );
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>  <span class="comment">        // $use_cache = false;</span>
<a name="l1496"><span class="linenum">1496</span></a>  
<a name="l1497"><span class="linenum">1497</span></a>          if( <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> )
<a name="l1498"><span class="linenum">1498</span></a>          { // the format/item can be cached:
<a name="l1499"><span class="linenum">1499</span></a>              <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a> = &amp; get_ItemPrerenderingCache();
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>              if( isset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]) )
<a name="l1502"><span class="linenum">1502</span></a>              { // already in PHP cache.
<a name="l1503"><span class="linenum">1503</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>];
<a name="l1504"><span class="linenum">1504</span></a>  <span class="comment">                // Save memory, typically only accessed once.</span>
<a name="l1505"><span class="linenum">1505</span></a>                  unset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]);
<a name="l1506"><span class="linenum">1506</span></a>              }
<a name="l1507"><span class="linenum">1507</span></a>              else
<a name="l1508"><span class="linenum">1508</span></a>              {    // Try loading from DB cache, including all items in MainList/ItemList.
<a name="l1509"><span class="linenum">1509</span></a>                  global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>                  if( ! isset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>]) )
<a name="l1512"><span class="linenum">1512</span></a>                  { // only do the prefetch loading once.
<a name="l1513"><span class="linenum">1513</span></a>                      <a class="var it1542" onMouseOver="hilite(1542)" onMouseOut="lolite()" onClick="logVariable('prefetch_IDs')" href="../../../_variables/prefetch_IDs.html">$prefetch_IDs</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_prefetch_itemlist_IDs')" href="../../../_functions/get_prefetch_itemlist_ids.html" onMouseOver="funcPopup(event,'get_prefetch_itemlist_ids')">get_prefetch_itemlist_IDs</a>();
<a name="l1514"><span class="linenum">1514</span></a>  
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">                    // Load prerendered content for all items in MainList/ItemList.</span>
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment">                    // We load the current $format only, since it's most likely that only one gets used.</span>
<a name="l1517"><span class="linenum">1517</span></a>                      <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>] = array();
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>                      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../../../_variables/rows.html">$rows</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( &quot;
<a name="l1520"><span class="linenum">1520</span></a>                          SELECT itpr_itm_ID, itpr_format, itpr_renderers, itpr_content_prerendered
<a name="l1521"><span class="linenum">1521</span></a>                              FROM T_items__prerendering
<a name="l1522"><span class="linenum">1522</span></a>                           WHERE itpr_itm_ID IN (&quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1542" onMouseOver="hilite(1542)" onMouseOut="lolite()" onClick="logVariable('prefetch_IDs')" href="../../../_variables/prefetch_IDs.html">$prefetch_IDs</a> ).&quot;)
<a name="l1523"><span class="linenum">1523</span></a>                               AND itpr_format = '&quot;.<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.&quot;'&quot;,
<a name="l1524"><span class="linenum">1524</span></a>                               <a class="constant" onClick="logConstant('OBJECT')" href="../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, 'Preload prerendered item content for MainList/ItemList ('.<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.')' );
<a name="l1525"><span class="linenum">1525</span></a>                      foreach(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../../../_variables/rows.html">$rows</a> as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>)
<a name="l1526"><span class="linenum">1526</span></a>                      {
<a name="l1527"><span class="linenum">1527</span></a>                          <a class="var it1543" onMouseOver="hilite(1543)" onMouseOut="lolite()" onClick="logVariable('row_cache_key')" href="../../../_variables/row_cache_key.html">$row_cache_key</a> = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_format')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_format.html">itpr_format</a>.'/'.<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_renderers')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_renderers.html">itpr_renderers</a>;
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>                          if( ! isset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_itm_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_itm_ID.html">itpr_itm_ID</a>]) )
<a name="l1530"><span class="linenum">1530</span></a>                          { // init list
<a name="l1531"><span class="linenum">1531</span></a>                              <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_itm_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_itm_ID.html">itpr_itm_ID</a>] = array();
<a name="l1532"><span class="linenum">1532</span></a>                          }
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>                          <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_itm_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_itm_ID.html">itpr_itm_ID</a>][<a class="var it1543" onMouseOver="hilite(1543)" onMouseOut="lolite()" onClick="logVariable('row_cache_key')" href="../../../_variables/row_cache_key.html">$row_cache_key</a>] = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itpr_content_prerendered')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itpr_content_prerendered.html">itpr_content_prerendered</a>;
<a name="l1535"><span class="linenum">1535</span></a>                      }
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">                    // Set the value for current Item.</span>
<a name="l1538"><span class="linenum">1538</span></a>                      if( isset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]) )
<a name="l1539"><span class="linenum">1539</span></a>                      {
<a name="l1540"><span class="linenum">1540</span></a>                          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>];
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment">                        // Save memory, typically only accessed once.</span>
<a name="l1542"><span class="linenum">1542</span></a>                          unset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]);
<a name="l1543"><span class="linenum">1543</span></a>                      }
<a name="l1544"><span class="linenum">1544</span></a>                  }
<a name="l1545"><span class="linenum">1545</span></a>                  else
<a name="l1546"><span class="linenum">1546</span></a>                  { // This item has not been fetched by the initial prefetch query; only get this item.
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">                    // dh&gt; This is quite unlikely to happen, but you never know.</span>
<a name="l1548"><span class="linenum">1548</span></a>  <span class="comment">                    // This gets not added to ItemPrerenderingCache, since it would only waste</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">                    // memory - an item gets typically only accessed once per page, and even if</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">                    // it would get accessed more often, there is a cache higher in the chain</span>
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">                    // ($this-&gt;content_pages).</span>
<a name="l1552"><span class="linenum">1552</span></a>                      <a class="var it914" onMouseOver="hilite(914)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../../_variables/cache.html">$cache</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( &quot;
<a name="l1553"><span class="linenum">1553</span></a>                          SELECT itpr_content_prerendered
<a name="l1554"><span class="linenum">1554</span></a>                              FROM T_items__prerendering
<a name="l1555"><span class="linenum">1555</span></a>                           WHERE itpr_itm_ID = &quot;.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.&quot;
<a name="l1556"><span class="linenum">1556</span></a>                               AND itpr_format = '&quot;.<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.&quot;'
<a name="l1557"><span class="linenum">1557</span></a>                               AND itpr_renderers = '&quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('.', <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>).&quot;'&quot;, 0, 0, 'Check prerendered item content' );
<a name="l1558"><span class="linenum">1558</span></a>                      if( <a class="var it914" onMouseOver="hilite(914)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../../_variables/cache.html">$cache</a> !== NULL ) // may be empty string
<a name="l1559"><span class="linenum">1559</span></a>                      { // Retrieved from cache:
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">                        // echo ' retrieved from prerendered cache';</span>
<a name="l1561"><span class="linenum">1561</span></a>                          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it914" onMouseOver="hilite(914)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../../_variables/cache.html">$cache</a>;
<a name="l1562"><span class="linenum">1562</span></a>                      }
<a name="l1563"><span class="linenum">1563</span></a>                  }
<a name="l1564"><span class="linenum">1564</span></a>              }
<a name="l1565"><span class="linenum">1565</span></a>          }
<a name="l1566"><span class="linenum">1566</span></a>  
<a name="l1567"><span class="linenum">1567</span></a>          if( ! isset( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l1568"><span class="linenum">1568</span></a>          { // Not cached yet:
<a name="l1569"><span class="linenum">1569</span></a>              global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l1570"><span class="linenum">1570</span></a>  
<a name="l1571"><span class="linenum">1571</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_renderers_from_Plugins')" href="../../../_functions/update_renderers_from_plugins.html" onMouseOver="funcPopup(event,'update_renderers_from_plugins')">update_renderers_from_Plugins</a>() )
<a name="l1572"><span class="linenum">1572</span></a>              {
<a name="l1573"><span class="linenum">1573</span></a>                  <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(); <span class="comment">// might have changed from call above</span>
<a name="l1574"><span class="linenum">1574</span></a>                  <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> = <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.'/'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('.', <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>);
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment">                // Save new renderers with item:</span>
<a name="l1577"><span class="linenum">1577</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l1578"><span class="linenum">1578</span></a>              }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">            // Call RENDERER plugins:</span>
<a name="l1581"><span class="linenum">1581</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>;
<a name="l1582"><span class="linenum">1582</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> <span class="comment">/* by ref */</span>, <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array( 'Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ), 'Render' );
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">            // Check and clear inline files, to avoid to have placeholders without corresponding attachment</span>
<a name="l1585"><span class="linenum">1585</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_and_clear_inline_files')" href="../../../_functions/check_and_clear_inline_files.html" onMouseOver="funcPopup(event,'check_and_clear_inline_files')">check_and_clear_inline_files</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1586"><span class="linenum">1586</span></a>  
<a name="l1587"><span class="linenum">1587</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_breaks' ) )
<a name="l1588"><span class="linenum">1588</span></a>              {    // Don't use the content separators for intro items and if it is disabled by item type:
<a name="l1589"><span class="linenum">1589</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('replace_content_outcode')" href="../../../_functions/replace_content_outcode.html" onMouseOver="funcPopup(event,'replace_content_outcode')">replace_content_outcode</a>( array( '[teaserbreak]', '[pagebreak]' ), '', <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, 'replace_content', 'str' );
<a name="l1590"><span class="linenum">1590</span></a>              }
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Generated pre-rendered content ['.<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>.'] for item #'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, 'items' );
<a name="l1593"><span class="linenum">1593</span></a>  
<a name="l1594"><span class="linenum">1594</span></a>              if( <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> )
<a name="l1595"><span class="linenum">1595</span></a>              { // save into DB (using REPLACE INTO because it may have been pre-rendered by another thread since the SELECT above)
<a name="l1596"><span class="linenum">1596</span></a>                  global <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l1597"><span class="linenum">1597</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'REPLACE INTO T_items__prerendering ( itpr_itm_ID, itpr_format, itpr_renderers, itpr_content_prerendered, itpr_datemodified )
<a name="l1598"><span class="linenum">1598</span></a>                      VALUES ( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '.', <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> ) ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> ) ).' )', 'Cache prerendered item content' );
<a name="l1599"><span class="linenum">1599</span></a>              }
<a name="l1600"><span class="linenum">1600</span></a>          }
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1603"><span class="linenum">1603</span></a>      }
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>  
<a name="l1606"><span class="linenum">1606</span></a>      <span class="comment">/**</span>
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">     * Unset any prerendered content for this item (in PHP cache).</span>
<a name="l1608"><span class="linenum">1608</span></a>  <span class="comment">     */</span>
<a name="l1609"><span class="linenum">1609</span></a>  	function <a class="function" onClick="logFunction('delete_prerendered_content')" href="../../../_functions/delete_prerendered_content.html" onMouseOver="funcPopup(event,'delete_prerendered_content')">delete_prerendered_content</a>()
<a name="l1610"><span class="linenum">1610</span></a>      {
<a name="l1611"><span class="linenum">1611</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">        // Delete DB rows.</span>
<a name="l1614"><span class="linenum">1614</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_items__prerendering WHERE itpr_itm_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">        // Delete cache.</span>
<a name="l1617"><span class="linenum">1617</span></a>          <a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a> = &amp; get_ItemPrerenderingCache();
<a name="l1618"><span class="linenum">1618</span></a>          foreach( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>) as <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l1619"><span class="linenum">1619</span></a>          {
<a name="l1620"><span class="linenum">1620</span></a>              unset(<a class="var it1541" onMouseOver="hilite(1541)" onMouseOut="lolite()" onClick="logVariable('ItemPrerenderingCache')" href="../../../_variables/ItemPrerenderingCache.html">$ItemPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>]);
<a name="l1621"><span class="linenum">1621</span></a>          }
<a name="l1622"><span class="linenum">1622</span></a>  
<a name="l1623"><span class="linenum">1623</span></a>  <span class="comment">        // Delete derived properties.</span>
<a name="l1624"><span class="linenum">1624</span></a>          unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>);
<a name="l1625"><span class="linenum">1625</span></a>      }
<a name="l1626"><span class="linenum">1626</span></a>  
<a name="l1627"><span class="linenum">1627</span></a>  
<a name="l1628"><span class="linenum">1628</span></a>      <span class="comment">/**</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment">     * Trigger {@link Plugin::ItemApplyAsRenderer()} event and adjust renderers according</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">     * to return value.</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment">     * @return boolean True if renderers got changed.</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment">     */</span>
<a name="l1633"><span class="linenum">1633</span></a>  	function <a class="function" onClick="logFunction('update_renderers_from_Plugins')" href="../../../_functions/update_renderers_from_plugins.html" onMouseOver="funcPopup(event,'update_renderers_from_plugins')">update_renderers_from_Plugins</a>()
<a name="l1634"><span class="linenum">1634</span></a>      {
<a name="l1635"><span class="linenum">1635</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = false;
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>          if( !isset(<a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>) )
<a name="l1640"><span class="linenum">1640</span></a>          {    // This can happen in maintenance modules running with minimal init, during install, or in tests.
<a name="l1641"><span class="linenum">1641</span></a>              return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1642"><span class="linenum">1642</span></a>          }
<a name="l1643"><span class="linenum">1643</span></a>  
<a name="l1644"><span class="linenum">1644</span></a>          foreach( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_list_by_event')" href="../../../_functions/get_list_by_event.html" onMouseOver="funcPopup(event,'get_list_by_event')">get_list_by_event</a>('ItemApplyAsRenderer') as <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a> )
<a name="l1645"><span class="linenum">1645</span></a>          {
<a name="l1646"><span class="linenum">1646</span></a>              if( empty(<a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it10689" onMouseOver="hilite(10689)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a>) )
<a name="l1647"><span class="linenum">1647</span></a>                  continue;
<a name="l1648"><span class="linenum">1648</span></a>  
<a name="l1649"><span class="linenum">1649</span></a>              <a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../../_variables/plugin_r.html">$plugin_r</a> = <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('ItemApplyAsRenderer')" href="../../../_functions/itemapplyasrenderer.html" onMouseOver="funcPopup(event,'itemapplyasrenderer')">ItemApplyAsRenderer</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a> = array('Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>) );
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>              if( <a class="phpfunction" onClick="logFunction('is_bool')" href="../../../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../../_variables/plugin_r.html">$plugin_r</a>) )
<a name="l1652"><span class="linenum">1652</span></a>              {
<a name="l1653"><span class="linenum">1653</span></a>                  if( <a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../../_variables/plugin_r.html">$plugin_r</a> )
<a name="l1654"><span class="linenum">1654</span></a>                  {
<a name="l1655"><span class="linenum">1655</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_renderer')" href="../../../_functions/add_renderer.html" onMouseOver="funcPopup(event,'add_renderer')">add_renderer</a>( <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it10689" onMouseOver="hilite(10689)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> ) || <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1656"><span class="linenum">1656</span></a>                  }
<a name="l1657"><span class="linenum">1657</span></a>                  else
<a name="l1658"><span class="linenum">1658</span></a>                  {
<a name="l1659"><span class="linenum">1659</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove_renderer')" href="../../../_functions/remove_renderer.html" onMouseOver="funcPopup(event,'remove_renderer')">remove_renderer</a>( <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it10689" onMouseOver="hilite(10689)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> ) || <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1660"><span class="linenum">1660</span></a>                  }
<a name="l1661"><span class="linenum">1661</span></a>              }
<a name="l1662"><span class="linenum">1662</span></a>          }
<a name="l1663"><span class="linenum">1663</span></a>  
<a name="l1664"><span class="linenum">1664</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1665"><span class="linenum">1665</span></a>      }
<a name="l1666"><span class="linenum">1666</span></a>  
<a name="l1667"><span class="linenum">1667</span></a>  
<a name="l1668"><span class="linenum">1668</span></a>      <span class="comment">/**</span>
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment">     * Display excerpt of an item.</span>
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">     * @param array Associative list of params</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">     *   - before</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment">     *   - after</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">     *   - excerpt_before_more</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">     *   - excerpt_after_more</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment">     *   - excerpt_more_text</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">     *   - format</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment">     *   - allow_empty: force generation if excert is empty (Default: false)</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">     *   - update_db: update the DB if we generated an excerpt (Default: true)</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">     */</span>
<a name="l1680"><span class="linenum">1680</span></a>  	function <a class="function" onClick="logFunction('excerpt')" href="../../../_functions/excerpt.html" onMouseOver="funcPopup(event,'excerpt')">excerpt</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1681"><span class="linenum">1681</span></a>      {
<a name="l1682"><span class="linenum">1682</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1683"><span class="linenum">1683</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1684"><span class="linenum">1684</span></a>                  'before'              =&gt; '&lt;div class=&quot;excerpt&quot;&gt;',
<a name="l1685"><span class="linenum">1685</span></a>                  'after'               =&gt; '&lt;/div&gt;',
<a name="l1686"><span class="linenum">1686</span></a>                  'excerpt_before_more' =&gt; ' &lt;span class=&quot;excerpt_more&quot;&gt;',
<a name="l1687"><span class="linenum">1687</span></a>                  'excerpt_after_more'  =&gt; '&lt;/span&gt;',
<a name="l1688"><span class="linenum">1688</span></a>                  'excerpt_more_text'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('more').' &amp;raquo;',
<a name="l1689"><span class="linenum">1689</span></a>                  'format'              =&gt; 'htmlbody',
<a name="l1690"><span class="linenum">1690</span></a>                  'allow_empty'         =&gt; false,
<a name="l1691"><span class="linenum">1691</span></a>                  'update_db'           =&gt; true,
<a name="l1692"><span class="linenum">1692</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_excerpt2')" href="../../../_functions/get_excerpt2.html" onMouseOver="funcPopup(event,'get_excerpt2')">get_excerpt2</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1695"><span class="linenum">1695</span></a>  
<a name="l1696"><span class="linenum">1696</span></a>          if( ! empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l1697"><span class="linenum">1697</span></a>          {
<a name="l1698"><span class="linenum">1698</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l1699"><span class="linenum">1699</span></a>              echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l1700"><span class="linenum">1700</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['excerpt_more_text'] ) )
<a name="l1701"><span class="linenum">1701</span></a>              {
<a name="l1702"><span class="linenum">1702</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['excerpt_before_more'];
<a name="l1703"><span class="linenum">1703</span></a>                  echo '&lt;a href=&quot;'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'&quot; class=&quot;nowrap&quot;&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['excerpt_more_text'].'&lt;/a&gt;';
<a name="l1704"><span class="linenum">1704</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['excerpt_after_more'];
<a name="l1705"><span class="linenum">1705</span></a>              }
<a name="l1706"><span class="linenum">1706</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1707"><span class="linenum">1707</span></a>          }
<a name="l1708"><span class="linenum">1708</span></a>      }
<a name="l1709"><span class="linenum">1709</span></a>  
<a name="l1710"><span class="linenum">1710</span></a>  
<a name="l1711"><span class="linenum">1711</span></a>      <span class="comment">/**</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment">     * Template tag: get excerpt 2 (Full version)</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment">     * This full version may auto-generate an excerpt if it is found to be empty.</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment">     *</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment">     * @param array Associative list of params</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">     *   - allow_empty: force generation if excert is empty (Default: false)</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment">     *   - update_db: update the DB if we generated an excerpt (Default: true)</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment">     * @return string</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">     */</span>
<a name="l1720"><span class="linenum">1720</span></a>  	function <a class="function" onClick="logFunction('get_excerpt2')" href="../../../_functions/get_excerpt2.html" onMouseOver="funcPopup(event,'get_excerpt2')">get_excerpt2</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1721"><span class="linenum">1721</span></a>      {
<a name="l1722"><span class="linenum">1722</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> += array(
<a name="l1723"><span class="linenum">1723</span></a>              'allow_empty' =&gt; false,
<a name="l1724"><span class="linenum">1724</span></a>              'update_db' =&gt; true,
<a name="l1725"><span class="linenum">1725</span></a>              );
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>          if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['allow_empty'] )
<a name="l1728"><span class="linenum">1728</span></a>          {    // Make sure excerpt the excerpt is not empty by updating it automatically if needed:
<a name="l1729"><span class="linenum">1729</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_excerpt')" href="../../../_functions/update_excerpt.html" onMouseOver="funcPopup(event,'update_excerpt')">update_excerpt</a>() &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['update_db'] &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l1730"><span class="linenum">1730</span></a>              {    // We have updated... let's also update the DB:
<a name="l1731"><span class="linenum">1731</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( false );        <span class="comment">// Do not auto track modification date.</span>
<a name="l1732"><span class="linenum">1732</span></a>              }
<a name="l1733"><span class="linenum">1733</span></a>          }
<a name="l1734"><span class="linenum">1734</span></a>  
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">        // Old DBs may have tags in exceprts, so we strip them:</span>
<a name="l1736"><span class="linenum">1736</span></a>          return <a class="function" onClick="logFunction('utf8_strip_tags')" href="../../../_functions/utf8_strip_tags.html" onMouseOver="funcPopup(event,'utf8_strip_tags')">utf8_strip_tags</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> );
<a name="l1737"><span class="linenum">1737</span></a>      }
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>      <span class="comment">/**</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">     * Make sure, the pages have been obtained (and split up_ from prerendered cache.</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment">     *</span>
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment">     * @param string Format, used to retrieve the matching cache; see {@link format_to_output()}</span>
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">     */</span>
<a name="l1745"><span class="linenum">1745</span></a>  	function <a class="function" onClick="logFunction('split_pages')" href="../../../_functions/split_pages.html" onMouseOver="funcPopup(event,'split_pages')">split_pages</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l1746"><span class="linenum">1746</span></a>      {
<a name="l1747"><span class="linenum">1747</span></a>          if( ! isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[ <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] ) )
<a name="l1748"><span class="linenum">1748</span></a>          {
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment">            // SPLIT PAGES:</span>
<a name="l1750"><span class="linenum">1750</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[ <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] = <a class="function" onClick="logFunction('split_outcode')" href="../../../_functions/split_outcode.html" onMouseOver="funcPopup(event,'split_outcode')">split_outcode</a>( '[pagebreak]', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_prerendered_content')" href="../../../_functions/get_prerendered_content.html" onMouseOver="funcPopup(event,'get_prerendered_content')">get_prerendered_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ) );
<a name="l1751"><span class="linenum">1751</span></a>  
<a name="l1752"><span class="linenum">1752</span></a>  <span class="comment">            // Balance HTML tags</span>
<a name="l1753"><span class="linenum">1753</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[ <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>( 'balance_tags', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[ <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] );
<a name="l1754"><span class="linenum">1754</span></a>  
<a name="l1755"><span class="linenum">1755</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pages.html">pages</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[ <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] );
<a name="l1756"><span class="linenum">1756</span></a>          }
<a name="l1757"><span class="linenum">1757</span></a>      }
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>  
<a name="l1760"><span class="linenum">1760</span></a>      <span class="comment">/**</span>
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment">     * Get a specific page to display (from the prerendered cache)</span>
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment">     *</span>
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment">     * @param integer Page number, NULL/&quot;#&quot; for current</span>
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment">     * @param string Format, used to retrieve the matching cache; see {@link format_to_output()}</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">     */</span>
<a name="l1766"><span class="linenum">1766</span></a>  	function <a class="function" onClick="logFunction('get_content_page')" href="../../../_functions/get_content_page.html" onMouseOver="funcPopup(event,'get_content_page')">get_content_page</a>( <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> = NULL, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l1767"><span class="linenum">1767</span></a>      {
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment">        // Get requested content page:</span>
<a name="l1769"><span class="linenum">1769</span></a>          if( ! isset(<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a>) || <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> === '#' )
<a name="l1770"><span class="linenum">1770</span></a>          { // We want to display the page requested by the user:
<a name="l1771"><span class="linenum">1771</span></a>              <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> = isset(<a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>['page']) ? <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>['page'] : 1;
<a name="l1772"><span class="linenum">1772</span></a>          }
<a name="l1773"><span class="linenum">1773</span></a>  
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment">        // Make sure, the pages are split up:</span>
<a name="l1775"><span class="linenum">1775</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('split_pages')" href="../../../_functions/split_pages.html" onMouseOver="funcPopup(event,'split_pages')">split_pages</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l1776"><span class="linenum">1776</span></a>  
<a name="l1777"><span class="linenum">1777</span></a>          if( <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> &lt; 1 )
<a name="l1778"><span class="linenum">1778</span></a>          {
<a name="l1779"><span class="linenum">1779</span></a>              <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> = 1;
<a name="l1780"><span class="linenum">1780</span></a>          }
<a name="l1781"><span class="linenum">1781</span></a>  
<a name="l1782"><span class="linenum">1782</span></a>          if( <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> &gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pages.html">pages</a> )
<a name="l1783"><span class="linenum">1783</span></a>          {
<a name="l1784"><span class="linenum">1784</span></a>              <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pages.html">pages</a>;
<a name="l1785"><span class="linenum">1785</span></a>          }
<a name="l1786"><span class="linenum">1786</span></a>  
<a name="l1787"><span class="linenum">1787</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_pages.html">content_pages</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a>-1];
<a name="l1788"><span class="linenum">1788</span></a>      }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>  
<a name="l1791"><span class="linenum">1791</span></a>      <span class="comment">/**</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">     * This is like a teaser with no HTML and a cropping.</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment">     *</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment">     * Note: Excerpt and Teaser are TWO DIFFERENT THINGS.</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment">     *</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment">     * @param int Max length of excerpt</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment">     * @return string</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">     */</span>
<a name="l1799"><span class="linenum">1799</span></a>  	function <a class="function" onClick="logFunction('get_content_excerpt')" href="../../../_functions/get_content_excerpt.html" onMouseOver="funcPopup(event,'get_content_excerpt')">get_content_excerpt</a>( <a class="var it1551" onMouseOver="hilite(1551)" onMouseOut="lolite()" onClick="logVariable('crop_at')" href="../../../_variables/crop_at.html">$crop_at</a> = 200 )
<a name="l1800"><span class="linenum">1800</span></a>      {
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment">        // Get teaser for page 1:</span>
<a name="l1802"><span class="linenum">1802</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_teaser')" href="../../../_functions/get_content_teaser.html" onMouseOver="funcPopup(event,'get_content_teaser')">get_content_teaser</a>( 1, false, 'text' );
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>          return <a class="function" onClick="logFunction('excerpt')" href="../../../_functions/excerpt.html" onMouseOver="funcPopup(event,'excerpt')">excerpt</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it1551" onMouseOver="hilite(1551)" onMouseOut="lolite()" onClick="logVariable('crop_at')" href="../../../_variables/crop_at.html">$crop_at</a> );
<a name="l1805"><span class="linenum">1805</span></a>      }
<a name="l1806"><span class="linenum">1806</span></a>  
<a name="l1807"><span class="linenum">1807</span></a>  
<a name="l1808"><span class="linenum">1808</span></a>      <span class="comment">/**</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">     * Display content teaser of item (will stop at &quot;[teaserbreak]&quot;</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment">     */</span>
<a name="l1811"><span class="linenum">1811</span></a>  	function <a class="function" onClick="logFunction('content_teaser')" href="../../../_functions/content_teaser.html" onMouseOver="funcPopup(event,'content_teaser')">content_teaser</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l1812"><span class="linenum">1812</span></a>      {
<a name="l1813"><span class="linenum">1813</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1814"><span class="linenum">1814</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1815"><span class="linenum">1815</span></a>                  'before'      =&gt; '',
<a name="l1816"><span class="linenum">1816</span></a>                  'after'       =&gt; '',
<a name="l1817"><span class="linenum">1817</span></a>                  'disppage'    =&gt; '#',
<a name="l1818"><span class="linenum">1818</span></a>                  'stripteaser' =&gt; '#',
<a name="l1819"><span class="linenum">1819</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l1820"><span class="linenum">1820</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_teaser')" href="../../../_functions/get_content_teaser.html" onMouseOver="funcPopup(event,'get_content_teaser')">get_content_teaser</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['disppage'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['stripteaser'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1823"><span class="linenum">1823</span></a>  
<a name="l1824"><span class="linenum">1824</span></a>          if( ! empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l1825"><span class="linenum">1825</span></a>          {
<a name="l1826"><span class="linenum">1826</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l1827"><span class="linenum">1827</span></a>              echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1828"><span class="linenum">1828</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1829"><span class="linenum">1829</span></a>          }
<a name="l1830"><span class="linenum">1830</span></a>      }
<a name="l1831"><span class="linenum">1831</span></a>  
<a name="l1832"><span class="linenum">1832</span></a>      <span class="comment">/**</span>
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment">     * Template function: get content teaser of item (will stop at &quot;[teaserbreak]&quot;)</span>
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment">     *</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment">     * @param mixed page number to display specific page, # for url parameter</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment">     * @param boolean # if you don't want to repeat teaser after more link was pressed and &lt;-- noteaser --&gt; has been found</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment">     * @param string filename to use to display more</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">     * @param array Params</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment">     * @return string</span>
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment">     */</span>
<a name="l1841"><span class="linenum">1841</span></a>  	function <a class="function" onClick="logFunction('get_content_teaser')" href="../../../_functions/get_content_teaser.html" onMouseOver="funcPopup(event,'get_content_teaser')">get_content_teaser</a>( <a class="var it1552" onMouseOver="hilite(1552)" onMouseOut="lolite()" onClick="logVariable('disppage')" href="../../../_variables/disppage.html">$disppage</a> = '#', <a class="var it1553" onMouseOver="hilite(1553)" onMouseOut="lolite()" onClick="logVariable('stripteaser')" href="../../../_variables/stripteaser.html">$stripteaser</a> = '#', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1842"><span class="linenum">1842</span></a>      {
<a name="l1843"><span class="linenum">1843</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>, <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l1844"><span class="linenum">1844</span></a>          global <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a>;
<a name="l1845"><span class="linenum">1845</span></a>  
<a name="l1846"><span class="linenum">1846</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, array(
<a name="l1847"><span class="linenum">1847</span></a>                  'disppage' =&gt; <a class="var it1552" onMouseOver="hilite(1552)" onMouseOut="lolite()" onClick="logVariable('disppage')" href="../../../_variables/disppage.html">$disppage</a>,
<a name="l1848"><span class="linenum">1848</span></a>                  'format' =&gt; <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>
<a name="l1849"><span class="linenum">1849</span></a>              ) );
<a name="l1850"><span class="linenum">1850</span></a>  
<a name="l1851"><span class="linenum">1851</span></a>          <a class="var it1554" onMouseOver="hilite(1554)" onMouseOut="lolite()" onClick="logVariable('view_type')" href="../../../_variables/view_type.html">$view_type</a> = 'full';
<a name="l1852"><span class="linenum">1852</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_content_parts')" href="../../../_functions/has_content_parts.html" onMouseOver="funcPopup(event,'has_content_parts')">has_content_parts</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>) )
<a name="l1853"><span class="linenum">1853</span></a>          { // This is an extended <a class="function" onClick="logFunction('post')" href="../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a> (has a more section):
<a name="l1854"><span class="linenum">1854</span></a>              if( <a class="var it1553" onMouseOver="hilite(1553)" onMouseOut="lolite()" onClick="logVariable('stripteaser')" href="../../../_variables/stripteaser.html">$stripteaser</a> === '#' )
<a name="l1855"><span class="linenum">1855</span></a>              {
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment">                // If we're in &quot;more&quot; mode and we want to strip the teaser, we'll strip:</span>
<a name="l1857"><span class="linenum">1857</span></a>                  <a class="var it1553" onMouseOver="hilite(1553)" onMouseOut="lolite()" onClick="logVariable('stripteaser')" href="../../../_variables/stripteaser.html">$stripteaser</a> = ( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'hide_teaser' ) );
<a name="l1858"><span class="linenum">1858</span></a>              }
<a name="l1859"><span class="linenum">1859</span></a>  
<a name="l1860"><span class="linenum">1860</span></a>              if( <a class="var it1553" onMouseOver="hilite(1553)" onMouseOut="lolite()" onClick="logVariable('stripteaser')" href="../../../_variables/stripteaser.html">$stripteaser</a> )
<a name="l1861"><span class="linenum">1861</span></a>              {
<a name="l1862"><span class="linenum">1862</span></a>                  return NULL;
<a name="l1863"><span class="linenum">1863</span></a>              }
<a name="l1864"><span class="linenum">1864</span></a>              <a class="var it1554" onMouseOver="hilite(1554)" onMouseOut="lolite()" onClick="logVariable('view_type')" href="../../../_variables/view_type.html">$view_type</a> = 'teaser';
<a name="l1865"><span class="linenum">1865</span></a>          }
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_parts')" href="../../../_functions/get_content_parts.html" onMouseOver="funcPopup(event,'get_content_parts')">get_content_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1868"><span class="linenum">1868</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>( <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> );
<a name="l1869"><span class="linenum">1869</span></a>  
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment">        // Render Inline Images  [image:123:caption] or [file:123:caption] :</span>
<a name="l1871"><span class="linenum">1871</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['check_code_block'] = true;
<a name="l1872"><span class="linenum">1872</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('render_inline_files')" href="../../../_functions/render_inline_files.html" onMouseOver="funcPopup(event,'render_inline_files')">render_inline_files</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1873"><span class="linenum">1873</span></a>  
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment">        // Trigger Display plugins FOR THE STUFF THAT WOULD NOT BE PRERENDERED:</span>
<a name="l1875"><span class="linenum">1875</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array(
<a name="l1876"><span class="linenum">1876</span></a>                  'Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l1877"><span class="linenum">1877</span></a>                  'preview' =&gt; <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>,
<a name="l1878"><span class="linenum">1878</span></a>                  'dispmore' =&gt; (<a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> != 0),
<a name="l1879"><span class="linenum">1879</span></a>                  'view_type' =&gt; <a class="var it1554" onMouseOver="hilite(1554)" onMouseOut="lolite()" onClick="logVariable('view_type')" href="../../../_variables/view_type.html">$view_type</a>,
<a name="l1880"><span class="linenum">1880</span></a>              ), 'Display' );
<a name="l1881"><span class="linenum">1881</span></a>  
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">        // Character conversions</span>
<a name="l1883"><span class="linenum">1883</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l1884"><span class="linenum">1884</span></a>  
<a name="l1885"><span class="linenum">1885</span></a>          return <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l1886"><span class="linenum">1886</span></a>      }
<a name="l1887"><span class="linenum">1887</span></a>  
<a name="l1888"><span class="linenum">1888</span></a>  
<a name="l1889"><span class="linenum">1889</span></a>      <span class="comment">/**</span>
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">     * Get content parts (split by &quot;[teaserbreak]&quot;).</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment">     *</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment">     * @param array 'disppage', 'format'</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment">     * @return array Array of content parts</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">     */</span>
<a name="l1895"><span class="linenum">1895</span></a>  	function <a class="function" onClick="logFunction('get_content_parts')" href="../../../_functions/get_content_parts.html" onMouseOver="funcPopup(event,'get_content_parts')">get_content_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l1896"><span class="linenum">1896</span></a>      {
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1898"><span class="linenum">1898</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1899"><span class="linenum">1899</span></a>                  'disppage' =&gt; '#',
<a name="l1900"><span class="linenum">1900</span></a>                  'format'   =&gt; 'htmlbody',
<a name="l1901"><span class="linenum">1901</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1902"><span class="linenum">1902</span></a>  
<a name="l1903"><span class="linenum">1903</span></a>          <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_page')" href="../../../_functions/get_content_page.html" onMouseOver="funcPopup(event,'get_content_page')">get_content_page</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['disppage'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] ); <span class="comment">// cannot include format_to_output() because of the magic below.. eg '[teaserbreak]' will get stripped in &quot;xml&quot;</span>
<a name="l1904"><span class="linenum">1904</span></a>  
<a name="l1905"><span class="linenum">1905</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="function" onClick="logFunction('split_outcode')" href="../../../_functions/split_outcode.html" onMouseOver="funcPopup(event,'split_outcode')">split_outcode</a>( '[teaserbreak]', <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a> );
<a name="l1906"><span class="linenum">1906</span></a>  
<a name="l1907"><span class="linenum">1907</span></a>  <span class="comment">        // Balance HTML tags</span>
<a name="l1908"><span class="linenum">1908</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>( 'balance_tags', <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> );
<a name="l1909"><span class="linenum">1909</span></a>  
<a name="l1910"><span class="linenum">1910</span></a>          return <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a>;
<a name="l1911"><span class="linenum">1911</span></a>      }
<a name="l1912"><span class="linenum">1912</span></a>  
<a name="l1913"><span class="linenum">1913</span></a>  
<a name="l1914"><span class="linenum">1914</span></a>      <span class="comment">/**</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">     * DEPRECATED</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">     */</span>
<a name="l1917"><span class="linenum">1917</span></a>  	function <a class="function" onClick="logFunction('content')" href="../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a>()
<a name="l1918"><span class="linenum">1918</span></a>      {
<a name="l1919"><span class="linenum">1919</span></a>  <span class="comment">        // ---------------------- POST CONTENT INCLUDED HERE ----------------------</span>
<a name="l1920"><span class="linenum">1920</span></a>          <a class="function" onClick="logFunction('skin_include')" href="../../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>( '_item_content.inc.php', array(
<a name="l1921"><span class="linenum">1921</span></a>                  'image_size' =&gt; 'fit-400x320',
<a name="l1922"><span class="linenum">1922</span></a>              ) );
<a name="l1923"><span class="linenum">1923</span></a>  <span class="comment">        // Note: You can customize the default item feedback by copying the generic</span>
<a name="l1924"><span class="linenum">1924</span></a>  <span class="comment">        // /skins/_item_feedback.inc.php file into the current skin folder.</span>
<a name="l1925"><span class="linenum">1925</span></a>  <span class="comment">        // -------------------------- END OF POST CONTENT -------------------------</span>
<a name="l1926"><span class="linenum">1926</span></a>      }
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>  
<a name="l1929"><span class="linenum">1929</span></a>      <span class="comment">/**</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment">     * Display content extension of item (part after &quot;[teaserbreak]&quot;)</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment">     */</span>
<a name="l1932"><span class="linenum">1932</span></a>  	function <a class="function" onClick="logFunction('content_extension')" href="../../../_functions/content_extension.html" onMouseOver="funcPopup(event,'content_extension')">content_extension</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l1933"><span class="linenum">1933</span></a>      {
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1935"><span class="linenum">1935</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1936"><span class="linenum">1936</span></a>                  'before'      =&gt; '',
<a name="l1937"><span class="linenum">1937</span></a>                  'after'       =&gt; '',
<a name="l1938"><span class="linenum">1938</span></a>                  'disppage'    =&gt; '#',
<a name="l1939"><span class="linenum">1939</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l1940"><span class="linenum">1940</span></a>                  'force_more'  =&gt; false,
<a name="l1941"><span class="linenum">1941</span></a>                  'image_size'  =&gt; 'fit-400x320',
<a name="l1942"><span class="linenum">1942</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_extension')" href="../../../_functions/get_content_extension.html" onMouseOver="funcPopup(event,'get_content_extension')">get_content_extension</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['disppage'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['force_more'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1945"><span class="linenum">1945</span></a>  
<a name="l1946"><span class="linenum">1946</span></a>          if( ! empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l1947"><span class="linenum">1947</span></a>          {
<a name="l1948"><span class="linenum">1948</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l1949"><span class="linenum">1949</span></a>              echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1950"><span class="linenum">1950</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1951"><span class="linenum">1951</span></a>          }
<a name="l1952"><span class="linenum">1952</span></a>      }
<a name="l1953"><span class="linenum">1953</span></a>  
<a name="l1954"><span class="linenum">1954</span></a>  
<a name="l1955"><span class="linenum">1955</span></a>      <span class="comment">/**</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment">     * Template function: get content extension of item (part after &quot;[teaserbreak]&quot;)</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">     *</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">     * @param mixed page number to display specific page, # for url parameter</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment">     * @param boolean</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">     * @param string filename to use to display more</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment">     * @param array additional params passthrough</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment">     * @return string</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment">     */</span>
<a name="l1964"><span class="linenum">1964</span></a>  	function <a class="function" onClick="logFunction('get_content_extension')" href="../../../_functions/get_content_extension.html" onMouseOver="funcPopup(event,'get_content_extension')">get_content_extension</a>( <a class="var it1552" onMouseOver="hilite(1552)" onMouseOut="lolite()" onClick="logVariable('disppage')" href="../../../_variables/disppage.html">$disppage</a> = '#', <a class="var it1557" onMouseOver="hilite(1557)" onMouseOut="lolite()" onClick="logVariable('force_more')" href="../../../_variables/force_more.html">$force_more</a> = false, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1965"><span class="linenum">1965</span></a>      {
<a name="l1966"><span class="linenum">1966</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a>, <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>;
<a name="l1967"><span class="linenum">1967</span></a>  
<a name="l1968"><span class="linenum">1968</span></a>          if( ! <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> &amp;&amp; ! <a class="var it1557" onMouseOver="hilite(1557)" onMouseOut="lolite()" onClick="logVariable('force_more')" href="../../../_variables/force_more.html">$force_more</a> )
<a name="l1969"><span class="linenum">1969</span></a>          {    // NOT in more mode:
<a name="l1970"><span class="linenum">1970</span></a>              return NULL;
<a name="l1971"><span class="linenum">1971</span></a>          }
<a name="l1972"><span class="linenum">1972</span></a>  
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">        // Set default params</span>
<a name="l1974"><span class="linenum">1974</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1975"><span class="linenum">1975</span></a>                  'image_size' =&gt; 'fit-400x320',
<a name="l1976"><span class="linenum">1976</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1977"><span class="linenum">1977</span></a>  
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">        // Don't rewrite these params from array $params, Use them from separate params of this function</span>
<a name="l1979"><span class="linenum">1979</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, array(
<a name="l1980"><span class="linenum">1980</span></a>                  'disppage' =&gt; <a class="var it1552" onMouseOver="hilite(1552)" onMouseOut="lolite()" onClick="logVariable('disppage')" href="../../../_variables/disppage.html">$disppage</a>,
<a name="l1981"><span class="linenum">1981</span></a>                  'format'   =&gt; <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>
<a name="l1982"><span class="linenum">1982</span></a>              ) );
<a name="l1983"><span class="linenum">1983</span></a>  
<a name="l1984"><span class="linenum">1984</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_content_parts')" href="../../../_functions/has_content_parts.html" onMouseOver="funcPopup(event,'has_content_parts')">has_content_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) )
<a name="l1985"><span class="linenum">1985</span></a>          { // This is NOT an extended post
<a name="l1986"><span class="linenum">1986</span></a>              return NULL;
<a name="l1987"><span class="linenum">1987</span></a>          }
<a name="l1988"><span class="linenum">1988</span></a>  
<a name="l1989"><span class="linenum">1989</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_parts')" href="../../../_functions/get_content_parts.html" onMouseOver="funcPopup(event,'get_content_parts')">get_content_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1990"><span class="linenum">1990</span></a>  
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment">        // Output everything after [teaserbreak]</span>
<a name="l1992"><span class="linenum">1992</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a>);
<a name="l1993"><span class="linenum">1993</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('', <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a>);
<a name="l1994"><span class="linenum">1994</span></a>  
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">        // Render Inline Images  [image:123:caption] or [file:123:caption] :</span>
<a name="l1996"><span class="linenum">1996</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['check_code_block'] = true;
<a name="l1997"><span class="linenum">1997</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('render_inline_files')" href="../../../_functions/render_inline_files.html" onMouseOver="funcPopup(event,'render_inline_files')">render_inline_files</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1998"><span class="linenum">1998</span></a>  
<a name="l1999"><span class="linenum">1999</span></a>  <span class="comment">        // Trigger Display plugins FOR THE STUFF THAT WOULD NOT BE PRERENDERED:</span>
<a name="l2000"><span class="linenum">2000</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array(
<a name="l2001"><span class="linenum">2001</span></a>                  'Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l2002"><span class="linenum">2002</span></a>                  'preview' =&gt; <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>,
<a name="l2003"><span class="linenum">2003</span></a>                  'dispmore' =&gt; true,
<a name="l2004"><span class="linenum">2004</span></a>                  'view_type' =&gt; 'extension',
<a name="l2005"><span class="linenum">2005</span></a>              ), 'Display' );
<a name="l2006"><span class="linenum">2006</span></a>  
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment">        // Character conversions</span>
<a name="l2008"><span class="linenum">2008</span></a>          <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2009"><span class="linenum">2009</span></a>  
<a name="l2010"><span class="linenum">2010</span></a>          return <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l2011"><span class="linenum">2011</span></a>      }
<a name="l2012"><span class="linenum">2012</span></a>  
<a name="l2013"><span class="linenum">2013</span></a>  
<a name="l2014"><span class="linenum">2014</span></a>      <span class="comment">/**</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment">     * Increase view counter</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">     *</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">     * @deprecated since 5.1.0-beta</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment">     */</span>
<a name="l2019"><span class="linenum">2019</span></a>  	function <a class="function" onClick="logFunction('count_view')" href="../../../_functions/count_view.html" onMouseOver="funcPopup(event,'count_view')">count_view</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2020"><span class="linenum">2020</span></a>      {
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment">        // We always return false, since counting views feature was removed.</span>
<a name="l2022"><span class="linenum">2022</span></a>          return false;
<a name="l2023"><span class="linenum">2023</span></a>      }
<a name="l2024"><span class="linenum">2024</span></a>  
<a name="l2025"><span class="linenum">2025</span></a>  
<a name="l2026"><span class="linenum">2026</span></a>      <span class="comment">/**</span>
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment">     * Load item custom field value by index</span>
<a name="l2028"><span class="linenum">2028</span></a>  <span class="comment">     *</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment">     * @param String field index, this is the lowercase value of the trimmed field name ( whitespaces are converted to one '_' character )</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">     * @return boolean true on success false if custom field with this index doesn't exist</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">     */</span>
<a name="l2032"><span class="linenum">2032</span></a>  	function <a class="function" onClick="logFunction('load_custom_field_value')" href="../../../_functions/load_custom_field_value.html" onMouseOver="funcPopup(event,'load_custom_field_value')">load_custom_field_value</a>( <a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a> )
<a name="l2033"><span class="linenum">2033</span></a>      {
<a name="l2034"><span class="linenum">2034</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> ) )
<a name="l2035"><span class="linenum">2035</span></a>          { // load item custom_fields
<a name="l2036"><span class="linenum">2036</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_custom_fields')" href="../../../_functions/get_type_custom_fields.html" onMouseOver="funcPopup(event,'get_type_custom_fields')">get_type_custom_fields</a>();
<a name="l2037"><span class="linenum">2037</span></a>          }
<a name="l2038"><span class="linenum">2038</span></a>  
<a name="l2039"><span class="linenum">2039</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>] ) )
<a name="l2040"><span class="linenum">2040</span></a>          { // there is no such custom field
<a name="l2041"><span class="linenum">2041</span></a>              return false;
<a name="l2042"><span class="linenum">2042</span></a>          }
<a name="l2043"><span class="linenum">2043</span></a>  
<a name="l2044"><span class="linenum">2044</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['value'] ) )
<a name="l2045"><span class="linenum">2045</span></a>          { // get custom item field value from the item setting
<a name="l2046"><span class="linenum">2046</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['value'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['type'].'_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['ID'] );
<a name="l2047"><span class="linenum">2047</span></a>          }
<a name="l2048"><span class="linenum">2048</span></a>          return true;
<a name="l2049"><span class="linenum">2049</span></a>      }
<a name="l2050"><span class="linenum">2050</span></a>  
<a name="l2051"><span class="linenum">2051</span></a>  
<a name="l2052"><span class="linenum">2052</span></a>      <span class="comment">/**</span>
<a name="l2053"><span class="linenum">2053</span></a>  <span class="comment">     * Get item custom field value by index</span>
<a name="l2054"><span class="linenum">2054</span></a>  <span class="comment">     *</span>
<a name="l2055"><span class="linenum">2055</span></a>  <span class="comment">     * @param String field index which by default is the field name, see {@link load_custom_field_value()}</span>
<a name="l2056"><span class="linenum">2056</span></a>  <span class="comment">     * @return mixed false if the field doesn't exist Double/String otherwise depending from the custom field type</span>
<a name="l2057"><span class="linenum">2057</span></a>  <span class="comment">     */</span>
<a name="l2058"><span class="linenum">2058</span></a>  	function <a class="function" onClick="logFunction('get_custom_field_value')" href="../../../_functions/get_custom_field_value.html" onMouseOver="funcPopup(event,'get_custom_field_value')">get_custom_field_value</a>( <a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a> )
<a name="l2059"><span class="linenum">2059</span></a>      {
<a name="l2060"><span class="linenum">2060</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_custom_field_value')" href="../../../_functions/load_custom_field_value.html" onMouseOver="funcPopup(event,'load_custom_field_value')">load_custom_field_value</a>( <a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a> ) )
<a name="l2061"><span class="linenum">2061</span></a>          {
<a name="l2062"><span class="linenum">2062</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['value'];
<a name="l2063"><span class="linenum">2063</span></a>          }
<a name="l2064"><span class="linenum">2064</span></a>          return false;
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>  
<a name="l2067"><span class="linenum">2067</span></a>  
<a name="l2068"><span class="linenum">2068</span></a>      <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * Display custom field</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     */</span>
<a name="l2071"><span class="linenum">2071</span></a>  	function <a class="function" onClick="logFunction('custom')" href="../../../_functions/custom.html" onMouseOver="funcPopup(event,'custom')">custom</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2072"><span class="linenum">2072</span></a>      {
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2074"><span class="linenum">2074</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2075"><span class="linenum">2075</span></a>                  'before'        =&gt; ' ',
<a name="l2076"><span class="linenum">2076</span></a>                  'after'         =&gt; ' ',
<a name="l2077"><span class="linenum">2077</span></a>                  'format'        =&gt; 'htmlbody',
<a name="l2078"><span class="linenum">2078</span></a>                  'decimals'      =&gt; 2,
<a name="l2079"><span class="linenum">2079</span></a>                  'dec_point'     =&gt; '.',
<a name="l2080"><span class="linenum">2080</span></a>                  'thousands_sep' =&gt; ',',
<a name="l2081"><span class="linenum">2081</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>          if( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field'] ) )
<a name="l2084"><span class="linenum">2084</span></a>          {
<a name="l2085"><span class="linenum">2085</span></a>              return;
<a name="l2086"><span class="linenum">2086</span></a>          }
<a name="l2087"><span class="linenum">2087</span></a>  
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment">        // Load custom field by index</span>
<a name="l2089"><span class="linenum">2089</span></a>          <a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field'];
<a name="l2090"><span class="linenum">2090</span></a>          if( !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_custom_field_value')" href="../../../_functions/load_custom_field_value.html" onMouseOver="funcPopup(event,'load_custom_field_value')">load_custom_field_value</a>( <a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a> ) )
<a name="l2091"><span class="linenum">2091</span></a>          { // Custom field with this index doesn't exist
<a name="l2092"><span class="linenum">2092</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before']
<a name="l2093"><span class="linenum">2093</span></a>                  .'&lt;span class=&quot;red&quot;&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The custom field %s does not exist!'), '&lt;b&gt;'.<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>.'&lt;/b&gt;' ).'&lt;/span&gt;'
<a name="l2094"><span class="linenum">2094</span></a>                  .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2095"><span class="linenum">2095</span></a>              return;
<a name="l2096"><span class="linenum">2096</span></a>          }
<a name="l2097"><span class="linenum">2097</span></a>  
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment">        // Get value and type</span>
<a name="l2099"><span class="linenum">2099</span></a>          <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['value'];
<a name="l2100"><span class="linenum">2100</span></a>          <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a>[<a class="var it1558" onMouseOver="hilite(1558)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../_variables/field_index.html">$field_index</a>]['type'];
<a name="l2101"><span class="linenum">2101</span></a>  
<a name="l2102"><span class="linenum">2102</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['max'] ) &amp;&amp; ( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'double' ) &amp;&amp; ( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> == 9999999999 ) )
<a name="l2103"><span class="linenum">2103</span></a>          {
<a name="l2104"><span class="linenum">2104</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['max'];
<a name="l2105"><span class="linenum">2105</span></a>          }
<a name="l2106"><span class="linenum">2106</span></a>          elseif( !empty( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> ) )
<a name="l2107"><span class="linenum">2107</span></a>          {
<a name="l2108"><span class="linenum">2108</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l2109"><span class="linenum">2109</span></a>              if( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'double' )
<a name="l2110"><span class="linenum">2110</span></a>              {
<a name="l2111"><span class="linenum">2111</span></a>                  echo <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['decimals'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['dec_point'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['thousands_sep']  );
<a name="l2112"><span class="linenum">2112</span></a>              }
<a name="l2113"><span class="linenum">2113</span></a>              else
<a name="l2114"><span class="linenum">2114</span></a>              {
<a name="l2115"><span class="linenum">2115</span></a>                  echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l2116"><span class="linenum">2116</span></a>              }
<a name="l2117"><span class="linenum">2117</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2118"><span class="linenum">2118</span></a>          }
<a name="l2119"><span class="linenum">2119</span></a>      }
<a name="l2120"><span class="linenum">2120</span></a>  
<a name="l2121"><span class="linenum">2121</span></a>  
<a name="l2122"><span class="linenum">2122</span></a>      <span class="comment">/**</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment">     * Display all custom fields of current Item</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment">     *</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment">     * @param array Params</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment">     */</span>
<a name="l2127"><span class="linenum">2127</span></a>  	function <a class="function" onClick="logFunction('custom_fields')" href="../../../_functions/custom_fields.html" onMouseOver="funcPopup(event,'custom_fields')">custom_fields</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2128"><span class="linenum">2128</span></a>      {
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2130"><span class="linenum">2130</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2131"><span class="linenum">2131</span></a>                  'before'       =&gt; '&lt;table class=&quot;item_custom_fields&quot;&gt;',
<a name="l2132"><span class="linenum">2132</span></a>                  'field_format' =&gt; '&lt;tr&gt;&lt;th&gt;<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>$:&lt;/th&gt;&lt;td&gt;<a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>$&lt;/td&gt;&lt;/tr&gt;', // <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>$ <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>$
<a name="l2133"><span class="linenum">2133</span></a>                  'after'        =&gt; '&lt;/table&gt;',
<a name="l2134"><span class="linenum">2134</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2135"><span class="linenum">2135</span></a>  
<a name="l2136"><span class="linenum">2136</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> ) )
<a name="l2137"><span class="linenum">2137</span></a>          {
<a name="l2138"><span class="linenum">2138</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_custom_fields')" href="../../../_functions/get_type_custom_fields.html" onMouseOver="funcPopup(event,'get_type_custom_fields')">get_type_custom_fields</a>();
<a name="l2139"><span class="linenum">2139</span></a>          }
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> ) == 0 )
<a name="l2142"><span class="linenum">2142</span></a>          {    // No custom fields
<a name="l2143"><span class="linenum">2143</span></a>              return;
<a name="l2144"><span class="linenum">2144</span></a>          }
<a name="l2145"><span class="linenum">2145</span></a>  
<a name="l2146"><span class="linenum">2146</span></a>          <a class="var it1559" onMouseOver="hilite(1559)" onMouseOut="lolite()" onClick="logVariable('fields_exist')" href="../../../_variables/fields_exist.html">$fields_exist</a> = false;
<a name="l2147"><span class="linenum">2147</span></a>  
<a name="l2148"><span class="linenum">2148</span></a>          <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l2149"><span class="linenum">2149</span></a>  
<a name="l2150"><span class="linenum">2150</span></a>          <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a> = array( '<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>$', '<a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>$' );
<a name="l2151"><span class="linenum">2151</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('custom_fields')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/custom_fields.html">custom_fields</a> as <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a> )
<a name="l2152"><span class="linenum">2152</span></a>          {
<a name="l2153"><span class="linenum">2153</span></a>              <a class="var it1562" onMouseOver="hilite(1562)" onMouseOut="lolite()" onClick="logVariable('custom_field_value')" href="../../../_variables/custom_field_value.html">$custom_field_value</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>['type'].'_'.<a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>['ID'] );
<a name="l2154"><span class="linenum">2154</span></a>              if( !empty( <a class="var it1562" onMouseOver="hilite(1562)" onMouseOut="lolite()" onClick="logVariable('custom_field_value')" href="../../../_variables/custom_field_value.html">$custom_field_value</a> ) ||
<a name="l2155"><span class="linenum">2155</span></a>                  ( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>['type'] == 'double' &amp;&amp; <a class="var it1562" onMouseOver="hilite(1562)" onMouseOut="lolite()" onClick="logVariable('custom_field_value')" href="../../../_variables/custom_field_value.html">$custom_field_value</a> == '0' ) )
<a name="l2156"><span class="linenum">2156</span></a>              { // Display only the filled field AND also numeric field with '0' value
<a name="l2157"><span class="linenum">2157</span></a>                  <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a> = array( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>['label'], <a class="var it1562" onMouseOver="hilite(1562)" onMouseOut="lolite()" onClick="logVariable('custom_field_value')" href="../../../_variables/custom_field_value.html">$custom_field_value</a> );
<a name="l2158"><span class="linenum">2158</span></a>                  <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a> .= <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a>, <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_format'] );
<a name="l2159"><span class="linenum">2159</span></a>                  <a class="var it1559" onMouseOver="hilite(1559)" onMouseOut="lolite()" onClick="logVariable('fields_exist')" href="../../../_variables/fields_exist.html">$fields_exist</a> = true;
<a name="l2160"><span class="linenum">2160</span></a>              }
<a name="l2161"><span class="linenum">2161</span></a>          }
<a name="l2162"><span class="linenum">2162</span></a>  
<a name="l2163"><span class="linenum">2163</span></a>          <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2164"><span class="linenum">2164</span></a>  
<a name="l2165"><span class="linenum">2165</span></a>          if( <a class="var it1559" onMouseOver="hilite(1559)" onMouseOut="lolite()" onClick="logVariable('fields_exist')" href="../../../_variables/fields_exist.html">$fields_exist</a> )
<a name="l2166"><span class="linenum">2166</span></a>          {    // Print out if at least one field is filled for this item
<a name="l2167"><span class="linenum">2167</span></a>              echo <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a>;
<a name="l2168"><span class="linenum">2168</span></a>          }
<a name="l2169"><span class="linenum">2169</span></a>      }
<a name="l2170"><span class="linenum">2170</span></a>  
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>      <span class="comment">/**</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">     * Template tag</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">     */</span>
<a name="l2175"><span class="linenum">2175</span></a>  	function <a class="function" onClick="logFunction('more_link')" href="../../../_functions/more_link.html" onMouseOver="funcPopup(event,'more_link')">more_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2176"><span class="linenum">2176</span></a>      {
<a name="l2177"><span class="linenum">2177</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_more_link')" href="../../../_functions/get_more_link.html" onMouseOver="funcPopup(event,'get_more_link')">get_more_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2178"><span class="linenum">2178</span></a>      }
<a name="l2179"><span class="linenum">2179</span></a>  
<a name="l2180"><span class="linenum">2180</span></a>  
<a name="l2181"><span class="linenum">2181</span></a>      <span class="comment">/**</span>
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment">     * Display more link</span>
<a name="l2183"><span class="linenum">2183</span></a>  <span class="comment">     */</span>
<a name="l2184"><span class="linenum">2184</span></a>  	function <a class="function" onClick="logFunction('get_more_link')" href="../../../_functions/get_more_link.html" onMouseOver="funcPopup(event,'get_more_link')">get_more_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2185"><span class="linenum">2185</span></a>      {
<a name="l2186"><span class="linenum">2186</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2187"><span class="linenum">2187</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2188"><span class="linenum">2188</span></a>                  'force_more'  =&gt; false,
<a name="l2189"><span class="linenum">2189</span></a>                  'before'      =&gt; '&lt;p class=&quot;bMore&quot;&gt;',
<a name="l2190"><span class="linenum">2190</span></a>                  'after'       =&gt; '&lt;/p&gt;',
<a name="l2191"><span class="linenum">2191</span></a>                  'link_text'   =&gt; '#',        // text to display as the more link
<a name="l2192"><span class="linenum">2192</span></a>                  'anchor_text' =&gt; '#',        // text to display as the more <a class="function" onClick="logFunction('anchor')" href="../../../_functions/anchor.html" onMouseOver="funcPopup(event,'anchor')">anchor</a> (once the more link has been clicked, # defaults to &quot;Follow up:&quot;)
<a name="l2193"><span class="linenum">2193</span></a>                  'link_to'     =&gt; 'single#anchor',    // target URL for more link, 'single' or 'single#anchor'
<a name="l2194"><span class="linenum">2194</span></a>                  'disppage'    =&gt; '#',        // page number to display specific page, # for url parameter
<a name="l2195"><span class="linenum">2195</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l2196"><span class="linenum">2196</span></a>                  'link_class'  =&gt; '', // class name of the link
<a name="l2197"><span class="linenum">2197</span></a>                  'force_hide_teaser' =&gt; false, // Force an item setting 'hide_teaser'
<a name="l2198"><span class="linenum">2198</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2199"><span class="linenum">2199</span></a>  
<a name="l2200"><span class="linenum">2200</span></a>          global <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a>;
<a name="l2201"><span class="linenum">2201</span></a>  
<a name="l2202"><span class="linenum">2202</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_content_parts')" href="../../../_functions/has_content_parts.html" onMouseOver="funcPopup(event,'has_content_parts')">has_content_parts</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>) )
<a name="l2203"><span class="linenum">2203</span></a>          { // This is NOT an extended post:
<a name="l2204"><span class="linenum">2204</span></a>              return '';
<a name="l2205"><span class="linenum">2205</span></a>          }
<a name="l2206"><span class="linenum">2206</span></a>  
<a name="l2207"><span class="linenum">2207</span></a>          if( ( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == 0 ) &amp;&amp; ( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'link_to' ] == false ) )
<a name="l2208"><span class="linenum">2208</span></a>          { // Don't display &quot;After more&quot; content
<a name="l2209"><span class="linenum">2209</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'link_text' ] ) )
<a name="l2210"><span class="linenum">2210</span></a>              {
<a name="l2211"><span class="linenum">2211</span></a>                  return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'before'].<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'link_text' ].<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'after'] );
<a name="l2212"><span class="linenum">2212</span></a>              }
<a name="l2213"><span class="linenum">2213</span></a>              return '';
<a name="l2214"><span class="linenum">2214</span></a>          }
<a name="l2215"><span class="linenum">2215</span></a>  
<a name="l2216"><span class="linenum">2216</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_parts')" href="../../../_functions/get_content_parts.html" onMouseOver="funcPopup(event,'get_content_parts')">get_content_parts</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">        // Init an attribute for class</span>
<a name="l2219"><span class="linenum">2219</span></a>          <a class="var it1563" onMouseOver="hilite(1563)" onMouseOut="lolite()" onClick="logVariable('class_attr')" href="../../../_variables/class_attr.html">$class_attr</a> = empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'] ) ? '' : ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'].'&quot;';
<a name="l2220"><span class="linenum">2220</span></a>  
<a name="l2221"><span class="linenum">2221</span></a>          if( ! <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> &amp;&amp; ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['force_more'] )
<a name="l2222"><span class="linenum">2222</span></a>          {    // We're NOT in &quot;more&quot; mode:
<a name="l2223"><span class="linenum">2223</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] == '#' )
<a name="l2224"><span class="linenum">2224</span></a>              { // TRANS: this is the default text for the extended post &quot;more&quot; link
<a name="l2225"><span class="linenum">2225</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Full story').' &amp;raquo;';
<a name="l2226"><span class="linenum">2226</span></a>  <span class="comment">                // Dummy in order to keep previous translation in the loop:</span>
<a name="l2227"><span class="linenum">2227</span></a>                  <a class="var it1564" onMouseOver="hilite(1564)" onMouseOut="lolite()" onClick="logVariable('dummy')" href="../../../_variables/dummy.html">$dummy</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Read more');
<a name="l2228"><span class="linenum">2228</span></a>              }
<a name="l2229"><span class="linenum">2229</span></a>  
<a name="l2230"><span class="linenum">2230</span></a>              switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'] )
<a name="l2231"><span class="linenum">2231</span></a>              {
<a name="l2232"><span class="linenum">2232</span></a>                  case 'single':
<a name="l2233"><span class="linenum">2233</span></a>                      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l2234"><span class="linenum">2234</span></a>                      break;
<a name="l2235"><span class="linenum">2235</span></a>  
<a name="l2236"><span class="linenum">2236</span></a>                  case 'single#anchor':
<a name="l2237"><span class="linenum">2237</span></a>                      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'#more'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l2238"><span class="linenum">2238</span></a>                      break;
<a name="l2239"><span class="linenum">2239</span></a>              }
<a name="l2240"><span class="linenum">2240</span></a>  
<a name="l2241"><span class="linenum">2241</span></a>              return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before']
<a name="l2242"><span class="linenum">2242</span></a>                          .'&lt;a href=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'].'&quot;'.<a class="var it1563" onMouseOver="hilite(1563)" onMouseOut="lolite()" onClick="logVariable('class_attr')" href="../../../_variables/class_attr.html">$class_attr</a>.'&gt;'
<a name="l2243"><span class="linenum">2243</span></a>                          .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'].'&lt;/a&gt;'
<a name="l2244"><span class="linenum">2244</span></a>                          .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l2245"><span class="linenum">2245</span></a>          }
<a name="l2246"><span class="linenum">2246</span></a>          elseif( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['force_hide_teaser'] &amp;&amp; ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'hide_teaser' ) )
<a name="l2247"><span class="linenum">2247</span></a>          {    // We are in more mode and we're not hiding the teaser:
<a name="l2248"><span class="linenum">2248</span></a>  <span class="comment">            // (if we're hiding the teaser we display this as a normal page ie: no anchor)</span>
<a name="l2249"><span class="linenum">2249</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['anchor_text'] == '#' )
<a name="l2250"><span class="linenum">2250</span></a>              { // TRANS: this is the default text displayed once the more link has been activated
<a name="l2251"><span class="linenum">2251</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['anchor_text'] = '&lt;p class=&quot;bMore&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Follow up:').'&lt;/p&gt;';
<a name="l2252"><span class="linenum">2252</span></a>              }
<a name="l2253"><span class="linenum">2253</span></a>  
<a name="l2254"><span class="linenum">2254</span></a>              return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( '&lt;a id=&quot;more'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot; name=&quot;more'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot;'.<a class="var it1563" onMouseOver="hilite(1563)" onMouseOut="lolite()" onClick="logVariable('class_attr')" href="../../../_variables/class_attr.html">$class_attr</a>.'&gt;&lt;/a&gt;'
<a name="l2255"><span class="linenum">2255</span></a>                              .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['anchor_text'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l2256"><span class="linenum">2256</span></a>          }
<a name="l2257"><span class="linenum">2257</span></a>      }
<a name="l2258"><span class="linenum">2258</span></a>  
<a name="l2259"><span class="linenum">2259</span></a>  
<a name="l2260"><span class="linenum">2260</span></a>      <span class="comment">/**</span>
<a name="l2261"><span class="linenum">2261</span></a>  <span class="comment">     * Does the post have different content parts (teaser/extension, divided by &quot;[teaserbreak]&quot;)?</span>
<a name="l2262"><span class="linenum">2262</span></a>  <span class="comment">     * This is also true for posts that have images with &quot;aftermore&quot; position.</span>
<a name="l2263"><span class="linenum">2263</span></a>  <span class="comment">     *</span>
<a name="l2264"><span class="linenum">2264</span></a>  <span class="comment">     * @access public</span>
<a name="l2265"><span class="linenum">2265</span></a>  <span class="comment">     * @return boolean</span>
<a name="l2266"><span class="linenum">2266</span></a>  <span class="comment">     */</span>
<a name="l2267"><span class="linenum">2267</span></a>  	function <a class="function" onClick="logFunction('has_content_parts')" href="../../../_functions/has_content_parts.html" onMouseOver="funcPopup(event,'has_content_parts')">has_content_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2268"><span class="linenum">2268</span></a>      {
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2270"><span class="linenum">2270</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2271"><span class="linenum">2271</span></a>                  'disppage' =&gt; '#',
<a name="l2272"><span class="linenum">2272</span></a>                  'format'   =&gt; 'htmlbody',
<a name="l2273"><span class="linenum">2273</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2274"><span class="linenum">2274</span></a>  
<a name="l2275"><span class="linenum">2275</span></a>          <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_page')" href="../../../_functions/get_content_page.html" onMouseOver="funcPopup(event,'get_content_page')">get_content_page</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['disppage'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l2276"><span class="linenum">2276</span></a>  
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment">        // Remove &lt;code&gt; and &lt;pre&gt; blocks from content to don't check [teaserbreak] there</span>
<a name="l2278"><span class="linenum">2278</span></a>          <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~&lt;(code|pre)[^&gt;]*&gt;.*?&lt;/\1&gt;~is', '', <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a> );
<a name="l2279"><span class="linenum">2279</span></a>  
<a name="l2280"><span class="linenum">2280</span></a>          return <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it1556" onMouseOver="hilite(1556)" onMouseOut="lolite()" onClick="logVariable('content_page')" href="../../../_variables/content_page.html">$content_page</a>, '[teaserbreak]' ) !== false
<a name="l2281"><span class="linenum">2281</span></a>              || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_images')" href="../../../_functions/get_images.html" onMouseOver="funcPopup(event,'get_images')">get_images</a>( array( 'restrict_to_image_position' =&gt; 'aftermore' ) );
<a name="l2282"><span class="linenum">2282</span></a>      }
<a name="l2283"><span class="linenum">2283</span></a>  
<a name="l2284"><span class="linenum">2284</span></a>  
<a name="l2285"><span class="linenum">2285</span></a>      <span class="comment">/**</span>
<a name="l2286"><span class="linenum">2286</span></a>  <span class="comment">     * Template function: display deadline date (datetime) of Item</span>
<a name="l2287"><span class="linenum">2287</span></a>  <span class="comment">     *</span>
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default date format</span>
<a name="l2289"><span class="linenum">2289</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l2290"><span class="linenum">2290</span></a>  <span class="comment">     */</span>
<a name="l2291"><span class="linenum">2291</span></a>  	function <a class="function" onClick="logFunction('deadline_date')" href="../../../_functions/deadline_date.html" onMouseOver="funcPopup(event,'deadline_date')">deadline_date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l2292"><span class="linenum">2292</span></a>      {
<a name="l2293"><span class="linenum">2293</span></a>          if( empty(<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>) )
<a name="l2294"><span class="linenum">2294</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datedeadline')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datedeadline.html">datedeadline</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a>);
<a name="l2295"><span class="linenum">2295</span></a>          else
<a name="l2296"><span class="linenum">2296</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datedeadline')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datedeadline.html">datedeadline</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a>);
<a name="l2297"><span class="linenum">2297</span></a>      }
<a name="l2298"><span class="linenum">2298</span></a>  
<a name="l2299"><span class="linenum">2299</span></a>  
<a name="l2300"><span class="linenum">2300</span></a>      <span class="comment">/**</span>
<a name="l2301"><span class="linenum">2301</span></a>  <span class="comment">     * Template function: display deadline time (datetime) of Item</span>
<a name="l2302"><span class="linenum">2302</span></a>  <span class="comment">     *</span>
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default time format</span>
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l2305"><span class="linenum">2305</span></a>  <span class="comment">     */</span>
<a name="l2306"><span class="linenum">2306</span></a>  	function <a class="function" onClick="logFunction('deadline_time')" href="../../../_functions/deadline_time.html" onMouseOver="funcPopup(event,'deadline_time')">deadline_time</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l2307"><span class="linenum">2307</span></a>      {
<a name="l2308"><span class="linenum">2308</span></a>          if( empty(<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>) )
<a name="l2309"><span class="linenum">2309</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datedeadline')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datedeadline.html">datedeadline</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l2310"><span class="linenum">2310</span></a>          else
<a name="l2311"><span class="linenum">2311</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datedeadline')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datedeadline.html">datedeadline</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l2312"><span class="linenum">2312</span></a>      }
<a name="l2313"><span class="linenum">2313</span></a>  
<a name="l2314"><span class="linenum">2314</span></a>  
<a name="l2315"><span class="linenum">2315</span></a>      <span class="comment">/**</span>
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment">     * Get the title for the &lt;title&gt; tag</span>
<a name="l2317"><span class="linenum">2317</span></a>  <span class="comment">     *</span>
<a name="l2318"><span class="linenum">2318</span></a>  <span class="comment">     * If it's not specifically entered, use the regular post title instead</span>
<a name="l2319"><span class="linenum">2319</span></a>  <span class="comment">     */</span>
<a name="l2320"><span class="linenum">2320</span></a>  	function <a class="function" onClick="logFunction('get_titletag')" href="../../../_functions/get_titletag.html" onMouseOver="funcPopup(event,'get_titletag')">get_titletag</a>()
<a name="l2321"><span class="linenum">2321</span></a>      {
<a name="l2322"><span class="linenum">2322</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('titletag')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/titletag.html">titletag</a>) )
<a name="l2323"><span class="linenum">2323</span></a>          {
<a name="l2324"><span class="linenum">2324</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>;
<a name="l2325"><span class="linenum">2325</span></a>          }
<a name="l2326"><span class="linenum">2326</span></a>  
<a name="l2327"><span class="linenum">2327</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('titletag')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/titletag.html">titletag</a>;
<a name="l2328"><span class="linenum">2328</span></a>      }
<a name="l2329"><span class="linenum">2329</span></a>  
<a name="l2330"><span class="linenum">2330</span></a>      <span class="comment">/**</span>
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">     * Get the meta description tag</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">     *</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">     */</span>
<a name="l2334"><span class="linenum">2334</span></a>  	function <a class="function" onClick="logFunction('get_metadesc')" href="../../../_functions/get_metadesc.html" onMouseOver="funcPopup(event,'get_metadesc')">get_metadesc</a>()
<a name="l2335"><span class="linenum">2335</span></a>      {
<a name="l2336"><span class="linenum">2336</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'metadesc' );
<a name="l2337"><span class="linenum">2337</span></a>      }
<a name="l2338"><span class="linenum">2338</span></a>  
<a name="l2339"><span class="linenum">2339</span></a>      <span class="comment">/**</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment">     * Get the meta keyword tag</span>
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment">     *</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">     */</span>
<a name="l2343"><span class="linenum">2343</span></a>  	function <a class="function" onClick="logFunction('get_metakeywords')" href="../../../_functions/get_metakeywords.html" onMouseOver="funcPopup(event,'get_metakeywords')">get_metakeywords</a>()
<a name="l2344"><span class="linenum">2344</span></a>      {
<a name="l2345"><span class="linenum">2345</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'metakeywords' );
<a name="l2346"><span class="linenum">2346</span></a>      }
<a name="l2347"><span class="linenum">2347</span></a>  
<a name="l2348"><span class="linenum">2348</span></a>  
<a name="l2349"><span class="linenum">2349</span></a>      <span class="comment">/**</span>
<a name="l2350"><span class="linenum">2350</span></a>  <span class="comment">     * Split tags by comma or semicolon</span>
<a name="l2351"><span class="linenum">2351</span></a>  <span class="comment">     *</span>
<a name="l2352"><span class="linenum">2352</span></a>  <span class="comment">     * @param string The tags, separated by comma or semicolon</span>
<a name="l2353"><span class="linenum">2353</span></a>  <span class="comment">     */</span>
<a name="l2354"><span class="linenum">2354</span></a>  	function <a class="function" onClick="logFunction('set_tags_from_string')" href="../../../_functions/set_tags_from_string.html" onMouseOver="funcPopup(event,'set_tags_from_string')">set_tags_from_string</a>( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> )
<a name="l2355"><span class="linenum">2355</span></a>      {
<a name="l2356"><span class="linenum">2356</span></a>  <span class="comment">        // Mark that tags has been updated, even if it is not sure because we do not want to execute extra db query</span>
<a name="l2357"><span class="linenum">2357</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges_flags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges_flags.html">dbchanges_flags</a>['tags'] = true;
<a name="l2358"><span class="linenum">2358</span></a>  
<a name="l2359"><span class="linenum">2359</span></a>          if( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> === '' )
<a name="l2360"><span class="linenum">2360</span></a>          {
<a name="l2361"><span class="linenum">2361</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> = array();
<a name="l2362"><span class="linenum">2362</span></a>              return;
<a name="l2363"><span class="linenum">2363</span></a>          }
<a name="l2364"><span class="linenum">2364</span></a>  
<a name="l2365"><span class="linenum">2365</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( '/\s*[;,]+\s*/', <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a>, -1, PREG_SPLIT_NO_EMPTY );
<a name="l2366"><span class="linenum">2366</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> as <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a> =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> )
<a name="l2367"><span class="linenum">2367</span></a>          {
<a name="l2368"><span class="linenum">2368</span></a>              if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>, 0, 1 ) == '-' )
<a name="l2369"><span class="linenum">2369</span></a>              { // Prevent chars '-' in first position
<a name="l2370"><span class="linenum">2370</span></a>                  <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/^-+/', '', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> );
<a name="l2371"><span class="linenum">2371</span></a>              }
<a name="l2372"><span class="linenum">2372</span></a>              if( empty( <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> ) )
<a name="l2373"><span class="linenum">2373</span></a>              { // Don't save empty tag
<a name="l2374"><span class="linenum">2374</span></a>                  unset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a>[ <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a> ] );
<a name="l2375"><span class="linenum">2375</span></a>              }
<a name="l2376"><span class="linenum">2376</span></a>              else
<a name="l2377"><span class="linenum">2377</span></a>              { // Save the modifications for each tag
<a name="l2378"><span class="linenum">2378</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a>[ <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a> ] = <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>;
<a name="l2379"><span class="linenum">2379</span></a>              }
<a name="l2380"><span class="linenum">2380</span></a>          }
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment">        // Remove the duplicate tags</span>
<a name="l2383"><span class="linenum">2383</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> );
<a name="l2384"><span class="linenum">2384</span></a>      }
<a name="l2385"><span class="linenum">2385</span></a>  
<a name="l2386"><span class="linenum">2386</span></a>  
<a name="l2387"><span class="linenum">2387</span></a>      <span class="comment">/**</span>
<a name="l2388"><span class="linenum">2388</span></a>  <span class="comment">     * Template function: Provide link to message form for this Item's author.</span>
<a name="l2389"><span class="linenum">2389</span></a>  <span class="comment">     *</span>
<a name="l2390"><span class="linenum">2390</span></a>  <span class="comment">     * @param string url of the message form</span>
<a name="l2391"><span class="linenum">2391</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">     * @param string link text</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">     * @param string link title</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">     * @param string class name</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment">     * @return boolean true, if a link was displayed; false if there's no email address for the Item's author.</span>
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment">     */</span>
<a name="l2398"><span class="linenum">2398</span></a>  	function <a class="function" onClick="logFunction('msgform_link')" href="../../../_functions/msgform_link.html" onMouseOver="funcPopup(event,'msgform_link')">msgform_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2399"><span class="linenum">2399</span></a>      {
<a name="l2400"><span class="linenum">2400</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2401"><span class="linenum">2401</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2402"><span class="linenum">2402</span></a>                  'before'      =&gt; ' ',
<a name="l2403"><span class="linenum">2403</span></a>                  'after'       =&gt; ' ',
<a name="l2404"><span class="linenum">2404</span></a>                  'text'        =&gt; '#',
<a name="l2405"><span class="linenum">2405</span></a>                  'title'       =&gt; '#',
<a name="l2406"><span class="linenum">2406</span></a>                  'class'       =&gt; '',
<a name="l2407"><span class="linenum">2407</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l2408"><span class="linenum">2408</span></a>                  'form_url'    =&gt; '#current_blog#',
<a name="l2409"><span class="linenum">2409</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2410"><span class="linenum">2410</span></a>  
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'] == '#current_blog#' )
<a name="l2413"><span class="linenum">2413</span></a>          {    // Get
<a name="l2414"><span class="linenum">2414</span></a>              global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l2415"><span class="linenum">2415</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'] = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('msgformurl');
<a name="l2416"><span class="linenum">2416</span></a>          }
<a name="l2417"><span class="linenum">2417</span></a>  
<a name="l2418"><span class="linenum">2418</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l2419"><span class="linenum">2419</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'], 'post_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;recipient_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;ID, '&amp;' );
<a name="l2420"><span class="linenum">2420</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;<a class="function" onClick="logFunction('get_msgform_url')" href="../../../_functions/get_msgform_url.html" onMouseOver="funcPopup(event,'get_msgform_url')">get_msgform_url</a>( <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'], 'post_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l2421"><span class="linenum">2421</span></a>  
<a name="l2422"><span class="linenum">2422</span></a>          if( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'] ) )
<a name="l2423"><span class="linenum">2423</span></a>          {
<a name="l2424"><span class="linenum">2424</span></a>              return false;
<a name="l2425"><span class="linenum">2425</span></a>          }
<a name="l2426"><span class="linenum">2426</span></a>  
<a name="l2427"><span class="linenum">2427</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] == '#' )
<a name="l2428"><span class="linenum">2428</span></a>          {
<a name="l2429"><span class="linenum">2429</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;<a class="function" onClick="logFunction('get_msgform_possibility')" href="../../../_functions/get_msgform_possibility.html" onMouseOver="funcPopup(event,'get_msgform_possibility')">get_msgform_possibility</a>() == 'email' )
<a name="l2430"><span class="linenum">2430</span></a>              {
<a name="l2431"><span class="linenum">2431</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send email to post author');
<a name="l2432"><span class="linenum">2432</span></a>              }
<a name="l2433"><span class="linenum">2433</span></a>              else
<a name="l2434"><span class="linenum">2434</span></a>              {
<a name="l2435"><span class="linenum">2435</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send message to post author');
<a name="l2436"><span class="linenum">2436</span></a>              }
<a name="l2437"><span class="linenum">2437</span></a>          }
<a name="l2438"><span class="linenum">2438</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'email', 'imgtag', array( 'class' =&gt; 'middle', 'title' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] ) );
<a name="l2439"><span class="linenum">2439</span></a>  
<a name="l2440"><span class="linenum">2440</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l2441"><span class="linenum">2441</span></a>          echo '&lt;a href=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['form_url'].'&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;';
<a name="l2442"><span class="linenum">2442</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ) echo ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l2443"><span class="linenum">2443</span></a>          echo ' rel=&quot;nofollow&quot;&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'].'&lt;/a&gt;';
<a name="l2444"><span class="linenum">2444</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2445"><span class="linenum">2445</span></a>  
<a name="l2446"><span class="linenum">2446</span></a>          return true;
<a name="l2447"><span class="linenum">2447</span></a>      }
<a name="l2448"><span class="linenum">2448</span></a>  
<a name="l2449"><span class="linenum">2449</span></a>  
<a name="l2450"><span class="linenum">2450</span></a>      <span class="comment">/**</span>
<a name="l2451"><span class="linenum">2451</span></a>  <span class="comment">     * Template function: Provide link to message form for this Item's assigned User.</span>
<a name="l2452"><span class="linenum">2452</span></a>  <span class="comment">     *</span>
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">     * @param string url of the message form</span>
<a name="l2454"><span class="linenum">2454</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l2455"><span class="linenum">2455</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l2456"><span class="linenum">2456</span></a>  <span class="comment">     * @param string link text</span>
<a name="l2457"><span class="linenum">2457</span></a>  <span class="comment">     * @param string link title</span>
<a name="l2458"><span class="linenum">2458</span></a>  <span class="comment">     * @param string class name</span>
<a name="l2459"><span class="linenum">2459</span></a>  <span class="comment">     * @return boolean true, if a link was displayed; false if there's no email address for the assigned User.</span>
<a name="l2460"><span class="linenum">2460</span></a>  <span class="comment">     */</span>
<a name="l2461"><span class="linenum">2461</span></a>  	function <a class="function" onClick="logFunction('msgform_link_assigned')" href="../../../_functions/msgform_link_assigned.html" onMouseOver="funcPopup(event,'msgform_link_assigned')">msgform_link_assigned</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '' )
<a name="l2462"><span class="linenum">2462</span></a>      {
<a name="l2463"><span class="linenum">2463</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assigned_User')" href="../../../_functions/get_assigned_user.html" onMouseOver="funcPopup(event,'get_assigned_user')">get_assigned_User</a>() || empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>-&gt;email) )
<a name="l2464"><span class="linenum">2464</span></a>          { // We have no email for this Author :(
<a name="l2465"><span class="linenum">2465</span></a>              return false;
<a name="l2466"><span class="linenum">2466</span></a>          }
<a name="l2467"><span class="linenum">2467</span></a>  
<a name="l2468"><span class="linenum">2468</span></a>          <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, 'recipient_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>-&gt;ID );
<a name="l2469"><span class="linenum">2469</span></a>          <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, 'post_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l2470"><span class="linenum">2470</span></a>  
<a name="l2471"><span class="linenum">2471</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send email to assigned user');
<a name="l2472"><span class="linenum">2472</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'email', 'imgtag', array( 'class' =&gt; 'middle', 'title' =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) );
<a name="l2473"><span class="linenum">2473</span></a>  
<a name="l2474"><span class="linenum">2474</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l2475"><span class="linenum">2475</span></a>          echo '&lt;a href=&quot;'.<a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l2476"><span class="linenum">2476</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) echo ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l2477"><span class="linenum">2477</span></a>          echo ' rel=&quot;nofollow&quot;&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2478"><span class="linenum">2478</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l2479"><span class="linenum">2479</span></a>  
<a name="l2480"><span class="linenum">2480</span></a>          return true;
<a name="l2481"><span class="linenum">2481</span></a>      }
<a name="l2482"><span class="linenum">2482</span></a>  
<a name="l2483"><span class="linenum">2483</span></a>  
<a name="l2484"><span class="linenum">2484</span></a>      <span class="comment">/**</span>
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment">     * Display a link to pages for multi-page items</span>
<a name="l2486"><span class="linenum">2486</span></a>  <span class="comment">     *</span>
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment">     * @param array of params</span>
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment">     */</span>
<a name="l2490"><span class="linenum">2490</span></a>  	function <a class="function" onClick="logFunction('page_links')" href="../../../_functions/page_links.html" onMouseOver="funcPopup(event,'page_links')">page_links</a>()
<a name="l2491"><span class="linenum">2491</span></a>      {
<a name="l2492"><span class="linenum">2492</span></a>          <a class="var it1568" onMouseOver="hilite(1568)" onMouseOut="lolite()" onClick="logVariable('num_args')" href="../../../_variables/num_args.html">$num_args</a> = <a class="phpfunction" onClick="logFunction('func_num_args')" href="../../../_functions/func_num_args.html" onMouseOver="phpfuncPopup(event,'func_num_args')">func_num_args</a>();
<a name="l2493"><span class="linenum">2493</span></a>          <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l2494"><span class="linenum">2494</span></a>  
<a name="l2495"><span class="linenum">2495</span></a>          if( <a class="var it1568" onMouseOver="hilite(1568)" onMouseOut="lolite()" onClick="logVariable('num_args')" href="../../../_variables/num_args.html">$num_args</a> == 1 &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[0]) )
<a name="l2496"><span class="linenum">2496</span></a>          {
<a name="l2497"><span class="linenum">2497</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[0];
<a name="l2498"><span class="linenum">2498</span></a>              if( !isset(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format']) ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] = 'htmlbody';
<a name="l2499"><span class="linenum">2499</span></a>          }
<a name="l2500"><span class="linenum">2500</span></a>          else
<a name="l2501"><span class="linenum">2501</span></a>          {    // Deprecated since v5, left for compatibility with old skins
<a name="l2502"><span class="linenum">2502</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before']        = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[0]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[0] : '&lt;p class=&quot;evo_post_pagination&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pages:').' ';
<a name="l2503"><span class="linenum">2503</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after']        = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[1]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[1] : '&lt;/p&gt;';
<a name="l2504"><span class="linenum">2504</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator']    = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[2]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[2] : ' ';
<a name="l2505"><span class="linenum">2505</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['single']        = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[3]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[3] : '';
<a name="l2506"><span class="linenum">2506</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page']    = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[4]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[4] : '#';
<a name="l2507"><span class="linenum">2507</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['pagelink']        = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[5]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[5] : '%d';
<a name="l2508"><span class="linenum">2508</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url']            = isset(<a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[6]) ? <a class="var it1569" onMouseOver="hilite(1569)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[6] : '';
<a name="l2509"><span class="linenum">2509</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format']        = 'htmlbody';
<a name="l2510"><span class="linenum">2510</span></a>          }
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_page_links')" href="../../../_functions/get_page_links.html" onMouseOver="funcPopup(event,'get_page_links')">get_page_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l2513"><span class="linenum">2513</span></a>      }
<a name="l2514"><span class="linenum">2514</span></a>  
<a name="l2515"><span class="linenum">2515</span></a>  
<a name="l2516"><span class="linenum">2516</span></a>      <span class="comment">/**</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment">     * Get a link to pages for multi-page items</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment">     *</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">     * @param array of params</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment">     */</span>
<a name="l2522"><span class="linenum">2522</span></a>  	function <a class="function" onClick="logFunction('get_page_links')" href="../../../_functions/get_page_links.html" onMouseOver="funcPopup(event,'get_page_links')">get_page_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2523"><span class="linenum">2523</span></a>      {
<a name="l2524"><span class="linenum">2524</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2525"><span class="linenum">2525</span></a>                      'before'       =&gt; '&lt;p class=&quot;evo_post_pagination&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pages:').' ',
<a name="l2526"><span class="linenum">2526</span></a>                      'after'        =&gt; '&lt;/p&gt;',
<a name="l2527"><span class="linenum">2527</span></a>                      'separator'    =&gt; ' ',
<a name="l2528"><span class="linenum">2528</span></a>                      'single'       =&gt; '',
<a name="l2529"><span class="linenum">2529</span></a>                      'current_page' =&gt; '#',
<a name="l2530"><span class="linenum">2530</span></a>                      'pagelink'     =&gt; '%d',
<a name="l2531"><span class="linenum">2531</span></a>                      'url'          =&gt; '',
<a name="l2532"><span class="linenum">2532</span></a>                  ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2533"><span class="linenum">2533</span></a>  
<a name="l2534"><span class="linenum">2534</span></a>          global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l2535"><span class="linenum">2535</span></a>  
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment">        // Make sure, the pages are split up:</span>
<a name="l2537"><span class="linenum">2537</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('split_pages')" href="../../../_functions/split_pages.html" onMouseOver="funcPopup(event,'split_pages')">split_pages</a>();
<a name="l2538"><span class="linenum">2538</span></a>  
<a name="l2539"><span class="linenum">2539</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pages.html">pages</a> &lt;= 1 )
<a name="l2540"><span class="linenum">2540</span></a>          { // Single page:
<a name="l2541"><span class="linenum">2541</span></a>              return <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['single'];
<a name="l2542"><span class="linenum">2542</span></a>          }
<a name="l2543"><span class="linenum">2543</span></a>  
<a name="l2544"><span class="linenum">2544</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator'] == NULL )
<a name="l2545"><span class="linenum">2545</span></a>          { // Don't display pages
<a name="l2546"><span class="linenum">2546</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'] !== NULL )
<a name="l2547"><span class="linenum">2547</span></a>              {
<a name="l2548"><span class="linenum">2548</span></a>                  return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'], <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2549"><span class="linenum">2549</span></a>              }
<a name="l2550"><span class="linenum">2550</span></a>              return;
<a name="l2551"><span class="linenum">2551</span></a>          }
<a name="l2552"><span class="linenum">2552</span></a>  
<a name="l2553"><span class="linenum">2553</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page'] == '#' )
<a name="l2554"><span class="linenum">2554</span></a>          {
<a name="l2555"><span class="linenum">2555</span></a>              global <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a>;
<a name="l2556"><span class="linenum">2556</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page'] = <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../_variables/page.html">$page</a>;
<a name="l2557"><span class="linenum">2557</span></a>          }
<a name="l2558"><span class="linenum">2558</span></a>  
<a name="l2559"><span class="linenum">2559</span></a>          if( empty(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url']) )
<a name="l2560"><span class="linenum">2560</span></a>          {
<a name="l2561"><span class="linenum">2561</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( '', '', '&amp;amp;' );
<a name="l2562"><span class="linenum">2562</span></a>          }
<a name="l2563"><span class="linenum">2563</span></a>  
<a name="l2564"><span class="linenum">2564</span></a>          <a class="var it1570" onMouseOver="hilite(1570)" onMouseOut="lolite()" onClick="logVariable('page_links')" href="../../../_variables/page_links.html">$page_links</a> = array();
<a name="l2565"><span class="linenum">2565</span></a>  
<a name="l2566"><span class="linenum">2566</span></a>          <a class="var it1571" onMouseOver="hilite(1571)" onMouseOut="lolite()" onClick="logVariable('page_prev_i')" href="../../../_variables/page_prev_i.html">$page_prev_i</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page'] - 1;
<a name="l2567"><span class="linenum">2567</span></a>          <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('page_next_i')" href="../../../_variables/page_next_i.html">$page_next_i</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page'] + 1;
<a name="l2568"><span class="linenum">2568</span></a>          for( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 1; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt;= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pages.html">pages</a>; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l2569"><span class="linenum">2569</span></a>          {
<a name="l2570"><span class="linenum">2570</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('%d', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['pagelink']);
<a name="l2571"><span class="linenum">2571</span></a>  
<a name="l2572"><span class="linenum">2572</span></a>              if( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> != <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['current_page'] )
<a name="l2573"><span class="linenum">2573</span></a>              {
<a name="l2574"><span class="linenum">2574</span></a>                  <a class="var it1573" onMouseOver="hilite(1573)" onMouseOut="lolite()" onClick="logVariable('attr_rel')" href="../../../_variables/attr_rel.html">$attr_rel</a> = '';
<a name="l2575"><span class="linenum">2575</span></a>                  if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> == 'single' || <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> == 'page' )
<a name="l2576"><span class="linenum">2576</span></a>                  { // Add rel=&quot;prev|next&quot; only on single post view
<a name="l2577"><span class="linenum">2577</span></a>                      if( <a class="var it1571" onMouseOver="hilite(1571)" onMouseOut="lolite()" onClick="logVariable('page_prev_i')" href="../../../_variables/page_prev_i.html">$page_prev_i</a> == <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l2578"><span class="linenum">2578</span></a>                      {
<a name="l2579"><span class="linenum">2579</span></a>                          <a class="var it1573" onMouseOver="hilite(1573)" onMouseOut="lolite()" onClick="logVariable('attr_rel')" href="../../../_variables/attr_rel.html">$attr_rel</a> = ' rel=&quot;prev&quot;';
<a name="l2580"><span class="linenum">2580</span></a>                      }
<a name="l2581"><span class="linenum">2581</span></a>                      elseif( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('page_next_i')" href="../../../_variables/page_next_i.html">$page_next_i</a> == <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l2582"><span class="linenum">2582</span></a>                      {
<a name="l2583"><span class="linenum">2583</span></a>                          <a class="var it1573" onMouseOver="hilite(1573)" onMouseOut="lolite()" onClick="logVariable('attr_rel')" href="../../../_variables/attr_rel.html">$attr_rel</a> = ' rel=&quot;next&quot;';
<a name="l2584"><span class="linenum">2584</span></a>                      }
<a name="l2585"><span class="linenum">2585</span></a>                  }
<a name="l2586"><span class="linenum">2586</span></a>  
<a name="l2587"><span class="linenum">2587</span></a>                  if( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> == 1 )
<a name="l2588"><span class="linenum">2588</span></a>                  {    // First page special:
<a name="l2589"><span class="linenum">2589</span></a>                      <a class="var it1570" onMouseOver="hilite(1570)" onMouseOut="lolite()" onClick="logVariable('page_links')" href="../../../_variables/page_links.html">$page_links</a>[] = '&lt;a href=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'].'&quot;'.<a class="var it1573" onMouseOver="hilite(1573)" onMouseOut="lolite()" onClick="logVariable('attr_rel')" href="../../../_variables/attr_rel.html">$attr_rel</a>.'&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2590"><span class="linenum">2590</span></a>                  }
<a name="l2591"><span class="linenum">2591</span></a>                  else
<a name="l2592"><span class="linenum">2592</span></a>                  {
<a name="l2593"><span class="linenum">2593</span></a>                      <a class="var it1570" onMouseOver="hilite(1570)" onMouseOut="lolite()" onClick="logVariable('page_links')" href="../../../_variables/page_links.html">$page_links</a>[] = '&lt;a href=&quot;'.<a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'], 'page='.<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> ).'&quot;'.<a class="var it1573" onMouseOver="hilite(1573)" onMouseOut="lolite()" onClick="logVariable('attr_rel')" href="../../../_variables/attr_rel.html">$attr_rel</a>.'&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2594"><span class="linenum">2594</span></a>                  }
<a name="l2595"><span class="linenum">2595</span></a>              }
<a name="l2596"><span class="linenum">2596</span></a>              else
<a name="l2597"><span class="linenum">2597</span></a>              {
<a name="l2598"><span class="linenum">2598</span></a>                  <a class="var it1570" onMouseOver="hilite(1570)" onMouseOut="lolite()" onClick="logVariable('page_links')" href="../../../_variables/page_links.html">$page_links</a>[] = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>;
<a name="l2599"><span class="linenum">2599</span></a>              }
<a name="l2600"><span class="linenum">2600</span></a>          }
<a name="l2601"><span class="linenum">2601</span></a>  
<a name="l2602"><span class="linenum">2602</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator'], <a class="var it1570" onMouseOver="hilite(1570)" onMouseOut="lolite()" onClick="logVariable('page_links')" href="../../../_variables/page_links.html">$page_links</a> ).<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2603"><span class="linenum">2603</span></a>  
<a name="l2604"><span class="linenum">2604</span></a>          return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2605"><span class="linenum">2605</span></a>      }
<a name="l2606"><span class="linenum">2606</span></a>  
<a name="l2607"><span class="linenum">2607</span></a>  
<a name="l2608"><span class="linenum">2608</span></a>      <span class="comment">/**</span>
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">     * Get an attached image tag with lightbox reference</span>
<a name="l2610"><span class="linenum">2610</span></a>  <span class="comment">     *</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment">     * @private function</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment">     *</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment">     * @param object the attached image Link</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">     * @param array params</span>
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">     * @return string the attached image tag</span>
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment">     */</span>
<a name="l2617"><span class="linenum">2617</span></a>  	function <a class="function" onClick="logFunction('get_attached_image_tag')" href="../../../_functions/get_attached_image_tag.html" onMouseOver="funcPopup(event,'get_attached_image_tag')">get_attached_image_tag</a>( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2618"><span class="linenum">2618</span></a>      {
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment">        // Make sure $link_to is set</span>
<a name="l2620"><span class="linenum">2620</span></a>          <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_to'] ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_to'] : 'original';
<a name="l2621"><span class="linenum">2621</span></a>  
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment">        // Force url of image for link positions: 'teaserperm' &amp; 'teaserlink'</span>
<a name="l2623"><span class="linenum">2623</span></a>          switch( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'position' ) )
<a name="l2624"><span class="linenum">2624</span></a>          {
<a name="l2625"><span class="linenum">2625</span></a>              case 'teaserlink':
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">                // Teaser-Ext Link</span>
<a name="l2627"><span class="linenum">2627</span></a>                  if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ) != '' )
<a name="l2628"><span class="linenum">2628</span></a>                  { // Only when post field 'Link to url' is defined
<a name="l2629"><span class="linenum">2629</span></a>                      <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = 'url';
<a name="l2630"><span class="linenum">2630</span></a>                      break;
<a name="l2631"><span class="linenum">2631</span></a>                  }
<a name="l2632"><span class="linenum">2632</span></a>  <span class="comment">                // If post url is empty then use this link position as 'teaserperm':</span>
<a name="l2633"><span class="linenum">2633</span></a>  
<a name="l2634"><span class="linenum">2634</span></a>              case 'teaserperm':
<a name="l2635"><span class="linenum">2635</span></a>              case 'cover':
<a name="l2636"><span class="linenum">2636</span></a>  <span class="comment">                // Teaser-Permalink or Cover</span>
<a name="l2637"><span class="linenum">2637</span></a>                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l2638"><span class="linenum">2638</span></a>                  if( isset( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> ) &amp;&amp; <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> == 'single' )
<a name="l2639"><span class="linenum">2639</span></a>                  { // Force link to image url and use colorbox only when we already on permalink page
<a name="l2640"><span class="linenum">2640</span></a>                      <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = 'original';
<a name="l2641"><span class="linenum">2641</span></a>                  }
<a name="l2642"><span class="linenum">2642</span></a>                  else
<a name="l2643"><span class="linenum">2643</span></a>                  { // Force link to permalink of this post
<a name="l2644"><span class="linenum">2644</span></a>                      <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = 'single';
<a name="l2645"><span class="linenum">2645</span></a>                  }
<a name="l2646"><span class="linenum">2646</span></a>                  break;
<a name="l2647"><span class="linenum">2647</span></a>          }
<a name="l2648"><span class="linenum">2648</span></a>  
<a name="l2649"><span class="linenum">2649</span></a>          if( <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> == 'single' || <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> == 'url' )
<a name="l2650"><span class="linenum">2650</span></a>          { // We're linking to the <a class="function" onClick="logFunction('post')" href="../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a> (displayed on a single post page):
<a name="l2651"><span class="linenum">2651</span></a>              if( <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> == 'url' &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ) != '' )
<a name="l2652"><span class="linenum">2652</span></a>              { // Link to url from the post field 'Link to url'
<a name="l2653"><span class="linenum">2653</span></a>                  <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' );
<a name="l2654"><span class="linenum">2654</span></a>              }
<a name="l2655"><span class="linenum">2655</span></a>              else
<a name="l2656"><span class="linenum">2656</span></a>              { // Link to permament url
<a name="l2657"><span class="linenum">2657</span></a>                  <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a> );
<a name="l2658"><span class="linenum">2658</span></a>              }
<a name="l2659"><span class="linenum">2659</span></a>              <a class="var it1575" onMouseOver="hilite(1575)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../_variables/link_title.html">$link_title</a> = '#desc#';
<a name="l2660"><span class="linenum">2660</span></a>              <a class="var it1576" onMouseOver="hilite(1576)" onMouseOut="lolite()" onClick="logVariable('link_rel')" href="../../../_variables/link_rel.html">$link_rel</a> = isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_rel'] ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_rel'] : '';
<a name="l2661"><span class="linenum">2661</span></a>          }
<a name="l2662"><span class="linenum">2662</span></a>          else
<a name="l2663"><span class="linenum">2663</span></a>          { // We're linking to the original image, let lighbox (or clone) quick in:
<a name="l2664"><span class="linenum">2664</span></a>              <a class="var it1575" onMouseOver="hilite(1575)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../_variables/link_title.html">$link_title</a> =  ( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_title'] ) &amp;&amp; !isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['hide_image_link_title'] ) ) ? '#desc#' : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_title'];    <span class="comment">// This title will be used by lightbox (colorbox for instance)</span>
<a name="l2665"><span class="linenum">2665</span></a>              <a class="var it1576" onMouseOver="hilite(1576)" onMouseOut="lolite()" onClick="logVariable('link_rel')" href="../../../_variables/link_rel.html">$link_rel</a> = isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_rel'] ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_link_rel'] : 'lightbox[p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.']';    <span class="comment">// Make one &quot;gallery&quot; per post.</span>
<a name="l2666"><span class="linenum">2666</span></a>          }
<a name="l2667"><span class="linenum">2667</span></a>  
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">        // Generate the IMG tag with all the alt, title and desc if available</span>
<a name="l2669"><span class="linenum">2669</span></a>          return <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get_tag')" href="../../../_functions/get_tag.html" onMouseOver="funcPopup(event,'get_tag')">get_tag</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, array(
<a name="l2670"><span class="linenum">2670</span></a>                      'image_link_to'    =&gt; <a class="var it1574" onMouseOver="hilite(1574)" onMouseOut="lolite()" onClick="logVariable('link_to')" href="../../../_variables/link_to.html">$link_to</a>,
<a name="l2671"><span class="linenum">2671</span></a>                      'image_link_title' =&gt; <a class="var it1575" onMouseOver="hilite(1575)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../_variables/link_title.html">$link_title</a>,
<a name="l2672"><span class="linenum">2672</span></a>                      'image_link_rel'   =&gt; <a class="var it1576" onMouseOver="hilite(1576)" onMouseOut="lolite()" onClick="logVariable('link_rel')" href="../../../_variables/link_rel.html">$link_rel</a>,
<a name="l2673"><span class="linenum">2673</span></a>                      'image_alt'        =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>,
<a name="l2674"><span class="linenum">2674</span></a>                  ) ) );
<a name="l2675"><span class="linenum">2675</span></a>      }
<a name="l2676"><span class="linenum">2676</span></a>  
<a name="l2677"><span class="linenum">2677</span></a>  
<a name="l2678"><span class="linenum">2678</span></a>      <span class="comment">/**</span>
<a name="l2679"><span class="linenum">2679</span></a>  <span class="comment">     * Display the images linked to the current Item</span>
<a name="l2680"><span class="linenum">2680</span></a>  <span class="comment">     *</span>
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">     * @param array of params</span>
<a name="l2682"><span class="linenum">2682</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">     */</span>
<a name="l2684"><span class="linenum">2684</span></a>  	function <a class="function" onClick="logFunction('images')" href="../../../_functions/images.html" onMouseOver="funcPopup(event,'images')">images</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2685"><span class="linenum">2685</span></a>      {
<a name="l2686"><span class="linenum">2686</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_images')" href="../../../_functions/get_images.html" onMouseOver="funcPopup(event,'get_images')">get_images</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2687"><span class="linenum">2687</span></a>      }
<a name="l2688"><span class="linenum">2688</span></a>  
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>      <span class="comment">/**</span>
<a name="l2691"><span class="linenum">2691</span></a>  <span class="comment">     * Get block of images linked to the current Item</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">     *</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">     * @param array of params</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment">     */</span>
<a name="l2696"><span class="linenum">2696</span></a>  	function <a class="function" onClick="logFunction('get_images')" href="../../../_functions/get_images.html" onMouseOver="funcPopup(event,'get_images')">get_images</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2697"><span class="linenum">2697</span></a>      {
<a name="l2698"><span class="linenum">2698</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2703"><span class="linenum">2703</span></a>                  'before'                     =&gt; '&lt;div&gt;',
<a name="l2704"><span class="linenum">2704</span></a>                  'before_image'               =&gt; '&lt;div class=&quot;image_block&quot;&gt;',
<a name="l2705"><span class="linenum">2705</span></a>                  'before_image_legend'        =&gt; '&lt;div class=&quot;image_legend&quot;&gt;',
<a name="l2706"><span class="linenum">2706</span></a>                  'after_image_legend'         =&gt; '&lt;/div&gt;',
<a name="l2707"><span class="linenum">2707</span></a>                  'after_image'                =&gt; '&lt;/div&gt;',
<a name="l2708"><span class="linenum">2708</span></a>                  'after'                      =&gt; '&lt;/div&gt;',
<a name="l2709"><span class="linenum">2709</span></a>                  'image_size'                 =&gt; 'fit-720x500',
<a name="l2710"><span class="linenum">2710</span></a>                  'image_size_x'               =&gt; 1, // Use '2' to build 2x sized thumbnail that can be used for Retina display
<a name="l2711"><span class="linenum">2711</span></a>                  'image_link_to'              =&gt; 'original', // Can be 'original' (image) or 'single' (this post)
<a name="l2712"><span class="linenum">2712</span></a>                  'limit'                      =&gt; 1000, // Max # of images displayed
<a name="l2713"><span class="linenum">2713</span></a>                  'before_gallery'             =&gt; '&lt;div class=&quot;bGallery&quot;&gt;',
<a name="l2714"><span class="linenum">2714</span></a>                  'after_gallery'              =&gt; '&lt;/div&gt;',
<a name="l2715"><span class="linenum">2715</span></a>                  'gallery_image_size'         =&gt; 'crop-80x80',
<a name="l2716"><span class="linenum">2716</span></a>                  'gallery_image_limit'        =&gt; 1000,
<a name="l2717"><span class="linenum">2717</span></a>                  'gallery_colls'              =&gt; 5,
<a name="l2718"><span class="linenum">2718</span></a>                  'gallery_order'              =&gt; '', // 'ASC', 'DESC', 'RAND'
<a name="l2719"><span class="linenum">2719</span></a>                  'gallery_link_rel'           =&gt; 'lightbox[p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.']',
<a name="l2720"><span class="linenum">2720</span></a>                  'restrict_to_image_position' =&gt; 'teaser,teaserperm,teaserlink,aftermore', // 'teaser'|'teaserperm'|'teaserlink'|'aftermore'|'inline'|'cover'
<a name="l2721"><span class="linenum">2721</span></a>                  'data'                       =&gt;  &amp; <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>,
<a name="l2722"><span class="linenum">2722</span></a>                  'get_rendered_attachments'   =&gt; true,
<a name="l2723"><span class="linenum">2723</span></a>                  'links_sql_select'           =&gt; '',
<a name="l2724"><span class="linenum">2724</span></a>                  'links_sql_orderby'          =&gt; 'link_order',
<a name="l2725"><span class="linenum">2725</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2726"><span class="linenum">2726</span></a>  
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment">        // Get list of ALL attached files</span>
<a name="l2728"><span class="linenum">2728</span></a>          <a class="var it1577" onMouseOver="hilite(1577)" onMouseOut="lolite()" onClick="logVariable('links_params')" href="../../../_variables/links_params.html">$links_params</a> = array(
<a name="l2729"><span class="linenum">2729</span></a>                  'sql_select_add' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['links_sql_select'],
<a name="l2730"><span class="linenum">2730</span></a>                  'sql_order_by'   =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['links_sql_orderby']
<a name="l2731"><span class="linenum">2731</span></a>              );
<a name="l2732"><span class="linenum">2732</span></a>          <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2733"><span class="linenum">2733</span></a>          if( ! <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( 1000, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['restrict_to_image_position'], NULL, <a class="var it1577" onMouseOver="hilite(1577)" onMouseOut="lolite()" onClick="logVariable('links_params')" href="../../../_variables/links_params.html">$links_params</a> ) )
<a name="l2734"><span class="linenum">2734</span></a>          {
<a name="l2735"><span class="linenum">2735</span></a>              return '';
<a name="l2736"><span class="linenum">2736</span></a>          }
<a name="l2737"><span class="linenum">2737</span></a>  
<a name="l2738"><span class="linenum">2738</span></a>          <a class="var it1579" onMouseOver="hilite(1579)" onMouseOut="lolite()" onClick="logVariable('galleries')" href="../../../_variables/galleries.html">$galleries</a> = array();
<a name="l2739"><span class="linenum">2739</span></a>          <a class="var it1580" onMouseOver="hilite(1580)" onMouseOut="lolite()" onClick="logVariable('image_counter')" href="../../../_variables/image_counter.html">$image_counter</a> = 0;
<a name="l2740"><span class="linenum">2740</span></a>          <a class="var it1581" onMouseOver="hilite(1581)" onMouseOut="lolite()" onClick="logVariable('plugin_render_attachments')" href="../../../_variables/plugin_render_attachments.html">$plugin_render_attachments</a> = false;
<a name="l2741"><span class="linenum">2741</span></a>          while( <a class="var it1580" onMouseOver="hilite(1580)" onMouseOut="lolite()" onClick="logVariable('image_counter')" href="../../../_variables/image_counter.html">$image_counter</a> &lt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['limit'] &amp;&amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a> = &amp; <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a>-&gt;get_next() )
<a name="l2742"><span class="linenum">2742</span></a>          {
<a name="l2743"><span class="linenum">2743</span></a>              if( ! ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = &amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;get_File() ) )
<a name="l2744"><span class="linenum">2744</span></a>              { // No File object
<a name="l2745"><span class="linenum">2745</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2746"><span class="linenum">2746</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Link ID#%d of item #%d does not have a file object!', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a onClick="logVariable('ID')" class="var it10745" onMouseOver="hilite(10745)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l2747"><span class="linenum">2747</span></a>                  continue;
<a name="l2748"><span class="linenum">2748</span></a>              }
<a name="l2749"><span class="linenum">2749</span></a>  
<a name="l2750"><span class="linenum">2750</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2751"><span class="linenum">2751</span></a>              { // File doesn't exist
<a name="l2752"><span class="linenum">2752</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2753"><span class="linenum">2753</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to item #%d does not exist (%s)!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l2754"><span class="linenum">2754</span></a>                  continue;
<a name="l2755"><span class="linenum">2755</span></a>              }
<a name="l2756"><span class="linenum">2756</span></a>  
<a name="l2757"><span class="linenum">2757</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['File'] = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>;
<a name="l2758"><span class="linenum">2758</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Link'] = <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>;
<a name="l2759"><span class="linenum">2759</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Item'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>;
<a name="l2760"><span class="linenum">2760</span></a>  
<a name="l2761"><span class="linenum">2761</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="phpfunction" onClick="logFunction('is_dir')" href="../../../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>() &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['gallery_image_limit'] &gt; 0 )
<a name="l2762"><span class="linenum">2762</span></a>              { // This is a directory/gallery
<a name="l2763"><span class="linenum">2763</span></a>                  if( ( <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('gallery')" href="../../../_variables/gallery.html">$gallery</a> = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_gallery')" href="../../../_functions/get_gallery.html" onMouseOver="funcPopup(event,'get_gallery')">get_gallery</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) ) != '' )
<a name="l2764"><span class="linenum">2764</span></a>                  { // Got gallery code
<a name="l2765"><span class="linenum">2765</span></a>                      <a class="var it1579" onMouseOver="hilite(1579)" onMouseOut="lolite()" onClick="logVariable('galleries')" href="../../../_variables/galleries.html">$galleries</a>[] = <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('gallery')" href="../../../_variables/gallery.html">$gallery</a>;
<a name="l2766"><span class="linenum">2766</span></a>                  }
<a name="l2767"><span class="linenum">2767</span></a>                  continue;
<a name="l2768"><span class="linenum">2768</span></a>              }
<a name="l2769"><span class="linenum">2769</span></a>  
<a name="l2770"><span class="linenum">2770</span></a>              if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['get_rendered_attachments'] )
<a name="l2771"><span class="linenum">2771</span></a>              { // Save <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> to temp var in order to don't get the rendered data from plugins
<a name="l2772"><span class="linenum">2772</span></a>                  <a class="var it1583" onMouseOver="hilite(1583)" onMouseOut="lolite()" onClick="logVariable('temp_r')" href="../../../_variables/temp_r.html">$temp_r</a> = <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2773"><span class="linenum">2773</span></a>              }
<a name="l2774"><span class="linenum">2774</span></a>  
<a name="l2775"><span class="linenum">2775</span></a>              <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l2776"><span class="linenum">2776</span></a>              foreach( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> as <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> =&gt; <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('param_value')" href="../../../_variables/param_value.html">$param_value</a> )
<a name="l2777"><span class="linenum">2777</span></a>              { // Pass all params by reference, in order to give possibility to modify them by plugin
<a name="l2778"><span class="linenum">2778</span></a>  <span class="comment">                // So plugins can add some data before/after image tags (E.g. used by infodots plugin)</span>
<a name="l2779"><span class="linenum">2779</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ] = &amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ];
<a name="l2780"><span class="linenum">2780</span></a>              }
<a name="l2781"><span class="linenum">2781</span></a>  
<a name="l2782"><span class="linenum">2782</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_true')" href="../../../_functions/trigger_event_first_true.html" onMouseOver="funcPopup(event,'trigger_event_first_true')">trigger_event_first_true</a>( 'RenderItemAttachment', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) ) != 0 )
<a name="l2783"><span class="linenum">2783</span></a>              { // Render attachments by plugin, Append the html content to <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['data'] and to <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>
<a name="l2784"><span class="linenum">2784</span></a>                  if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['get_rendered_attachments'] )
<a name="l2785"><span class="linenum">2785</span></a>                  { // Restore <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> value and mark this item has the rendered attachments
<a name="l2786"><span class="linenum">2786</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it1583" onMouseOver="hilite(1583)" onMouseOut="lolite()" onClick="logVariable('temp_r')" href="../../../_variables/temp_r.html">$temp_r</a>;
<a name="l2787"><span class="linenum">2787</span></a>                      <a class="var it1581" onMouseOver="hilite(1581)" onMouseOut="lolite()" onClick="logVariable('plugin_render_attachments')" href="../../../_variables/plugin_render_attachments.html">$plugin_render_attachments</a> = true;
<a name="l2788"><span class="linenum">2788</span></a>                  }
<a name="l2789"><span class="linenum">2789</span></a>                  continue;
<a name="l2790"><span class="linenum">2790</span></a>              }
<a name="l2791"><span class="linenum">2791</span></a>  
<a name="l2792"><span class="linenum">2792</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l2793"><span class="linenum">2793</span></a>              { // Skip anything that is not an image
<a name="l2794"><span class="linenum">2794</span></a>  <span class="comment">                // fp&gt; TODO: maybe this property should be stored in link_ltype_ID</span>
<a name="l2795"><span class="linenum">2795</span></a>  
<a name="l2796"><span class="linenum">2796</span></a>  <span class="comment">                //$r .= $this-&gt;attachment_files($params);</span>
<a name="l2797"><span class="linenum">2797</span></a>                  continue;
<a name="l2798"><span class="linenum">2798</span></a>              }
<a name="l2799"><span class="linenum">2799</span></a>  
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment">            // Generate the IMG tag with all the alt, title and desc if available</span>
<a name="l2801"><span class="linenum">2801</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attached_image_tag')" href="../../../_functions/get_attached_image_tag.html" onMouseOver="funcPopup(event,'get_attached_image_tag')">get_attached_image_tag</a>( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2802"><span class="linenum">2802</span></a>  
<a name="l2803"><span class="linenum">2803</span></a>              <a class="var it1580" onMouseOver="hilite(1580)" onMouseOut="lolite()" onClick="logVariable('image_counter')" href="../../../_variables/image_counter.html">$image_counter</a>++;
<a name="l2804"><span class="linenum">2804</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a>;
<a name="l2805"><span class="linenum">2805</span></a>          }
<a name="l2806"><span class="linenum">2806</span></a>  
<a name="l2807"><span class="linenum">2807</span></a>          if( empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) &amp;&amp; <a class="var it1581" onMouseOver="hilite(1581)" onMouseOut="lolite()" onClick="logVariable('plugin_render_attachments')" href="../../../_variables/plugin_render_attachments.html">$plugin_render_attachments</a> )
<a name="l2808"><span class="linenum">2808</span></a>          { // This item doesn't contain the images but it has the rendered attachments by plugins
<a name="l2809"><span class="linenum">2809</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'plugin_render_attachments';
<a name="l2810"><span class="linenum">2810</span></a>          }
<a name="l2811"><span class="linenum">2811</span></a>  
<a name="l2812"><span class="linenum">2812</span></a>          if( !empty(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>) )
<a name="l2813"><span class="linenum">2813</span></a>          {
<a name="l2814"><span class="linenum">2814</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2815"><span class="linenum">2815</span></a>  
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">            // Character conversions</span>
<a name="l2817"><span class="linenum">2817</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2818"><span class="linenum">2818</span></a>          }
<a name="l2819"><span class="linenum">2819</span></a>  
<a name="l2820"><span class="linenum">2820</span></a>          if( !empty(<a class="var it1579" onMouseOver="hilite(1579)" onMouseOut="lolite()" onClick="logVariable('galleries')" href="../../../_variables/galleries.html">$galleries</a>) )
<a name="l2821"><span class="linenum">2821</span></a>          { // Append galleries
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment">            // sam2kb&gt; It's done like that only until we figure out a better way to display galleries.</span>
<a name="l2823"><span class="linenum">2823</span></a>  
<a name="l2824"><span class="linenum">2824</span></a>              <span class="comment">/*</span>
<a name="l2825"><span class="linenum">2825</span></a>  <span class="comment">            sam2kb&gt; TODO: use shortcode [gallery option1=&quot;value1&quot; option2=&quot;value2&quot;]</span>
<a name="l2826"><span class="linenum">2826</span></a>  <span class="comment">                'columns' - table columns</span>
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment">                'limit' - a number of images,</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment">                'size' - selected/large image size</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">                'thumbsize' - thumbnails image size</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">                'order' - files order ASC/DESC/RAND</span>
<a name="l2831"><span class="linenum">2831</span></a>  <span class="comment">            */</span>
<a name="l2832"><span class="linenum">2832</span></a>  
<a name="l2833"><span class="linenum">2833</span></a>  <span class="comment">            // Character conversions</span>
<a name="l2834"><span class="linenum">2834</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= &quot;\n&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n&quot;, <a class="var it1579" onMouseOver="hilite(1579)" onMouseOut="lolite()" onClick="logVariable('galleries')" href="../../../_variables/galleries.html">$galleries</a>), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2835"><span class="linenum">2835</span></a>          }
<a name="l2836"><span class="linenum">2836</span></a>  
<a name="l2837"><span class="linenum">2837</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2838"><span class="linenum">2838</span></a>      }
<a name="l2839"><span class="linenum">2839</span></a>  
<a name="l2840"><span class="linenum">2840</span></a>  
<a name="l2841"><span class="linenum">2841</span></a>      <span class="comment">/**</span>
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment">     * Get URL of a first cover image</span>
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">     *</span>
<a name="l2844"><span class="linenum">2844</span></a>  <span class="comment">     * @return string|NULL cover URL or NULL if it doesn't exist</span>
<a name="l2845"><span class="linenum">2845</span></a>  <span class="comment">     */</span>
<a name="l2846"><span class="linenum">2846</span></a>  	function <a class="function" onClick="logFunction('get_cover_image_url')" href="../../../_functions/get_cover_image_url.html" onMouseOver="funcPopup(event,'get_cover_image_url')">get_cover_image_url</a>()
<a name="l2847"><span class="linenum">2847</span></a>      {
<a name="l2848"><span class="linenum">2848</span></a>          <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2849"><span class="linenum">2849</span></a>          if( ! <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( 1, 'cover' ) )
<a name="l2850"><span class="linenum">2850</span></a>          { // No cover image
<a name="l2851"><span class="linenum">2851</span></a>              return NULL;
<a name="l2852"><span class="linenum">2852</span></a>          }
<a name="l2853"><span class="linenum">2853</span></a>  
<a name="l2854"><span class="linenum">2854</span></a>          if( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a> = &amp; <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a>-&gt;get_next() )
<a name="l2855"><span class="linenum">2855</span></a>          {
<a name="l2856"><span class="linenum">2856</span></a>              if( ! ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = &amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;get_File() ) )
<a name="l2857"><span class="linenum">2857</span></a>              { // No File object
<a name="l2858"><span class="linenum">2858</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2859"><span class="linenum">2859</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Link ID#%d of item #%d does not have a file object!', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a onClick="logVariable('ID')" class="var it10745" onMouseOver="hilite(10745)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l2860"><span class="linenum">2860</span></a>                  return NULL;
<a name="l2861"><span class="linenum">2861</span></a>              }
<a name="l2862"><span class="linenum">2862</span></a>  
<a name="l2863"><span class="linenum">2863</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2864"><span class="linenum">2864</span></a>              { // File doesn't exist
<a name="l2865"><span class="linenum">2865</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2866"><span class="linenum">2866</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to item #%d does not exist (%s)!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l2867"><span class="linenum">2867</span></a>                  return NULL;
<a name="l2868"><span class="linenum">2868</span></a>              }
<a name="l2869"><span class="linenum">2869</span></a>  
<a name="l2870"><span class="linenum">2870</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l2871"><span class="linenum">2871</span></a>              { // Skip anything that is not an image
<a name="l2872"><span class="linenum">2872</span></a>                  return NULL;
<a name="l2873"><span class="linenum">2873</span></a>              }
<a name="l2874"><span class="linenum">2874</span></a>  
<a name="l2875"><span class="linenum">2875</span></a>  <span class="comment">            // Return URL when a cover image really exists for this post</span>
<a name="l2876"><span class="linenum">2876</span></a>              return <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>();
<a name="l2877"><span class="linenum">2877</span></a>          }
<a name="l2878"><span class="linenum">2878</span></a>  
<a name="l2879"><span class="linenum">2879</span></a>          return NULL;
<a name="l2880"><span class="linenum">2880</span></a>      }
<a name="l2881"><span class="linenum">2881</span></a>  
<a name="l2882"><span class="linenum">2882</span></a>  
<a name="l2883"><span class="linenum">2883</span></a>      <span class="comment">/**</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment">     * Get a number of images linked to the current Item</span>
<a name="l2885"><span class="linenum">2885</span></a>  <span class="comment">     *</span>
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">     * @param string Restrict to files/images linked to a specific position.</span>
<a name="l2887"><span class="linenum">2887</span></a>  <span class="comment">     *               Position can be 'teaser'|'teaserperm'|'teaserlink'|'aftermore'|'inline'|'cover'</span>
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">     *               Use comma as separator</span>
<a name="l2889"><span class="linenum">2889</span></a>  <span class="comment">     * @param integer Number of images</span>
<a name="l2890"><span class="linenum">2890</span></a>  <span class="comment">     */</span>
<a name="l2891"><span class="linenum">2891</span></a>  	function <a class="function" onClick="logFunction('get_number_of_images')" href="../../../_functions/get_number_of_images.html" onMouseOver="funcPopup(event,'get_number_of_images')">get_number_of_images</a>( <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('image_position')" href="../../../_variables/image_position.html">$image_position</a> = NULL )
<a name="l2892"><span class="linenum">2892</span></a>      {
<a name="l2893"><span class="linenum">2893</span></a>  <span class="comment">        // Get list of attached files</span>
<a name="l2894"><span class="linenum">2894</span></a>          <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2895"><span class="linenum">2895</span></a>          if( ! <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( 1000, <a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('image_position')" href="../../../_variables/image_position.html">$image_position</a> ) )
<a name="l2896"><span class="linenum">2896</span></a>          {
<a name="l2897"><span class="linenum">2897</span></a>              return 0;
<a name="l2898"><span class="linenum">2898</span></a>          }
<a name="l2899"><span class="linenum">2899</span></a>  
<a name="l2900"><span class="linenum">2900</span></a>          return <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a>-&gt;<a onClick="logVariable('result_num_rows')" class="var it10886" onMouseOver="hilite(10886)" onMouseOut="lolite()" href="../../../_variables/result_num_rows.html">result_num_rows</a>;
<a name="l2901"><span class="linenum">2901</span></a>      }
<a name="l2902"><span class="linenum">2902</span></a>  
<a name="l2903"><span class="linenum">2903</span></a>  
<a name="l2904"><span class="linenum">2904</span></a>      <span class="comment">/**</span>
<a name="l2905"><span class="linenum">2905</span></a>  <span class="comment">     * Display the attachments/files linked to the current Item</span>
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment">     *</span>
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment">     * @param array Array of params</span>
<a name="l2908"><span class="linenum">2908</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2909"><span class="linenum">2909</span></a>  <span class="comment">     */</span>
<a name="l2910"><span class="linenum">2910</span></a>  	function <a class="function" onClick="logFunction('files')" href="../../../_functions/files.html" onMouseOver="funcPopup(event,'files')">files</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2911"><span class="linenum">2911</span></a>      {
<a name="l2912"><span class="linenum">2912</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_files')" href="../../../_functions/get_files.html" onMouseOver="funcPopup(event,'get_files')">get_files</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2913"><span class="linenum">2913</span></a>      }
<a name="l2914"><span class="linenum">2914</span></a>  
<a name="l2915"><span class="linenum">2915</span></a>  
<a name="l2916"><span class="linenum">2916</span></a>      <span class="comment">/**</span>
<a name="l2917"><span class="linenum">2917</span></a>  <span class="comment">     * Get block of attachments/files linked to the current Item</span>
<a name="l2918"><span class="linenum">2918</span></a>  <span class="comment">     *</span>
<a name="l2919"><span class="linenum">2919</span></a>  <span class="comment">     * @param array Array of params</span>
<a name="l2920"><span class="linenum">2920</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment">     * @return string HTML</span>
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment">     */</span>
<a name="l2923"><span class="linenum">2923</span></a>  	function <a class="function" onClick="logFunction('get_files')" href="../../../_functions/get_files.html" onMouseOver="funcPopup(event,'get_files')">get_files</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2924"><span class="linenum">2924</span></a>      {
<a name="l2925"><span class="linenum">2925</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l2926"><span class="linenum">2926</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2927"><span class="linenum">2927</span></a>                  'before' =&gt;              '&lt;div class=&quot;item_attachments&quot;&gt;&lt;h3&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Attachments').':&lt;/h3&gt;&lt;ul class=&quot;bFiles&quot;&gt;',
<a name="l2928"><span class="linenum">2928</span></a>                  'before_attach' =&gt;         '&lt;li&gt;',
<a name="l2929"><span class="linenum">2929</span></a>                  'before_attach_size' =&gt;    '&lt;span class=&quot;file_size&quot;&gt;(',
<a name="l2930"><span class="linenum">2930</span></a>                  'after_attach_size' =&gt;     ')&lt;/span&gt;',
<a name="l2931"><span class="linenum">2931</span></a>                  'after_attach' =&gt;          '&lt;/li&gt;',
<a name="l2932"><span class="linenum">2932</span></a>                  'after' =&gt;               '&lt;/ul&gt;&lt;/div&gt;',
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment">            // fp&gt; TODO: we should only have one limit param. Or is there a good reason for having two?</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">            // sam2kb&gt; It's needed only for flexibility, in the meantime if user attaches 200 files he expects to see all of them in skin, I think.</span>
<a name="l2935"><span class="linenum">2935</span></a>                  'limit_attach' =&gt;        1000, // Max # of files displayed
<a name="l2936"><span class="linenum">2936</span></a>                  'limit' =&gt;               1000,
<a name="l2937"><span class="linenum">2937</span></a>  <span class="comment">                // Optionally restrict to files/images linked to specific position: 'teaser'|'teaserperm'|'teaserlink'|'aftermore'|'inline'|'cover'</span>
<a name="l2938"><span class="linenum">2938</span></a>                  'restrict_to_image_position' =&gt; 'cover,teaser,teaserperm,teaserlink,aftermore',
<a name="l2939"><span class="linenum">2939</span></a>                  'data'                       =&gt; '',
<a name="l2940"><span class="linenum">2940</span></a>                  'attach_format'              =&gt; '<a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a>$ <a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>$ <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$', // <a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a>$ <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$ <a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>$ <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$
<a name="l2941"><span class="linenum">2941</span></a>                  'file_link_format'           =&gt; '<a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../../_variables/file_name.html">$file_name</a>$', // <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../../_variables/file_name.html">$file_name</a>$ <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$
<a name="l2942"><span class="linenum">2942</span></a>                  'file_link_class'            =&gt; '',
<a name="l2943"><span class="linenum">2943</span></a>                  'download_link_icon'         =&gt; 'download',
<a name="l2944"><span class="linenum">2944</span></a>                  'download_link_title'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Download file'),
<a name="l2945"><span class="linenum">2945</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2946"><span class="linenum">2946</span></a>  
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment">        // Get list of attached files</span>
<a name="l2948"><span class="linenum">2948</span></a>          <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2949"><span class="linenum">2949</span></a>          if( ! <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['limit'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['restrict_to_image_position'] ) )
<a name="l2950"><span class="linenum">2950</span></a>          {
<a name="l2951"><span class="linenum">2951</span></a>              return '';
<a name="l2952"><span class="linenum">2952</span></a>          }
<a name="l2953"><span class="linenum">2953</span></a>  
<a name="l2954"><span class="linenum">2954</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('files/model/_file.funcs.php');
<a name="l2955"><span class="linenum">2955</span></a>  
<a name="l2956"><span class="linenum">2956</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l2957"><span class="linenum">2957</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0;
<a name="l2958"><span class="linenum">2958</span></a>          <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a> = array();
<a name="l2959"><span class="linenum">2959</span></a>          <span class="comment">/**</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">         * @var File</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment">         */</span>
<a name="l2962"><span class="linenum">2962</span></a>          <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = NULL;
<a name="l2963"><span class="linenum">2963</span></a>          while( ( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a> = &amp; <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a>-&gt;get_next() ) &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['limit_attach'] &gt; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l2964"><span class="linenum">2964</span></a>          {
<a name="l2965"><span class="linenum">2965</span></a>              if( ! ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = &amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;get_File() ) )
<a name="l2966"><span class="linenum">2966</span></a>              { // No File object
<a name="l2967"><span class="linenum">2967</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2968"><span class="linenum">2968</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Link ID#%d of item #%d does not have a file object!', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a onClick="logVariable('ID')" class="var it10745" onMouseOver="hilite(10745)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l2969"><span class="linenum">2969</span></a>                  continue;
<a name="l2970"><span class="linenum">2970</span></a>              }
<a name="l2971"><span class="linenum">2971</span></a>  
<a name="l2972"><span class="linenum">2972</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2973"><span class="linenum">2973</span></a>              { // File doesn't exist
<a name="l2974"><span class="linenum">2974</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2975"><span class="linenum">2975</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to item #%d does not exist (%s)!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l2976"><span class="linenum">2976</span></a>                  continue;
<a name="l2977"><span class="linenum">2977</span></a>              }
<a name="l2978"><span class="linenum">2978</span></a>  
<a name="l2979"><span class="linenum">2979</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['File'] = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>;
<a name="l2980"><span class="linenum">2980</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Item'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>;
<a name="l2981"><span class="linenum">2981</span></a>  
<a name="l2982"><span class="linenum">2982</span></a>              <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l2983"><span class="linenum">2983</span></a>              foreach( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> as <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> =&gt; <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('param_value')" href="../../../_variables/param_value.html">$param_value</a> )
<a name="l2984"><span class="linenum">2984</span></a>              { // Pass all params by reference, in order to give possibility to modify them by plugin
<a name="l2985"><span class="linenum">2985</span></a>  <span class="comment">                // So plugins can add some data before/after image tags (E.g. used by infodots plugin)</span>
<a name="l2986"><span class="linenum">2986</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ] = &amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ];
<a name="l2987"><span class="linenum">2987</span></a>              }
<a name="l2988"><span class="linenum">2988</span></a>  
<a name="l2989"><span class="linenum">2989</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_true')" href="../../../_functions/trigger_event_first_true.html" onMouseOver="funcPopup(event,'trigger_event_first_true')">trigger_event_first_true</a>( 'RenderItemAttachment', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) ) != 0 )
<a name="l2990"><span class="linenum">2990</span></a>              {
<a name="l2991"><span class="linenum">2991</span></a>                  continue;
<a name="l2992"><span class="linenum">2992</span></a>              }
<a name="l2993"><span class="linenum">2993</span></a>  
<a name="l2994"><span class="linenum">2994</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l2995"><span class="linenum">2995</span></a>              { // Skip images because these are displayed inline already
<a name="l2996"><span class="linenum">2996</span></a>  <span class="comment">                // fp&gt; TODO: have a setting for each linked file to decide whether it should be displayed inline or as an attachment</span>
<a name="l2997"><span class="linenum">2997</span></a>                  continue;
<a name="l2998"><span class="linenum">2998</span></a>              }
<a name="l2999"><span class="linenum">2999</span></a>              elseif( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="phpfunction" onClick="logFunction('is_dir')" href="../../../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>() )
<a name="l3000"><span class="linenum">3000</span></a>              { // Skip directories/galleries
<a name="l3001"><span class="linenum">3001</span></a>                  continue;
<a name="l3002"><span class="linenum">3002</span></a>              }
<a name="l3003"><span class="linenum">3003</span></a>  
<a name="l3004"><span class="linenum">3004</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_audio')" href="../../../_functions/is_audio.html" onMouseOver="funcPopup(event,'is_audio')">is_audio</a>() )
<a name="l3005"><span class="linenum">3005</span></a>              { // Player for audio file:
<a name="l3006"><span class="linenum">3006</span></a>                  <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>]  = '&lt;div class=&quot;podplayer&quot;&gt;';
<a name="l3007"><span class="linenum">3007</span></a>                  <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_player')" href="../../../_functions/get_player.html" onMouseOver="funcPopup(event,'get_player')">get_player</a>( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>() );
<a name="l3008"><span class="linenum">3008</span></a>                  <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] .= '&lt;/div&gt;';
<a name="l3009"><span class="linenum">3009</span></a>                  <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++;
<a name="l3010"><span class="linenum">3010</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a>;
<a name="l3011"><span class="linenum">3011</span></a>                  continue;
<a name="l3012"><span class="linenum">3012</span></a>              }
<a name="l3013"><span class="linenum">3013</span></a>  
<a name="l3014"><span class="linenum">3014</span></a>  <span class="comment">            // A link to download a file:</span>
<a name="l3015"><span class="linenum">3015</span></a>  
<a name="l3016"><span class="linenum">3016</span></a>  <span class="comment">            // Just icon with download icon</span>
<a name="l3017"><span class="linenum">3017</span></a>              <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a> = ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'].<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['file_link_format'], '<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$' ) !== false ) ?
<a name="l3018"><span class="linenum">3018</span></a>                      <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['download_link_icon'], 'imgtag', array( 'title' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['download_link_title'] ) ) : '';
<a name="l3019"><span class="linenum">3019</span></a>  
<a name="l3020"><span class="linenum">3020</span></a>  <span class="comment">            // A link with icon to download</span>
<a name="l3021"><span class="linenum">3021</span></a>              <a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a> = ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'], '<a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a>$' ) !== false ) ?
<a name="l3022"><span class="linenum">3022</span></a>                      <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['download_link_title'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['download_link_icon'], <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(), '', 5 ) : '';
<a name="l3023"><span class="linenum">3023</span></a>  
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment">            // File size info</span>
<a name="l3025"><span class="linenum">3025</span></a>              <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a> = ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'].<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['file_link_format'], '<a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$' ) !== false ) ?
<a name="l3026"><span class="linenum">3026</span></a>                      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_attach_size'].<a class="function" onClick="logFunction('bytesreadable')" href="../../../_functions/bytesreadable.html" onMouseOver="funcPopup(event,'bytesreadable')">bytesreadable</a>( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_size')" href="../../../_functions/get_size.html" onMouseOver="funcPopup(event,'get_size')">get_size</a>(), false, false ).<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_attach_size'] : '';
<a name="l3027"><span class="linenum">3027</span></a>  
<a name="l3028"><span class="linenum">3028</span></a>  <span class="comment">            // A link with file name to download</span>
<a name="l3029"><span class="linenum">3029</span></a>              <a class="var it1593" onMouseOver="hilite(1593)" onMouseOut="lolite()" onClick="logVariable('file_link_format')" href="../../../_variables/file_link_format.html">$file_link_format</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( '<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$', '<a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../../_variables/file_name.html">$file_name</a>$', '<a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$' ),
<a name="l3030"><span class="linenum">3030</span></a>                  array( <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, '<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>$', <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a> ),
<a name="l3031"><span class="linenum">3031</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['file_link_format'] );
<a name="l3032"><span class="linenum">3032</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l3033"><span class="linenum">3033</span></a>              { // Get file link to download if file exists
<a name="l3034"><span class="linenum">3034</span></a>                  <a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a> = ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'], '<a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>$' ) !== false ) ?
<a name="l3035"><span class="linenum">3035</span></a>                          <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_view_link')" href="../../../_functions/get_view_link.html" onMouseOver="funcPopup(event,'get_view_link')">get_view_link</a>( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), NULL, NULL, <a class="var it1593" onMouseOver="hilite(1593)" onMouseOut="lolite()" onClick="logVariable('file_link_format')" href="../../../_variables/file_link_format.html">$file_link_format</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['file_link_class'], <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get_download_url')" href="../../../_functions/get_download_url.html" onMouseOver="funcPopup(event,'get_download_url')">get_download_url</a>() ) : '';
<a name="l3036"><span class="linenum">3036</span></a>              }
<a name="l3037"><span class="linenum">3037</span></a>              else
<a name="l3038"><span class="linenum">3038</span></a>              { // File doesn't exist, We cannot display a link, Display only file name and warning
<a name="l3039"><span class="linenum">3039</span></a>                  <a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a> = ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'], '<a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>$' ) !== false ) ?
<a name="l3040"><span class="linenum">3040</span></a>                          <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>().' - &lt;span class=&quot;red nowrap&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'warning_yellow' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Missing attachment!').'&lt;/span&gt;' : '';
<a name="l3041"><span class="linenum">3041</span></a>              }
<a name="l3042"><span class="linenum">3042</span></a>  
<a name="l3043"><span class="linenum">3043</span></a>              <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_attach'];
<a name="l3044"><span class="linenum">3044</span></a>              <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] .= <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( '<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$', '<a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a>$', '<a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>$', '<a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a>$' ),
<a name="l3045"><span class="linenum">3045</span></a>                  array( <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, <a class="var it1587" onMouseOver="hilite(1587)" onMouseOut="lolite()" onClick="logVariable('icon_link')" href="../../../_variables/icon_link.html">$icon_link</a>, <a class="var it1588" onMouseOver="hilite(1588)" onMouseOut="lolite()" onClick="logVariable('file_link')" href="../../../_variables/file_link.html">$file_link</a>, <a class="var it1589" onMouseOver="hilite(1589)" onMouseOut="lolite()" onClick="logVariable('file_size')" href="../../../_variables/file_size.html">$file_size</a> ),
<a name="l3046"><span class="linenum">3046</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attach_format'] );
<a name="l3047"><span class="linenum">3047</span></a>              <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_attach'];
<a name="l3048"><span class="linenum">3048</span></a>  
<a name="l3049"><span class="linenum">3049</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++;
<a name="l3050"><span class="linenum">3050</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a>;
<a name="l3051"><span class="linenum">3051</span></a>          }
<a name="l3052"><span class="linenum">3052</span></a>  
<a name="l3053"><span class="linenum">3053</span></a>          if( !empty(<a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a>) )
<a name="l3054"><span class="linenum">3054</span></a>          {
<a name="l3055"><span class="linenum">3055</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( &quot;\n&quot;, <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('r_file')" href="../../../_variables/r_file.html">$r_file</a> ).<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3056"><span class="linenum">3056</span></a>  
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment">            // Character conversions</span>
<a name="l3058"><span class="linenum">3058</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l3059"><span class="linenum">3059</span></a>          }
<a name="l3060"><span class="linenum">3060</span></a>  
<a name="l3061"><span class="linenum">3061</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3062"><span class="linenum">3062</span></a>      }
<a name="l3063"><span class="linenum">3063</span></a>  
<a name="l3064"><span class="linenum">3064</span></a>  
<a name="l3065"><span class="linenum">3065</span></a>      <span class="comment">/**</span>
<a name="l3066"><span class="linenum">3066</span></a>  <span class="comment">     * Get array of the Files that are used as &quot;Fallback&quot; for the selected File</span>
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">     *</span>
<a name="l3068"><span class="linenum">3068</span></a>  <span class="comment">     * @param object File</span>
<a name="l3069"><span class="linenum">3069</span></a>  <span class="comment">     * @return array Fallback Files</span>
<a name="l3070"><span class="linenum">3070</span></a>  <span class="comment">     */</span>
<a name="l3071"><span class="linenum">3071</span></a>  	function <a class="function" onClick="logFunction('get_fallback_files')" href="../../../_functions/get_fallback_files.html" onMouseOver="funcPopup(event,'get_fallback_files')">get_fallback_files</a>( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> )
<a name="l3072"><span class="linenum">3072</span></a>      {
<a name="l3073"><span class="linenum">3073</span></a>          <a class="var it1594" onMouseOver="hilite(1594)" onMouseOut="lolite()" onClick="logVariable('fallback_files')" href="../../../_variables/fallback_files.html">$fallback_files</a> = array();
<a name="l3074"><span class="linenum">3074</span></a>  
<a name="l3075"><span class="linenum">3075</span></a>          if( empty( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> ) )
<a name="l3076"><span class="linenum">3076</span></a>          { // No File for fallbacks
<a name="l3077"><span class="linenum">3077</span></a>              return <a class="var it1594" onMouseOver="hilite(1594)" onMouseOut="lolite()" onClick="logVariable('fallback_files')" href="../../../_variables/fallback_files.html">$fallback_files</a>;
<a name="l3078"><span class="linenum">3078</span></a>          }
<a name="l3079"><span class="linenum">3079</span></a>  
<a name="l3080"><span class="linenum">3080</span></a>          if( ! isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fallback_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/fallback_FileList.html">fallback_FileList</a> ) )
<a name="l3081"><span class="linenum">3081</span></a>          { // Get list of attached fallback files
<a name="l3082"><span class="linenum">3082</span></a>              <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l3083"><span class="linenum">3083</span></a>              if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fallback_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/fallback_FileList.html">fallback_FileList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_FileList')" href="../../../_functions/get_attachment_filelist.html" onMouseOver="funcPopup(event,'get_attachment_filelist')">get_attachment_FileList</a>( 1000, 'fallback' ) )
<a name="l3084"><span class="linenum">3084</span></a>              { // No fallback files
<a name="l3085"><span class="linenum">3085</span></a>                  return <a class="var it1594" onMouseOver="hilite(1594)" onMouseOut="lolite()" onClick="logVariable('fallback_files')" href="../../../_variables/fallback_files.html">$fallback_files</a>;
<a name="l3086"><span class="linenum">3086</span></a>              }
<a name="l3087"><span class="linenum">3087</span></a>          }
<a name="l3088"><span class="linenum">3088</span></a>  
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">        // Get file name without extension</span>
<a name="l3090"><span class="linenum">3090</span></a>          <a class="var it1596" onMouseOver="hilite(1596)" onMouseOut="lolite()" onClick="logVariable('file_name_without_ext')" href="../../../_variables/file_name_without_ext.html">$file_name_without_ext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#^(.+)\.[^\.]+$#', '<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>', <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() );
<a name="l3091"><span class="linenum">3091</span></a>  
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment">        // Rewind internal index to first position</span>
<a name="l3093"><span class="linenum">3093</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fallback_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/fallback_FileList.html">fallback_FileList</a>-&gt;current_idx = 0;
<a name="l3094"><span class="linenum">3094</span></a>  
<a name="l3095"><span class="linenum">3095</span></a>          while( <a class="var it1597" onMouseOver="hilite(1597)" onMouseOut="lolite()" onClick="logVariable('fallback_File')" href="../../../_variables/fallback_File.html">$fallback_File</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fallback_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/fallback_FileList.html">fallback_FileList</a>-&gt;get_next() )
<a name="l3096"><span class="linenum">3096</span></a>          {
<a name="l3097"><span class="linenum">3097</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() != <a class="var it1597" onMouseOver="hilite(1597)" onMouseOut="lolite()" onClick="logVariable('fallback_File')" href="../../../_variables/fallback_File.html">$fallback_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() &amp;&amp;
<a name="l3098"><span class="linenum">3098</span></a>                  <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^'.<a class="var it1596" onMouseOver="hilite(1596)" onMouseOut="lolite()" onClick="logVariable('file_name_without_ext')" href="../../../_variables/file_name_without_ext.html">$file_name_without_ext</a>.'\.[^\.]+$#', <a class="var it1597" onMouseOver="hilite(1597)" onMouseOut="lolite()" onClick="logVariable('fallback_File')" href="../../../_variables/fallback_File.html">$fallback_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() ) )
<a name="l3099"><span class="linenum">3099</span></a>              { // Fallback is a file with same name but with different extension
<a name="l3100"><span class="linenum">3100</span></a>                  <a class="var it1594" onMouseOver="hilite(1594)" onMouseOut="lolite()" onClick="logVariable('fallback_files')" href="../../../_variables/fallback_files.html">$fallback_files</a>[] = <a class="var it1597" onMouseOver="hilite(1597)" onMouseOut="lolite()" onClick="logVariable('fallback_File')" href="../../../_variables/fallback_File.html">$fallback_File</a>;
<a name="l3101"><span class="linenum">3101</span></a>              }
<a name="l3102"><span class="linenum">3102</span></a>          }
<a name="l3103"><span class="linenum">3103</span></a>  
<a name="l3104"><span class="linenum">3104</span></a>          return <a class="var it1594" onMouseOver="hilite(1594)" onMouseOut="lolite()" onClick="logVariable('fallback_files')" href="../../../_variables/fallback_files.html">$fallback_files</a>;
<a name="l3105"><span class="linenum">3105</span></a>      }
<a name="l3106"><span class="linenum">3106</span></a>  
<a name="l3107"><span class="linenum">3107</span></a>  
<a name="l3108"><span class="linenum">3108</span></a>      <span class="comment">/**</span>
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">     * Get placeholder image File that has the same name as the current video File</span>
<a name="l3110"><span class="linenum">3110</span></a>  <span class="comment">     *</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment">     * @param object File</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment">     * @return object placeholder File</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment">     */</span>
<a name="l3114"><span class="linenum">3114</span></a>      function &amp; get_placeholder_File( <a class="var it1598" onMouseOver="hilite(1598)" onMouseOut="lolite()" onClick="logVariable('video_File')" href="../../../_variables/video_File.html">$video_File</a> )
<a name="l3115"><span class="linenum">3115</span></a>      {
<a name="l3116"><span class="linenum">3116</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = NULL;
<a name="l3117"><span class="linenum">3117</span></a>  
<a name="l3118"><span class="linenum">3118</span></a>          if( empty( <a class="var it1598" onMouseOver="hilite(1598)" onMouseOut="lolite()" onClick="logVariable('video_File')" href="../../../_variables/video_File.html">$video_File</a> ) )
<a name="l3119"><span class="linenum">3119</span></a>          { // No File for placeholder
<a name="l3120"><span class="linenum">3120</span></a>              return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3121"><span class="linenum">3121</span></a>          }
<a name="l3122"><span class="linenum">3122</span></a>  
<a name="l3123"><span class="linenum">3123</span></a>          if( ! isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('placeholder_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/placeholder_FileList.html">placeholder_FileList</a> ) )
<a name="l3124"><span class="linenum">3124</span></a>          { // Get list of attached fallback files
<a name="l3125"><span class="linenum">3125</span></a>              <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l3126"><span class="linenum">3126</span></a>              if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('placeholder_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/placeholder_FileList.html">placeholder_FileList</a> = &amp; <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_FileList')" href="../../../_functions/get_attachment_filelist.html" onMouseOver="funcPopup(event,'get_attachment_filelist')">get_attachment_FileList</a>( 1000 ) )
<a name="l3127"><span class="linenum">3127</span></a>              { // No attached files
<a name="l3128"><span class="linenum">3128</span></a>                  return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3129"><span class="linenum">3129</span></a>              }
<a name="l3130"><span class="linenum">3130</span></a>          }
<a name="l3131"><span class="linenum">3131</span></a>  
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">        // Get file name without extension</span>
<a name="l3133"><span class="linenum">3133</span></a>          <a class="var it1600" onMouseOver="hilite(1600)" onMouseOut="lolite()" onClick="logVariable('video_file_name_without_ext')" href="../../../_variables/video_file_name_without_ext.html">$video_file_name_without_ext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#^(.+)\.[^\.]+$#', '<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>', <a class="var it1598" onMouseOver="hilite(1598)" onMouseOut="lolite()" onClick="logVariable('video_File')" href="../../../_variables/video_File.html">$video_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() );
<a name="l3134"><span class="linenum">3134</span></a>  
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment">        // Rewind internal index to first position</span>
<a name="l3136"><span class="linenum">3136</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('placeholder_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/placeholder_FileList.html">placeholder_FileList</a>-&gt;current_idx = 0;
<a name="l3137"><span class="linenum">3137</span></a>  
<a name="l3138"><span class="linenum">3138</span></a>          while( <a class="var it1601" onMouseOver="hilite(1601)" onMouseOut="lolite()" onClick="logVariable('attached_File')" href="../../../_variables/attached_File.html">$attached_File</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('placeholder_FileList')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/placeholder_FileList.html">placeholder_FileList</a>-&gt;get_next() )
<a name="l3139"><span class="linenum">3139</span></a>          {
<a name="l3140"><span class="linenum">3140</span></a>              if( <a class="var it1598" onMouseOver="hilite(1598)" onMouseOut="lolite()" onClick="logVariable('video_File')" href="../../../_variables/video_File.html">$video_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() != <a class="var it1601" onMouseOver="hilite(1601)" onMouseOut="lolite()" onClick="logVariable('attached_File')" href="../../../_variables/attached_File.html">$attached_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() &amp;&amp;
<a name="l3141"><span class="linenum">3141</span></a>                  <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^'.<a class="var it1600" onMouseOver="hilite(1600)" onMouseOut="lolite()" onClick="logVariable('video_file_name_without_ext')" href="../../../_variables/video_file_name_without_ext.html">$video_file_name_without_ext</a>.'\.(jpg|jpeg|png|gif)+$#', <a class="var it1601" onMouseOver="hilite(1601)" onMouseOut="lolite()" onClick="logVariable('attached_File')" href="../../../_variables/attached_File.html">$attached_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() ) )
<a name="l3142"><span class="linenum">3142</span></a>              { // It is a file with same name but with image extension
<a name="l3143"><span class="linenum">3143</span></a>                  return <a class="var it1601" onMouseOver="hilite(1601)" onMouseOut="lolite()" onClick="logVariable('attached_File')" href="../../../_variables/attached_File.html">$attached_File</a>;
<a name="l3144"><span class="linenum">3144</span></a>              }
<a name="l3145"><span class="linenum">3145</span></a>          }
<a name="l3146"><span class="linenum">3146</span></a>  
<a name="l3147"><span class="linenum">3147</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3148"><span class="linenum">3148</span></a>      }
<a name="l3149"><span class="linenum">3149</span></a>  
<a name="l3150"><span class="linenum">3150</span></a>  
<a name="l3151"><span class="linenum">3151</span></a>      <span class="comment">/**</span>
<a name="l3152"><span class="linenum">3152</span></a>  <span class="comment">     * @param array Associative array of parameters</span>
<a name="l3153"><span class="linenum">3153</span></a>  <span class="comment">     * @return string Output</span>
<a name="l3154"><span class="linenum">3154</span></a>  <span class="comment">     */</span>
<a name="l3155"><span class="linenum">3155</span></a>  	function <a class="function" onClick="logFunction('attachment_files')" href="../../../_functions/attachment_files.html" onMouseOver="funcPopup(event,'attachment_files')">attachment_files</a>( &amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a><span class="comment">/* = array()*/</span> )
<a name="l3156"><span class="linenum">3156</span></a>      {
<a name="l3157"><span class="linenum">3157</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l3158"><span class="linenum">3158</span></a>  
<a name="l3159"><span class="linenum">3159</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l3160"><span class="linenum">3160</span></a>  
<a name="l3161"><span class="linenum">3161</span></a>          <a class="var it1602" onMouseOver="hilite(1602)" onMouseOut="lolite()" onClick="logVariable('ItemAttachment_plugins')" href="../../../_variables/ItemAttachment_plugins.html">$ItemAttachment_plugins</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_list_by_event')" href="../../../_functions/get_list_by_event.html" onMouseOver="funcPopup(event,'get_list_by_event')">get_list_by_event</a>( 'RenderItemAttachment' );
<a name="l3162"><span class="linenum">3162</span></a>  
<a name="l3163"><span class="linenum">3163</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Item'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>;
<a name="l3164"><span class="linenum">3164</span></a>  
<a name="l3165"><span class="linenum">3165</span></a>          <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l3166"><span class="linenum">3166</span></a>          foreach( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> as <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> =&gt; <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('param_value')" href="../../../_variables/param_value.html">$param_value</a> )
<a name="l3167"><span class="linenum">3167</span></a>          { // Pass all params by reference, in order to give possibility to modify them by plugin
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment">            // So plugins can add some data before/after image tags (E.g. used by infodots plugin)</span>
<a name="l3169"><span class="linenum">3169</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ] = &amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ];
<a name="l3170"><span class="linenum">3170</span></a>          }
<a name="l3171"><span class="linenum">3171</span></a>  
<a name="l3172"><span class="linenum">3172</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_true')" href="../../../_functions/trigger_event_first_true.html" onMouseOver="funcPopup(event,'trigger_event_first_true')">trigger_event_first_true</a>( 'RenderItemAttachment', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3173"><span class="linenum">3173</span></a>  
<a name="l3174"><span class="linenum">3174</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a>;
<a name="l3175"><span class="linenum">3175</span></a>  
<a name="l3176"><span class="linenum">3176</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3177"><span class="linenum">3177</span></a>      }
<a name="l3178"><span class="linenum">3178</span></a>  
<a name="l3179"><span class="linenum">3179</span></a>  
<a name="l3180"><span class="linenum">3180</span></a>      <span class="comment">/**</span>
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment">     * Template function: Displays link to the feed for comments on this item</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment">     *</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment">     * @param string Type of feedback to link to (rss2/atom)</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment">     * @param string String to display before the link (if comments are to be displayed)</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">     * @param string String to display after the link (if comments are to be displayed)</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment">     * @param string Link title</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment">     */</span>
<a name="l3188"><span class="linenum">3188</span></a>  	function <a class="function" onClick="logFunction('feedback_feed_link')" href="../../../_functions/feedback_feed_link.html" onMouseOver="funcPopup(event,'feedback_feed_link')">feedback_feed_link</a>( <a class="var it1603" onMouseOver="hilite(1603)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../../_variables/skin.html">$skin</a> = '_rss2', <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>='#' )
<a name="l3189"><span class="linenum">3189</span></a>      {
<a name="l3190"><span class="linenum">3190</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_see_comments')" href="../../../_functions/can_see_comments.html" onMouseOver="funcPopup(event,'can_see_comments')">can_see_comments</a>() )
<a name="l3191"><span class="linenum">3191</span></a>          {    // Comments disabled
<a name="l3192"><span class="linenum">3192</span></a>              return;
<a name="l3193"><span class="linenum">3193</span></a>          }
<a name="l3194"><span class="linenum">3194</span></a>  
<a name="l3195"><span class="linenum">3195</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3196"><span class="linenum">3196</span></a>  
<a name="l3197"><span class="linenum">3197</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'comment_feed_content' ) == 'none' )
<a name="l3198"><span class="linenum">3198</span></a>          {    // Comment feeds disabled
<a name="l3199"><span class="linenum">3199</span></a>              return;
<a name="l3200"><span class="linenum">3200</span></a>          }
<a name="l3201"><span class="linenum">3201</span></a>  
<a name="l3202"><span class="linenum">3202</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' )
<a name="l3203"><span class="linenum">3203</span></a>          {
<a name="l3204"><span class="linenum">3204</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'feed' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment feed for this post');
<a name="l3205"><span class="linenum">3205</span></a>          }
<a name="l3206"><span class="linenum">3206</span></a>  
<a name="l3207"><span class="linenum">3207</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_feed_url')" href="../../../_functions/get_feedback_feed_url.html" onMouseOver="funcPopup(event,'get_feedback_feed_url')">get_feedback_feed_url</a>(<a class="var it1603" onMouseOver="hilite(1603)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../../_variables/skin.html">$skin</a>);
<a name="l3208"><span class="linenum">3208</span></a>  
<a name="l3209"><span class="linenum">3209</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l3210"><span class="linenum">3210</span></a>          echo '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>).'&lt;/a&gt;';
<a name="l3211"><span class="linenum">3211</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l3212"><span class="linenum">3212</span></a>      }
<a name="l3213"><span class="linenum">3213</span></a>  
<a name="l3214"><span class="linenum">3214</span></a>  
<a name="l3215"><span class="linenum">3215</span></a>      <span class="comment">/**</span>
<a name="l3216"><span class="linenum">3216</span></a>  <span class="comment">     * Get URL to display the post comments in an XML feed.</span>
<a name="l3217"><span class="linenum">3217</span></a>  <span class="comment">     *</span>
<a name="l3218"><span class="linenum">3218</span></a>  <span class="comment">     * @param string</span>
<a name="l3219"><span class="linenum">3219</span></a>  <span class="comment">     */</span>
<a name="l3220"><span class="linenum">3220</span></a>  	function <a class="function" onClick="logFunction('get_feedback_feed_url')" href="../../../_functions/get_feedback_feed_url.html" onMouseOver="funcPopup(event,'get_feedback_feed_url')">get_feedback_feed_url</a>( <a class="var it1604" onMouseOver="hilite(1604)" onMouseOut="lolite()" onClick="logVariable('skin_folder_name')" href="../../../_variables/skin_folder_name.html">$skin_folder_name</a> )
<a name="l3221"><span class="linenum">3221</span></a>      {
<a name="l3222"><span class="linenum">3222</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3223"><span class="linenum">3223</span></a>  
<a name="l3224"><span class="linenum">3224</span></a>          return <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_tempskin_url')" href="../../../_functions/get_tempskin_url.html" onMouseOver="funcPopup(event,'get_tempskin_url')">get_tempskin_url</a>( <a class="var it1604" onMouseOver="hilite(1604)" onMouseOut="lolite()" onClick="logVariable('skin_folder_name')" href="../../../_variables/skin_folder_name.html">$skin_folder_name</a> ), 'disp=comments&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3225"><span class="linenum">3225</span></a>      }
<a name="l3226"><span class="linenum">3226</span></a>  
<a name="l3227"><span class="linenum">3227</span></a>  
<a name="l3228"><span class="linenum">3228</span></a>      <span class="comment">/**</span>
<a name="l3229"><span class="linenum">3229</span></a>  <span class="comment">     * Get URL to display the post comments.</span>
<a name="l3230"><span class="linenum">3230</span></a>  <span class="comment">     *</span>
<a name="l3231"><span class="linenum">3231</span></a>  <span class="comment">     * @return string</span>
<a name="l3232"><span class="linenum">3232</span></a>  <span class="comment">     */</span>
<a name="l3233"><span class="linenum">3233</span></a>  	function <a class="function" onClick="logFunction('get_feedback_url')" href="../../../_functions/get_feedback_url.html" onMouseOver="funcPopup(event,'get_feedback_url')">get_feedback_url</a>( <a class="var it1605" onMouseOver="hilite(1605)" onMouseOut="lolite()" onClick="logVariable('popup')" href="../../../_variables/popup.html">$popup</a> = false, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l3234"><span class="linenum">3234</span></a>      {
<a name="l3235"><span class="linenum">3235</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_single_url')" href="../../../_functions/get_single_url.html" onMouseOver="funcPopup(event,'get_single_url')">get_single_url</a>( 'auto', '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l3236"><span class="linenum">3236</span></a>          if( <a class="var it1605" onMouseOver="hilite(1605)" onMouseOut="lolite()" onClick="logVariable('popup')" href="../../../_variables/popup.html">$popup</a> )
<a name="l3237"><span class="linenum">3237</span></a>          {
<a name="l3238"><span class="linenum">3238</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, 'disp=feedback-popup', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l3239"><span class="linenum">3239</span></a>          }
<a name="l3240"><span class="linenum">3240</span></a>  
<a name="l3241"><span class="linenum">3241</span></a>          return <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l3242"><span class="linenum">3242</span></a>      }
<a name="l3243"><span class="linenum">3243</span></a>  
<a name="l3244"><span class="linenum">3244</span></a>  
<a name="l3245"><span class="linenum">3245</span></a>      <span class="comment">/**</span>
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment">     * Template function: Displays link to feedback page (under some conditions)</span>
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment">     *</span>
<a name="l3248"><span class="linenum">3248</span></a>  <span class="comment">     * @param array</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment">     */</span>
<a name="l3250"><span class="linenum">3250</span></a>  	function <a class="function" onClick="logFunction('feedback_link')" href="../../../_functions/feedback_link.html" onMouseOver="funcPopup(event,'feedback_link')">feedback_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l3251"><span class="linenum">3251</span></a>      {
<a name="l3252"><span class="linenum">3252</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_link')" href="../../../_functions/get_feedback_link.html" onMouseOver="funcPopup(event,'get_feedback_link')">get_feedback_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3253"><span class="linenum">3253</span></a>      }
<a name="l3254"><span class="linenum">3254</span></a>  
<a name="l3255"><span class="linenum">3255</span></a>  
<a name="l3256"><span class="linenum">3256</span></a>      <span class="comment">/**</span>
<a name="l3257"><span class="linenum">3257</span></a>  <span class="comment">     * Get a link to feedback page (under some conditions)</span>
<a name="l3258"><span class="linenum">3258</span></a>  <span class="comment">     *</span>
<a name="l3259"><span class="linenum">3259</span></a>  <span class="comment">     * @param array</span>
<a name="l3260"><span class="linenum">3260</span></a>  <span class="comment">     */</span>
<a name="l3261"><span class="linenum">3261</span></a>  	function <a class="function" onClick="logFunction('get_feedback_link')" href="../../../_functions/get_feedback_link.html" onMouseOver="funcPopup(event,'get_feedback_link')">get_feedback_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l3262"><span class="linenum">3262</span></a>      {
<a name="l3263"><span class="linenum">3263</span></a>          global <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../../_variables/ReqURL.html">$ReqURL</a>;
<a name="l3264"><span class="linenum">3264</span></a>  
<a name="l3265"><span class="linenum">3265</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_see_comments')" href="../../../_functions/can_see_comments.html" onMouseOver="funcPopup(event,'can_see_comments')">can_see_comments</a>() )
<a name="l3266"><span class="linenum">3266</span></a>          {    // Comments disabled
<a name="l3267"><span class="linenum">3267</span></a>              return;
<a name="l3268"><span class="linenum">3268</span></a>          }
<a name="l3269"><span class="linenum">3269</span></a>  
<a name="l3270"><span class="linenum">3270</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3271"><span class="linenum">3271</span></a>                                      'type' =&gt; 'feedbacks',        // Kind of feedbacks to count
<a name="l3272"><span class="linenum">3272</span></a>                                      'status' =&gt; 'published',    // Status of feedbacks to count
<a name="l3273"><span class="linenum">3273</span></a>                                      'link_before' =&gt; '',
<a name="l3274"><span class="linenum">3274</span></a>                                      'link_after' =&gt; '',
<a name="l3275"><span class="linenum">3275</span></a>                                      'link_text_zero' =&gt; '#',
<a name="l3276"><span class="linenum">3276</span></a>                                      'link_text_one' =&gt; '#',
<a name="l3277"><span class="linenum">3277</span></a>                                      'link_text_more' =&gt; '#',
<a name="l3278"><span class="linenum">3278</span></a>                                      'link_anchor_zero' =&gt; '#',
<a name="l3279"><span class="linenum">3279</span></a>                                      'link_anchor_one' =&gt; '#',
<a name="l3280"><span class="linenum">3280</span></a>                                      'link_anchor_more' =&gt; '#',
<a name="l3281"><span class="linenum">3281</span></a>                                      'link_title' =&gt; '#',
<a name="l3282"><span class="linenum">3282</span></a>                                      'link_class' =&gt; '',
<a name="l3283"><span class="linenum">3283</span></a>                                      'show_in_single_mode' =&gt; false,        // Do we want to show this link even if we are viewing the current post in single view mode
<a name="l3284"><span class="linenum">3284</span></a>                                      'url' =&gt; '#',
<a name="l3285"><span class="linenum">3285</span></a>                                  ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3286"><span class="linenum">3286</span></a>  
<a name="l3287"><span class="linenum">3287</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['show_in_single_mode'] == false &amp;&amp; <a class="function" onClick="logFunction('is_same_url')" href="../../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>('','','&amp;'), <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../../_variables/ReqURL.html">$ReqURL</a> ) )
<a name="l3288"><span class="linenum">3288</span></a>          {    // We are viewing the single page for this pos, which (typically) )contains comments, so we dpn't want to display this link
<a name="l3289"><span class="linenum">3289</span></a>              return;
<a name="l3290"><span class="linenum">3290</span></a>          }
<a name="l3291"><span class="linenum">3291</span></a>  
<a name="l3292"><span class="linenum">3292</span></a>  <span class="comment">        // dh&gt; TODO:    Add plugin hook, where a Pingback plugin could hook and provide &quot;pingbacks&quot;</span>
<a name="l3293"><span class="linenum">3293</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'] )
<a name="l3294"><span class="linenum">3294</span></a>          {
<a name="l3295"><span class="linenum">3295</span></a>              case 'feedbacks':
<a name="l3296"><span class="linenum">3296</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Display feedback / Leave a comment');
<a name="l3297"><span class="linenum">3297</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send feedback').' &amp;raquo;';
<a name="l3298"><span class="linenum">3298</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 feedback').' &amp;raquo;';
<a name="l3299"><span class="linenum">3299</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d feedbacks').' &amp;raquo;';
<a name="l3300"><span class="linenum">3300</span></a>                  break;
<a name="l3301"><span class="linenum">3301</span></a>  
<a name="l3302"><span class="linenum">3302</span></a>              case 'comments':
<a name="l3303"><span class="linenum">3303</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Display comments / Leave a comment');
<a name="l3304"><span class="linenum">3304</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] == '#' )
<a name="l3305"><span class="linenum">3305</span></a>                  {
<a name="l3306"><span class="linenum">3306</span></a>                      if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_comment')" href="../../../_functions/can_comment.html" onMouseOver="funcPopup(event,'can_comment')">can_comment</a>( NULL ) ) // NULL, because we do not want to display errors here!
<a name="l3307"><span class="linenum">3307</span></a>                      {
<a name="l3308"><span class="linenum">3308</span></a>                          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Leave a comment').' &amp;raquo;';
<a name="l3309"><span class="linenum">3309</span></a>                      }
<a name="l3310"><span class="linenum">3310</span></a>                      else
<a name="l3311"><span class="linenum">3311</span></a>                      {
<a name="l3312"><span class="linenum">3312</span></a>                          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] = '';
<a name="l3313"><span class="linenum">3313</span></a>                      }
<a name="l3314"><span class="linenum">3314</span></a>                  }
<a name="l3315"><span class="linenum">3315</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 comment').' &amp;raquo;';
<a name="l3316"><span class="linenum">3316</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d comments').' &amp;raquo;';
<a name="l3317"><span class="linenum">3317</span></a>                  break;
<a name="l3318"><span class="linenum">3318</span></a>  
<a name="l3319"><span class="linenum">3319</span></a>              case 'trackbacks':
<a name="l3320"><span class="linenum">3320</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l3321"><span class="linenum">3321</span></a>                  if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_receive_pings')" href="../../../_functions/can_receive_pings.html" onMouseOver="funcPopup(event,'can_receive_pings')">can_receive_pings</a>() )
<a name="l3322"><span class="linenum">3322</span></a>                  { // Trackbacks not allowed on this blog:
<a name="l3323"><span class="linenum">3323</span></a>                      return;
<a name="l3324"><span class="linenum">3324</span></a>                  }
<a name="l3325"><span class="linenum">3325</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Display trackbacks / Get trackback address for this post');
<a name="l3326"><span class="linenum">3326</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send a trackback').' &amp;raquo;';
<a name="l3327"><span class="linenum">3327</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 trackback').' &amp;raquo;';
<a name="l3328"><span class="linenum">3328</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d trackbacks').' &amp;raquo;';
<a name="l3329"><span class="linenum">3329</span></a>                  break;
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>              case 'pingbacks':
<a name="l3332"><span class="linenum">3332</span></a>  <span class="comment">                // Obsolete, but left for skin compatibility</span>
<a name="l3333"><span class="linenum">3333</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l3334"><span class="linenum">3334</span></a>                  if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_receive_pings')" href="../../../_functions/can_receive_pings.html" onMouseOver="funcPopup(event,'can_receive_pings')">can_receive_pings</a>() )
<a name="l3335"><span class="linenum">3335</span></a>                  { // Trackbacks not allowed on this blog:
<a name="l3336"><span class="linenum">3336</span></a>  <span class="comment">                    // We'll consider pingbacks to follow the same restriction</span>
<a name="l3337"><span class="linenum">3337</span></a>                      return;
<a name="l3338"><span class="linenum">3338</span></a>                  }
<a name="l3339"><span class="linenum">3339</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Display pingbacks');
<a name="l3340"><span class="linenum">3340</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No pingback yet').' &amp;raquo;';
<a name="l3341"><span class="linenum">3341</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 pingback').' &amp;raquo;';
<a name="l3342"><span class="linenum">3342</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d pingbacks').' &amp;raquo;';
<a name="l3343"><span class="linenum">3343</span></a>                  break;
<a name="l3344"><span class="linenum">3344</span></a>  
<a name="l3345"><span class="linenum">3345</span></a>              default:
<a name="l3346"><span class="linenum">3346</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( &quot;Unknown feedback type [{<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type']}]&quot; );
<a name="l3347"><span class="linenum">3347</span></a>          }
<a name="l3348"><span class="linenum">3348</span></a>  
<a name="l3349"><span class="linenum">3349</span></a>          <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_title')" href="../../../_functions/get_feedback_title.html" onMouseOver="funcPopup(event,'get_feedback_title')">get_feedback_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_zero'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_one'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text_more'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] );
<a name="l3350"><span class="linenum">3350</span></a>  
<a name="l3351"><span class="linenum">3351</span></a>          if( empty(<a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>) )
<a name="l3352"><span class="linenum">3352</span></a>          {    // No link, no display...
<a name="l3353"><span class="linenum">3353</span></a>              return false;
<a name="l3354"><span class="linenum">3354</span></a>          }
<a name="l3355"><span class="linenum">3355</span></a>  
<a name="l3356"><span class="linenum">3356</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'] == '#' )
<a name="l3357"><span class="linenum">3357</span></a>          { // We want a link to single post:
<a name="l3358"><span class="linenum">3358</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_url')" href="../../../_functions/get_feedback_url.html" onMouseOver="funcPopup(event,'get_feedback_url')">get_feedback_url</a>();
<a name="l3359"><span class="linenum">3359</span></a>          }
<a name="l3360"><span class="linenum">3360</span></a>  
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment">        // Anchor position</span>
<a name="l3362"><span class="linenum">3362</span></a>          <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> = <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] );
<a name="l3363"><span class="linenum">3363</span></a>  
<a name="l3364"><span class="linenum">3364</span></a>          if( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> == 0 )
<a name="l3365"><span class="linenum">3365</span></a>              <a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_anchor_zero'];
<a name="l3366"><span class="linenum">3366</span></a>          elseif( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> == 1 )
<a name="l3367"><span class="linenum">3367</span></a>              <a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_anchor_one'];
<a name="l3368"><span class="linenum">3368</span></a>          elseif( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> &gt; 1 )
<a name="l3369"><span class="linenum">3369</span></a>              <a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_anchor_more'];
<a name="l3370"><span class="linenum">3370</span></a>          if( <a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a> == '#' )
<a name="l3371"><span class="linenum">3371</span></a>          {
<a name="l3372"><span class="linenum">3372</span></a>              <a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a> = '#'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'];
<a name="l3373"><span class="linenum">3373</span></a>          }
<a name="l3374"><span class="linenum">3374</span></a>  
<a name="l3375"><span class="linenum">3375</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_before'];
<a name="l3376"><span class="linenum">3376</span></a>  
<a name="l3377"><span class="linenum">3377</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'] ) )
<a name="l3378"><span class="linenum">3378</span></a>          {
<a name="l3379"><span class="linenum">3379</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url'].<a class="var it1607" onMouseOver="hilite(1607)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../../../_variables/anchor.html">$anchor</a>.'&quot; class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'].'&quot; ';    <span class="comment">// Position on feedback</span>
<a name="l3380"><span class="linenum">3380</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'].'&quot;';
<a name="l3381"><span class="linenum">3381</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;';
<a name="l3382"><span class="linenum">3382</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>;
<a name="l3383"><span class="linenum">3383</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l3384"><span class="linenum">3384</span></a>          }
<a name="l3385"><span class="linenum">3385</span></a>          else
<a name="l3386"><span class="linenum">3386</span></a>          {
<a name="l3387"><span class="linenum">3387</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>;
<a name="l3388"><span class="linenum">3388</span></a>          }
<a name="l3389"><span class="linenum">3389</span></a>  
<a name="l3390"><span class="linenum">3390</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_after'];
<a name="l3391"><span class="linenum">3391</span></a>  
<a name="l3392"><span class="linenum">3392</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3393"><span class="linenum">3393</span></a>      }
<a name="l3394"><span class="linenum">3394</span></a>  
<a name="l3395"><span class="linenum">3395</span></a>  
<a name="l3396"><span class="linenum">3396</span></a>      <span class="comment">/**</span>
<a name="l3397"><span class="linenum">3397</span></a>  <span class="comment">     * Return true if there is any feedback of given type.</span>
<a name="l3398"><span class="linenum">3398</span></a>  <span class="comment">     *</span>
<a name="l3399"><span class="linenum">3399</span></a>  <span class="comment">     * @param array</span>
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment">     * @return boolean</span>
<a name="l3401"><span class="linenum">3401</span></a>  <span class="comment">     */</span>
<a name="l3402"><span class="linenum">3402</span></a>  	function <a class="function" onClick="logFunction('has_feedback')" href="../../../_functions/has_feedback.html" onMouseOver="funcPopup(event,'has_feedback')">has_feedback</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l3403"><span class="linenum">3403</span></a>      {
<a name="l3404"><span class="linenum">3404</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3405"><span class="linenum">3405</span></a>                              'type' =&gt; 'feedbacks',
<a name="l3406"><span class="linenum">3406</span></a>                              'status' =&gt; 'published'
<a name="l3407"><span class="linenum">3407</span></a>                          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3408"><span class="linenum">3408</span></a>  
<a name="l3409"><span class="linenum">3409</span></a>  <span class="comment">        // Check is a given type is allowed</span>
<a name="l3410"><span class="linenum">3410</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'] )
<a name="l3411"><span class="linenum">3411</span></a>          {
<a name="l3412"><span class="linenum">3412</span></a>              case 'feedbacks':
<a name="l3413"><span class="linenum">3413</span></a>              case 'comments':
<a name="l3414"><span class="linenum">3414</span></a>              case 'trackbacks':
<a name="l3415"><span class="linenum">3415</span></a>              case 'pingbacks':
<a name="l3416"><span class="linenum">3416</span></a>                  break;
<a name="l3417"><span class="linenum">3417</span></a>              default:
<a name="l3418"><span class="linenum">3418</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( &quot;Unknown feedback type [{<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type']}]&quot; );
<a name="l3419"><span class="linenum">3419</span></a>          }
<a name="l3420"><span class="linenum">3420</span></a>  
<a name="l3421"><span class="linenum">3421</span></a>          <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> = <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] );
<a name="l3422"><span class="linenum">3422</span></a>  
<a name="l3423"><span class="linenum">3423</span></a>          return <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> &gt; 0;
<a name="l3424"><span class="linenum">3424</span></a>      }
<a name="l3425"><span class="linenum">3425</span></a>  
<a name="l3426"><span class="linenum">3426</span></a>  
<a name="l3427"><span class="linenum">3427</span></a>      <span class="comment">/**</span>
<a name="l3428"><span class="linenum">3428</span></a>  <span class="comment">     * Return true if trackbacks and pingbacks are allowed</span>
<a name="l3429"><span class="linenum">3429</span></a>  <span class="comment">     *</span>
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment">     * @return boolean</span>
<a name="l3431"><span class="linenum">3431</span></a>  <span class="comment">     */</span>
<a name="l3432"><span class="linenum">3432</span></a>  	function <a class="function" onClick="logFunction('can_receive_pings')" href="../../../_functions/can_receive_pings.html" onMouseOver="funcPopup(event,'can_receive_pings')">can_receive_pings</a>()
<a name="l3433"><span class="linenum">3433</span></a>      {
<a name="l3434"><span class="linenum">3434</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3435"><span class="linenum">3435</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allowtrackbacks' ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_comment')" href="../../../_functions/can_comment.html" onMouseOver="funcPopup(event,'can_comment')">can_comment</a>( NULL );
<a name="l3436"><span class="linenum">3436</span></a>      }
<a name="l3437"><span class="linenum">3437</span></a>  
<a name="l3438"><span class="linenum">3438</span></a>  
<a name="l3439"><span class="linenum">3439</span></a>      <span class="comment">/**</span>
<a name="l3440"><span class="linenum">3440</span></a>  <span class="comment">     * Get text depending on number of comments</span>
<a name="l3441"><span class="linenum">3441</span></a>  <span class="comment">     *</span>
<a name="l3442"><span class="linenum">3442</span></a>  <span class="comment">     * @param string Type of feedback to link to (feedbacks (all)/comments/trackbacks/pingbacks)</span>
<a name="l3443"><span class="linenum">3443</span></a>  <span class="comment">     * @param string Link text to display when there are 0 comments</span>
<a name="l3444"><span class="linenum">3444</span></a>  <span class="comment">     * @param string Link text to display when there is 1 comment</span>
<a name="l3445"><span class="linenum">3445</span></a>  <span class="comment">     * @param string Link text to display when there are &gt;1 comments (include %d for # of comments)</span>
<a name="l3446"><span class="linenum">3446</span></a>  <span class="comment">     * @param string Status of feedbacks to count</span>
<a name="l3447"><span class="linenum">3447</span></a>  <span class="comment">     */</span>
<a name="l3448"><span class="linenum">3448</span></a>  	function <a class="function" onClick="logFunction('get_feedback_title')" href="../../../_functions/get_feedback_title.html" onMouseOver="funcPopup(event,'get_feedback_title')">get_feedback_title</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = 'feedbacks',    <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '#', <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = '#', <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = '#', <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> = 'published', <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../_variables/filter_by_perm.html">$filter_by_perm</a> = true )
<a name="l3449"><span class="linenum">3449</span></a>      {
<a name="l3450"><span class="linenum">3450</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_see_comments')" href="../../../_functions/can_see_comments.html" onMouseOver="funcPopup(event,'can_see_comments')">can_see_comments</a>() )
<a name="l3451"><span class="linenum">3451</span></a>          {    // Comments disabled
<a name="l3452"><span class="linenum">3452</span></a>              return NULL;
<a name="l3453"><span class="linenum">3453</span></a>          }
<a name="l3454"><span class="linenum">3454</span></a>  
<a name="l3455"><span class="linenum">3455</span></a>  <span class="comment">        // dh&gt; TODO:    Add plugin hook, where a Pingback plugin could hook and provide &quot;pingbacks&quot;</span>
<a name="l3456"><span class="linenum">3456</span></a>          switch( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> )
<a name="l3457"><span class="linenum">3457</span></a>          {
<a name="l3458"><span class="linenum">3458</span></a>              case 'feedbacks':
<a name="l3459"><span class="linenum">3459</span></a>                  if( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> == '#' ) <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '';
<a name="l3460"><span class="linenum">3460</span></a>                  if( <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> == '#' ) <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 feedback');
<a name="l3461"><span class="linenum">3461</span></a>                  if( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == '#' ) <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d feedbacks');
<a name="l3462"><span class="linenum">3462</span></a>                  break;
<a name="l3463"><span class="linenum">3463</span></a>  
<a name="l3464"><span class="linenum">3464</span></a>              case 'comments':
<a name="l3465"><span class="linenum">3465</span></a>                  if( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> == '#' ) <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '';
<a name="l3466"><span class="linenum">3466</span></a>                  if( <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> == '#' ) <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 comment');
<a name="l3467"><span class="linenum">3467</span></a>                  if( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == '#' ) <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d comments');
<a name="l3468"><span class="linenum">3468</span></a>                  break;
<a name="l3469"><span class="linenum">3469</span></a>  
<a name="l3470"><span class="linenum">3470</span></a>              case 'trackbacks':
<a name="l3471"><span class="linenum">3471</span></a>                  if( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> == '#' ) <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '';
<a name="l3472"><span class="linenum">3472</span></a>                  if( <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> == '#' ) <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 trackback');
<a name="l3473"><span class="linenum">3473</span></a>                  if( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == '#' ) <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d trackbacks');
<a name="l3474"><span class="linenum">3474</span></a>                  break;
<a name="l3475"><span class="linenum">3475</span></a>  
<a name="l3476"><span class="linenum">3476</span></a>              case 'pingbacks':
<a name="l3477"><span class="linenum">3477</span></a>  <span class="comment">                // Obsolete, but left for skin compatibility</span>
<a name="l3478"><span class="linenum">3478</span></a>                  if( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> == '#' ) <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '';
<a name="l3479"><span class="linenum">3479</span></a>                  if( <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> == '#' ) <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 pingback');
<a name="l3480"><span class="linenum">3480</span></a>                  if( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == '#' ) <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d pingbacks');
<a name="l3481"><span class="linenum">3481</span></a>                  break;
<a name="l3482"><span class="linenum">3482</span></a>  
<a name="l3483"><span class="linenum">3483</span></a>              case 'metas':
<a name="l3484"><span class="linenum">3484</span></a>                  if( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> == '#' ) <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '';
<a name="l3485"><span class="linenum">3485</span></a>                  if( <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> == '#' ) <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 meta comment');
<a name="l3486"><span class="linenum">3486</span></a>                  if( <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> == '#' ) <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d meta comments');
<a name="l3487"><span class="linenum">3487</span></a>                  break;
<a name="l3488"><span class="linenum">3488</span></a>  
<a name="l3489"><span class="linenum">3489</span></a>              default:
<a name="l3490"><span class="linenum">3490</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( &quot;Unknown feedback type [<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>]&quot; );
<a name="l3491"><span class="linenum">3491</span></a>          }
<a name="l3492"><span class="linenum">3492</span></a>  
<a name="l3493"><span class="linenum">3493</span></a>          <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> = <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, false, <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../_variables/filter_by_perm.html">$filter_by_perm</a> );
<a name="l3494"><span class="linenum">3494</span></a>          if( !<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../_variables/filter_by_perm.html">$filter_by_perm</a> )
<a name="l3495"><span class="linenum">3495</span></a>          { // This is the case when we are only counting comments awaiting moderation, return only not visible feedbacks number
<a name="l3496"><span class="linenum">3496</span></a>  <span class="comment">            // count feedbacks with the same statuses where user has permission</span>
<a name="l3497"><span class="linenum">3497</span></a>              <a class="var it1611" onMouseOver="hilite(1611)" onMouseOut="lolite()" onClick="logVariable('visible_number')" href="../../../_variables/visible_number.html">$visible_number</a> = <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, false, true );
<a name="l3498"><span class="linenum">3498</span></a>              <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> = <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> - <a class="var it1611" onMouseOver="hilite(1611)" onMouseOut="lolite()" onClick="logVariable('visible_number')" href="../../../_variables/visible_number.html">$visible_number</a>;
<a name="l3499"><span class="linenum">3499</span></a>          }
<a name="l3500"><span class="linenum">3500</span></a>  
<a name="l3501"><span class="linenum">3501</span></a>          if( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> == 0 )
<a name="l3502"><span class="linenum">3502</span></a>              return <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a>;
<a name="l3503"><span class="linenum">3503</span></a>          elseif( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> == 1 )
<a name="l3504"><span class="linenum">3504</span></a>              return <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a>;
<a name="l3505"><span class="linenum">3505</span></a>          elseif( <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> &gt; 1 )
<a name="l3506"><span class="linenum">3506</span></a>              return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '%d', <a class="var it956" onMouseOver="hilite(956)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a>, <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> );
<a name="l3507"><span class="linenum">3507</span></a>      }
<a name="l3508"><span class="linenum">3508</span></a>  
<a name="l3509"><span class="linenum">3509</span></a>  
<a name="l3510"><span class="linenum">3510</span></a>      <span class="comment">/**</span>
<a name="l3511"><span class="linenum">3511</span></a>  <span class="comment">     * Get table from ratings data</span>
<a name="l3512"><span class="linenum">3512</span></a>  <span class="comment">     *</span>
<a name="l3513"><span class="linenum">3513</span></a>  <span class="comment">     * @param array ratings data</span>
<a name="l3514"><span class="linenum">3514</span></a>  <span class="comment">     * @param array params</span>
<a name="l3515"><span class="linenum">3515</span></a>  <span class="comment">     */</span>
<a name="l3516"><span class="linenum">3516</span></a>  	function <a class="function" onClick="logFunction('get_rating_table')" href="../../../_functions/get_rating_table.html" onMouseOver="funcPopup(event,'get_rating_table')">get_rating_table</a>( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l3517"><span class="linenum">3517</span></a>      {
<a name="l3518"><span class="linenum">3518</span></a>          <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> = <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['all_ratings'];
<a name="l3519"><span class="linenum">3519</span></a>          <a class="var it1614" onMouseOver="hilite(1614)" onMouseOut="lolite()" onClick="logVariable('average_real')" href="../../../_variables/average_real.html">$average_real</a> = ( <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> &gt; 0 ) ? <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>[&quot;summary&quot;] / <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a>, 1, &quot;.&quot;, &quot;&quot; ) : 0;
<a name="l3520"><span class="linenum">3520</span></a>          <a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('average')" href="../../../_variables/average.html">$average</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( ( <a class="var it1614" onMouseOver="hilite(1614)" onMouseOut="lolite()" onClick="logVariable('average_real')" href="../../../_variables/average_real.html">$average_real</a> ) / 5 * 100 );
<a name="l3521"><span class="linenum">3521</span></a>  
<a name="l3522"><span class="linenum">3522</span></a>          <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = '&lt;table class=&quot;rating_summary&quot; cellspacing=&quot;1&quot;&gt;';
<a name="l3523"><span class="linenum">3523</span></a>          foreach ( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a> as <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> =&gt; <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> )
<a name="l3524"><span class="linenum">3524</span></a>          {    // Print a row for each star with formed data
<a name="l3525"><span class="linenum">3525</span></a>              if( !is_int(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>) )
<a name="l3526"><span class="linenum">3526</span></a>              {
<a name="l3527"><span class="linenum">3527</span></a>                  continue;
<a name="l3528"><span class="linenum">3528</span></a>              }
<a name="l3529"><span class="linenum">3529</span></a>  
<a name="l3530"><span class="linenum">3530</span></a>              <a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('star_average')" href="../../../_variables/star_average.html">$star_average</a> = ( <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> &gt; 0 ) ? <a class="phpfunction" onClick="logFunction('ceil')" href="../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( ( <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> / <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> ) * 100 ) : 0;
<a name="l3531"><span class="linenum">3531</span></a>              switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rating_summary_star_totals'] )
<a name="l3532"><span class="linenum">3532</span></a>              {
<a name="l3533"><span class="linenum">3533</span></a>                  case 'count':
<a name="l3534"><span class="linenum">3534</span></a>                      <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('star_value')" href="../../../_variables/star_value.html">$star_value</a> = '('.<a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>.')';
<a name="l3535"><span class="linenum">3535</span></a>                  break;
<a name="l3536"><span class="linenum">3536</span></a>                  case 'percent':
<a name="l3537"><span class="linenum">3537</span></a>                      <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('star_value')" href="../../../_variables/star_value.html">$star_value</a> = '('.<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('star_average')" href="../../../_variables/star_average.html">$star_average</a>.'%)';
<a name="l3538"><span class="linenum">3538</span></a>                  break;
<a name="l3539"><span class="linenum">3539</span></a>                  case 'none':
<a name="l3540"><span class="linenum">3540</span></a>                  default:
<a name="l3541"><span class="linenum">3541</span></a>                      <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('star_value')" href="../../../_variables/star_value.html">$star_value</a> = &quot;&quot;;
<a name="l3542"><span class="linenum">3542</span></a>                  break;
<a name="l3543"><span class="linenum">3543</span></a>              }
<a name="l3544"><span class="linenum">3544</span></a>              <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= '&lt;tr&gt;&lt;th&gt;'.<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('star').':&lt;/th&gt;
<a name="l3545"><span class="linenum">3545</span></a>                  &lt;td class=&quot;progress&quot;&gt;&lt;div style=&quot;width:'.<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('star_average')" href="../../../_variables/star_average.html">$star_average</a>.'%&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;/td&gt;
<a name="l3546"><span class="linenum">3546</span></a>                  &lt;td&gt;'.<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('star_value')" href="../../../_variables/star_value.html">$star_value</a>.'&lt;/td&gt;&lt;tr&gt;';
<a name="l3547"><span class="linenum">3547</span></a>          }
<a name="l3548"><span class="linenum">3548</span></a>          <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= '&lt;/table&gt;';
<a name="l3549"><span class="linenum">3549</span></a>  
<a name="l3550"><span class="linenum">3550</span></a>          <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= '&lt;div class=&quot;rating_summary_total&quot;&gt;
<a name="l3551"><span class="linenum">3551</span></a>              '.<a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a>.' '.( <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> &gt; 1 ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('ratings') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('rating') ).'
<a name="l3552"><span class="linenum">3552</span></a>              &lt;div class=&quot;average_rating&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Average user rating').':&lt;br /&gt;
<a name="l3553"><span class="linenum">3553</span></a>              '.<a class="function" onClick="logFunction('get_star_rating')" href="../../../_functions/get_star_rating.html" onMouseOver="funcPopup(event,'get_star_rating')">get_star_rating</a>( <a class="var it1614" onMouseOver="hilite(1614)" onMouseOut="lolite()" onClick="logVariable('average_real')" href="../../../_variables/average_real.html">$average_real</a> ).'&lt;span&gt;('.<a class="var it1614" onMouseOver="hilite(1614)" onMouseOut="lolite()" onClick="logVariable('average_real')" href="../../../_variables/average_real.html">$average_real</a>.')&lt;/span&gt;
<a name="l3554"><span class="linenum">3554</span></a>              &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;';
<a name="l3555"><span class="linenum">3555</span></a>  
<a name="l3556"><span class="linenum">3556</span></a>          return <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>;
<a name="l3557"><span class="linenum">3557</span></a>      }
<a name="l3558"><span class="linenum">3558</span></a>  
<a name="l3559"><span class="linenum">3559</span></a>  
<a name="l3560"><span class="linenum">3560</span></a>      <span class="comment">/**</span>
<a name="l3561"><span class="linenum">3561</span></a>  <span class="comment">     * Get table with rating summary</span>
<a name="l3562"><span class="linenum">3562</span></a>  <span class="comment">     *</span>
<a name="l3563"><span class="linenum">3563</span></a>  <span class="comment">     * @param array of params</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment">     */</span>
<a name="l3565"><span class="linenum">3565</span></a>  	function <a class="function" onClick="logFunction('get_rating_summary')" href="../../../_functions/get_rating_summary.html" onMouseOver="funcPopup(event,'get_rating_summary')">get_rating_summary</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3566"><span class="linenum">3566</span></a>      {
<a name="l3567"><span class="linenum">3567</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3568"><span class="linenum">3568</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3569"><span class="linenum">3569</span></a>              'rating_summary_star_totals' =&gt; 'count' // Possible values: 'count', 'percent' and 'none'
<a name="l3570"><span class="linenum">3570</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3571"><span class="linenum">3571</span></a>  
<a name="l3572"><span class="linenum">3572</span></a>          <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l3573"><span class="linenum">3573</span></a>          if( ! <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'display_rating_summary' ) )
<a name="l3574"><span class="linenum">3574</span></a>          { // Don't display a rating summary
<a name="l3575"><span class="linenum">3575</span></a>              return;
<a name="l3576"><span class="linenum">3576</span></a>          }
<a name="l3577"><span class="linenum">3577</span></a>  
<a name="l3578"><span class="linenum">3578</span></a>  <span class="comment">        // get ratings and active ratings ( active ratings are younger then comment_expiry_delay )</span>
<a name="l3579"><span class="linenum">3579</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>, <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a> ) = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_ratings')" href="../../../_functions/get_ratings.html" onMouseOver="funcPopup(event,'get_ratings')">get_ratings</a>();
<a name="l3580"><span class="linenum">3580</span></a>          <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> = <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['all_ratings'];
<a name="l3581"><span class="linenum">3581</span></a>          <a class="var it1620" onMouseOver="hilite(1620)" onMouseOut="lolite()" onClick="logVariable('active_ratings_count')" href="../../../_variables/active_ratings_count.html">$active_ratings_count</a> = <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['all_ratings'];
<a name="l3582"><span class="linenum">3582</span></a>          if( <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a> == 0 )
<a name="l3583"><span class="linenum">3583</span></a>          { // No Comments
<a name="l3584"><span class="linenum">3584</span></a>              return;
<a name="l3585"><span class="linenum">3585</span></a>          }
<a name="l3586"><span class="linenum">3586</span></a>  
<a name="l3587"><span class="linenum">3587</span></a>          <a class="var it1614" onMouseOver="hilite(1614)" onMouseOut="lolite()" onClick="logVariable('average_real')" href="../../../_variables/average_real.html">$average_real</a> = <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>[&quot;summary&quot;] / <a class="var it1613" onMouseOver="hilite(1613)" onMouseOut="lolite()" onClick="logVariable('ratings_count')" href="../../../_variables/ratings_count.html">$ratings_count</a>, 1, &quot;.&quot;, &quot;&quot; );
<a name="l3588"><span class="linenum">3588</span></a>          <a class="var it1621" onMouseOver="hilite(1621)" onMouseOut="lolite()" onClick="logVariable('active_average_real')" href="../../../_variables/active_average_real.html">$active_average_real</a> = ( <a class="var it1620" onMouseOver="hilite(1620)" onMouseOut="lolite()" onClick="logVariable('active_ratings_count')" href="../../../_variables/active_ratings_count.html">$active_ratings_count</a> == 0 ) ? 0 : ( <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>[&quot;summary&quot;] / <a class="var it1620" onMouseOver="hilite(1620)" onMouseOut="lolite()" onClick="logVariable('active_ratings_count')" href="../../../_variables/active_ratings_count.html">$active_ratings_count</a>, 1, &quot;.&quot;, &quot;&quot; ) );
<a name="l3589"><span class="linenum">3589</span></a>  
<a name="l3590"><span class="linenum">3590</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = '';
<a name="l3591"><span class="linenum">3591</span></a>          <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'comment_expiry_delay' );
<a name="l3592"><span class="linenum">3592</span></a>          if( empty( <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> ) )
<a name="l3593"><span class="linenum">3593</span></a>          {
<a name="l3594"><span class="linenum">3594</span></a>              <a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('all_ratings_title')" href="../../../_variables/all_ratings_title.html">$all_ratings_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User ratings');
<a name="l3595"><span class="linenum">3595</span></a>          }
<a name="l3596"><span class="linenum">3596</span></a>          else
<a name="l3597"><span class="linenum">3597</span></a>          {
<a name="l3598"><span class="linenum">3598</span></a>              <a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('all_ratings_title')" href="../../../_variables/all_ratings_title.html">$all_ratings_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Overall user ratings');
<a name="l3599"><span class="linenum">3599</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;div class=&quot;ratings_table&quot;&gt;';
<a name="l3600"><span class="linenum">3600</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;div&gt;&lt;strong&gt;'.<a class="function" onClick="logFunction('get_duration_title')" href="../../../_functions/get_duration_title.html" onMouseOver="funcPopup(event,'get_duration_title')">get_duration_title</a>( <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../_variables/expiry_delay.html">$expiry_delay</a> ).'&lt;/strong&gt;&lt;/div&gt;';
<a name="l3601"><span class="linenum">3601</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_rating_table')" href="../../../_functions/get_rating_table.html" onMouseOver="funcPopup(event,'get_rating_table')">get_rating_table</a>( <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3602"><span class="linenum">3602</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;/div&gt;';
<a name="l3603"><span class="linenum">3603</span></a>          }
<a name="l3604"><span class="linenum">3604</span></a>  
<a name="l3605"><span class="linenum">3605</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;div class=&quot;ratings_table&quot;&gt;';
<a name="l3606"><span class="linenum">3606</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;div&gt;&lt;strong&gt;'.<a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('all_ratings_title')" href="../../../_variables/all_ratings_title.html">$all_ratings_title</a>.'&lt;/strong&gt;&lt;/div&gt;';
<a name="l3607"><span class="linenum">3607</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_rating_table')" href="../../../_functions/get_rating_table.html" onMouseOver="funcPopup(event,'get_rating_table')">get_rating_table</a>( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3608"><span class="linenum">3608</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= '&lt;/div&gt;';
<a name="l3609"><span class="linenum">3609</span></a>  
<a name="l3610"><span class="linenum">3610</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l3611"><span class="linenum">3611</span></a>      }
<a name="l3612"><span class="linenum">3612</span></a>  
<a name="l3613"><span class="linenum">3613</span></a>  
<a name="l3614"><span class="linenum">3614</span></a>      <span class="comment">/**</span>
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment">     * Template function: Displays feeback moderation info</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment">     *</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment">     * @param string Type of feedback to link to (feedbacks (all)/comments/trackbacks/pingbacks)</span>
<a name="l3618"><span class="linenum">3618</span></a>  <span class="comment">     * @param string String to display before the link (if comments are to be displayed)</span>
<a name="l3619"><span class="linenum">3619</span></a>  <span class="comment">     * @param string String to display after the link (if comments are to be displayed)</span>
<a name="l3620"><span class="linenum">3620</span></a>  <span class="comment">     * @param string Link text to display when there are 0 comments</span>
<a name="l3621"><span class="linenum">3621</span></a>  <span class="comment">     * @param string Link text to display when there is 1 comment</span>
<a name="l3622"><span class="linenum">3622</span></a>  <span class="comment">     * @param string Link text to display when there are &gt;1 comments (include %d for # of comments)</span>
<a name="l3623"><span class="linenum">3623</span></a>  <span class="comment">     * @param string Link</span>
<a name="l3624"><span class="linenum">3624</span></a>  <span class="comment">     * @param boolean true to hide if no feedback</span>
<a name="l3625"><span class="linenum">3625</span></a>  <span class="comment">     */</span>
<a name="l3626"><span class="linenum">3626</span></a>  	function <a class="function" onClick="logFunction('feedback_moderation')" href="../../../_functions/feedback_moderation.html" onMouseOver="funcPopup(event,'feedback_moderation')">feedback_moderation</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = 'feedbacks', <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '',
<a name="l3627"><span class="linenum">3627</span></a>              <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '', <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = '#', <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = '#', <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a> = '#', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3628"><span class="linenum">3628</span></a>      {
<a name="l3629"><span class="linenum">3629</span></a>          <span class="comment">/**</span>
<a name="l3630"><span class="linenum">3630</span></a>  <span class="comment">         * @var User</span>
<a name="l3631"><span class="linenum">3631</span></a>  <span class="comment">         */</span>
<a name="l3632"><span class="linenum">3632</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l3633"><span class="linenum">3633</span></a>  
<a name="l3634"><span class="linenum">3634</span></a>          <span class="comment">/* TODO: finish this...</span>
<a name="l3635"><span class="linenum">3635</span></a>  <span class="comment">        $params = array_merge( array(</span>
<a name="l3636"><span class="linenum">3636</span></a>  <span class="comment">                                    'type' =&gt; 'feedbacks',</span>
<a name="l3637"><span class="linenum">3637</span></a>  <span class="comment">                                    'block_before' =&gt; '',</span>
<a name="l3638"><span class="linenum">3638</span></a>  <span class="comment">                                    'blo_after' =&gt; '',</span>
<a name="l3639"><span class="linenum">3639</span></a>  <span class="comment">                                    'link_text_zero' =&gt; '#',</span>
<a name="l3640"><span class="linenum">3640</span></a>  <span class="comment">                                    'link_text_one' =&gt; '#',</span>
<a name="l3641"><span class="linenum">3641</span></a>  <span class="comment">                                    'link_text_more' =&gt; '#',</span>
<a name="l3642"><span class="linenum">3642</span></a>  <span class="comment">                                    'link_title' =&gt; '#',</span>
<a name="l3643"><span class="linenum">3643</span></a>  <span class="comment">                                    'url' =&gt; '#',</span>
<a name="l3644"><span class="linenum">3644</span></a>  <span class="comment">                                    'type' =&gt; 'feedbacks',</span>
<a name="l3645"><span class="linenum">3645</span></a>  <span class="comment">                                ), $params );</span>
<a name="l3646"><span class="linenum">3646</span></a>  <span class="comment">        */</span>
<a name="l3647"><span class="linenum">3647</span></a>  
<a name="l3648"><span class="linenum">3648</span></a>          if( isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>) &amp;&amp;    <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_comment!draft', 'moderate', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() ) )
<a name="l3649"><span class="linenum">3649</span></a>          {    // We have permission to edit comments:
<a name="l3650"><span class="linenum">3650</span></a>              if( <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a> == '#' )
<a name="l3651"><span class="linenum">3651</span></a>              {    // Use default link:
<a name="l3652"><span class="linenum">3652</span></a>                  global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l3653"><span class="linenum">3653</span></a>                  <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a> = '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'#comments&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Moderate these feedbacks').'&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Moderate...').'&lt;/a&gt;';
<a name="l3654"><span class="linenum">3654</span></a>              }
<a name="l3655"><span class="linenum">3655</span></a>          }
<a name="l3656"><span class="linenum">3656</span></a>          else
<a name="l3657"><span class="linenum">3657</span></a>          { // User has no right to edit comments:
<a name="l3658"><span class="linenum">3658</span></a>              <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a> = '';
<a name="l3659"><span class="linenum">3659</span></a>          }
<a name="l3660"><span class="linenum">3660</span></a>  
<a name="l3661"><span class="linenum">3661</span></a>  <span class="comment">        // Inject Edit/moderate link as relevant:</span>
<a name="l3662"><span class="linenum">3662</span></a>          <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '%s', <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a>, <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> );
<a name="l3663"><span class="linenum">3663</span></a>          <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '%s', <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a>, <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> );
<a name="l3664"><span class="linenum">3664</span></a>          <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '%s', <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('edit_comments_link')" href="../../../_variables/edit_comments_link.html">$edit_comments_link</a>, <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> );
<a name="l3665"><span class="linenum">3665</span></a>  
<a name="l3666"><span class="linenum">3666</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_title')" href="../../../_functions/get_feedback_title.html" onMouseOver="funcPopup(event,'get_feedback_title')">get_feedback_title</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a>, <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a>, <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a>, array( 'draft', 'review' ), false );
<a name="l3667"><span class="linenum">3667</span></a>  
<a name="l3668"><span class="linenum">3668</span></a>          if( !empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l3669"><span class="linenum">3669</span></a>          {
<a name="l3670"><span class="linenum">3670</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l3671"><span class="linenum">3671</span></a>          }
<a name="l3672"><span class="linenum">3672</span></a>      }
<a name="l3673"><span class="linenum">3673</span></a>  
<a name="l3674"><span class="linenum">3674</span></a>  
<a name="l3675"><span class="linenum">3675</span></a>  
<a name="l3676"><span class="linenum">3676</span></a>      <span class="comment">/**</span>
<a name="l3677"><span class="linenum">3677</span></a>  <span class="comment">     * Template tag: display footer for the current Item.</span>
<a name="l3678"><span class="linenum">3678</span></a>  <span class="comment">     *</span>
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">     * @param array</span>
<a name="l3680"><span class="linenum">3680</span></a>  <span class="comment">     * @return boolean true if something has been displayed</span>
<a name="l3681"><span class="linenum">3681</span></a>  <span class="comment">     */</span>
<a name="l3682"><span class="linenum">3682</span></a>  	function <a class="function" onClick="logFunction('footer')" href="../../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l3683"><span class="linenum">3683</span></a>      {
<a name="l3684"><span class="linenum">3684</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3685"><span class="linenum">3685</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3686"><span class="linenum">3686</span></a>                  'mode'        =&gt; '#',                // Will detect 'single' from <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> automatically
<a name="l3687"><span class="linenum">3687</span></a>                  'block_start' =&gt; '&lt;div class=&quot;item_footer&quot;&gt;',
<a name="l3688"><span class="linenum">3688</span></a>                  'block_end'   =&gt; '&lt;/div&gt;',
<a name="l3689"><span class="linenum">3689</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l3690"><span class="linenum">3690</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3691"><span class="linenum">3691</span></a>  
<a name="l3692"><span class="linenum">3692</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['mode'] == '#' )
<a name="l3693"><span class="linenum">3693</span></a>          {
<a name="l3694"><span class="linenum">3694</span></a>              global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l3695"><span class="linenum">3695</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['mode'] = <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l3696"><span class="linenum">3696</span></a>          }
<a name="l3697"><span class="linenum">3697</span></a>  
<a name="l3698"><span class="linenum">3698</span></a>  <span class="comment">        // pre_dump( $params['mode'] );</span>
<a name="l3699"><span class="linenum">3699</span></a>  
<a name="l3700"><span class="linenum">3700</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l3701"><span class="linenum">3701</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['mode'] )
<a name="l3702"><span class="linenum">3702</span></a>          {
<a name="l3703"><span class="linenum">3703</span></a>              case 'xml':
<a name="l3704"><span class="linenum">3704</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'xml_item_footer_text' );
<a name="l3705"><span class="linenum">3705</span></a>                  break;
<a name="l3706"><span class="linenum">3706</span></a>  
<a name="l3707"><span class="linenum">3707</span></a>              case 'single':
<a name="l3708"><span class="linenum">3708</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'single_item_footer_text' );
<a name="l3709"><span class="linenum">3709</span></a>                  break;
<a name="l3710"><span class="linenum">3710</span></a>  
<a name="l3711"><span class="linenum">3711</span></a>              default:
<a name="l3712"><span class="linenum">3712</span></a>  <span class="comment">                // Do NOT display!</span>
<a name="l3713"><span class="linenum">3713</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '';
<a name="l3714"><span class="linenum">3714</span></a>          }
<a name="l3715"><span class="linenum">3715</span></a>  
<a name="l3716"><span class="linenum">3716</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>( '#\$([a-z_]+)\$#', array( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'replace_callback' ), <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l3717"><span class="linenum">3717</span></a>  
<a name="l3718"><span class="linenum">3718</span></a>          if( empty(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>) )
<a name="l3719"><span class="linenum">3719</span></a>          {
<a name="l3720"><span class="linenum">3720</span></a>              return false;
<a name="l3721"><span class="linenum">3721</span></a>          }
<a name="l3722"><span class="linenum">3722</span></a>  
<a name="l3723"><span class="linenum">3723</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['block_start'].<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['block_end'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l3724"><span class="linenum">3724</span></a>  
<a name="l3725"><span class="linenum">3725</span></a>          return true;
<a name="l3726"><span class="linenum">3726</span></a>      }
<a name="l3727"><span class="linenum">3727</span></a>  
<a name="l3728"><span class="linenum">3728</span></a>  
<a name="l3729"><span class="linenum">3729</span></a>      <span class="comment">/**</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment">     * Gets button for deleting the Item if user has proper rights</span>
<a name="l3731"><span class="linenum">3731</span></a>  <span class="comment">     *</span>
<a name="l3732"><span class="linenum">3732</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l3733"><span class="linenum">3733</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l3734"><span class="linenum">3734</span></a>  <span class="comment">     * @param string link text</span>
<a name="l3735"><span class="linenum">3735</span></a>  <span class="comment">     * @param string link title</span>
<a name="l3736"><span class="linenum">3736</span></a>  <span class="comment">     * @param string class name</span>
<a name="l3737"><span class="linenum">3737</span></a>  <span class="comment">     * @param boolean true to make this a button instead of a link</span>
<a name="l3738"><span class="linenum">3738</span></a>  <span class="comment">     * @param string page url for the delete action</span>
<a name="l3739"><span class="linenum">3739</span></a>  <span class="comment">     * @param string confirmation text</span>
<a name="l3740"><span class="linenum">3740</span></a>  <span class="comment">     */</span>
<a name="l3741"><span class="linenum">3741</span></a>  	function <a class="function" onClick="logFunction('get_delete_link')" href="../../../_functions/get_delete_link.html" onMouseOver="funcPopup(event,'get_delete_link')">get_delete_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> = false, <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = '#', <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> = '#', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '' )
<a name="l3742"><span class="linenum">3742</span></a>      {
<a name="l3743"><span class="linenum">3743</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l3744"><span class="linenum">3744</span></a>  
<a name="l3745"><span class="linenum">3745</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l3746"><span class="linenum">3746</span></a>  
<a name="l3747"><span class="linenum">3747</span></a>          if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'delete', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l3748"><span class="linenum">3748</span></a>          { // User has right to delete this post
<a name="l3749"><span class="linenum">3749</span></a>              return false;
<a name="l3750"><span class="linenum">3750</span></a>          }
<a name="l3751"><span class="linenum">3751</span></a>  
<a name="l3752"><span class="linenum">3752</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' )
<a name="l3753"><span class="linenum">3753</span></a>          {
<a name="l3754"><span class="linenum">3754</span></a>              if( ! <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> )
<a name="l3755"><span class="linenum">3755</span></a>              {
<a name="l3756"><span class="linenum">3756</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'delete', 'imgtag' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete!');
<a name="l3757"><span class="linenum">3757</span></a>              }
<a name="l3758"><span class="linenum">3758</span></a>              else
<a name="l3759"><span class="linenum">3759</span></a>              {
<a name="l3760"><span class="linenum">3760</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete!');
<a name="l3761"><span class="linenum">3761</span></a>              }
<a name="l3762"><span class="linenum">3762</span></a>          }
<a name="l3763"><span class="linenum">3763</span></a>  
<a name="l3764"><span class="linenum">3764</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete this post');
<a name="l3765"><span class="linenum">3765</span></a>  
<a name="l3766"><span class="linenum">3766</span></a>          if( <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> == '#' )
<a name="l3767"><span class="linenum">3767</span></a>          {
<a name="l3768"><span class="linenum">3768</span></a>              <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=delete&amp;amp;post_ID=';
<a name="l3769"><span class="linenum">3769</span></a>          }
<a name="l3770"><span class="linenum">3770</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a>.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('item');
<a name="l3771"><span class="linenum">3771</span></a>  
<a name="l3772"><span class="linenum">3772</span></a>          if( !empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l3773"><span class="linenum">3773</span></a>          {
<a name="l3774"><span class="linenum">3774</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l3775"><span class="linenum">3775</span></a>          }
<a name="l3776"><span class="linenum">3776</span></a>  
<a name="l3777"><span class="linenum">3777</span></a>          if( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> == '#' )
<a name="l3778"><span class="linenum">3778</span></a>          {
<a name="l3779"><span class="linenum">3779</span></a>              <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> = <a class="function" onClick="logFunction('TS_')" href="../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('You are about to delete this post!\\nThis cannot be undone!');
<a name="l3780"><span class="linenum">3780</span></a>          }
<a name="l3781"><span class="linenum">3781</span></a>  
<a name="l3782"><span class="linenum">3782</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l3783"><span class="linenum">3783</span></a>          if( <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> )
<a name="l3784"><span class="linenum">3784</span></a>          { // Display as button
<a name="l3785"><span class="linenum">3785</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;input type=&quot;button&quot;';
<a name="l3786"><span class="linenum">3786</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' value=&quot;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot; onclick=&quot;if ( confirm(\'';
<a name="l3787"><span class="linenum">3787</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a>;
<a name="l3788"><span class="linenum">3788</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '\') ) { document.location.href=\''.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'\' }&quot;';
<a name="l3789"><span class="linenum">3789</span></a>              if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l3790"><span class="linenum">3790</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '/&gt;';
<a name="l3791"><span class="linenum">3791</span></a>          }
<a name="l3792"><span class="linenum">3792</span></a>          else
<a name="l3793"><span class="linenum">3793</span></a>          { // Display as link
<a name="l3794"><span class="linenum">3794</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot; onclick=&quot;return confirm(\'';
<a name="l3795"><span class="linenum">3795</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a>;
<a name="l3796"><span class="linenum">3796</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '\')&quot;';
<a name="l3797"><span class="linenum">3797</span></a>              if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l3798"><span class="linenum">3798</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l3799"><span class="linenum">3799</span></a>          }
<a name="l3800"><span class="linenum">3800</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l3801"><span class="linenum">3801</span></a>  
<a name="l3802"><span class="linenum">3802</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3803"><span class="linenum">3803</span></a>      }
<a name="l3804"><span class="linenum">3804</span></a>  
<a name="l3805"><span class="linenum">3805</span></a>  
<a name="l3806"><span class="linenum">3806</span></a>      <span class="comment">/**</span>
<a name="l3807"><span class="linenum">3807</span></a>  <span class="comment">     * Displays button for deleting the Item if user has proper rights</span>
<a name="l3808"><span class="linenum">3808</span></a>  <span class="comment">     *</span>
<a name="l3809"><span class="linenum">3809</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l3810"><span class="linenum">3810</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l3811"><span class="linenum">3811</span></a>  <span class="comment">     * @param string link text</span>
<a name="l3812"><span class="linenum">3812</span></a>  <span class="comment">     * @param string link title</span>
<a name="l3813"><span class="linenum">3813</span></a>  <span class="comment">     * @param string class name</span>
<a name="l3814"><span class="linenum">3814</span></a>  <span class="comment">     * @param boolean true to make this a button instead of a link</span>
<a name="l3815"><span class="linenum">3815</span></a>  <span class="comment">     * @param string page url for the delete action</span>
<a name="l3816"><span class="linenum">3816</span></a>  <span class="comment">     * @param string confirmation text</span>
<a name="l3817"><span class="linenum">3817</span></a>  <span class="comment">     */</span>
<a name="l3818"><span class="linenum">3818</span></a>  	function <a class="function" onClick="logFunction('delete_link')" href="../../../_functions/delete_link.html" onMouseOver="funcPopup(event,'delete_link')">delete_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> = false, <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = '#', <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> = '#', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '' )
<a name="l3819"><span class="linenum">3819</span></a>      {
<a name="l3820"><span class="linenum">3820</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_delete_link')" href="../../../_functions/get_delete_link.html" onMouseOver="funcPopup(event,'get_delete_link')">get_delete_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a>, <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l3821"><span class="linenum">3821</span></a>      }
<a name="l3822"><span class="linenum">3822</span></a>  
<a name="l3823"><span class="linenum">3823</span></a>  
<a name="l3824"><span class="linenum">3824</span></a>      <span class="comment">/**</span>
<a name="l3825"><span class="linenum">3825</span></a>  <span class="comment">     * Provide link to copy a post if user has edit rights</span>
<a name="l3826"><span class="linenum">3826</span></a>  <span class="comment">     *</span>
<a name="l3827"><span class="linenum">3827</span></a>  <span class="comment">     * @param array Params:</span>
<a name="l3828"><span class="linenum">3828</span></a>  <span class="comment">     *  - 'before': to display before link</span>
<a name="l3829"><span class="linenum">3829</span></a>  <span class="comment">     *  - 'after':    to display after link</span>
<a name="l3830"><span class="linenum">3830</span></a>  <span class="comment">     *  - 'text': link text</span>
<a name="l3831"><span class="linenum">3831</span></a>  <span class="comment">     *  - 'title': link title</span>
<a name="l3832"><span class="linenum">3832</span></a>  <span class="comment">     *  - 'class': CSS class name</span>
<a name="l3833"><span class="linenum">3833</span></a>  <span class="comment">     *  - 'save_context': redirect to current URL?</span>
<a name="l3834"><span class="linenum">3834</span></a>  <span class="comment">     */</span>
<a name="l3835"><span class="linenum">3835</span></a>  	function <a class="function" onClick="logFunction('get_copy_link')" href="../../../_functions/get_copy_link.html" onMouseOver="funcPopup(event,'get_copy_link')">get_copy_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3836"><span class="linenum">3836</span></a>      {
<a name="l3837"><span class="linenum">3837</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l3838"><span class="linenum">3838</span></a>  
<a name="l3839"><span class="linenum">3839</span></a>          <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_copy_url')" href="../../../_functions/get_copy_url.html" onMouseOver="funcPopup(event,'get_copy_url')">get_copy_url</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l3840"><span class="linenum">3840</span></a>          if( ! <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> )
<a name="l3841"><span class="linenum">3841</span></a>          {
<a name="l3842"><span class="linenum">3842</span></a>              return false;
<a name="l3843"><span class="linenum">3843</span></a>          }
<a name="l3844"><span class="linenum">3844</span></a>  
<a name="l3845"><span class="linenum">3845</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3846"><span class="linenum">3846</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3847"><span class="linenum">3847</span></a>                  'before'       =&gt; ' ',
<a name="l3848"><span class="linenum">3848</span></a>                  'after'        =&gt; ' ',
<a name="l3849"><span class="linenum">3849</span></a>                  'text'         =&gt; '#', // '#' - icon + text, '#icon#' - only icon, '#text#' - only text
<a name="l3850"><span class="linenum">3850</span></a>                  'title'        =&gt; '#',
<a name="l3851"><span class="linenum">3851</span></a>                  'class'        =&gt; '',
<a name="l3852"><span class="linenum">3852</span></a>                  'save_context' =&gt; true,
<a name="l3853"><span class="linenum">3853</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3854"><span class="linenum">3854</span></a>  
<a name="l3855"><span class="linenum">3855</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] )
<a name="l3856"><span class="linenum">3856</span></a>          {
<a name="l3857"><span class="linenum">3857</span></a>              case '#':
<a name="l3858"><span class="linenum">3858</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'copy', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate this post...') ) ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate...');
<a name="l3859"><span class="linenum">3859</span></a>                  break;
<a name="l3860"><span class="linenum">3860</span></a>  
<a name="l3861"><span class="linenum">3861</span></a>              case '#icon#':
<a name="l3862"><span class="linenum">3862</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'copy', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate this post...') ) );
<a name="l3863"><span class="linenum">3863</span></a>                  break;
<a name="l3864"><span class="linenum">3864</span></a>  
<a name="l3865"><span class="linenum">3865</span></a>              case '#text#':
<a name="l3866"><span class="linenum">3866</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate...');
<a name="l3867"><span class="linenum">3867</span></a>                  break;
<a name="l3868"><span class="linenum">3868</span></a>          }
<a name="l3869"><span class="linenum">3869</span></a>  
<a name="l3870"><span class="linenum">3870</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate this post...');
<a name="l3871"><span class="linenum">3871</span></a>  
<a name="l3872"><span class="linenum">3872</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3873"><span class="linenum">3873</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a>;
<a name="l3874"><span class="linenum">3874</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;';
<a name="l3875"><span class="linenum">3875</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l3876"><span class="linenum">3876</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .=  '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'].'&lt;/a&gt;';
<a name="l3877"><span class="linenum">3877</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3878"><span class="linenum">3878</span></a>  
<a name="l3879"><span class="linenum">3879</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3880"><span class="linenum">3880</span></a>      }
<a name="l3881"><span class="linenum">3881</span></a>  
<a name="l3882"><span class="linenum">3882</span></a>  
<a name="l3883"><span class="linenum">3883</span></a>      <span class="comment">/**</span>
<a name="l3884"><span class="linenum">3884</span></a>  <span class="comment">     * Get URL to copy a post if user has edit rights.</span>
<a name="l3885"><span class="linenum">3885</span></a>  <span class="comment">     *</span>
<a name="l3886"><span class="linenum">3886</span></a>  <span class="comment">     * @param array Params:</span>
<a name="l3887"><span class="linenum">3887</span></a>  <span class="comment">     *  - 'save_context': redirect to current URL?</span>
<a name="l3888"><span class="linenum">3888</span></a>  <span class="comment">     */</span>
<a name="l3889"><span class="linenum">3889</span></a>  	function <a class="function" onClick="logFunction('get_copy_url')" href="../../../_functions/get_copy_url.html" onMouseOver="funcPopup(event,'get_copy_url')">get_copy_url</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3890"><span class="linenum">3890</span></a>      {
<a name="l3891"><span class="linenum">3891</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l3892"><span class="linenum">3892</span></a>  
<a name="l3893"><span class="linenum">3893</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l3894"><span class="linenum">3894</span></a>  
<a name="l3895"><span class="linenum">3895</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l3896"><span class="linenum">3896</span></a>          { // preview..
<a name="l3897"><span class="linenum">3897</span></a>              return false;
<a name="l3898"><span class="linenum">3898</span></a>          }
<a name="l3899"><span class="linenum">3899</span></a>  
<a name="l3900"><span class="linenum">3900</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3901"><span class="linenum">3901</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('write_item_url')" href="../../../_variables/write_item_url.html">$write_item_url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_write_item_url')" href="../../../_functions/get_write_item_url.html" onMouseOver="funcPopup(event,'get_write_item_url')">get_write_item_url</a>();
<a name="l3902"><span class="linenum">3902</span></a>          if( empty( <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('write_item_url')" href="../../../_variables/write_item_url.html">$write_item_url</a> ) )
<a name="l3903"><span class="linenum">3903</span></a>          { // User has no right to copy this post
<a name="l3904"><span class="linenum">3904</span></a>              return false;
<a name="l3905"><span class="linenum">3905</span></a>          }
<a name="l3906"><span class="linenum">3906</span></a>  
<a name="l3907"><span class="linenum">3907</span></a>  <span class="comment">        // default params</span>
<a name="l3908"><span class="linenum">3908</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> += array('save_context' =&gt; true);
<a name="l3909"><span class="linenum">3909</span></a>  
<a name="l3910"><span class="linenum">3910</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = false;
<a name="l3911"><span class="linenum">3911</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) &amp;&amp; !<a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l3912"><span class="linenum">3912</span></a>          {    // We have a mode 'In-skin editing' for the current Blog
<a name="l3913"><span class="linenum">3913</span></a>              if( <a class="function" onClick="logFunction('check_item_perm_edit')" href="../../../_functions/check_item_perm_edit.html" onMouseOver="funcPopup(event,'check_item_perm_edit')">check_item_perm_edit</a>( 0, false ) )
<a name="l3914"><span class="linenum">3914</span></a>              {    // Current user can copy this post from Front-office
<a name="l3915"><span class="linenum">3915</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ), 'disp=edit&amp;cp='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3916"><span class="linenum">3916</span></a>              }
<a name="l3917"><span class="linenum">3917</span></a>              else if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l3918"><span class="linenum">3918</span></a>              {    // Current user can copy this post from Back-office
<a name="l3919"><span class="linenum">3919</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=copy&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID.'&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l3920"><span class="linenum">3920</span></a>              }
<a name="l3921"><span class="linenum">3921</span></a>          }
<a name="l3922"><span class="linenum">3922</span></a>          else if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l3923"><span class="linenum">3923</span></a>          {    // Copy a post from Back-office
<a name="l3924"><span class="linenum">3924</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=copy&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID.'&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l3925"><span class="linenum">3925</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['save_context'] )
<a name="l3926"><span class="linenum">3926</span></a>              {
<a name="l3927"><span class="linenum">3927</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> .= '&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ).'#'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor_id')" href="../../../_functions/get_anchor_id.html" onMouseOver="funcPopup(event,'get_anchor_id')">get_anchor_id</a>() );
<a name="l3928"><span class="linenum">3928</span></a>              }
<a name="l3929"><span class="linenum">3929</span></a>          }
<a name="l3930"><span class="linenum">3930</span></a>          return <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l3931"><span class="linenum">3931</span></a>      }
<a name="l3932"><span class="linenum">3932</span></a>  
<a name="l3933"><span class="linenum">3933</span></a>  
<a name="l3934"><span class="linenum">3934</span></a>      <span class="comment">/**</span>
<a name="l3935"><span class="linenum">3935</span></a>  <span class="comment">     * Template tag</span>
<a name="l3936"><span class="linenum">3936</span></a>  <span class="comment">     * @see Item::get_copy_link()</span>
<a name="l3937"><span class="linenum">3937</span></a>  <span class="comment">     */</span>
<a name="l3938"><span class="linenum">3938</span></a>  	function <a class="function" onClick="logFunction('copy_link')" href="../../../_functions/copy_link.html" onMouseOver="funcPopup(event,'copy_link')">copy_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3939"><span class="linenum">3939</span></a>      {
<a name="l3940"><span class="linenum">3940</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_copy_link')" href="../../../_functions/get_copy_link.html" onMouseOver="funcPopup(event,'get_copy_link')">get_copy_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3941"><span class="linenum">3941</span></a>      }
<a name="l3942"><span class="linenum">3942</span></a>  
<a name="l3943"><span class="linenum">3943</span></a>  
<a name="l3944"><span class="linenum">3944</span></a>      <span class="comment">/**</span>
<a name="l3945"><span class="linenum">3945</span></a>  <span class="comment">     * Provide link to edit a post if user has edit rights</span>
<a name="l3946"><span class="linenum">3946</span></a>  <span class="comment">     *</span>
<a name="l3947"><span class="linenum">3947</span></a>  <span class="comment">     * @param array Params:</span>
<a name="l3948"><span class="linenum">3948</span></a>  <span class="comment">     *  - 'before': to display before link</span>
<a name="l3949"><span class="linenum">3949</span></a>  <span class="comment">     *  - 'after':    to display after link</span>
<a name="l3950"><span class="linenum">3950</span></a>  <span class="comment">     *  - 'text': link text</span>
<a name="l3951"><span class="linenum">3951</span></a>  <span class="comment">     *  - 'title': link title</span>
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment">     *  - 'class': CSS class name</span>
<a name="l3953"><span class="linenum">3953</span></a>  <span class="comment">     *  - 'save_context': redirect to current URL?</span>
<a name="l3954"><span class="linenum">3954</span></a>  <span class="comment">     */</span>
<a name="l3955"><span class="linenum">3955</span></a>  	function <a class="function" onClick="logFunction('get_edit_link')" href="../../../_functions/get_edit_link.html" onMouseOver="funcPopup(event,'get_edit_link')">get_edit_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3956"><span class="linenum">3956</span></a>      {
<a name="l3957"><span class="linenum">3957</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l3958"><span class="linenum">3958</span></a>  
<a name="l3959"><span class="linenum">3959</span></a>          <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_edit_url')" href="../../../_functions/get_edit_url.html" onMouseOver="funcPopup(event,'get_edit_url')">get_edit_url</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l3960"><span class="linenum">3960</span></a>          if( ! <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> )
<a name="l3961"><span class="linenum">3961</span></a>          {
<a name="l3962"><span class="linenum">3962</span></a>              return false;
<a name="l3963"><span class="linenum">3963</span></a>          }
<a name="l3964"><span class="linenum">3964</span></a>  
<a name="l3965"><span class="linenum">3965</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3966"><span class="linenum">3966</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3967"><span class="linenum">3967</span></a>                  'before'       =&gt; ' ',
<a name="l3968"><span class="linenum">3968</span></a>                  'after'        =&gt; ' ',
<a name="l3969"><span class="linenum">3969</span></a>                  'text'         =&gt; '#',
<a name="l3970"><span class="linenum">3970</span></a>                  'title'        =&gt; '#',
<a name="l3971"><span class="linenum">3971</span></a>                  'class'        =&gt; '',
<a name="l3972"><span class="linenum">3972</span></a>                  'save_context' =&gt; true,
<a name="l3973"><span class="linenum">3973</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3974"><span class="linenum">3974</span></a>  
<a name="l3975"><span class="linenum">3975</span></a>  
<a name="l3976"><span class="linenum">3976</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit...');
<a name="l3977"><span class="linenum">3977</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] == '#icon#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' );
<a name="l3978"><span class="linenum">3978</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit this post...');
<a name="l3979"><span class="linenum">3979</span></a>  
<a name="l3980"><span class="linenum">3980</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3981"><span class="linenum">3981</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a>;
<a name="l3982"><span class="linenum">3982</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;';
<a name="l3983"><span class="linenum">3983</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l3984"><span class="linenum">3984</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .=  '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'].'&lt;/a&gt;';
<a name="l3985"><span class="linenum">3985</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3986"><span class="linenum">3986</span></a>  
<a name="l3987"><span class="linenum">3987</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3988"><span class="linenum">3988</span></a>      }
<a name="l3989"><span class="linenum">3989</span></a>  
<a name="l3990"><span class="linenum">3990</span></a>  
<a name="l3991"><span class="linenum">3991</span></a>      <span class="comment">/**</span>
<a name="l3992"><span class="linenum">3992</span></a>  <span class="comment">     * Get URL to edit a post if user has edit rights.</span>
<a name="l3993"><span class="linenum">3993</span></a>  <span class="comment">     *</span>
<a name="l3994"><span class="linenum">3994</span></a>  <span class="comment">     * @param array Params:</span>
<a name="l3995"><span class="linenum">3995</span></a>  <span class="comment">     *  - 'save_context': redirect to current URL?</span>
<a name="l3996"><span class="linenum">3996</span></a>  <span class="comment">     */</span>
<a name="l3997"><span class="linenum">3997</span></a>  	function <a class="function" onClick="logFunction('get_edit_url')" href="../../../_functions/get_edit_url.html" onMouseOver="funcPopup(event,'get_edit_url')">get_edit_url</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3998"><span class="linenum">3998</span></a>      {
<a name="l3999"><span class="linenum">3999</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l4000"><span class="linenum">4000</span></a>  
<a name="l4001"><span class="linenum">4001</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l4002"><span class="linenum">4002</span></a>  
<a name="l4003"><span class="linenum">4003</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l4004"><span class="linenum">4004</span></a>          { // preview..
<a name="l4005"><span class="linenum">4005</span></a>              return false;
<a name="l4006"><span class="linenum">4006</span></a>          }
<a name="l4007"><span class="linenum">4007</span></a>  
<a name="l4008"><span class="linenum">4008</span></a>          if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l4009"><span class="linenum">4009</span></a>          { // User has no right to edit this post
<a name="l4010"><span class="linenum">4010</span></a>              return false;
<a name="l4011"><span class="linenum">4011</span></a>          }
<a name="l4012"><span class="linenum">4012</span></a>  
<a name="l4013"><span class="linenum">4013</span></a>  <span class="comment">        // default params</span>
<a name="l4014"><span class="linenum">4014</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> += array( 'save_context' =&gt; true );
<a name="l4015"><span class="linenum">4015</span></a>  
<a name="l4016"><span class="linenum">4016</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l4017"><span class="linenum">4017</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = false;
<a name="l4018"><span class="linenum">4018</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) &amp;&amp; ! <a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l4019"><span class="linenum">4019</span></a>          {    // We have a mode 'In-skin editing' for the current Blog
<a name="l4020"><span class="linenum">4020</span></a>              if( <a class="function" onClick="logFunction('check_item_perm_edit')" href="../../../_functions/check_item_perm_edit.html" onMouseOver="funcPopup(event,'check_item_perm_edit')">check_item_perm_edit</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, false ) )
<a name="l4021"><span class="linenum">4021</span></a>              {    // Current user can edit this post
<a name="l4022"><span class="linenum">4022</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ), 'disp=edit&amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l4023"><span class="linenum">4023</span></a>              }
<a name="l4024"><span class="linenum">4024</span></a>          }
<a name="l4025"><span class="linenum">4025</span></a>          else if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l4026"><span class="linenum">4026</span></a>          {    // Edit a post from Back-office
<a name="l4027"><span class="linenum">4027</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=edit&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID;
<a name="l4028"><span class="linenum">4028</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['save_context'] )
<a name="l4029"><span class="linenum">4029</span></a>              {
<a name="l4030"><span class="linenum">4030</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> .= '&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ).'#'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor_id')" href="../../../_functions/get_anchor_id.html" onMouseOver="funcPopup(event,'get_anchor_id')">get_anchor_id</a>() );
<a name="l4031"><span class="linenum">4031</span></a>              }
<a name="l4032"><span class="linenum">4032</span></a>          }
<a name="l4033"><span class="linenum">4033</span></a>          return <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l4034"><span class="linenum">4034</span></a>      }
<a name="l4035"><span class="linenum">4035</span></a>  
<a name="l4036"><span class="linenum">4036</span></a>  
<a name="l4037"><span class="linenum">4037</span></a>      <span class="comment">/**</span>
<a name="l4038"><span class="linenum">4038</span></a>  <span class="comment">     * Template tag</span>
<a name="l4039"><span class="linenum">4039</span></a>  <span class="comment">     * @see Item::get_edit_link()</span>
<a name="l4040"><span class="linenum">4040</span></a>  <span class="comment">     */</span>
<a name="l4041"><span class="linenum">4041</span></a>  	function <a class="function" onClick="logFunction('edit_link')" href="../../../_functions/edit_link.html" onMouseOver="funcPopup(event,'edit_link')">edit_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4042"><span class="linenum">4042</span></a>      {
<a name="l4043"><span class="linenum">4043</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_edit_link')" href="../../../_functions/get_edit_link.html" onMouseOver="funcPopup(event,'get_edit_link')">get_edit_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4044"><span class="linenum">4044</span></a>      }
<a name="l4045"><span class="linenum">4045</span></a>  
<a name="l4046"><span class="linenum">4046</span></a>  
<a name="l4047"><span class="linenum">4047</span></a>      <span class="comment">/**</span>
<a name="l4048"><span class="linenum">4048</span></a>  <span class="comment">     * Get next status to publish/restrict to this item</span>
<a name="l4049"><span class="linenum">4049</span></a>  <span class="comment">     * TODO: asimo&gt;Refactor this with Comment-&gt;get_next_status()</span>
<a name="l4050"><span class="linenum">4050</span></a>  <span class="comment">     *</span>
<a name="l4051"><span class="linenum">4051</span></a>  <span class="comment">     * @param boolean true to get next publish status, and false to get next restrict status</span>
<a name="l4052"><span class="linenum">4052</span></a>  <span class="comment">     * @return mixed false if user has no permission | array( status, status_text, icon_color ) otherwise</span>
<a name="l4053"><span class="linenum">4053</span></a>  <span class="comment">     */</span>
<a name="l4054"><span class="linenum">4054</span></a>  	function <a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> )
<a name="l4055"><span class="linenum">4055</span></a>      {
<a name="l4056"><span class="linenum">4056</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l4057"><span class="linenum">4057</span></a>  
<a name="l4058"><span class="linenum">4058</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l4059"><span class="linenum">4059</span></a>          {
<a name="l4060"><span class="linenum">4060</span></a>              return false;
<a name="l4061"><span class="linenum">4061</span></a>          }
<a name="l4062"><span class="linenum">4062</span></a>  
<a name="l4063"><span class="linenum">4063</span></a>          <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l4064"><span class="linenum">4064</span></a>          <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-index' );
<a name="l4065"><span class="linenum">4065</span></a>  
<a name="l4066"><span class="linenum">4066</span></a>          <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>];
<a name="l4067"><span class="linenum">4067</span></a>          if( ( !<a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ) &amp;&amp; ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> == 0 ) &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'deprecated' ) )
<a name="l4068"><span class="linenum">4068</span></a>          {
<a name="l4069"><span class="linenum">4069</span></a>              <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> + 1;
<a name="l4070"><span class="linenum">4070</span></a>          }
<a name="l4071"><span class="linenum">4071</span></a>          <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> = false;
<a name="l4072"><span class="linenum">4072</span></a>          while( !<a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> &amp;&amp; ( <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> &lt; 4 ) : ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> &gt; 0 ) ) )
<a name="l4073"><span class="linenum">4073</span></a>          {
<a name="l4074"><span class="linenum">4074</span></a>              <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> + 1 ) : ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> - 1 );
<a name="l4075"><span class="linenum">4075</span></a>              <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!'.<a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][0], 'moderate', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l4076"><span class="linenum">4076</span></a>          }
<a name="l4077"><span class="linenum">4077</span></a>          if( <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> )
<a name="l4078"><span class="linenum">4078</span></a>          {
<a name="l4079"><span class="linenum">4079</span></a>              <a class="var it1632" onMouseOver="hilite(1632)" onMouseOut="lolite()" onClick="logVariable('label_index')" href="../../../_variables/label_index.html">$label_index</a> = <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? 1 : 2;
<a name="l4080"><span class="linenum">4080</span></a>              return array( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][0], <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][<a class="var it1632" onMouseOver="hilite(1632)" onMouseOut="lolite()" onClick="logVariable('label_index')" href="../../../_variables/label_index.html">$label_index</a>], <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][3] );
<a name="l4081"><span class="linenum">4081</span></a>          }
<a name="l4082"><span class="linenum">4082</span></a>          return false;
<a name="l4083"><span class="linenum">4083</span></a>      }
<a name="l4084"><span class="linenum">4084</span></a>  
<a name="l4085"><span class="linenum">4085</span></a>  
<a name="l4086"><span class="linenum">4086</span></a>      <span class="comment">/**</span>
<a name="l4087"><span class="linenum">4087</span></a>  <span class="comment">     * Provide link to publish a post if user has edit rights</span>
<a name="l4088"><span class="linenum">4088</span></a>  <span class="comment">     *</span>
<a name="l4089"><span class="linenum">4089</span></a>  <span class="comment">     * Note: publishing date will be updated</span>
<a name="l4090"><span class="linenum">4090</span></a>  <span class="comment">     *</span>
<a name="l4091"><span class="linenum">4091</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l4092"><span class="linenum">4092</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l4093"><span class="linenum">4093</span></a>  <span class="comment">     * @param string link text</span>
<a name="l4094"><span class="linenum">4094</span></a>  <span class="comment">     * @param string link title</span>
<a name="l4095"><span class="linenum">4095</span></a>  <span class="comment">     * @param string class name</span>
<a name="l4096"><span class="linenum">4096</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l4097"><span class="linenum">4097</span></a>  <span class="comment">     */</span>
<a name="l4098"><span class="linenum">4098</span></a>  	function <a class="function" onClick="logFunction('get_publish_link')" href="../../../_functions/get_publish_link.html" onMouseOver="funcPopup(event,'get_publish_link')">get_publish_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true )
<a name="l4099"><span class="linenum">4099</span></a>      {
<a name="l4100"><span class="linenum">4100</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4101"><span class="linenum">4101</span></a>  
<a name="l4102"><span class="linenum">4102</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'draft' )
<a name="l4103"><span class="linenum">4103</span></a>          {
<a name="l4104"><span class="linenum">4104</span></a>              return false;
<a name="l4105"><span class="linenum">4105</span></a>          }
<a name="l4106"><span class="linenum">4106</span></a>  
<a name="l4107"><span class="linenum">4107</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l4108"><span class="linenum">4108</span></a>  
<a name="l4109"><span class="linenum">4109</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l4110"><span class="linenum">4110</span></a>          if( ! (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!published', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ))
<a name="l4111"><span class="linenum">4111</span></a>              || ! (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_edit_ts', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID ) ) )
<a name="l4112"><span class="linenum">4112</span></a>          { // User has no right to publish this post now:
<a name="l4113"><span class="linenum">4113</span></a>              return false;
<a name="l4114"><span class="linenum">4114</span></a>          }
<a name="l4115"><span class="linenum">4115</span></a>  
<a name="l4116"><span class="linenum">4116</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'post', 'imgtag' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Publish NOW!');
<a name="l4117"><span class="linenum">4117</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Publish now using current date and time.');
<a name="l4118"><span class="linenum">4118</span></a>  
<a name="l4119"><span class="linenum">4119</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l4120"><span class="linenum">4120</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=publish_now'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('item');
<a name="l4121"><span class="linenum">4121</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l4122"><span class="linenum">4122</span></a>          {
<a name="l4123"><span class="linenum">4123</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ) );
<a name="l4124"><span class="linenum">4124</span></a>          }
<a name="l4125"><span class="linenum">4125</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l4126"><span class="linenum">4126</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l4127"><span class="linenum">4127</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l4128"><span class="linenum">4128</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l4129"><span class="linenum">4129</span></a>  
<a name="l4130"><span class="linenum">4130</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4131"><span class="linenum">4131</span></a>      }
<a name="l4132"><span class="linenum">4132</span></a>  
<a name="l4133"><span class="linenum">4133</span></a>  
<a name="l4134"><span class="linenum">4134</span></a>      <span class="comment">/**</span>
<a name="l4135"><span class="linenum">4135</span></a>  <span class="comment">     * Provide link to publish a post to the highest available public status for the current User</span>
<a name="l4136"><span class="linenum">4136</span></a>  <span class="comment">     *</span>
<a name="l4137"><span class="linenum">4137</span></a>  <span class="comment">     * @param $params</span>
<a name="l4138"><span class="linenum">4138</span></a>  <span class="comment">     * @return boolean true if link was displayed false otherwise</span>
<a name="l4139"><span class="linenum">4139</span></a>  <span class="comment">     */</span>
<a name="l4140"><span class="linenum">4140</span></a>  	function <a class="function" onClick="logFunction('highest_publish_link')" href="../../../_functions/highest_publish_link.html" onMouseOver="funcPopup(event,'highest_publish_link')">highest_publish_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4141"><span class="linenum">4141</span></a>      {
<a name="l4142"><span class="linenum">4142</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4143"><span class="linenum">4143</span></a>  
<a name="l4144"><span class="linenum">4144</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l4145"><span class="linenum">4145</span></a>          {
<a name="l4146"><span class="linenum">4146</span></a>              return false;
<a name="l4147"><span class="linenum">4147</span></a>          }
<a name="l4148"><span class="linenum">4148</span></a>  
<a name="l4149"><span class="linenum">4149</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4150"><span class="linenum">4150</span></a>                  'before'       =&gt; '',
<a name="l4151"><span class="linenum">4151</span></a>                  'after'        =&gt; '',
<a name="l4152"><span class="linenum">4152</span></a>                  'text'         =&gt; '#',
<a name="l4153"><span class="linenum">4153</span></a>                  'before_text'  =&gt; '',
<a name="l4154"><span class="linenum">4154</span></a>                  'after_text'   =&gt; '',
<a name="l4155"><span class="linenum">4155</span></a>                  'title'        =&gt; '',
<a name="l4156"><span class="linenum">4156</span></a>                  'class'        =&gt; '',
<a name="l4157"><span class="linenum">4157</span></a>                  'glue'         =&gt; '&amp;amp;',
<a name="l4158"><span class="linenum">4158</span></a>                  'save_context' =&gt; true,
<a name="l4159"><span class="linenum">4159</span></a>                  'redirect_to'  =&gt; '',
<a name="l4160"><span class="linenum">4160</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4161"><span class="linenum">4161</span></a>  
<a name="l4162"><span class="linenum">4162</span></a>          <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('curr_status_permvalue')" href="../../../_variables/curr_status_permvalue.html">$curr_status_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> );
<a name="l4163"><span class="linenum">4163</span></a>  <span class="comment">        // get the current User highest publish status for this item Blog</span>
<a name="l4164"><span class="linenum">4164</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>, <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> ) = <a class="function" onClick="logFunction('get_highest_publish_status')" href="../../../_functions/get_highest_publish_status.html" onMouseOver="funcPopup(event,'get_highest_publish_status')">get_highest_publish_status</a>( 'post', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() );
<a name="l4165"><span class="linenum">4165</span></a>  <span class="comment">        // Get binary value of the highest available status</span>
<a name="l4166"><span class="linenum">4166</span></a>          <a class="var it1637" onMouseOver="hilite(1637)" onMouseOut="lolite()" onClick="logVariable('highest_status_permvalue')" href="../../../_variables/highest_status_permvalue.html">$highest_status_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a> );
<a name="l4167"><span class="linenum">4167</span></a>          if( <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('curr_status_permvalue')" href="../../../_variables/curr_status_permvalue.html">$curr_status_permvalue</a> &gt;= <a class="var it1637" onMouseOver="hilite(1637)" onMouseOut="lolite()" onClick="logVariable('highest_status_permvalue')" href="../../../_variables/highest_status_permvalue.html">$highest_status_permvalue</a> || ( <a class="var it1637" onMouseOver="hilite(1637)" onMouseOut="lolite()" onClick="logVariable('highest_status_permvalue')" href="../../../_variables/highest_status_permvalue.html">$highest_status_permvalue</a> &lt;= <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'private' ) ) )
<a name="l4168"><span class="linenum">4168</span></a>          { // Current User has no permission to change this comment status to a more public status
<a name="l4169"><span class="linenum">4169</span></a>              return false;
<a name="l4170"><span class="linenum">4170</span></a>          }
<a name="l4171"><span class="linenum">4171</span></a>  
<a name="l4172"><span class="linenum">4172</span></a>          if( ! (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!'.<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>, 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) ) )
<a name="l4173"><span class="linenum">4173</span></a>          { // User has no right to edit this post
<a name="l4174"><span class="linenum">4174</span></a>              return false;
<a name="l4175"><span class="linenum">4175</span></a>          }
<a name="l4176"><span class="linenum">4176</span></a>  
<a name="l4177"><span class="linenum">4177</span></a>          <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'glue' ];
<a name="l4178"><span class="linenum">4178</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = ( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'text' ] == '#' ) ? <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'text' ];
<a name="l4179"><span class="linenum">4179</span></a>  
<a name="l4180"><span class="linenum">4180</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'before' ];
<a name="l4181"><span class="linenum">4181</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=publish'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_status='.<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('item');
<a name="l4182"><span class="linenum">4182</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'redirect_to' ] )
<a name="l4183"><span class="linenum">4183</span></a>          {
<a name="l4184"><span class="linenum">4184</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'redirect_to' ] );
<a name="l4185"><span class="linenum">4185</span></a>          }
<a name="l4186"><span class="linenum">4186</span></a>          elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'save_context' ] )
<a name="l4187"><span class="linenum">4187</span></a>          {
<a name="l4188"><span class="linenum">4188</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ) );
<a name="l4189"><span class="linenum">4189</span></a>          }
<a name="l4190"><span class="linenum">4190</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'title' ].'&quot;';
<a name="l4191"><span class="linenum">4191</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'class' ] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'class' ].'&quot;';
<a name="l4192"><span class="linenum">4192</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'before_text' ].<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'after_text' ].'&lt;/a&gt;';
<a name="l4193"><span class="linenum">4193</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'after' ];
<a name="l4194"><span class="linenum">4194</span></a>  
<a name="l4195"><span class="linenum">4195</span></a>          echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4196"><span class="linenum">4196</span></a>          return true;
<a name="l4197"><span class="linenum">4197</span></a>      }
<a name="l4198"><span class="linenum">4198</span></a>  
<a name="l4199"><span class="linenum">4199</span></a>  
<a name="l4200"><span class="linenum">4200</span></a>  	function <a class="function" onClick="logFunction('publish_link')" href="../../../_functions/publish_link.html" onMouseOver="funcPopup(event,'publish_link')">publish_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true )
<a name="l4201"><span class="linenum">4201</span></a>      {
<a name="l4202"><span class="linenum">4202</span></a>          <a class="var it1638" onMouseOver="hilite(1638)" onMouseOut="lolite()" onClick="logVariable('publish_link')" href="../../../_variables/publish_link.html">$publish_link</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_publish_link')" href="../../../_functions/get_publish_link.html" onMouseOver="funcPopup(event,'get_publish_link')">get_publish_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>, <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> );
<a name="l4203"><span class="linenum">4203</span></a>  
<a name="l4204"><span class="linenum">4204</span></a>          if( <a class="var it1638" onMouseOver="hilite(1638)" onMouseOut="lolite()" onClick="logVariable('publish_link')" href="../../../_variables/publish_link.html">$publish_link</a> === false )
<a name="l4205"><span class="linenum">4205</span></a>          {    // The publish link is unavailable for current user and for this item
<a name="l4206"><span class="linenum">4206</span></a>              return false;
<a name="l4207"><span class="linenum">4207</span></a>          }
<a name="l4208"><span class="linenum">4208</span></a>  
<a name="l4209"><span class="linenum">4209</span></a>  <span class="comment">        // Display the publish link</span>
<a name="l4210"><span class="linenum">4210</span></a>          echo <a class="var it1638" onMouseOver="hilite(1638)" onMouseOut="lolite()" onClick="logVariable('publish_link')" href="../../../_variables/publish_link.html">$publish_link</a>;
<a name="l4211"><span class="linenum">4211</span></a>  
<a name="l4212"><span class="linenum">4212</span></a>          return true;
<a name="l4213"><span class="linenum">4213</span></a>      }
<a name="l4214"><span class="linenum">4214</span></a>  
<a name="l4215"><span class="linenum">4215</span></a>  
<a name="l4216"><span class="linenum">4216</span></a>      <span class="comment">/**</span>
<a name="l4217"><span class="linenum">4217</span></a>  <span class="comment">     * Display next Publish/Restrict to link</span>
<a name="l4218"><span class="linenum">4218</span></a>  <span class="comment">     *</span>
<a name="l4219"><span class="linenum">4219</span></a>  <span class="comment">     * @param array link params</span>
<a name="l4220"><span class="linenum">4220</span></a>  <span class="comment">     * @param boolean true to display next publish status, and false to display next restrict status link</span>
<a name="l4221"><span class="linenum">4221</span></a>  <span class="comment">     * @return boolean true if link was displayed | false otherwise</span>
<a name="l4222"><span class="linenum">4222</span></a>  <span class="comment">     */</span>
<a name="l4223"><span class="linenum">4223</span></a>  	function <a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> )
<a name="l4224"><span class="linenum">4224</span></a>      {
<a name="l4225"><span class="linenum">4225</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4226"><span class="linenum">4226</span></a>  
<a name="l4227"><span class="linenum">4227</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4228"><span class="linenum">4228</span></a>                  'before'      =&gt; '',
<a name="l4229"><span class="linenum">4229</span></a>                  'after'       =&gt; '',
<a name="l4230"><span class="linenum">4230</span></a>                  'before_text' =&gt; '',
<a name="l4231"><span class="linenum">4231</span></a>                  'after_text'  =&gt; '',
<a name="l4232"><span class="linenum">4232</span></a>                  'text'        =&gt; '#',
<a name="l4233"><span class="linenum">4233</span></a>                  'title'       =&gt; '',
<a name="l4234"><span class="linenum">4234</span></a>                  'class'       =&gt; '',
<a name="l4235"><span class="linenum">4235</span></a>                  'glue'        =&gt; '&amp;amp;',
<a name="l4236"><span class="linenum">4236</span></a>                  'redirect_to' =&gt; '',
<a name="l4237"><span class="linenum">4237</span></a>                  'post_navigation' =&gt; 'same_blog',
<a name="l4238"><span class="linenum">4238</span></a>                  'nav_target'  =&gt; NULL,
<a name="l4239"><span class="linenum">4239</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4240"><span class="linenum">4240</span></a>  
<a name="l4241"><span class="linenum">4241</span></a>          if( <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> )
<a name="l4242"><span class="linenum">4242</span></a>          {
<a name="l4243"><span class="linenum">4243</span></a>              <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( true );
<a name="l4244"><span class="linenum">4244</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'publish';
<a name="l4245"><span class="linenum">4245</span></a>              <a class="var it1640" onMouseOver="hilite(1640)" onMouseOut="lolite()" onClick="logVariable('button_default_icon')" href="../../../_variables/button_default_icon.html">$button_default_icon</a> = 'move_up_'.<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[2];
<a name="l4246"><span class="linenum">4246</span></a>          }
<a name="l4247"><span class="linenum">4247</span></a>          else
<a name="l4248"><span class="linenum">4248</span></a>          {
<a name="l4249"><span class="linenum">4249</span></a>              <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> =  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( false );
<a name="l4250"><span class="linenum">4250</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'restrict';
<a name="l4251"><span class="linenum">4251</span></a>              <a class="var it1640" onMouseOver="hilite(1640)" onMouseOut="lolite()" onClick="logVariable('button_default_icon')" href="../../../_variables/button_default_icon.html">$button_default_icon</a> = 'move_down_'.<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[2];
<a name="l4252"><span class="linenum">4252</span></a>          }
<a name="l4253"><span class="linenum">4253</span></a>  
<a name="l4254"><span class="linenum">4254</span></a>          if( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> === false )
<a name="l4255"><span class="linenum">4255</span></a>          { // Next status is not allowed for current user
<a name="l4256"><span class="linenum">4256</span></a>              return false;
<a name="l4257"><span class="linenum">4257</span></a>          }
<a name="l4258"><span class="linenum">4258</span></a>  
<a name="l4259"><span class="linenum">4259</span></a>          <a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0];
<a name="l4260"><span class="linenum">4260</span></a>          <a class="var it1642" onMouseOver="hilite(1642)" onMouseOut="lolite()" onClick="logVariable('next_status_label')" href="../../../_variables/next_status_label.html">$next_status_label</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[1];
<a name="l4261"><span class="linenum">4261</span></a>  
<a name="l4262"><span class="linenum">4262</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>] ) )
<a name="l4263"><span class="linenum">4263</span></a>          { // Set text from params for next status
<a name="l4264"><span class="linenum">4264</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>];
<a name="l4265"><span class="linenum">4265</span></a>          }
<a name="l4266"><span class="linenum">4266</span></a>          elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text' ] != '#' )
<a name="l4267"><span class="linenum">4267</span></a>          { // Set text from params for any atatus
<a name="l4268"><span class="linenum">4268</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'];
<a name="l4269"><span class="linenum">4269</span></a>          }
<a name="l4270"><span class="linenum">4270</span></a>          else
<a name="l4271"><span class="linenum">4271</span></a>          { // Default text
<a name="l4272"><span class="linenum">4272</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it1640" onMouseOver="hilite(1640)" onMouseOut="lolite()" onClick="logVariable('button_default_icon')" href="../../../_variables/button_default_icon.html">$button_default_icon</a>, 'imgtag', array( 'title' =&gt; '' ) ).' '.<a class="var it1642" onMouseOver="hilite(1642)" onMouseOut="lolite()" onClick="logVariable('next_status_label')" href="../../../_variables/next_status_label.html">$next_status_label</a>;
<a name="l4273"><span class="linenum">4273</span></a>          }
<a name="l4274"><span class="linenum">4274</span></a>  
<a name="l4275"><span class="linenum">4275</span></a>          if( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] ) )
<a name="l4276"><span class="linenum">4276</span></a>          {
<a name="l4277"><span class="linenum">4277</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'moderation-titles' );
<a name="l4278"><span class="linenum">4278</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>[<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>];
<a name="l4279"><span class="linenum">4279</span></a>          }
<a name="l4280"><span class="linenum">4280</span></a>          <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['glue'];
<a name="l4281"><span class="linenum">4281</span></a>  
<a name="l4282"><span class="linenum">4282</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l4283"><span class="linenum">4283</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action='.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_status='.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('item');
<a name="l4284"><span class="linenum">4284</span></a>  
<a name="l4285"><span class="linenum">4285</span></a>  <span class="comment">        // set redirect_to</span>
<a name="l4286"><span class="linenum">4286</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['redirect_to'];
<a name="l4287"><span class="linenum">4287</span></a>          if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> ) &amp;&amp; ( !<a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() ) )
<a name="l4288"><span class="linenum">4288</span></a>          { // we are in front office
<a name="l4289"><span class="linenum">4289</span></a>              if( <a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a> == 'deprecated' )
<a name="l4290"><span class="linenum">4290</span></a>              {
<a name="l4291"><span class="linenum">4291</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['post_navigation'] == 'same_category' )
<a name="l4292"><span class="linenum">4292</span></a>                  {
<a name="l4293"><span class="linenum">4293</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('get_caturl')" href="../../../_functions/get_caturl.html" onMouseOver="funcPopup(event,'get_caturl')">get_caturl</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nav_target'] );
<a name="l4294"><span class="linenum">4294</span></a>                  }
<a name="l4295"><span class="linenum">4295</span></a>                  else
<a name="l4296"><span class="linenum">4296</span></a>                  {
<a name="l4297"><span class="linenum">4297</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l4298"><span class="linenum">4298</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l4299"><span class="linenum">4299</span></a>                  }
<a name="l4300"><span class="linenum">4300</span></a>              }
<a name="l4301"><span class="linenum">4301</span></a>              else
<a name="l4302"><span class="linenum">4302</span></a>              {
<a name="l4303"><span class="linenum">4303</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_navigation_param')" href="../../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['post_navigation'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nav_target'] );
<a name="l4304"><span class="linenum">4304</span></a>              }
<a name="l4305"><span class="linenum">4305</span></a>          }
<a name="l4306"><span class="linenum">4306</span></a>          if( !empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l4307"><span class="linenum">4307</span></a>          {
<a name="l4308"><span class="linenum">4308</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l4309"><span class="linenum">4309</span></a>          }
<a name="l4310"><span class="linenum">4310</span></a>  
<a name="l4311"><span class="linenum">4311</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;';
<a name="l4312"><span class="linenum">4312</span></a>          if( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>] ) )
<a name="l4313"><span class="linenum">4313</span></a>          { // Set class for all statuses
<a name="l4314"><span class="linenum">4314</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ? '' : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'];
<a name="l4315"><span class="linenum">4315</span></a>          }
<a name="l4316"><span class="linenum">4316</span></a>          else
<a name="l4317"><span class="linenum">4317</span></a>          { // Set special class for next status
<a name="l4318"><span class="linenum">4318</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>];
<a name="l4319"><span class="linenum">4319</span></a>          }
<a name="l4320"><span class="linenum">4320</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l4321"><span class="linenum">4321</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_text'].<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_text'].'&lt;/a&gt;';
<a name="l4322"><span class="linenum">4322</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l4323"><span class="linenum">4323</span></a>  
<a name="l4324"><span class="linenum">4324</span></a>          echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4325"><span class="linenum">4325</span></a>          return true;
<a name="l4326"><span class="linenum">4326</span></a>      }
<a name="l4327"><span class="linenum">4327</span></a>  
<a name="l4328"><span class="linenum">4328</span></a>  
<a name="l4329"><span class="linenum">4329</span></a>      <span class="comment">/**</span>
<a name="l4330"><span class="linenum">4330</span></a>  <span class="comment">     * Provide link to deprecate a post if user has edit rights</span>
<a name="l4331"><span class="linenum">4331</span></a>  <span class="comment">     *</span>
<a name="l4332"><span class="linenum">4332</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l4333"><span class="linenum">4333</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l4334"><span class="linenum">4334</span></a>  <span class="comment">     * @param string link text</span>
<a name="l4335"><span class="linenum">4335</span></a>  <span class="comment">     * @param string link title</span>
<a name="l4336"><span class="linenum">4336</span></a>  <span class="comment">     * @param string class name</span>
<a name="l4337"><span class="linenum">4337</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l4338"><span class="linenum">4338</span></a>  <span class="comment">     */</span>
<a name="l4339"><span class="linenum">4339</span></a>  	function <a class="function" onClick="logFunction('get_deprecate_link')" href="../../../_functions/get_deprecate_link.html" onMouseOver="funcPopup(event,'get_deprecate_link')">get_deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '' )
<a name="l4340"><span class="linenum">4340</span></a>      {
<a name="l4341"><span class="linenum">4341</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4342"><span class="linenum">4342</span></a>  
<a name="l4343"><span class="linenum">4343</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l4344"><span class="linenum">4344</span></a>  
<a name="l4345"><span class="linenum">4345</span></a>          if( (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'deprecated') // Already deprecated!
<a name="l4346"><span class="linenum">4346</span></a>              || ! (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!deprecated', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> )) )
<a name="l4347"><span class="linenum">4347</span></a>          { // User has no right to deprecated this post:
<a name="l4348"><span class="linenum">4348</span></a>              return false;
<a name="l4349"><span class="linenum">4349</span></a>          }
<a name="l4350"><span class="linenum">4350</span></a>  
<a name="l4351"><span class="linenum">4351</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'deprecate', 'imgtag' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecate!');
<a name="l4352"><span class="linenum">4352</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecate this post!');
<a name="l4353"><span class="linenum">4353</span></a>  
<a name="l4354"><span class="linenum">4354</span></a>          if( !empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l4355"><span class="linenum">4355</span></a>          {
<a name="l4356"><span class="linenum">4356</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l4357"><span class="linenum">4357</span></a>          }
<a name="l4358"><span class="linenum">4358</span></a>  
<a name="l4359"><span class="linenum">4359</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l4360"><span class="linenum">4360</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=deprecate'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'post_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('item').<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l4361"><span class="linenum">4361</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l4362"><span class="linenum">4362</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l4363"><span class="linenum">4363</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l4364"><span class="linenum">4364</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l4365"><span class="linenum">4365</span></a>  
<a name="l4366"><span class="linenum">4366</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4367"><span class="linenum">4367</span></a>      }
<a name="l4368"><span class="linenum">4368</span></a>  
<a name="l4369"><span class="linenum">4369</span></a>  
<a name="l4370"><span class="linenum">4370</span></a>      <span class="comment">/**</span>
<a name="l4371"><span class="linenum">4371</span></a>  <span class="comment">     * Display link to deprecate a post if user has edit rights</span>
<a name="l4372"><span class="linenum">4372</span></a>  <span class="comment">     *</span>
<a name="l4373"><span class="linenum">4373</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l4374"><span class="linenum">4374</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l4375"><span class="linenum">4375</span></a>  <span class="comment">     * @param string link text</span>
<a name="l4376"><span class="linenum">4376</span></a>  <span class="comment">     * @param string link title</span>
<a name="l4377"><span class="linenum">4377</span></a>  <span class="comment">     * @param string class name</span>
<a name="l4378"><span class="linenum">4378</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l4379"><span class="linenum">4379</span></a>  <span class="comment">     */</span>
<a name="l4380"><span class="linenum">4380</span></a>  	function <a class="function" onClick="logFunction('deprecate_link')" href="../../../_functions/deprecate_link.html" onMouseOver="funcPopup(event,'deprecate_link')">deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '' )
<a name="l4381"><span class="linenum">4381</span></a>      {
<a name="l4382"><span class="linenum">4382</span></a>          <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_deprecate_link')" href="../../../_functions/get_deprecate_link.html" onMouseOver="funcPopup(event,'get_deprecate_link')">get_deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l4383"><span class="linenum">4383</span></a>  
<a name="l4384"><span class="linenum">4384</span></a>          if( <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a> === false )
<a name="l4385"><span class="linenum">4385</span></a>          {    // The deprecate link is unavailable for current user and for this item
<a name="l4386"><span class="linenum">4386</span></a>              return false;
<a name="l4387"><span class="linenum">4387</span></a>          }
<a name="l4388"><span class="linenum">4388</span></a>  
<a name="l4389"><span class="linenum">4389</span></a>  <span class="comment">        // Display the deprecate link</span>
<a name="l4390"><span class="linenum">4390</span></a>          echo <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a>;
<a name="l4391"><span class="linenum">4391</span></a>  
<a name="l4392"><span class="linenum">4392</span></a>          return true;
<a name="l4393"><span class="linenum">4393</span></a>      }
<a name="l4394"><span class="linenum">4394</span></a>  
<a name="l4395"><span class="linenum">4395</span></a>  
<a name="l4396"><span class="linenum">4396</span></a>      <span class="comment">/**</span>
<a name="l4397"><span class="linenum">4397</span></a>  <span class="comment">     * Template function: display priority of item</span>
<a name="l4398"><span class="linenum">4398</span></a>  <span class="comment">     *</span>
<a name="l4399"><span class="linenum">4399</span></a>  <span class="comment">     * @param string</span>
<a name="l4400"><span class="linenum">4400</span></a>  <span class="comment">     * @param string</span>
<a name="l4401"><span class="linenum">4401</span></a>  <span class="comment">     */</span>
<a name="l4402"><span class="linenum">4402</span></a>  	function <a class="function" onClick="logFunction('priority')" href="../../../_functions/priority.html" onMouseOver="funcPopup(event,'priority')">priority</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '' )
<a name="l4403"><span class="linenum">4403</span></a>      {
<a name="l4404"><span class="linenum">4404</span></a>          if( isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('priority')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/priority.html">priority</a>) )
<a name="l4405"><span class="linenum">4405</span></a>          {
<a name="l4406"><span class="linenum">4406</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l4407"><span class="linenum">4407</span></a>              echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('priority')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/priority.html">priority</a>;
<a name="l4408"><span class="linenum">4408</span></a>              echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l4409"><span class="linenum">4409</span></a>          }
<a name="l4410"><span class="linenum">4410</span></a>      }
<a name="l4411"><span class="linenum">4411</span></a>  
<a name="l4412"><span class="linenum">4412</span></a>  
<a name="l4413"><span class="linenum">4413</span></a>      <span class="comment">/**</span>
<a name="l4414"><span class="linenum">4414</span></a>  <span class="comment">     * Get checkable list of renderers</span>
<a name="l4415"><span class="linenum">4415</span></a>  <span class="comment">     *</span>
<a name="l4416"><span class="linenum">4416</span></a>  <span class="comment">     * @param array|NULL If given, assume these renderers to be checked.</span>
<a name="l4417"><span class="linenum">4417</span></a>  <span class="comment">     * @return string Renderer checkboxes</span>
<a name="l4418"><span class="linenum">4418</span></a>  <span class="comment">     */</span>
<a name="l4419"><span class="linenum">4419</span></a>  	function <a class="function" onClick="logFunction('get_renderer_checkboxes')" href="../../../_functions/get_renderer_checkboxes.html" onMouseOver="funcPopup(event,'get_renderer_checkboxes')">get_renderer_checkboxes</a>( <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a> = NULL )
<a name="l4420"><span class="linenum">4420</span></a>      {
<a name="l4421"><span class="linenum">4421</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l4422"><span class="linenum">4422</span></a>  
<a name="l4423"><span class="linenum">4423</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a> ) )
<a name="l4424"><span class="linenum">4424</span></a>          {
<a name="l4425"><span class="linenum">4425</span></a>              <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>();
<a name="l4426"><span class="linenum">4426</span></a>          }
<a name="l4427"><span class="linenum">4427</span></a>  
<a name="l4428"><span class="linenum">4428</span></a>          return <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_renderer_checkboxes')" href="../../../_functions/get_renderer_checkboxes.html" onMouseOver="funcPopup(event,'get_renderer_checkboxes')">get_renderer_checkboxes</a>( <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a>, array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l4429"><span class="linenum">4429</span></a>      }
<a name="l4430"><span class="linenum">4430</span></a>  
<a name="l4431"><span class="linenum">4431</span></a>  
<a name="l4432"><span class="linenum">4432</span></a>      <span class="comment">/**</span>
<a name="l4433"><span class="linenum">4433</span></a>  <span class="comment">     * Template function: display checkable list of renderers</span>
<a name="l4434"><span class="linenum">4434</span></a>  <span class="comment">     *</span>
<a name="l4435"><span class="linenum">4435</span></a>  <span class="comment">     * @param array|NULL If given, assume these renderers to be checked.</span>
<a name="l4436"><span class="linenum">4436</span></a>  <span class="comment">     */</span>
<a name="l4437"><span class="linenum">4437</span></a>  	function <a class="function" onClick="logFunction('renderer_checkboxes')" href="../../../_functions/renderer_checkboxes.html" onMouseOver="funcPopup(event,'renderer_checkboxes')">renderer_checkboxes</a>( <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a> = NULL )
<a name="l4438"><span class="linenum">4438</span></a>      {
<a name="l4439"><span class="linenum">4439</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer_checkboxes')" href="../../../_functions/get_renderer_checkboxes.html" onMouseOver="funcPopup(event,'get_renderer_checkboxes')">get_renderer_checkboxes</a>( <a class="var it1644" onMouseOver="hilite(1644)" onMouseOut="lolite()" onClick="logVariable('item_renderers')" href="../../../_variables/item_renderers.html">$item_renderers</a> );
<a name="l4440"><span class="linenum">4440</span></a>      }
<a name="l4441"><span class="linenum">4441</span></a>  
<a name="l4442"><span class="linenum">4442</span></a>  
<a name="l4443"><span class="linenum">4443</span></a>      <span class="comment">/**</span>
<a name="l4444"><span class="linenum">4444</span></a>  <span class="comment">     * Get status of item</span>
<a name="l4445"><span class="linenum">4445</span></a>  <span class="comment">     *</span>
<a name="l4446"><span class="linenum">4446</span></a>  <span class="comment">     * Statuses:</span>
<a name="l4447"><span class="linenum">4447</span></a>  <span class="comment">     * - published</span>
<a name="l4448"><span class="linenum">4448</span></a>  <span class="comment">     * - deprecated</span>
<a name="l4449"><span class="linenum">4449</span></a>  <span class="comment">     * - protected</span>
<a name="l4450"><span class="linenum">4450</span></a>  <span class="comment">     * - private</span>
<a name="l4451"><span class="linenum">4451</span></a>  <span class="comment">     * - draft</span>
<a name="l4452"><span class="linenum">4452</span></a>  <span class="comment">     *</span>
<a name="l4453"><span class="linenum">4453</span></a>  <span class="comment">     * @param array Params</span>
<a name="l4454"><span class="linenum">4454</span></a>  <span class="comment">     */</span>
<a name="l4455"><span class="linenum">4455</span></a>  	function <a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4456"><span class="linenum">4456</span></a>      {
<a name="l4457"><span class="linenum">4457</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l4458"><span class="linenum">4458</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4459"><span class="linenum">4459</span></a>                  'before' =&gt; '',
<a name="l4460"><span class="linenum">4460</span></a>                  'after'  =&gt; '',
<a name="l4461"><span class="linenum">4461</span></a>                  'format' =&gt; 'htmlbody', // DO NOT USE 'styled' -&gt;DEPRECATED! INSTEAD: Valid values: see {@link <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>()}
<a name="l4462"><span class="linenum">4462</span></a>                  'class'  =&gt; '',            // DEPRECATED
<a name="l4463"><span class="linenum">4463</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4464"><span class="linenum">4464</span></a>  
<a name="l4465"><span class="linenum">4465</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l4466"><span class="linenum">4466</span></a>  
<a name="l4467"><span class="linenum">4467</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] )
<a name="l4468"><span class="linenum">4468</span></a>          {
<a name="l4469"><span class="linenum">4469</span></a>              case 'raw':
<a name="l4470"><span class="linenum">4470</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_status_raw')" href="../../../_functions/get_status_raw.html" onMouseOver="funcPopup(event,'get_status_raw')">get_status_raw</a>();
<a name="l4471"><span class="linenum">4471</span></a>                  break;
<a name="l4472"><span class="linenum">4472</span></a>  
<a name="l4473"><span class="linenum">4473</span></a>              case 'styled':
<a name="l4474"><span class="linenum">4474</span></a>  <span class="comment">                // DEPRECATED: instead use something like: $Item-&gt;format_status( array(    'template' =&gt; '&lt;div class=&quot;evo_status__banner evo_status__$status$&quot;&gt;$status_title$&lt;/div&gt;' ) );</span>
<a name="l4475"><span class="linenum">4475</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('get_styled_status')" href="../../../_functions/get_styled_status.html" onMouseOver="funcPopup(event,'get_styled_status')">get_styled_status</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_status'), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] );
<a name="l4476"><span class="linenum">4476</span></a>                  break;
<a name="l4477"><span class="linenum">4477</span></a>                  
<a name="l4478"><span class="linenum">4478</span></a>              default: // other formats
<a name="l4479"><span class="linenum">4479</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_status'), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l4480"><span class="linenum">4480</span></a>                  break;
<a name="l4481"><span class="linenum">4481</span></a>          }
<a name="l4482"><span class="linenum">4482</span></a>  
<a name="l4483"><span class="linenum">4483</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l4484"><span class="linenum">4484</span></a>  
<a name="l4485"><span class="linenum">4485</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4486"><span class="linenum">4486</span></a>      }
<a name="l4487"><span class="linenum">4487</span></a>  
<a name="l4488"><span class="linenum">4488</span></a>  
<a name="l4489"><span class="linenum">4489</span></a>      <span class="comment">/**</span>
<a name="l4490"><span class="linenum">4490</span></a>  <span class="comment">     * Template function: display status of item</span>
<a name="l4491"><span class="linenum">4491</span></a>  <span class="comment">     *</span>
<a name="l4492"><span class="linenum">4492</span></a>  <span class="comment">     * Statuses:</span>
<a name="l4493"><span class="linenum">4493</span></a>  <span class="comment">     * - published</span>
<a name="l4494"><span class="linenum">4494</span></a>  <span class="comment">     * - deprecated</span>
<a name="l4495"><span class="linenum">4495</span></a>  <span class="comment">     * - protected</span>
<a name="l4496"><span class="linenum">4496</span></a>  <span class="comment">     * - private</span>
<a name="l4497"><span class="linenum">4497</span></a>  <span class="comment">     * - draft</span>
<a name="l4498"><span class="linenum">4498</span></a>  <span class="comment">     *</span>
<a name="l4499"><span class="linenum">4499</span></a>  <span class="comment">     * @param array Params</span>
<a name="l4500"><span class="linenum">4500</span></a>  <span class="comment">     */</span>
<a name="l4501"><span class="linenum">4501</span></a>  	function <a class="function" onClick="logFunction('status')" href="../../../_functions/status.html" onMouseOver="funcPopup(event,'status')">status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4502"><span class="linenum">4502</span></a>      {
<a name="l4503"><span class="linenum">4503</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l4504"><span class="linenum">4504</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4505"><span class="linenum">4505</span></a>                  'before' =&gt; '',
<a name="l4506"><span class="linenum">4506</span></a>                  'after'  =&gt; '',
<a name="l4507"><span class="linenum">4507</span></a>                  'format' =&gt; 'htmlbody', // Output format, see {@link <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>()}
<a name="l4508"><span class="linenum">4508</span></a>                  'class'  =&gt; '',
<a name="l4509"><span class="linenum">4509</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4510"><span class="linenum">4510</span></a>  
<a name="l4511"><span class="linenum">4511</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4512"><span class="linenum">4512</span></a>      }
<a name="l4513"><span class="linenum">4513</span></a>  
<a name="l4514"><span class="linenum">4514</span></a>  
<a name="l4515"><span class="linenum">4515</span></a>      <span class="comment">/**</span>
<a name="l4516"><span class="linenum">4516</span></a>  <span class="comment">     * Get status of item in a formatted way, following a provided template</span>
<a name="l4517"><span class="linenum">4517</span></a>  <span class="comment">     *</span>
<a name="l4518"><span class="linenum">4518</span></a>  <span class="comment">     * There are 2 possible variables: </span>
<a name="l4519"><span class="linenum">4519</span></a>  <span class="comment">     * - $status$ = the raw status</span>
<a name="l4520"><span class="linenum">4520</span></a>  <span class="comment">     * - $status_title$ = the human readable text version of the status (translated to current language)</span>
<a name="l4521"><span class="linenum">4521</span></a>  <span class="comment">     *</span>
<a name="l4522"><span class="linenum">4522</span></a>  <span class="comment">     * @param array Params</span>
<a name="l4523"><span class="linenum">4523</span></a>  <span class="comment">     * @return string</span>
<a name="l4524"><span class="linenum">4524</span></a>  <span class="comment">     */</span>
<a name="l4525"><span class="linenum">4525</span></a>  	function <a class="function" onClick="logFunction('get_format_status')" href="../../../_functions/get_format_status.html" onMouseOver="funcPopup(event,'get_format_status')">get_format_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4526"><span class="linenum">4526</span></a>      {
<a name="l4527"><span class="linenum">4527</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4528"><span class="linenum">4528</span></a>                  'template' =&gt; '&lt;div class=&quot;evo_status evo_status_<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>$&quot;&gt;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>$&lt;/div&gt;',
<a name="l4529"><span class="linenum">4529</span></a>                  'format'   =&gt; 'htmlbody', // Output format, see {@link <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>()}
<a name="l4530"><span class="linenum">4530</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4531"><span class="linenum">4531</span></a>  
<a name="l4532"><span class="linenum">4532</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>$', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['template'] );
<a name="l4533"><span class="linenum">4533</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>$', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_status'), <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l4534"><span class="linenum">4534</span></a>      
<a name="l4535"><span class="linenum">4535</span></a>          return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l4536"><span class="linenum">4536</span></a>      }
<a name="l4537"><span class="linenum">4537</span></a>  
<a name="l4538"><span class="linenum">4538</span></a>  
<a name="l4539"><span class="linenum">4539</span></a>      <span class="comment">/**</span>
<a name="l4540"><span class="linenum">4540</span></a>  <span class="comment">     * Display status of item in a formatted way, following a provided template</span>
<a name="l4541"><span class="linenum">4541</span></a>  <span class="comment">     *</span>
<a name="l4542"><span class="linenum">4542</span></a>  <span class="comment">     * There are 2 possible variables: </span>
<a name="l4543"><span class="linenum">4543</span></a>  <span class="comment">     * - $status$ = the raw status</span>
<a name="l4544"><span class="linenum">4544</span></a>  <span class="comment">     * - $status_title$ = the human readable text version of the status (translated to current language)</span>
<a name="l4545"><span class="linenum">4545</span></a>  <span class="comment">     *</span>
<a name="l4546"><span class="linenum">4546</span></a>  <span class="comment">     * @param array Params</span>
<a name="l4547"><span class="linenum">4547</span></a>  <span class="comment">     */</span>
<a name="l4548"><span class="linenum">4548</span></a>  	function <a class="function" onClick="logFunction('format_status')" href="../../../_functions/format_status.html" onMouseOver="funcPopup(event,'format_status')">format_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4549"><span class="linenum">4549</span></a>      {
<a name="l4550"><span class="linenum">4550</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_format_status')" href="../../../_functions/get_format_status.html" onMouseOver="funcPopup(event,'get_format_status')">get_format_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4551"><span class="linenum">4551</span></a>      }
<a name="l4552"><span class="linenum">4552</span></a>  
<a name="l4553"><span class="linenum">4553</span></a>  
<a name="l4554"><span class="linenum">4554</span></a>      <span class="comment">/**</span>
<a name="l4555"><span class="linenum">4555</span></a>  <span class="comment">     * Output classes for the Item &lt;div&gt;</span>
<a name="l4556"><span class="linenum">4556</span></a>  <span class="comment">     */</span>
<a name="l4557"><span class="linenum">4557</span></a>  	function <a class="function" onClick="logFunction('div_classes')" href="../../../_functions/div_classes.html" onMouseOver="funcPopup(event,'div_classes')">div_classes</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = true )
<a name="l4558"><span class="linenum">4558</span></a>      {
<a name="l4559"><span class="linenum">4559</span></a>          global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>;
<a name="l4560"><span class="linenum">4560</span></a>  
<a name="l4561"><span class="linenum">4561</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l4562"><span class="linenum">4562</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4563"><span class="linenum">4563</span></a>                  'item_class'        =&gt; 'bPost',
<a name="l4564"><span class="linenum">4564</span></a>                  'item_type_class'   =&gt; 'bPost_ptyp',
<a name="l4565"><span class="linenum">4565</span></a>                  'item_status_class' =&gt; 'bPost',
<a name="l4566"><span class="linenum">4566</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4567"><span class="linenum">4567</span></a>  
<a name="l4568"><span class="linenum">4568</span></a>          <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a> = array( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['item_class'],
<a name="l4569"><span class="linenum">4569</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['item_type_class'].<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>,
<a name="l4570"><span class="linenum">4570</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['item_status_class'].<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>,
<a name="l4571"><span class="linenum">4571</span></a>              );
<a name="l4572"><span class="linenum">4572</span></a>  
<a name="l4573"><span class="linenum">4573</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' ', <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a> );
<a name="l4574"><span class="linenum">4574</span></a>  
<a name="l4575"><span class="linenum">4575</span></a>          if( ! <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> ) return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4576"><span class="linenum">4576</span></a>  
<a name="l4577"><span class="linenum">4577</span></a>          echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4578"><span class="linenum">4578</span></a>      }
<a name="l4579"><span class="linenum">4579</span></a>  
<a name="l4580"><span class="linenum">4580</span></a>  
<a name="l4581"><span class="linenum">4581</span></a>      <span class="comment">/**</span>
<a name="l4582"><span class="linenum">4582</span></a>  <span class="comment">     * Get raw status</span>
<a name="l4583"><span class="linenum">4583</span></a>  <span class="comment">     *</span>
<a name="l4584"><span class="linenum">4584</span></a>  <span class="comment">     * @return string Status</span>
<a name="l4585"><span class="linenum">4585</span></a>  <span class="comment">     */</span>
<a name="l4586"><span class="linenum">4586</span></a>  	function <a class="function" onClick="logFunction('get_status_raw')" href="../../../_functions/get_status_raw.html" onMouseOver="funcPopup(event,'get_status_raw')">get_status_raw</a>()
<a name="l4587"><span class="linenum">4587</span></a>      {
<a name="l4588"><span class="linenum">4588</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>;
<a name="l4589"><span class="linenum">4589</span></a>      }
<a name="l4590"><span class="linenum">4590</span></a>  
<a name="l4591"><span class="linenum">4591</span></a>  
<a name="l4592"><span class="linenum">4592</span></a>      <span class="comment">/**</span>
<a name="l4593"><span class="linenum">4593</span></a>  <span class="comment">     * Output raw status.</span>
<a name="l4594"><span class="linenum">4594</span></a>  <span class="comment">     */</span>
<a name="l4595"><span class="linenum">4595</span></a>  	function <a class="function" onClick="logFunction('status_raw')" href="../../../_functions/status_raw.html" onMouseOver="funcPopup(event,'status_raw')">status_raw</a>()
<a name="l4596"><span class="linenum">4596</span></a>      {
<a name="l4597"><span class="linenum">4597</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_status_raw')" href="../../../_functions/get_status_raw.html" onMouseOver="funcPopup(event,'get_status_raw')">get_status_raw</a>();
<a name="l4598"><span class="linenum">4598</span></a>      }
<a name="l4599"><span class="linenum">4599</span></a>  
<a name="l4600"><span class="linenum">4600</span></a>  
<a name="l4601"><span class="linenum">4601</span></a>      <span class="comment">/**</span>
<a name="l4602"><span class="linenum">4602</span></a>  <span class="comment">     * Template function: display extra status of item</span>
<a name="l4603"><span class="linenum">4603</span></a>  <span class="comment">     *</span>
<a name="l4604"><span class="linenum">4604</span></a>  <span class="comment">     * @param string</span>
<a name="l4605"><span class="linenum">4605</span></a>  <span class="comment">     * @param string</span>
<a name="l4606"><span class="linenum">4606</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l4607"><span class="linenum">4607</span></a>  <span class="comment">     */</span>
<a name="l4608"><span class="linenum">4608</span></a>  	function <a class="function" onClick="logFunction('extra_status')" href="../../../_functions/extra_status.html" onMouseOver="funcPopup(event,'extra_status')">extra_status</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l4609"><span class="linenum">4609</span></a>      {
<a name="l4610"><span class="linenum">4610</span></a>          if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'raw' )
<a name="l4611"><span class="linenum">4611</span></a>          {
<a name="l4612"><span class="linenum">4612</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_extra_status'), 'raw' );
<a name="l4613"><span class="linenum">4613</span></a>          }
<a name="l4614"><span class="linenum">4614</span></a>          elseif( <a class="var it1646" onMouseOver="hilite(1646)" onMouseOut="lolite()" onClick="logVariable('extra_status')" href="../../../_variables/extra_status.html">$extra_status</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_extra_status') )
<a name="l4615"><span class="linenum">4615</span></a>          {
<a name="l4616"><span class="linenum">4616</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1646" onMouseOver="hilite(1646)" onMouseOut="lolite()" onClick="logVariable('extra_status')" href="../../../_variables/extra_status.html">$extra_status</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l4617"><span class="linenum">4617</span></a>          }
<a name="l4618"><span class="linenum">4618</span></a>      }
<a name="l4619"><span class="linenum">4619</span></a>  
<a name="l4620"><span class="linenum">4620</span></a>  
<a name="l4621"><span class="linenum">4621</span></a>       <span class="comment">/**</span>
<a name="l4622"><span class="linenum">4622</span></a>  <span class="comment">     * Display tags for Item</span>
<a name="l4623"><span class="linenum">4623</span></a>  <span class="comment">     *</span>
<a name="l4624"><span class="linenum">4624</span></a>  <span class="comment">     * @param array of params</span>
<a name="l4625"><span class="linenum">4625</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l4626"><span class="linenum">4626</span></a>  <span class="comment">     */</span>
<a name="l4627"><span class="linenum">4627</span></a>  	function <a class="function" onClick="logFunction('tags')" href="../../../_functions/tags.html" onMouseOver="funcPopup(event,'tags')">tags</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4628"><span class="linenum">4628</span></a>      {
<a name="l4629"><span class="linenum">4629</span></a>          global <a class="var it926" onMouseOver="hilite(926)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l4630"><span class="linenum">4630</span></a>  
<a name="l4631"><span class="linenum">4631</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4632"><span class="linenum">4632</span></a>                  'before' =&gt;           '&lt;div&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Tags').': ',
<a name="l4633"><span class="linenum">4633</span></a>                  'after' =&gt;            '&lt;/div&gt;',
<a name="l4634"><span class="linenum">4634</span></a>                  'separator' =&gt;        ', ',
<a name="l4635"><span class="linenum">4635</span></a>                  'links' =&gt;            true,
<a name="l4636"><span class="linenum">4636</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4637"><span class="linenum">4637</span></a>  
<a name="l4638"><span class="linenum">4638</span></a>          <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tags')" href="../../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>();
<a name="l4639"><span class="linenum">4639</span></a>  
<a name="l4640"><span class="linenum">4640</span></a>          if( !empty( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> ) )
<a name="l4641"><span class="linenum">4641</span></a>          {
<a name="l4642"><span class="linenum">4642</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l4643"><span class="linenum">4643</span></a>  
<a name="l4644"><span class="linenum">4644</span></a>              if( <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../../_variables/links.html">$links</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['links'] )
<a name="l4645"><span class="linenum">4645</span></a>              {
<a name="l4646"><span class="linenum">4646</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l4647"><span class="linenum">4647</span></a>              }
<a name="l4648"><span class="linenum">4648</span></a>  
<a name="l4649"><span class="linenum">4649</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0;
<a name="l4650"><span class="linenum">4650</span></a>              foreach( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> as <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> )
<a name="l4651"><span class="linenum">4651</span></a>              {
<a name="l4652"><span class="linenum">4652</span></a>                  if( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ &gt; 0 )
<a name="l4653"><span class="linenum">4653</span></a>                  {
<a name="l4654"><span class="linenum">4654</span></a>                      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator'];
<a name="l4655"><span class="linenum">4655</span></a>                  }
<a name="l4656"><span class="linenum">4656</span></a>  
<a name="l4657"><span class="linenum">4657</span></a>                  if( <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../../_variables/links.html">$links</a> )
<a name="l4658"><span class="linenum">4658</span></a>                  {    // We want links
<a name="l4659"><span class="linenum">4659</span></a>                      echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_tag_link')" href="../../../_functions/get_tag_link.html" onMouseOver="funcPopup(event,'get_tag_link')">get_tag_link</a>( <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> );
<a name="l4660"><span class="linenum">4660</span></a>                  }
<a name="l4661"><span class="linenum">4661</span></a>                  else
<a name="l4662"><span class="linenum">4662</span></a>                  {
<a name="l4663"><span class="linenum">4663</span></a>                      echo <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>, NULL, <a class="var it926" onMouseOver="hilite(926)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a> );
<a name="l4664"><span class="linenum">4664</span></a>                  }
<a name="l4665"><span class="linenum">4665</span></a>              }
<a name="l4666"><span class="linenum">4666</span></a>  
<a name="l4667"><span class="linenum">4667</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l4668"><span class="linenum">4668</span></a>          }
<a name="l4669"><span class="linenum">4669</span></a>      }
<a name="l4670"><span class="linenum">4670</span></a>  
<a name="l4671"><span class="linenum">4671</span></a>  
<a name="l4672"><span class="linenum">4672</span></a>      <span class="comment">/**</span>
<a name="l4673"><span class="linenum">4673</span></a>  <span class="comment">     * Template function: Displays trackback autodiscovery information</span>
<a name="l4674"><span class="linenum">4674</span></a>  <span class="comment">     *</span>
<a name="l4675"><span class="linenum">4675</span></a>  <span class="comment">     * TODO: build into headers</span>
<a name="l4676"><span class="linenum">4676</span></a>  <span class="comment">     */</span>
<a name="l4677"><span class="linenum">4677</span></a>  	function <a class="function" onClick="logFunction('trackback_rdf')" href="../../../_functions/trackback_rdf.html" onMouseOver="funcPopup(event,'trackback_rdf')">trackback_rdf</a>()
<a name="l4678"><span class="linenum">4678</span></a>      {
<a name="l4679"><span class="linenum">4679</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l4680"><span class="linenum">4680</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_receive_pings')" href="../../../_functions/can_receive_pings.html" onMouseOver="funcPopup(event,'can_receive_pings')">can_receive_pings</a>() )
<a name="l4681"><span class="linenum">4681</span></a>          { // Trackbacks not allowed on this blog:
<a name="l4682"><span class="linenum">4682</span></a>              return;
<a name="l4683"><span class="linenum">4683</span></a>          }
<a name="l4684"><span class="linenum">4684</span></a>  
<a name="l4685"><span class="linenum">4685</span></a>          echo '&lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot; '.&quot;\n&quot;;
<a name="l4686"><span class="linenum">4686</span></a>          echo '  xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;'.&quot;\n&quot;;
<a name="l4687"><span class="linenum">4687</span></a>          echo '  xmlns:trackback=&quot;http://madskills.com/public/xml/rss/module/trackback/&quot;&gt;'.&quot;\n&quot;;
<a name="l4688"><span class="linenum">4688</span></a>          echo '&lt;rdf:Description'.&quot;\n&quot;;
<a name="l4689"><span class="linenum">4689</span></a>          echo '  rdf:about=&quot;';
<a name="l4690"><span class="linenum">4690</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('permanent_url')" href="../../../_functions/permanent_url.html" onMouseOver="funcPopup(event,'permanent_url')">permanent_url</a>( 'single' );
<a name="l4691"><span class="linenum">4691</span></a>          echo '&quot;'.&quot;\n&quot;;
<a name="l4692"><span class="linenum">4692</span></a>          echo '  dc:identifier=&quot;';
<a name="l4693"><span class="linenum">4693</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('permanent_url')" href="../../../_functions/permanent_url.html" onMouseOver="funcPopup(event,'permanent_url')">permanent_url</a>( 'single' );
<a name="l4694"><span class="linenum">4694</span></a>          echo '&quot;'.&quot;\n&quot;;
<a name="l4695"><span class="linenum">4695</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>( array(
<a name="l4696"><span class="linenum">4696</span></a>              'before'    =&gt; ' dc:title=&quot;',
<a name="l4697"><span class="linenum">4697</span></a>              'after'     =&gt; '&quot;'.&quot;\n&quot;,
<a name="l4698"><span class="linenum">4698</span></a>              'link_type' =&gt; 'none',
<a name="l4699"><span class="linenum">4699</span></a>              'format'    =&gt; 'xmlattr',
<a name="l4700"><span class="linenum">4700</span></a>              ) );
<a name="l4701"><span class="linenum">4701</span></a>          echo '  trackback:ping=&quot;';
<a name="l4702"><span class="linenum">4702</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('trackback_url')" href="../../../_functions/trackback_url.html" onMouseOver="funcPopup(event,'trackback_url')">trackback_url</a>();
<a name="l4703"><span class="linenum">4703</span></a>          echo '&quot; /&gt;'.&quot;\n&quot;;
<a name="l4704"><span class="linenum">4704</span></a>          echo '&lt;/rdf:RDF&gt;';
<a name="l4705"><span class="linenum">4705</span></a>      }
<a name="l4706"><span class="linenum">4706</span></a>  
<a name="l4707"><span class="linenum">4707</span></a>  
<a name="l4708"><span class="linenum">4708</span></a>      <span class="comment">/**</span>
<a name="l4709"><span class="linenum">4709</span></a>  <span class="comment">     * Template function: displays url to use to trackback this item</span>
<a name="l4710"><span class="linenum">4710</span></a>  <span class="comment">     */</span>
<a name="l4711"><span class="linenum">4711</span></a>  	function <a class="function" onClick="logFunction('trackback_url')" href="../../../_functions/trackback_url.html" onMouseOver="funcPopup(event,'trackback_url')">trackback_url</a>()
<a name="l4712"><span class="linenum">4712</span></a>      {
<a name="l4713"><span class="linenum">4713</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_trackback_url')" href="../../../_functions/get_trackback_url.html" onMouseOver="funcPopup(event,'get_trackback_url')">get_trackback_url</a>();
<a name="l4714"><span class="linenum">4714</span></a>      }
<a name="l4715"><span class="linenum">4715</span></a>  
<a name="l4716"><span class="linenum">4716</span></a>  
<a name="l4717"><span class="linenum">4717</span></a>      <span class="comment">/**</span>
<a name="l4718"><span class="linenum">4718</span></a>  <span class="comment">     * Template function: get url to use to trackback this item</span>
<a name="l4719"><span class="linenum">4719</span></a>  <span class="comment">     * @return string</span>
<a name="l4720"><span class="linenum">4720</span></a>  <span class="comment">     */</span>
<a name="l4721"><span class="linenum">4721</span></a>  	function <a class="function" onClick="logFunction('get_trackback_url')" href="../../../_functions/get_trackback_url.html" onMouseOver="funcPopup(event,'get_trackback_url')">get_trackback_url</a>()
<a name="l4722"><span class="linenum">4722</span></a>      {
<a name="l4723"><span class="linenum">4723</span></a>          global <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../_variables/htsrv_url.html">$htsrv_url</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l4724"><span class="linenum">4724</span></a>  
<a name="l4725"><span class="linenum">4725</span></a>  <span class="comment">        // fp&gt; TODO: get a clean (per blog) setting for this</span>
<a name="l4726"><span class="linenum">4726</span></a>  <span class="comment">        //    return $htsrv_url.'trackback.php/'.$this-&gt;ID;</span>
<a name="l4727"><span class="linenum">4727</span></a>  
<a name="l4728"><span class="linenum">4728</span></a>          return <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../_variables/htsrv_url.html">$htsrv_url</a>.'trackback.php?tb_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l4729"><span class="linenum">4729</span></a>      }
<a name="l4730"><span class="linenum">4730</span></a>  
<a name="l4731"><span class="linenum">4731</span></a>  
<a name="l4732"><span class="linenum">4732</span></a>      <span class="comment">/**</span>
<a name="l4733"><span class="linenum">4733</span></a>  <span class="comment">     * Get HTML code to display a flash audio player for playback of a</span>
<a name="l4734"><span class="linenum">4734</span></a>  <span class="comment">     * given URL.</span>
<a name="l4735"><span class="linenum">4735</span></a>  <span class="comment">     *</span>
<a name="l4736"><span class="linenum">4736</span></a>  <span class="comment">     * @param string The URL of a MP3 audio file.</span>
<a name="l4737"><span class="linenum">4737</span></a>  <span class="comment">     * @return string The HTML code.</span>
<a name="l4738"><span class="linenum">4738</span></a>  <span class="comment">     */</span>
<a name="l4739"><span class="linenum">4739</span></a>  	function <a class="function" onClick="logFunction('get_player')" href="../../../_functions/get_player.html" onMouseOver="funcPopup(event,'get_player')">get_player</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> )
<a name="l4740"><span class="linenum">4740</span></a>      {
<a name="l4741"><span class="linenum">4741</span></a>          global <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>;
<a name="l4742"><span class="linenum">4742</span></a>  
<a name="l4743"><span class="linenum">4743</span></a>          return '&lt;object classid=&quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; codebase=&quot;http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0&quot; width=&quot;200&quot; height=&quot;20&quot; id=&quot;dewplayer&quot; align=&quot;middle&quot;&gt;&lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&gt;&lt;param name=&quot;allowScriptAccess&quot; value=&quot;sameDomain&quot; /&gt;&lt;param name=&quot;movie&quot; value=&quot;'.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>.'swf/dewplayer.swf?mp3='.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&amp;amp;showtime=1&quot; /&gt;&lt;param name=&quot;quality&quot; value=&quot;high&quot; /&gt;&lt;param name=&quot;bgcolor&quot; value=&quot;&quot; /&gt;&lt;embed src=&quot;'.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>.'swf/dewplayer.swf?mp3='.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&amp;amp;showtime=1&quot; quality=&quot;high&quot; bgcolor=&quot;&quot; width=&quot;200&quot; height=&quot;20&quot; name=&quot;dewplayer&quot; wmode=&quot;transparent&quot; align=&quot;middle&quot; allowScriptAccess=&quot;sameDomain&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot;&gt;&lt;/embed&gt;&lt;/object&gt;';
<a name="l4744"><span class="linenum">4744</span></a>      }
<a name="l4745"><span class="linenum">4745</span></a>  
<a name="l4746"><span class="linenum">4746</span></a>  
<a name="l4747"><span class="linenum">4747</span></a>      <span class="comment">/**</span>
<a name="l4748"><span class="linenum">4748</span></a>  <span class="comment">     * Template function: Display link to item related url.</span>
<a name="l4749"><span class="linenum">4749</span></a>  <span class="comment">     *</span>
<a name="l4750"><span class="linenum">4750</span></a>  <span class="comment">     * By default the link is displayed as a link.</span>
<a name="l4751"><span class="linenum">4751</span></a>  <span class="comment">     * Optionally some smart stuff may happen.</span>
<a name="l4752"><span class="linenum">4752</span></a>  <span class="comment">     */</span>
<a name="l4753"><span class="linenum">4753</span></a>  	function <a class="function" onClick="logFunction('url_link')" href="../../../_functions/url_link.html" onMouseOver="funcPopup(event,'url_link')">url_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4754"><span class="linenum">4754</span></a>      {
<a name="l4755"><span class="linenum">4755</span></a>  
<a name="l4756"><span class="linenum">4756</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a> ) )
<a name="l4757"><span class="linenum">4757</span></a>          {
<a name="l4758"><span class="linenum">4758</span></a>              return;
<a name="l4759"><span class="linenum">4759</span></a>          }
<a name="l4760"><span class="linenum">4760</span></a>  
<a name="l4761"><span class="linenum">4761</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l4762"><span class="linenum">4762</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4763"><span class="linenum">4763</span></a>                  'before'        =&gt; ' ',
<a name="l4764"><span class="linenum">4764</span></a>                  'after'         =&gt; ' ',
<a name="l4765"><span class="linenum">4765</span></a>                  'text_template' =&gt; '<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>$',        // If evaluates to empty, nothing will be displayed (except player if podcast)
<a name="l4766"><span class="linenum">4766</span></a>                  'url_template'  =&gt; '<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>$',
<a name="l4767"><span class="linenum">4767</span></a>                  'target'        =&gt; '',
<a name="l4768"><span class="linenum">4768</span></a>                  'format'        =&gt; 'htmlbody',
<a name="l4769"><span class="linenum">4769</span></a>                  'podcast'       =&gt; '#',                        // handle as podcast. # means depending on post type
<a name="l4770"><span class="linenum">4770</span></a>                  'before_podplayer' =&gt; '&lt;div class=&quot;podplayer&quot;&gt;',
<a name="l4771"><span class="linenum">4771</span></a>                  'after_podplayer'  =&gt; '&lt;/div&gt;',
<a name="l4772"><span class="linenum">4772</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4773"><span class="linenum">4773</span></a>  
<a name="l4774"><span class="linenum">4774</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['podcast'] == '#' )
<a name="l4775"><span class="linenum">4775</span></a>          {    // Check if this post is a podcast
<a name="l4776"><span class="linenum">4776</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['podcast'] = ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a> == 2000 );
<a name="l4777"><span class="linenum">4777</span></a>          }
<a name="l4778"><span class="linenum">4778</span></a>  
<a name="l4779"><span class="linenum">4779</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['podcast'] &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] == 'htmlbody' )
<a name="l4780"><span class="linenum">4780</span></a>          {    // We want podcast display:
<a name="l4781"><span class="linenum">4781</span></a>  
<a name="l4782"><span class="linenum">4782</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_podplayer'];
<a name="l4783"><span class="linenum">4783</span></a>  
<a name="l4784"><span class="linenum">4784</span></a>              echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_player')" href="../../../_functions/get_player.html" onMouseOver="funcPopup(event,'get_player')">get_player</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a> );
<a name="l4785"><span class="linenum">4785</span></a>  
<a name="l4786"><span class="linenum">4786</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_podplayer'];
<a name="l4787"><span class="linenum">4787</span></a>  
<a name="l4788"><span class="linenum">4788</span></a>          }
<a name="l4789"><span class="linenum">4789</span></a>          else
<a name="l4790"><span class="linenum">4790</span></a>          { // Not displaying podcast player:
<a name="l4791"><span class="linenum">4791</span></a>  
<a name="l4792"><span class="linenum">4792</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>$', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text_template'] );
<a name="l4793"><span class="linenum">4793</span></a>              if( empty(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>) )
<a name="l4794"><span class="linenum">4794</span></a>              {    // Nothing to display
<a name="l4795"><span class="linenum">4795</span></a>                  return;
<a name="l4796"><span class="linenum">4796</span></a>              }
<a name="l4797"><span class="linenum">4797</span></a>  
<a name="l4798"><span class="linenum">4798</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l4799"><span class="linenum">4799</span></a>  
<a name="l4800"><span class="linenum">4800</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>$', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['url_template'] ).'&quot;';
<a name="l4801"><span class="linenum">4801</span></a>  
<a name="l4802"><span class="linenum">4802</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target'] ) )
<a name="l4803"><span class="linenum">4803</span></a>              {
<a name="l4804"><span class="linenum">4804</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' target=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target'].'&quot;';
<a name="l4805"><span class="linenum">4805</span></a>              }
<a name="l4806"><span class="linenum">4806</span></a>  
<a name="l4807"><span class="linenum">4807</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l4808"><span class="linenum">4808</span></a>  
<a name="l4809"><span class="linenum">4809</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l4810"><span class="linenum">4810</span></a>  
<a name="l4811"><span class="linenum">4811</span></a>              echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l4812"><span class="linenum">4812</span></a>          }
<a name="l4813"><span class="linenum">4813</span></a>      }
<a name="l4814"><span class="linenum">4814</span></a>  
<a name="l4815"><span class="linenum">4815</span></a>  
<a name="l4816"><span class="linenum">4816</span></a>      <span class="comment">/**</span>
<a name="l4817"><span class="linenum">4817</span></a>  <span class="comment">     * Template function: Display link to parent of this item.</span>
<a name="l4818"><span class="linenum">4818</span></a>  <span class="comment">     *</span>
<a name="l4819"><span class="linenum">4819</span></a>  <span class="comment">     * @param array</span>
<a name="l4820"><span class="linenum">4820</span></a>  <span class="comment">     */</span>
<a name="l4821"><span class="linenum">4821</span></a>  	function <a class="function" onClick="logFunction('parent_link')" href="../../../_functions/parent_link.html" onMouseOver="funcPopup(event,'parent_link')">parent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4822"><span class="linenum">4822</span></a>      {
<a name="l4823"><span class="linenum">4823</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_ID.html">parent_ID</a> ) )
<a name="l4824"><span class="linenum">4824</span></a>          {    // No parent
<a name="l4825"><span class="linenum">4825</span></a>              return;
<a name="l4826"><span class="linenum">4826</span></a>          }
<a name="l4827"><span class="linenum">4827</span></a>  
<a name="l4828"><span class="linenum">4828</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_parent' ) == 'never' )
<a name="l4829"><span class="linenum">4829</span></a>          {    // This item cannot has a parent item, because of item type settings
<a name="l4830"><span class="linenum">4830</span></a>              return;
<a name="l4831"><span class="linenum">4831</span></a>          }
<a name="l4832"><span class="linenum">4832</span></a>  
<a name="l4833"><span class="linenum">4833</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l4834"><span class="linenum">4834</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4835"><span class="linenum">4835</span></a>                  'before'         =&gt; '',
<a name="l4836"><span class="linenum">4836</span></a>                  'after'          =&gt; '',
<a name="l4837"><span class="linenum">4837</span></a>                  'not_found_text' =&gt; '',
<a name="l4838"><span class="linenum">4838</span></a>                  'format'         =&gt; 'htmlbody',
<a name="l4839"><span class="linenum">4839</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4840"><span class="linenum">4840</span></a>  
<a name="l4841"><span class="linenum">4841</span></a>  <span class="comment">        // Get parent Item:</span>
<a name="l4842"><span class="linenum">4842</span></a>          <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('parent_Item')" href="../../../_variables/parent_Item.html">$parent_Item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_parent_Item();
<a name="l4843"><span class="linenum">4843</span></a>  
<a name="l4844"><span class="linenum">4844</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l4845"><span class="linenum">4845</span></a>  
<a name="l4846"><span class="linenum">4846</span></a>          if( ! empty( <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('parent_Item')" href="../../../_variables/parent_Item.html">$parent_Item</a> ) )
<a name="l4847"><span class="linenum">4847</span></a>          {    // Display a parent post title as link to permanent url
<a name="l4848"><span class="linenum">4848</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('parent_Item')" href="../../../_variables/parent_Item.html">$parent_Item</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l4849"><span class="linenum">4849</span></a>          }
<a name="l4850"><span class="linenum">4850</span></a>          else
<a name="l4851"><span class="linenum">4851</span></a>          {    // No parent post found, Display a text to inform about this:
<a name="l4852"><span class="linenum">4852</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['not_found_text'];
<a name="l4853"><span class="linenum">4853</span></a>          }
<a name="l4854"><span class="linenum">4854</span></a>  
<a name="l4855"><span class="linenum">4855</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l4856"><span class="linenum">4856</span></a>  
<a name="l4857"><span class="linenum">4857</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l4858"><span class="linenum">4858</span></a>      }
<a name="l4859"><span class="linenum">4859</span></a>  
<a name="l4860"><span class="linenum">4860</span></a>  
<a name="l4861"><span class="linenum">4861</span></a>      <span class="comment">/**</span>
<a name="l4862"><span class="linenum">4862</span></a>  <span class="comment">     * Template function: Display the number of words in the post</span>
<a name="l4863"><span class="linenum">4863</span></a>  <span class="comment">     */</span>
<a name="l4864"><span class="linenum">4864</span></a>  	function <a class="function" onClick="logFunction('wordcount')" href="../../../_functions/wordcount.html" onMouseOver="funcPopup(event,'wordcount')">wordcount</a>()
<a name="l4865"><span class="linenum">4865</span></a>      {
<a name="l4866"><span class="linenum">4866</span></a>          echo (int)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('wordcount')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/wordcount.html">wordcount</a>; <span class="comment">// may have been saved as NULL until 1.9</span>
<a name="l4867"><span class="linenum">4867</span></a>      }
<a name="l4868"><span class="linenum">4868</span></a>  
<a name="l4869"><span class="linenum">4869</span></a>  
<a name="l4870"><span class="linenum">4870</span></a>      <span class="comment">/**</span>
<a name="l4871"><span class="linenum">4871</span></a>  <span class="comment">     * Template function: Display the number of times the Item has been viewed</span>
<a name="l4872"><span class="linenum">4872</span></a>  <span class="comment">     *</span>
<a name="l4873"><span class="linenum">4873</span></a>  <span class="comment">     * Note: viewcount is incremented whenever the Item's content is displayed with &quot;MORE&quot;</span>
<a name="l4874"><span class="linenum">4874</span></a>  <span class="comment">     * (i-e full content), see {@link Item::content()}.</span>
<a name="l4875"><span class="linenum">4875</span></a>  <span class="comment">     *</span>
<a name="l4876"><span class="linenum">4876</span></a>  <span class="comment">     * Viewcount is NOT incremented on page reloads and other special cases, see {@link Hit::is_new_view()}</span>
<a name="l4877"><span class="linenum">4877</span></a>  <span class="comment">     *</span>
<a name="l4878"><span class="linenum">4878</span></a>  <span class="comment">     * %d gets replaced in all params by the number of views.</span>
<a name="l4879"><span class="linenum">4879</span></a>  <span class="comment">     *</span>
<a name="l4880"><span class="linenum">4880</span></a>  <span class="comment">     * @deprecated Deprecated</span>
<a name="l4881"><span class="linenum">4881</span></a>  <span class="comment">     * @param string Link text to display when there are 0 views</span>
<a name="l4882"><span class="linenum">4882</span></a>  <span class="comment">     * @param string Link text to display when there is 1 views</span>
<a name="l4883"><span class="linenum">4883</span></a>  <span class="comment">     * @param string Link text to display when there are &gt;1 views</span>
<a name="l4884"><span class="linenum">4884</span></a>  <span class="comment">     * @return string The phrase about the number of views.</span>
<a name="l4885"><span class="linenum">4885</span></a>  <span class="comment">     */</span>
<a name="l4886"><span class="linenum">4886</span></a>  	function <a class="function" onClick="logFunction('get_views')" href="../../../_functions/get_views.html" onMouseOver="funcPopup(event,'get_views')">get_views</a>( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '#', <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = '#', <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = '#' )
<a name="l4887"><span class="linenum">4887</span></a>      {
<a name="l4888"><span class="linenum">4888</span></a>  <span class="comment">        // Deprecated feature, Display nothing:</span>
<a name="l4889"><span class="linenum">4889</span></a>          return '';
<a name="l4890"><span class="linenum">4890</span></a>      }
<a name="l4891"><span class="linenum">4891</span></a>  
<a name="l4892"><span class="linenum">4892</span></a>  
<a name="l4893"><span class="linenum">4893</span></a>      <span class="comment">/**</span>
<a name="l4894"><span class="linenum">4894</span></a>  <span class="comment">     * Template function: Display a phrase about the number of Item views.</span>
<a name="l4895"><span class="linenum">4895</span></a>  <span class="comment">     *</span>
<a name="l4896"><span class="linenum">4896</span></a>  <span class="comment">     * @deprecated Deprecated</span>
<a name="l4897"><span class="linenum">4897</span></a>  <span class="comment">     * @param string Link text to display when there are 0 views</span>
<a name="l4898"><span class="linenum">4898</span></a>  <span class="comment">     * @param string Link text to display when there is 1 views</span>
<a name="l4899"><span class="linenum">4899</span></a>  <span class="comment">     * @param string Link text to display when there are &gt;1 views (include %d for # of views)</span>
<a name="l4900"><span class="linenum">4900</span></a>  <span class="comment">     * @return integer Number of views.</span>
<a name="l4901"><span class="linenum">4901</span></a>  <span class="comment">     */</span>
<a name="l4902"><span class="linenum">4902</span></a>  	function <a class="function" onClick="logFunction('views')" href="../../../_functions/views.html" onMouseOver="funcPopup(event,'views')">views</a>( <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('zero')" href="../../../_variables/zero.html">$zero</a> = '#', <a class="var it1609" onMouseOver="hilite(1609)" onMouseOut="lolite()" onClick="logVariable('one')" href="../../../_variables/one.html">$one</a> = '#', <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('more')" href="../../../_variables/more.html">$more</a> = '#' )
<a name="l4903"><span class="linenum">4903</span></a>      {
<a name="l4904"><span class="linenum">4904</span></a>  <span class="comment">        // Deprecated feature, Display nothing:</span>
<a name="l4905"><span class="linenum">4905</span></a>          return 0;
<a name="l4906"><span class="linenum">4906</span></a>      }
<a name="l4907"><span class="linenum">4907</span></a>  
<a name="l4908"><span class="linenum">4908</span></a>  
<a name="l4909"><span class="linenum">4909</span></a>      <span class="comment">/**</span>
<a name="l4910"><span class="linenum">4910</span></a>  <span class="comment">     * Set param value</span>
<a name="l4911"><span class="linenum">4911</span></a>  <span class="comment">     *</span>
<a name="l4912"><span class="linenum">4912</span></a>  <span class="comment">     * By default, all values will be considered strings</span>
<a name="l4913"><span class="linenum">4913</span></a>  <span class="comment">     *</span>
<a name="l4914"><span class="linenum">4914</span></a>  <span class="comment">     * @todo extra_cat_IDs recording</span>
<a name="l4915"><span class="linenum">4915</span></a>  <span class="comment">     *</span>
<a name="l4916"><span class="linenum">4916</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l4917"><span class="linenum">4917</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l4918"><span class="linenum">4918</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l4919"><span class="linenum">4919</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l4920"><span class="linenum">4920</span></a>  <span class="comment">     */</span>
<a name="l4921"><span class="linenum">4921</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> = false )
<a name="l4922"><span class="linenum">4922</span></a>      {
<a name="l4923"><span class="linenum">4923</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l4924"><span class="linenum">4924</span></a>          {
<a name="l4925"><span class="linenum">4925</span></a>              case 'pst_ID':
<a name="l4926"><span class="linenum">4926</span></a>              case 'priority':
<a name="l4927"><span class="linenum">4927</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, true );
<a name="l4928"><span class="linenum">4928</span></a>  
<a name="l4929"><span class="linenum">4929</span></a>              case 'content':
<a name="l4930"><span class="linenum">4930</span></a>                  <a class="var it1651" onMouseOver="hilite(1651)" onMouseOut="lolite()" onClick="logVariable('r1')" href="../../../_variables/r1.html">$r1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'content', 'string', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l4931"><span class="linenum">4931</span></a>  <span class="comment">                // Update wordcount as well:</span>
<a name="l4932"><span class="linenum">4932</span></a>                  <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('r2')" href="../../../_variables/r2.html">$r2</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'wordcount', 'number', <a class="function" onClick="logFunction('bpost_count_words')" href="../../../_functions/bpost_count_words.html" onMouseOver="funcPopup(event,'bpost_count_words')">bpost_count_words</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>), false );
<a name="l4933"><span class="linenum">4933</span></a>                  return ( <a class="var it1651" onMouseOver="hilite(1651)" onMouseOut="lolite()" onClick="logVariable('r1')" href="../../../_variables/r1.html">$r1</a> || <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('r2')" href="../../../_variables/r2.html">$r2</a> ); <span class="comment">// return true if one changed</span>
<a name="l4934"><span class="linenum">4934</span></a>  
<a name="l4935"><span class="linenum">4935</span></a>              case 'wordcount':
<a name="l4936"><span class="linenum">4936</span></a>              case 'featured':
<a name="l4937"><span class="linenum">4937</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, false );
<a name="l4938"><span class="linenum">4938</span></a>  
<a name="l4939"><span class="linenum">4939</span></a>              case 'datedeadline':
<a name="l4940"><span class="linenum">4940</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'datedeadline', 'date', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, true );
<a name="l4941"><span class="linenum">4941</span></a>  
<a name="l4942"><span class="linenum">4942</span></a>              case 'order':
<a name="l4943"><span class="linenum">4943</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'order', 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, true );
<a name="l4944"><span class="linenum">4944</span></a>  
<a name="l4945"><span class="linenum">4945</span></a>              case 'renderers': // deprecated
<a name="l4946"><span class="linenum">4946</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> );
<a name="l4947"><span class="linenum">4947</span></a>  
<a name="l4948"><span class="linenum">4948</span></a>              case 'excerpt':
<a name="l4949"><span class="linenum">4949</span></a>                  if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt_autogenerated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt_autogenerated.html">excerpt_autogenerated</a> )
<a name="l4950"><span class="linenum">4950</span></a>                  {    // Check if the excerpt needs to keep getting autogenerated...
<a name="l4951"><span class="linenum">4951</span></a>                      <a class="var it1653" onMouseOver="hilite(1653)" onMouseOut="lolite()" onClick="logVariable('autovalue')" href="../../../_variables/autovalue.html">$autovalue</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_autogenerated_excerpt')" href="../../../_functions/get_autogenerated_excerpt.html" onMouseOver="funcPopup(event,'get_autogenerated_excerpt')">get_autogenerated_excerpt</a>();
<a name="l4952"><span class="linenum">4952</span></a>                      <a class="var it1654" onMouseOver="hilite(1654)" onMouseOut="lolite()" onClick="logVariable('post_excerpt_previous_md5')" href="../../../_variables/post_excerpt_previous_md5.html">$post_excerpt_previous_md5</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('post_excerpt_previous_md5', 'string');
<a name="l4953"><span class="linenum">4953</span></a>  <span class="comment">                    // TODO: this is itemform specific and should not be like that.</span>
<a name="l4954"><span class="linenum">4954</span></a>                      if( <a class="var it1654" onMouseOver="hilite(1654)" onMouseOut="lolite()" onClick="logVariable('post_excerpt_previous_md5')" href="../../../_variables/post_excerpt_previous_md5.html">$post_excerpt_previous_md5</a> == md5(<a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>) || empty(<a class="var it1654" onMouseOver="hilite(1654)" onMouseOut="lolite()" onClick="logVariable('post_excerpt_previous_md5')" href="../../../_variables/post_excerpt_previous_md5.html">$post_excerpt_previous_md5</a>) <span class="comment">/* empty in simple form */</span> )
<a name="l4955"><span class="linenum">4955</span></a>                      { // old value has not changed, it keeps getting autogenerated:
<a name="l4956"><span class="linenum">4956</span></a>                          <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> = <a class="var it1653" onMouseOver="hilite(1653)" onMouseOut="lolite()" onClick="logVariable('autovalue')" href="../../../_variables/autovalue.html">$autovalue</a>;
<a name="l4957"><span class="linenum">4957</span></a>                      }
<a name="l4958"><span class="linenum">4958</span></a>                  }
<a name="l4959"><span class="linenum">4959</span></a>  
<a name="l4960"><span class="linenum">4960</span></a>                  if( parent::<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'excerpt', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> ) )
<a name="l4961"><span class="linenum">4961</span></a>                  { // mark excerpt as not being autogenerated anymore, if user has changed it from the autogenerated value.
<a name="l4962"><span class="linenum">4962</span></a>                      if( isset(<a class="var it1653" onMouseOver="hilite(1653)" onMouseOut="lolite()" onClick="logVariable('autovalue')" href="../../../_variables/autovalue.html">$autovalue</a>) &amp;&amp; <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> != <a class="var it1653" onMouseOver="hilite(1653)" onMouseOut="lolite()" onClick="logVariable('autovalue')" href="../../../_variables/autovalue.html">$autovalue</a> )
<a name="l4963"><span class="linenum">4963</span></a>                      {
<a name="l4964"><span class="linenum">4964</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('excerpt_autogenerated', 0);
<a name="l4965"><span class="linenum">4965</span></a>                      }
<a name="l4966"><span class="linenum">4966</span></a>                  }
<a name="l4967"><span class="linenum">4967</span></a>                  break;
<a name="l4968"><span class="linenum">4968</span></a>  
<a name="l4969"><span class="linenum">4969</span></a>              default:
<a name="l4970"><span class="linenum">4970</span></a>                  return parent::<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l4971"><span class="linenum">4971</span></a>          }
<a name="l4972"><span class="linenum">4972</span></a>      }
<a name="l4973"><span class="linenum">4973</span></a>  
<a name="l4974"><span class="linenum">4974</span></a>  
<a name="l4975"><span class="linenum">4975</span></a>      <span class="comment">/**</span>
<a name="l4976"><span class="linenum">4976</span></a>  <span class="comment">     * Set the renderers of the Item.</span>
<a name="l4977"><span class="linenum">4977</span></a>  <span class="comment">     *</span>
<a name="l4978"><span class="linenum">4978</span></a>  <span class="comment">     * @param array List of renderer codes.</span>
<a name="l4979"><span class="linenum">4979</span></a>  <span class="comment">     * @return boolean true, if it has been set; false if it has not changed</span>
<a name="l4980"><span class="linenum">4980</span></a>  <span class="comment">     */</span>
<a name="l4981"><span class="linenum">4981</span></a>  	function <a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> )
<a name="l4982"><span class="linenum">4982</span></a>      {
<a name="l4983"><span class="linenum">4983</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'renderers', 'string', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '.', <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) );
<a name="l4984"><span class="linenum">4984</span></a>      }
<a name="l4985"><span class="linenum">4985</span></a>  
<a name="l4986"><span class="linenum">4986</span></a>  
<a name="l4987"><span class="linenum">4987</span></a>      <span class="comment">/**</span>
<a name="l4988"><span class="linenum">4988</span></a>  <span class="comment">     * Set the Author of the Item.</span>
<a name="l4989"><span class="linenum">4989</span></a>  <span class="comment">     *</span>
<a name="l4990"><span class="linenum">4990</span></a>  <span class="comment">     * @param User (Do NOT set to NULL or you may kill the current_User)</span>
<a name="l4991"><span class="linenum">4991</span></a>  <span class="comment">     * @return boolean true, if it has been set; false if it has not changed</span>
<a name="l4992"><span class="linenum">4992</span></a>  <span class="comment">     */</span>
<a name="l4993"><span class="linenum">4993</span></a>  	function <a class="function" onClick="logFunction('set_creator_User')" href="../../../_functions/set_creator_user.html" onMouseOver="funcPopup(event,'set_creator_user')">set_creator_User</a>( &amp; <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a> )
<a name="l4994"><span class="linenum">4994</span></a>      {
<a name="l4995"><span class="linenum">4995</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a> = &amp; <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>;
<a name="l4996"><span class="linenum">4996</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Author.html">Author</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>; <span class="comment">// deprecated  fp&gt; TODO: Test and see if this line can be put once and for all in the constructor</span>
<a name="l4997"><span class="linenum">4997</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_field.html">creator_field</a>, <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l4998"><span class="linenum">4998</span></a>      }
<a name="l4999"><span class="linenum">4999</span></a>  
<a name="l5000"><span class="linenum">5000</span></a>  
<a name="l5001"><span class="linenum">5001</span></a>      <span class="comment">/**</span>
<a name="l5002"><span class="linenum">5002</span></a>  <span class="comment">     * Set the Item location from the current user. Use to create a new post.</span>
<a name="l5003"><span class="linenum">5003</span></a>  <span class="comment">     *</span>
<a name="l5004"><span class="linenum">5004</span></a>  <span class="comment">     * @param string Location (country | region | subregion | city)</span>
<a name="l5005"><span class="linenum">5005</span></a>  <span class="comment">     */</span>
<a name="l5006"><span class="linenum">5006</span></a>  	function <a class="function" onClick="logFunction('set_creator_location')" href="../../../_functions/set_creator_location.html" onMouseOver="funcPopup(event,'set_creator_location')">set_creator_location</a>( <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a> )
<a name="l5007"><span class="linenum">5007</span></a>      {
<a name="l5008"><span class="linenum">5008</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l5009"><span class="linenum">5009</span></a>  
<a name="l5010"><span class="linenum">5010</span></a>          if( !isset( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a> ) )
<a name="l5011"><span class="linenum">5011</span></a>          {    // No logged in user
<a name="l5012"><span class="linenum">5012</span></a>              return;
<a name="l5013"><span class="linenum">5013</span></a>          }
<a name="l5014"><span class="linenum">5014</span></a>  
<a name="l5015"><span class="linenum">5015</span></a>          <a class="var it1655" onMouseOver="hilite(1655)" onMouseOut="lolite()" onClick="logVariable('locations')" href="../../../_variables/locations.html">$locations</a> = array(
<a name="l5016"><span class="linenum">5016</span></a>                  'country'   =&gt; 'ctry_ID',
<a name="l5017"><span class="linenum">5017</span></a>                  'region'    =&gt; 'rgn_ID',
<a name="l5018"><span class="linenum">5018</span></a>                  'subregion' =&gt; 'subrg_ID',
<a name="l5019"><span class="linenum">5019</span></a>                  'city'      =&gt; 'city_ID',
<a name="l5020"><span class="linenum">5020</span></a>              );
<a name="l5021"><span class="linenum">5021</span></a>  
<a name="l5022"><span class="linenum">5022</span></a>          <a class="var it1146" onMouseOver="hilite(1146)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../../_variables/field_ID.html">$field_ID</a> = <a class="var it1655" onMouseOver="hilite(1655)" onMouseOut="lolite()" onClick="logVariable('locations')" href="../../../_variables/locations.html">$locations</a>[<a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>];
<a name="l5023"><span class="linenum">5023</span></a>  
<a name="l5024"><span class="linenum">5024</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l5025"><span class="linenum">5025</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>.'_visible'}() )
<a name="l5026"><span class="linenum">5026</span></a>          {    // Location is visible
<a name="l5027"><span class="linenum">5027</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="var it1146" onMouseOver="hilite(1146)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../../_variables/field_ID.html">$field_ID</a> ) )
<a name="l5028"><span class="linenum">5028</span></a>              {    // Set default location
<a name="l5029"><span class="linenum">5029</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1146" onMouseOver="hilite(1146)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../../_variables/field_ID.html">$field_ID</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="var it1146" onMouseOver="hilite(1146)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../../_variables/field_ID.html">$field_ID</a> );
<a name="l5030"><span class="linenum">5030</span></a>              }
<a name="l5031"><span class="linenum">5031</span></a>          }
<a name="l5032"><span class="linenum">5032</span></a>      }
<a name="l5033"><span class="linenum">5033</span></a>  
<a name="l5034"><span class="linenum">5034</span></a>  
<a name="l5035"><span class="linenum">5035</span></a>      <span class="comment">/**</span>
<a name="l5036"><span class="linenum">5036</span></a>  <span class="comment">     * Create a new Item/Post and insert it into the DB</span>
<a name="l5037"><span class="linenum">5037</span></a>  <span class="comment">     *</span>
<a name="l5038"><span class="linenum">5038</span></a>  <span class="comment">     * This function has to handle all needed DB dependencies!</span>
<a name="l5039"><span class="linenum">5039</span></a>  <span class="comment">     *</span>
<a name="l5040"><span class="linenum">5040</span></a>  <span class="comment">     * @deprecated Use set() + dbinsert() instead</span>
<a name="l5041"><span class="linenum">5041</span></a>  <span class="comment">     */</span>
<a name="l5042"><span class="linenum">5042</span></a>  	function <a class="function" onClick="logFunction('insert')" href="../../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>(
<a name="l5043"><span class="linenum">5043</span></a>          <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a>,              // Author
<a name="l5044"><span class="linenum">5044</span></a>          <a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a>,
<a name="l5045"><span class="linenum">5045</span></a>          <a class="var it524" onMouseOver="hilite(524)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a>,
<a name="l5046"><span class="linenum">5046</span></a>          <a class="var it1656" onMouseOver="hilite(1656)" onMouseOut="lolite()" onClick="logVariable('post_timestamp')" href="../../../_variables/post_timestamp.html">$post_timestamp</a>,              // 'Y-m-d H:i:s'
<a name="l5047"><span class="linenum">5047</span></a>          <a class="var it361" onMouseOver="hilite(361)" onMouseOut="lolite()" onClick="logVariable('main_cat_ID')" href="../../../_variables/main_cat_ID.html">$main_cat_ID</a> = 1,             // Main cat ID
<a name="l5048"><span class="linenum">5048</span></a>          <a class="var it1460" onMouseOver="hilite(1460)" onMouseOut="lolite()" onClick="logVariable('extra_cat_IDs')" href="../../../_variables/extra_cat_IDs.html">$extra_cat_IDs</a> = array(),     // Table of extra cats
<a name="l5049"><span class="linenum">5049</span></a>          <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> = 'published',
<a name="l5050"><span class="linenum">5050</span></a>          <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../_variables/post_locale.html">$post_locale</a> = '#',
<a name="l5051"><span class="linenum">5051</span></a>          <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('post_urltitle')" href="../../../_variables/post_urltitle.html">$post_urltitle</a> = '',
<a name="l5052"><span class="linenum">5052</span></a>          <a class="var it330" onMouseOver="hilite(330)" onMouseOut="lolite()" onClick="logVariable('post_url')" href="../../../_variables/post_url.html">$post_url</a> = '',
<a name="l5053"><span class="linenum">5053</span></a>          <a class="var it335" onMouseOver="hilite(335)" onMouseOut="lolite()" onClick="logVariable('post_comment_status')" href="../../../_variables/post_comment_status.html">$post_comment_status</a> = 'open',
<a name="l5054"><span class="linenum">5054</span></a>          <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> = array('default'),
<a name="l5055"><span class="linenum">5055</span></a>          <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> = 1,
<a name="l5056"><span class="linenum">5056</span></a>          <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('item_st_ID')" href="../../../_variables/item_st_ID.html">$item_st_ID</a> = NULL,
<a name="l5057"><span class="linenum">5057</span></a>          <a class="var it1487" onMouseOver="hilite(1487)" onMouseOut="lolite()" onClick="logVariable('post_order')" href="../../../_variables/post_order.html">$post_order</a> = NULL )
<a name="l5058"><span class="linenum">5058</span></a>      {
<a name="l5059"><span class="linenum">5059</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>;
<a name="l5060"><span class="linenum">5060</span></a>          global <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a>;
<a name="l5061"><span class="linenum">5061</span></a>  
<a name="l5062"><span class="linenum">5062</span></a>          if( <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> == 1 )
<a name="l5063"><span class="linenum">5063</span></a>          { // Try to set default post type ID from blog setting
<a name="l5064"><span class="linenum">5064</span></a>              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l5065"><span class="linenum">5065</span></a>              if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it361" onMouseOver="hilite(361)" onMouseOut="lolite()" onClick="logVariable('main_cat_ID')" href="../../../_variables/main_cat_ID.html">$main_cat_ID</a>, false, false ) &amp;&amp;
<a name="l5066"><span class="linenum">5066</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;get_Blog() )
<a name="l5067"><span class="linenum">5067</span></a>              { // Use default post type what used for the blog
<a name="l5068"><span class="linenum">5068</span></a>                  <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'default_post_type' );
<a name="l5069"><span class="linenum">5069</span></a>              }
<a name="l5070"><span class="linenum">5070</span></a>          }
<a name="l5071"><span class="linenum">5071</span></a>  
<a name="l5072"><span class="linenum">5072</span></a>          if( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../_variables/post_locale.html">$post_locale</a> == '#' ) <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../_variables/post_locale.html">$post_locale</a> = <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a>;
<a name="l5073"><span class="linenum">5073</span></a>  
<a name="l5074"><span class="linenum">5074</span></a>  <span class="comment">        // echo 'INSERTING NEW POST ';</span>
<a name="l5075"><span class="linenum">5075</span></a>  
<a name="l5076"><span class="linenum">5076</span></a>          if( isset( <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> ) )    // DIRTY HACK
<a name="l5077"><span class="linenum">5077</span></a>          { // If not in install procedure...
<a name="l5078"><span class="linenum">5078</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_creator_User')" href="../../../_functions/set_creator_user.html" onMouseOver="funcPopup(event,'set_creator_user')">set_creator_User</a>( <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a> ) );
<a name="l5079"><span class="linenum">5079</span></a>          }
<a name="l5080"><span class="linenum">5080</span></a>          else
<a name="l5081"><span class="linenum">5081</span></a>          {
<a name="l5082"><span class="linenum">5082</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_field.html">creator_field</a>, <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a> );
<a name="l5083"><span class="linenum">5083</span></a>          }
<a name="l5084"><span class="linenum">5084</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lasteditor_field.html">lasteditor_field</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_field.html">creator_field</a>} );
<a name="l5085"><span class="linenum">5085</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a> );
<a name="l5086"><span class="linenum">5086</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'urltitle', <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('post_urltitle')" href="../../../_variables/post_urltitle.html">$post_urltitle</a> );
<a name="l5087"><span class="linenum">5087</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'content', <a class="var it524" onMouseOver="hilite(524)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> );
<a name="l5088"><span class="linenum">5088</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'datestart', <a class="var it1656" onMouseOver="hilite(1656)" onMouseOut="lolite()" onClick="logVariable('post_timestamp')" href="../../../_variables/post_timestamp.html">$post_timestamp</a> );
<a name="l5089"><span class="linenum">5089</span></a>  
<a name="l5090"><span class="linenum">5090</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'main_cat_ID', <a class="var it361" onMouseOver="hilite(361)" onMouseOut="lolite()" onClick="logVariable('main_cat_ID')" href="../../../_variables/main_cat_ID.html">$main_cat_ID</a> );
<a name="l5091"><span class="linenum">5091</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'extra_cat_IDs', <a class="var it1460" onMouseOver="hilite(1460)" onMouseOut="lolite()" onClick="logVariable('extra_cat_IDs')" href="../../../_variables/extra_cat_IDs.html">$extra_cat_IDs</a> );
<a name="l5092"><span class="linenum">5092</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> );
<a name="l5093"><span class="linenum">5093</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'locale', <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../_variables/post_locale.html">$post_locale</a> );
<a name="l5094"><span class="linenum">5094</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'url', <a class="var it330" onMouseOver="hilite(330)" onMouseOut="lolite()" onClick="logVariable('post_url')" href="../../../_variables/post_url.html">$post_url</a> );
<a name="l5095"><span class="linenum">5095</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'comment_status', <a class="var it335" onMouseOver="hilite(335)" onMouseOut="lolite()" onClick="logVariable('post_comment_status')" href="../../../_variables/post_comment_status.html">$post_comment_status</a> );
<a name="l5096"><span class="linenum">5096</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> );
<a name="l5097"><span class="linenum">5097</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'ityp_ID', <a class="var it320" onMouseOver="hilite(320)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../_variables/item_typ_ID.html">$item_typ_ID</a> );
<a name="l5098"><span class="linenum">5098</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'pst_ID', <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('item_st_ID')" href="../../../_variables/item_st_ID.html">$item_st_ID</a> );
<a name="l5099"><span class="linenum">5099</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'order', <a class="var it1487" onMouseOver="hilite(1487)" onMouseOut="lolite()" onClick="logVariable('post_order')" href="../../../_variables/post_order.html">$post_order</a> );
<a name="l5100"><span class="linenum">5100</span></a>  
<a name="l5101"><span class="linenum">5101</span></a>  <span class="comment">        // INSERT INTO DB:</span>
<a name="l5102"><span class="linenum">5102</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l5103"><span class="linenum">5103</span></a>  
<a name="l5104"><span class="linenum">5104</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l5105"><span class="linenum">5105</span></a>      }
<a name="l5106"><span class="linenum">5106</span></a>  
<a name="l5107"><span class="linenum">5107</span></a>  
<a name="l5108"><span class="linenum">5108</span></a>      <span class="comment">/**</span>
<a name="l5109"><span class="linenum">5109</span></a>  <span class="comment">     * Insert object into DB based on previously recorded changes</span>
<a name="l5110"><span class="linenum">5110</span></a>  <span class="comment">     *</span>
<a name="l5111"><span class="linenum">5111</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l5112"><span class="linenum">5112</span></a>  <span class="comment">     */</span>
<a name="l5113"><span class="linenum">5113</span></a>  	function <a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>()
<a name="l5114"><span class="linenum">5114</span></a>      {
<a name="l5115"><span class="linenum">5115</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l5116"><span class="linenum">5116</span></a>  
<a name="l5117"><span class="linenum">5117</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>( 'SERIALIZABLE' );
<a name="l5118"><span class="linenum">5118</span></a>  
<a name="l5119"><span class="linenum">5119</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'draft' )
<a name="l5120"><span class="linenum">5120</span></a>          {    // The post is getting published in some form, set the publish date so it doesn't get auto updated in the future:
<a name="l5121"><span class="linenum">5121</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'dateset', 1 );
<a name="l5122"><span class="linenum">5122</span></a>          }
<a name="l5123"><span class="linenum">5123</span></a>  
<a name="l5124"><span class="linenum">5124</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_ID.html">creator_user_ID</a>) )
<a name="l5125"><span class="linenum">5125</span></a>          { // No creator assigned yet, use current user:
<a name="l5126"><span class="linenum">5126</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_creator_User')" href="../../../_functions/set_creator_user.html" onMouseOver="funcPopup(event,'set_creator_user')">set_creator_User</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a> );
<a name="l5127"><span class="linenum">5127</span></a>          }
<a name="l5128"><span class="linenum">5128</span></a>  
<a name="l5129"><span class="linenum">5129</span></a>  <span class="comment">        // Create new slug with validated title</span>
<a name="l5130"><span class="linenum">5130</span></a>          <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l5131"><span class="linenum">5131</span></a>          <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="function" onClick="logFunction('urltitle_validate')" href="../../../_functions/urltitle_validate.html" onMouseOver="funcPopup(event,'urltitle_validate')">urltitle_validate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, false, <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'title', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'itm_ID', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbtablename.html">dbtablename</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a> ) );
<a name="l5132"><span class="linenum">5132</span></a>          <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l5133"><span class="linenum">5133</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'urltitle', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' ) );
<a name="l5134"><span class="linenum">5134</span></a>  
<a name="l5135"><span class="linenum">5135</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_renderers_from_Plugins')" href="../../../_functions/update_renderers_from_plugins.html" onMouseOver="funcPopup(event,'update_renderers_from_plugins')">update_renderers_from_Plugins</a>();
<a name="l5136"><span class="linenum">5136</span></a>  
<a name="l5137"><span class="linenum">5137</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_excerpt')" href="../../../_functions/update_excerpt.html" onMouseOver="funcPopup(event,'update_excerpt')">update_excerpt</a>();
<a name="l5138"><span class="linenum">5138</span></a>  
<a name="l5139"><span class="linenum">5139</span></a>          if( isset(<a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>) )
<a name="l5140"><span class="linenum">5140</span></a>          {    // Note: Plugins may not be available during maintenance, install or test cases
<a name="l5141"><span class="linenum">5141</span></a>  <span class="comment">            // TODO: allow a plugin to cancel update here (by returning false)?</span>
<a name="l5142"><span class="linenum">5142</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'PrependItemInsertTransact', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l5143"><span class="linenum">5143</span></a>          }
<a name="l5144"><span class="linenum">5144</span></a>  
<a name="l5145"><span class="linenum">5145</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_last_touched_ts')" href="../../../_functions/set_last_touched_ts.html" onMouseOver="funcPopup(event,'set_last_touched_ts')">set_last_touched_ts</a>();
<a name="l5146"><span class="linenum">5146</span></a>  
<a name="l5147"><span class="linenum">5147</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>; <span class="comment">// we'll save this for passing it to the plugin hook</span>
<a name="l5148"><span class="linenum">5148</span></a>  
<a name="l5149"><span class="linenum">5149</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() )
<a name="l5150"><span class="linenum">5150</span></a>          { // We could insert the item object..
<a name="l5151"><span class="linenum">5151</span></a>  
<a name="l5152"><span class="linenum">5152</span></a>  <span class="comment">            // Let's handle the extracats:</span>
<a name="l5153"><span class="linenum">5153</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_update_extracats')" href="../../../_functions/insert_update_extracats.html" onMouseOver="funcPopup(event,'insert_update_extracats')">insert_update_extracats</a>( 'insert' );
<a name="l5154"><span class="linenum">5154</span></a>  
<a name="l5155"><span class="linenum">5155</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l5156"><span class="linenum">5156</span></a>              { // Let's handle the tags:
<a name="l5157"><span class="linenum">5157</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_update_tags')" href="../../../_functions/insert_update_tags.html" onMouseOver="funcPopup(event,'insert_update_tags')">insert_update_tags</a>( 'insert' );
<a name="l5158"><span class="linenum">5158</span></a>              }
<a name="l5159"><span class="linenum">5159</span></a>  
<a name="l5160"><span class="linenum">5160</span></a>  <span class="comment">            // save Item settings</span>
<a name="l5161"><span class="linenum">5161</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a> ) &amp;&amp; isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;cache[0] ) )
<a name="l5162"><span class="linenum">5162</span></a>              {
<a name="l5163"><span class="linenum">5163</span></a>  <span class="comment">                // update item ID in the ItemSettings cache</span>
<a name="l5164"><span class="linenum">5164</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;cache[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;cache[0];
<a name="l5165"><span class="linenum">5165</span></a>                  unset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;cache[0] );
<a name="l5166"><span class="linenum">5166</span></a>  
<a name="l5167"><span class="linenum">5167</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l5168"><span class="linenum">5168</span></a>              }
<a name="l5169"><span class="linenum">5169</span></a>  
<a name="l5170"><span class="linenum">5170</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l5171"><span class="linenum">5171</span></a>              {
<a name="l5172"><span class="linenum">5172</span></a>                  <a class="function" onClick="logFunction('modules_call_method')" href="../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'update_item_after_insert', array( 'edited_Item' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l5173"><span class="linenum">5173</span></a>              }
<a name="l5174"><span class="linenum">5174</span></a>  
<a name="l5175"><span class="linenum">5175</span></a>  <span class="comment">            // Let's handle the slugs:</span>
<a name="l5176"><span class="linenum">5176</span></a>  <span class="comment">            // set slug item ID:</span>
<a name="l5177"><span class="linenum">5177</span></a>              <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5178"><span class="linenum">5178</span></a>  
<a name="l5179"><span class="linenum">5179</span></a>  <span class="comment">            // Create tiny slug:</span>
<a name="l5180"><span class="linenum">5180</span></a>              <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l5181"><span class="linenum">5181</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'slugs/model/_slug.funcs.php' );
<a name="l5182"><span class="linenum">5182</span></a>              <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> = <a class="function" onClick="logFunction('getnext_tinyurl')" href="../../../_functions/getnext_tinyurl.html" onMouseOver="funcPopup(event,'getnext_tinyurl')">getnext_tinyurl</a>();
<a name="l5183"><span class="linenum">5183</span></a>              <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> );
<a name="l5184"><span class="linenum">5184</span></a>              <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l5185"><span class="linenum">5185</span></a>              <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5186"><span class="linenum">5186</span></a>  
<a name="l5187"><span class="linenum">5187</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; ( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = ( <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() &amp;&amp; <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() ) ) )
<a name="l5188"><span class="linenum">5188</span></a>              {
<a name="l5189"><span class="linenum">5189</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'canonical_slug_ID', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5190"><span class="linenum">5190</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tiny_slug_ID', <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('new_tiny_Slug')" href="../../../_variables/new_tiny_Slug.html">$new_tiny_Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10955" onMouseOver="hilite(10955)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5191"><span class="linenum">5191</span></a>                  if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() )
<a name="l5192"><span class="linenum">5192</span></a>                  {
<a name="l5193"><span class="linenum">5193</span></a>                      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5194"><span class="linenum">5194</span></a>  
<a name="l5195"><span class="linenum">5195</span></a>  <span class="comment">                    // save the last tinyurl</span>
<a name="l5196"><span class="linenum">5196</span></a>                      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l5197"><span class="linenum">5197</span></a>                      <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tinyurl', <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> );
<a name="l5198"><span class="linenum">5198</span></a>                      <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l5199"><span class="linenum">5199</span></a>  
<a name="l5200"><span class="linenum">5200</span></a>                      if( isset(<a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>) )
<a name="l5201"><span class="linenum">5201</span></a>                      {    // Note: Plugins may not be available during maintenance, install or test cases
<a name="l5202"><span class="linenum">5202</span></a>                          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterItemInsert', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'dbchanges' =&gt; <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) );
<a name="l5203"><span class="linenum">5203</span></a>                      }
<a name="l5204"><span class="linenum">5204</span></a>                  }
<a name="l5205"><span class="linenum">5205</span></a>              }
<a name="l5206"><span class="linenum">5206</span></a>  
<a name="l5207"><span class="linenum">5207</span></a>  <span class="comment">            // Update last touched date of this Item and also all categories of this Item</span>
<a name="l5208"><span class="linenum">5208</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( false, false );
<a name="l5209"><span class="linenum">5209</span></a>          }
<a name="l5210"><span class="linenum">5210</span></a>  
<a name="l5211"><span class="linenum">5211</span></a>          if( ! <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l5212"><span class="linenum">5212</span></a>          { // Rollback current transaction
<a name="l5213"><span class="linenum">5213</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l5214"><span class="linenum">5214</span></a>          }
<a name="l5215"><span class="linenum">5215</span></a>  
<a name="l5216"><span class="linenum">5216</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l5217"><span class="linenum">5217</span></a>      }
<a name="l5218"><span class="linenum">5218</span></a>  
<a name="l5219"><span class="linenum">5219</span></a>  
<a name="l5220"><span class="linenum">5220</span></a>      <span class="comment">/**</span>
<a name="l5221"><span class="linenum">5221</span></a>  <span class="comment">     * Insert new item in test mode, Use this function only in test tool to create very much items at one time</span>
<a name="l5222"><span class="linenum">5222</span></a>  <span class="comment">     *</span>
<a name="l5223"><span class="linenum">5223</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l5224"><span class="linenum">5224</span></a>  <span class="comment">     */</span>
<a name="l5225"><span class="linenum">5225</span></a>  	function <a class="function" onClick="logFunction('dbinsert_test')" href="../../../_functions/dbinsert_test.html" onMouseOver="funcPopup(event,'dbinsert_test')">dbinsert_test</a>()
<a name="l5226"><span class="linenum">5226</span></a>      {
<a name="l5227"><span class="linenum">5227</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l5228"><span class="linenum">5228</span></a>  
<a name="l5229"><span class="linenum">5229</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'last_touched_ts', 'date', <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( 'Y-m-d H:i:s', <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) );
<a name="l5230"><span class="linenum">5230</span></a>  
<a name="l5231"><span class="linenum">5231</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>( 'SERIALIZABLE' );
<a name="l5232"><span class="linenum">5232</span></a>  
<a name="l5233"><span class="linenum">5233</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() )
<a name="l5234"><span class="linenum">5234</span></a>          { // We could insert the item object..
<a name="l5235"><span class="linenum">5235</span></a>  
<a name="l5236"><span class="linenum">5236</span></a>              if( ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> ) )
<a name="l5237"><span class="linenum">5237</span></a>              { // Insert new extracats:
<a name="l5238"><span class="linenum">5238</span></a>                  <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = 'INSERT INTO T_postcats ( postcat_post_ID, postcat_cat_ID ) VALUES ';
<a name="l5239"><span class="linenum">5239</span></a>                  foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> as <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('extra_cat_ID')" href="../../../_variables/extra_cat_ID.html">$extra_cat_ID</a> )
<a name="l5240"><span class="linenum">5240</span></a>                  {
<a name="l5241"><span class="linenum">5241</span></a>                      <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> .= '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', '.<a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('extra_cat_ID')" href="../../../_variables/extra_cat_ID.html">$extra_cat_ID</a>.' ),';
<a name="l5242"><span class="linenum">5242</span></a>                  }
<a name="l5243"><span class="linenum">5243</span></a>                  <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 0, strlen( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> ) - 1 );
<a name="l5244"><span class="linenum">5244</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 'insert new extracats' );
<a name="l5245"><span class="linenum">5245</span></a>              }
<a name="l5246"><span class="linenum">5246</span></a>  
<a name="l5247"><span class="linenum">5247</span></a>  <span class="comment">            // Create canonical slug with urltitle</span>
<a name="l5248"><span class="linenum">5248</span></a>              <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l5249"><span class="linenum">5249</span></a>              <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a> );
<a name="l5250"><span class="linenum">5250</span></a>              <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l5251"><span class="linenum">5251</span></a>              <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5252"><span class="linenum">5252</span></a>  
<a name="l5253"><span class="linenum">5253</span></a>  <span class="comment">            // Create tiny slug:</span>
<a name="l5254"><span class="linenum">5254</span></a>              <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l5255"><span class="linenum">5255</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'slugs/model/_slug.funcs.php' );
<a name="l5256"><span class="linenum">5256</span></a>              <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> = <a class="function" onClick="logFunction('getnext_tinyurl')" href="../../../_functions/getnext_tinyurl.html" onMouseOver="funcPopup(event,'getnext_tinyurl')">getnext_tinyurl</a>();
<a name="l5257"><span class="linenum">5257</span></a>              <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> );
<a name="l5258"><span class="linenum">5258</span></a>              <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l5259"><span class="linenum">5259</span></a>              <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5260"><span class="linenum">5260</span></a>  
<a name="l5261"><span class="linenum">5261</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = ( <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() &amp;&amp; <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() ) )
<a name="l5262"><span class="linenum">5262</span></a>              {
<a name="l5263"><span class="linenum">5263</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'canonical_slug_ID', <a class="var it1664" onMouseOver="hilite(1664)" onMouseOut="lolite()" onClick="logVariable('canonical_Slug')" href="../../../_variables/canonical_Slug.html">$canonical_Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10956" onMouseOver="hilite(10956)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5264"><span class="linenum">5264</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tiny_slug_ID', <a class="var it1665" onMouseOver="hilite(1665)" onMouseOut="lolite()" onClick="logVariable('tiny_Slug')" href="../../../_variables/tiny_Slug.html">$tiny_Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10957" onMouseOver="hilite(10957)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5265"><span class="linenum">5265</span></a>                  if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() )
<a name="l5266"><span class="linenum">5266</span></a>                  { // save the last tinyurl
<a name="l5267"><span class="linenum">5267</span></a>                      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l5268"><span class="linenum">5268</span></a>                      <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tinyurl', <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('tinyurl')" href="../../../_variables/tinyurl.html">$tinyurl</a> );
<a name="l5269"><span class="linenum">5269</span></a>                      <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l5270"><span class="linenum">5270</span></a>                  }
<a name="l5271"><span class="linenum">5271</span></a>              }
<a name="l5272"><span class="linenum">5272</span></a>          }
<a name="l5273"><span class="linenum">5273</span></a>  
<a name="l5274"><span class="linenum">5274</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l5275"><span class="linenum">5275</span></a>          { // The post and all related object was successfully created
<a name="l5276"><span class="linenum">5276</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5277"><span class="linenum">5277</span></a>          }
<a name="l5278"><span class="linenum">5278</span></a>          else
<a name="l5279"><span class="linenum">5279</span></a>          { // Some error occured the transaction needs to be rollbacked
<a name="l5280"><span class="linenum">5280</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l5281"><span class="linenum">5281</span></a>          }
<a name="l5282"><span class="linenum">5282</span></a>  
<a name="l5283"><span class="linenum">5283</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l5284"><span class="linenum">5284</span></a>      }
<a name="l5285"><span class="linenum">5285</span></a>  
<a name="l5286"><span class="linenum">5286</span></a>  
<a name="l5287"><span class="linenum">5287</span></a>      <span class="comment">/**</span>
<a name="l5288"><span class="linenum">5288</span></a>  <span class="comment">     * Update the DB based on previously recorded changes</span>
<a name="l5289"><span class="linenum">5289</span></a>  <span class="comment">     *</span>
<a name="l5290"><span class="linenum">5290</span></a>  <span class="comment">     * @param boolean do we want to auto track the mod date?</span>
<a name="l5291"><span class="linenum">5291</span></a>  <span class="comment">     * @param boolean Update slug? - We want to PREVENT updating slug when item dbupdate is called,</span>
<a name="l5292"><span class="linenum">5292</span></a>  <span class="comment">     *     because of the item canonical url title was changed on the slugs edit form, so slug update is already done.</span>
<a name="l5293"><span class="linenum">5293</span></a>  <span class="comment">     *  If slug update wasn't done already, then this param has to be true.</span>
<a name="l5294"><span class="linenum">5294</span></a>  <span class="comment">     * @param boolean Update excerpt? - We want to PREVENT updating exerpts when the item content wasn't changed ( e.g. only item canonical slug was changed )</span>
<a name="l5295"><span class="linenum">5295</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l5296"><span class="linenum">5296</span></a>  <span class="comment">     */</span>
<a name="l5297"><span class="linenum">5297</span></a>  	function <a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('auto_track_modification')" href="../../../_variables/auto_track_modification.html">$auto_track_modification</a> = true, <a class="var it1667" onMouseOver="hilite(1667)" onMouseOut="lolite()" onClick="logVariable('update_slug')" href="../../../_variables/update_slug.html">$update_slug</a> = true, <a class="var it1668" onMouseOver="hilite(1668)" onMouseOut="lolite()" onClick="logVariable('update_excerpt')" href="../../../_variables/update_excerpt.html">$update_excerpt</a> = true )
<a name="l5298"><span class="linenum">5298</span></a>      {
<a name="l5299"><span class="linenum">5299</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l5300"><span class="linenum">5300</span></a>  
<a name="l5301"><span class="linenum">5301</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>( 'SERIALIZABLE' );
<a name="l5302"><span class="linenum">5302</span></a>  
<a name="l5303"><span class="linenum">5303</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'draft' )
<a name="l5304"><span class="linenum">5304</span></a>          {    // The post is getting published in some form, set the publish date so it doesn't get auto updated in the future:
<a name="l5305"><span class="linenum">5305</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'dateset', 1 );
<a name="l5306"><span class="linenum">5306</span></a>          }
<a name="l5307"><span class="linenum">5307</span></a>  
<a name="l5308"><span class="linenum">5308</span></a>  <span class="comment">        // Check whether any db change has been executed</span>
<a name="l5309"><span class="linenum">5309</span></a>          <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = false;
<a name="l5310"><span class="linenum">5310</span></a>  
<a name="l5311"><span class="linenum">5311</span></a>  <span class="comment">        // save Item settings</span>
<a name="l5312"><span class="linenum">5312</span></a>          if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a> ) )
<a name="l5313"><span class="linenum">5313</span></a>          {
<a name="l5314"><span class="linenum">5314</span></a>              <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() || <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a>;
<a name="l5315"><span class="linenum">5315</span></a>          }
<a name="l5316"><span class="linenum">5316</span></a>  
<a name="l5317"><span class="linenum">5317</span></a>  <span class="comment">        // validate url title / slug</span>
<a name="l5318"><span class="linenum">5318</span></a>          if( <a class="var it1667" onMouseOver="hilite(1667)" onMouseOut="lolite()" onClick="logVariable('update_slug')" href="../../../_variables/update_slug.html">$update_slug</a> )
<a name="l5319"><span class="linenum">5319</span></a>          { // item canonical slug wasn't updated outside from this call, if it was changed or it wasn't set yet, we must update the slugs
<a name="l5320"><span class="linenum">5320</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a> ) || isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>['post_urltitle'] ) )
<a name="l5321"><span class="linenum">5321</span></a>              { // Url title has changed or is empty, we do need to update the slug:
<a name="l5322"><span class="linenum">5322</span></a>                  <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_slugs')" href="../../../_functions/update_slugs.html" onMouseOver="funcPopup(event,'update_slugs')">update_slugs</a>();
<a name="l5323"><span class="linenum">5323</span></a>                  <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = true;
<a name="l5324"><span class="linenum">5324</span></a>              }
<a name="l5325"><span class="linenum">5325</span></a>          }
<a name="l5326"><span class="linenum">5326</span></a>  
<a name="l5327"><span class="linenum">5327</span></a>          <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_renderers_from_Plugins')" href="../../../_functions/update_renderers_from_plugins.html" onMouseOver="funcPopup(event,'update_renderers_from_plugins')">update_renderers_from_Plugins</a>() || <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a>;
<a name="l5328"><span class="linenum">5328</span></a>  
<a name="l5329"><span class="linenum">5329</span></a>          if( <a class="var it1668" onMouseOver="hilite(1668)" onMouseOut="lolite()" onClick="logVariable('update_excerpt')" href="../../../_variables/update_excerpt.html">$update_excerpt</a> )
<a name="l5330"><span class="linenum">5330</span></a>          { // We want to update the excerpt:
<a name="l5331"><span class="linenum">5331</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> ) || ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt_autogenerated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt_autogenerated.html">excerpt_autogenerated</a> &amp;&amp; isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>['post_content'] ) ) )
<a name="l5332"><span class="linenum">5332</span></a>              { // Item excerpt is empty or the content was changed and the excerpt is autogenerated:
<a name="l5333"><span class="linenum">5333</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_excerpt')" href="../../../_functions/update_excerpt.html" onMouseOver="funcPopup(event,'update_excerpt')">update_excerpt</a>();
<a name="l5334"><span class="linenum">5334</span></a>                  <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = true;
<a name="l5335"><span class="linenum">5335</span></a>              }
<a name="l5336"><span class="linenum">5336</span></a>          }
<a name="l5337"><span class="linenum">5337</span></a>  
<a name="l5338"><span class="linenum">5338</span></a>  <span class="comment">        // TODO: dh&gt; allow a plugin to cancel update here (by returning false)?</span>
<a name="l5339"><span class="linenum">5339</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'PrependItemUpdateTransact', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l5340"><span class="linenum">5340</span></a>  
<a name="l5341"><span class="linenum">5341</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>; <span class="comment">// we'll save this for passing it to the plugin hook</span>
<a name="l5342"><span class="linenum">5342</span></a>  
<a name="l5343"><span class="linenum">5343</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = true;
<a name="l5344"><span class="linenum">5344</span></a>  <span class="comment">        // fp&gt; note that dbchanges isn't actually 100% accurate. At this time it does include variables that actually haven't changed.</span>
<a name="l5345"><span class="linenum">5345</span></a>          if( isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>['post_status'])
<a name="l5346"><span class="linenum">5346</span></a>              || isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>['post_title'])
<a name="l5347"><span class="linenum">5347</span></a>              || isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>['post_content']) )
<a name="l5348"><span class="linenum">5348</span></a>          { // One of the fields we track in the revision history has changed:
<a name="l5349"><span class="linenum">5349</span></a>  <span class="comment">            // Save the &quot;current&quot; (soon to be &quot;old&quot;) data as a version before overwriting it in parent::dbupdate:</span>
<a name="l5350"><span class="linenum">5350</span></a>  <span class="comment">            // fp&gt; TODO: actually, only the fields that have been changed should be copied to the version, the other should be left as NULL</span>
<a name="l5351"><span class="linenum">5351</span></a>  
<a name="l5352"><span class="linenum">5352</span></a>  <span class="comment">            // Get next version ID</span>
<a name="l5353"><span class="linenum">5353</span></a>              <a class="var it1671" onMouseOver="hilite(1671)" onMouseOut="lolite()" onClick="logVariable('iver_SQL')" href="../../../_variables/iver_SQL.html">$iver_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l5354"><span class="linenum">5354</span></a>              <a class="var it1671" onMouseOver="hilite(1671)" onMouseOut="lolite()" onClick="logVariable('iver_SQL')" href="../../../_variables/iver_SQL.html">$iver_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('MAX')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>( iver_ID )' );
<a name="l5355"><span class="linenum">5355</span></a>              <a class="var it1671" onMouseOver="hilite(1671)" onMouseOut="lolite()" onClick="logVariable('iver_SQL')" href="../../../_variables/iver_SQL.html">$iver_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__version' );
<a name="l5356"><span class="linenum">5356</span></a>              <a class="var it1671" onMouseOver="hilite(1671)" onMouseOut="lolite()" onClick="logVariable('iver_SQL')" href="../../../_variables/iver_SQL.html">$iver_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'iver_itm_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5357"><span class="linenum">5357</span></a>              <a class="var it1672" onMouseOver="hilite(1672)" onMouseOut="lolite()" onClick="logVariable('iver_ID')" href="../../../_variables/iver_ID.html">$iver_ID</a> = (int)<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it1671" onMouseOver="hilite(1671)" onMouseOut="lolite()" onClick="logVariable('iver_SQL')" href="../../../_variables/iver_SQL.html">$iver_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) + 1;
<a name="l5358"><span class="linenum">5358</span></a>  
<a name="l5359"><span class="linenum">5359</span></a>              <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'INSERT INTO T_items__version( iver_ID, iver_itm_ID, iver_edit_user_ID, iver_edit_datetime, iver_status, iver_title, iver_content )
<a name="l5360"><span class="linenum">5360</span></a>                  SELECT &quot;'.<a class="var it1672" onMouseOver="hilite(1672)" onMouseOut="lolite()" onClick="logVariable('iver_ID')" href="../../../_variables/iver_ID.html">$iver_ID</a>.'&quot; AS iver_ID, post_ID, post_lastedit_user_ID, post_datemodified, post_status, post_title, post_content
<a name="l5361"><span class="linenum">5361</span></a>                      FROM T_items__item
<a name="l5362"><span class="linenum">5362</span></a>                   WHERE post_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l5363"><span class="linenum">5363</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, 'Save a version of the Item' ) !== false;
<a name="l5364"><span class="linenum">5364</span></a>              <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = true;
<a name="l5365"><span class="linenum">5365</span></a>          }
<a name="l5366"><span class="linenum">5366</span></a>  
<a name="l5367"><span class="linenum">5367</span></a>          if( <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('auto_track_modification')" href="../../../_variables/auto_track_modification.html">$auto_track_modification</a> &amp;&amp; ( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) &gt; 0 ) &amp;&amp; ( !isset( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a>['last_touched_ts'] ) ) )
<a name="l5368"><span class="linenum">5368</span></a>          { // Update last_touched_ts field only if it wasn't updated yet and the datemodified will be updated for sure.
<a name="l5369"><span class="linenum">5369</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_last_touched_ts')" href="../../../_functions/set_last_touched_ts.html" onMouseOver="funcPopup(event,'set_last_touched_ts')">set_last_touched_ts</a>();
<a name="l5370"><span class="linenum">5370</span></a>          }
<a name="l5371"><span class="linenum">5371</span></a>  
<a name="l5372"><span class="linenum">5372</span></a>          <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('parent_update')" href="../../../_variables/parent_update.html">$parent_update</a> = parent::<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('auto_track_modification')" href="../../../_variables/auto_track_modification.html">$auto_track_modification</a> );
<a name="l5373"><span class="linenum">5373</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; ( <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('parent_update')" href="../../../_variables/parent_update.html">$parent_update</a> !== false ) )
<a name="l5374"><span class="linenum">5374</span></a>          { // We could update the item object:
<a name="l5375"><span class="linenum">5375</span></a>              <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> || ( <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('parent_update')" href="../../../_variables/parent_update.html">$parent_update</a> !== NULL );
<a name="l5376"><span class="linenum">5376</span></a>  
<a name="l5377"><span class="linenum">5377</span></a>              if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges_flags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges_flags.html">dbchanges_flags</a>['extra_cat_IDs'] ) )
<a name="l5378"><span class="linenum">5378</span></a>              { // Let's handle the extracats:
<a name="l5379"><span class="linenum">5379</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_update_extracats')" href="../../../_functions/insert_update_extracats.html" onMouseOver="funcPopup(event,'insert_update_extracats')">insert_update_extracats</a>( 'update' );
<a name="l5380"><span class="linenum">5380</span></a>                  <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = true;
<a name="l5381"><span class="linenum">5381</span></a>              }
<a name="l5382"><span class="linenum">5382</span></a>  
<a name="l5383"><span class="linenum">5383</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges_flags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges_flags.html">dbchanges_flags</a>['tags'] ) )
<a name="l5384"><span class="linenum">5384</span></a>              { // Let's handle the tags:
<a name="l5385"><span class="linenum">5385</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('insert_update_tags')" href="../../../_functions/insert_update_tags.html" onMouseOver="funcPopup(event,'insert_update_tags')">insert_update_tags</a>( 'update' );
<a name="l5386"><span class="linenum">5386</span></a>                  <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = true;
<a name="l5387"><span class="linenum">5387</span></a>              }
<a name="l5388"><span class="linenum">5388</span></a>  
<a name="l5389"><span class="linenum">5389</span></a>  <span class="comment">            // Let's handle the slugs:</span>
<a name="l5390"><span class="linenum">5390</span></a>  <span class="comment">            // TODO: dh&gt; $result handling here feels wrong: when it's true already, it should not become false (add &quot;|| $result&quot;?)</span>
<a name="l5391"><span class="linenum">5391</span></a>  <span class="comment">            // asimo&gt;dh The result handling is in a transaction. If somehow the new slug creation fails, then the item insertion should rollback as well</span>
<a name="l5392"><span class="linenum">5392</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; !empty( <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a> ) )
<a name="l5393"><span class="linenum">5393</span></a>              { // if we have new created <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>, we have to insert it into the database:
<a name="l5394"><span class="linenum">5394</span></a>                  foreach( <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a> as <a class="var it1674" onMouseOver="hilite(1674)" onMouseOut="lolite()" onClick="logVariable('edited_Slug')" href="../../../_variables/edited_Slug.html">$edited_Slug</a> )
<a name="l5395"><span class="linenum">5395</span></a>                  {
<a name="l5396"><span class="linenum">5396</span></a>                      if( <a class="var it1674" onMouseOver="hilite(1674)" onMouseOut="lolite()" onClick="logVariable('edited_Slug')" href="../../../_variables/edited_Slug.html">$edited_Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10958" onMouseOver="hilite(10958)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == 0 )
<a name="l5397"><span class="linenum">5397</span></a>                      { // Insert only new created slugs
<a name="l5398"><span class="linenum">5398</span></a>                          <a class="var it1674" onMouseOver="hilite(1674)" onMouseOut="lolite()" onClick="logVariable('edited_Slug')" href="../../../_variables/edited_Slug.html">$edited_Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l5399"><span class="linenum">5399</span></a>                      }
<a name="l5400"><span class="linenum">5400</span></a>                  }
<a name="l5401"><span class="linenum">5401</span></a>                  if( isset( <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[0] ) &amp;&amp; <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[0]-&gt;ID &gt; 0 )
<a name="l5402"><span class="linenum">5402</span></a>                  { // Make first slug from list as main slug for this item
<a name="l5403"><span class="linenum">5403</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'canonical_slug_ID', <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[0]-&gt;ID );
<a name="l5404"><span class="linenum">5404</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'urltitle', <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[0]-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' ) );
<a name="l5405"><span class="linenum">5405</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l5406"><span class="linenum">5406</span></a>                  }
<a name="l5407"><span class="linenum">5407</span></a>              }
<a name="l5408"><span class="linenum">5408</span></a>  
<a name="l5409"><span class="linenum">5409</span></a>  <span class="comment">            // Update last touched date of this Item and also all categories of this Item</span>
<a name="l5410"><span class="linenum">5410</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( false, false );
<a name="l5411"><span class="linenum">5411</span></a>          }
<a name="l5412"><span class="linenum">5412</span></a>  
<a name="l5413"><span class="linenum">5413</span></a>  <span class="comment">        // Check if there were failed nested transaction</span>
<a name="l5414"><span class="linenum">5414</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &amp;&amp; ( ! <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('has_failed_transaction')" href="../../../_functions/has_failed_transaction.html" onMouseOver="funcPopup(event,'has_failed_transaction')">has_failed_transaction</a>() );
<a name="l5415"><span class="linenum">5415</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> === false )
<a name="l5416"><span class="linenum">5416</span></a>          { // Update failed
<a name="l5417"><span class="linenum">5417</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l5418"><span class="linenum">5418</span></a>              <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> = false;
<a name="l5419"><span class="linenum">5419</span></a>          }
<a name="l5420"><span class="linenum">5420</span></a>          else
<a name="l5421"><span class="linenum">5421</span></a>          { // Update was successful
<a name="l5422"><span class="linenum">5422</span></a>              if( <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> )
<a name="l5423"><span class="linenum">5423</span></a>              { // There were some db modification, delete prerendered content
<a name="l5424"><span class="linenum">5424</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_prerendered_content')" href="../../../_functions/delete_prerendered_content.html" onMouseOver="funcPopup(event,'delete_prerendered_content')">delete_prerendered_content</a>();
<a name="l5425"><span class="linenum">5425</span></a>              }
<a name="l5426"><span class="linenum">5426</span></a>  
<a name="l5427"><span class="linenum">5427</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5428"><span class="linenum">5428</span></a>  
<a name="l5429"><span class="linenum">5429</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterItemUpdate', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'dbchanges' =&gt; <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) );
<a name="l5430"><span class="linenum">5430</span></a>          }
<a name="l5431"><span class="linenum">5431</span></a>  
<a name="l5432"><span class="linenum">5432</span></a>          if( <a class="var it1669" onMouseOver="hilite(1669)" onMouseOut="lolite()" onClick="logVariable('db_changed')" href="../../../_variables/db_changed.html">$db_changed</a> )
<a name="l5433"><span class="linenum">5433</span></a>          { // There were db modificaitons, needs cache invalidation
<a name="l5434"><span class="linenum">5434</span></a>  <span class="comment">            // Load the blog we're in:</span>
<a name="l5435"><span class="linenum">5435</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l5436"><span class="linenum">5436</span></a>  
<a name="l5437"><span class="linenum">5437</span></a>  <span class="comment">            // BLOCK CACHE INVALIDATION:</span>
<a name="l5438"><span class="linenum">5438</span></a>              <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'cont_coll_ID', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ); <span class="comment">// Content has changed</span>
<a name="l5439"><span class="linenum">5439</span></a>  
<a name="l5440"><span class="linenum">5440</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_featured')" href="../../../_functions/is_featured.html" onMouseOver="funcPopup(event,'is_featured')">is_featured</a>() )
<a name="l5441"><span class="linenum">5441</span></a>              { // Content of intro or featured post has changed
<a name="l5442"><span class="linenum">5442</span></a>                  <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'intro_feat_coll_ID', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5443"><span class="linenum">5443</span></a>              }
<a name="l5444"><span class="linenum">5444</span></a>          }
<a name="l5445"><span class="linenum">5445</span></a>  
<a name="l5446"><span class="linenum">5446</span></a>  <span class="comment">        // set_coll_ID // Settings have not changed</span>
<a name="l5447"><span class="linenum">5447</span></a>  
<a name="l5448"><span class="linenum">5448</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l5449"><span class="linenum">5449</span></a>      }
<a name="l5450"><span class="linenum">5450</span></a>  
<a name="l5451"><span class="linenum">5451</span></a>  
<a name="l5452"><span class="linenum">5452</span></a>      <span class="comment">/**</span>
<a name="l5453"><span class="linenum">5453</span></a>  <span class="comment">     * Create new slugs with validated title</span>
<a name="l5454"><span class="linenum">5454</span></a>  <span class="comment">     * !!!private!!! This function should be called only from Item dbupdate() function</span>
<a name="l5455"><span class="linenum">5455</span></a>  <span class="comment">     * @private</span>
<a name="l5456"><span class="linenum">5456</span></a>  <span class="comment">     * @return array Slug objects</span>
<a name="l5457"><span class="linenum">5457</span></a>  <span class="comment">     */</span>
<a name="l5458"><span class="linenum">5458</span></a>  	function <a class="function" onClick="logFunction('update_slugs')" href="../../../_functions/update_slugs.html" onMouseOver="funcPopup(event,'update_slugs')">update_slugs</a>( <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> = NULL )
<a name="l5459"><span class="linenum">5459</span></a>      {
<a name="l5460"><span class="linenum">5460</span></a>          if( ! isset( <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> ) )
<a name="l5461"><span class="linenum">5461</span></a>          {
<a name="l5462"><span class="linenum">5462</span></a>              <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a>;
<a name="l5463"><span class="linenum">5463</span></a>          }
<a name="l5464"><span class="linenum">5464</span></a>  
<a name="l5465"><span class="linenum">5465</span></a>  <span class="comment">        // Split slugs by comma</span>
<a name="l5466"><span class="linenum">5466</span></a>          <a class="var it1675" onMouseOver="hilite(1675)" onMouseOut="lolite()" onClick="logVariable('urltitles')" href="../../../_variables/urltitles.html">$urltitles</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> );
<a name="l5467"><span class="linenum">5467</span></a>  
<a name="l5468"><span class="linenum">5468</span></a>          <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a> = array();
<a name="l5469"><span class="linenum">5469</span></a>          foreach( <a class="var it1675" onMouseOver="hilite(1675)" onMouseOut="lolite()" onClick="logVariable('urltitles')" href="../../../_variables/urltitles.html">$urltitles</a> as <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> )
<a name="l5470"><span class="linenum">5470</span></a>          {
<a name="l5471"><span class="linenum">5471</span></a>              <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a> );
<a name="l5472"><span class="linenum">5472</span></a>  
<a name="l5473"><span class="linenum">5473</span></a>  <span class="comment">            // create new slug</span>
<a name="l5474"><span class="linenum">5474</span></a>              <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l5475"><span class="linenum">5475</span></a>  <span class="comment">            // urltitle_validate may modify the urltitle !!!</span>
<a name="l5476"><span class="linenum">5476</span></a>              <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="function" onClick="logFunction('urltitle_validate')" href="../../../_functions/urltitle_validate.html" onMouseOver="funcPopup(event,'urltitle_validate')">urltitle_validate</a>( <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, false, <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'title', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'itm_ID', <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10954" onMouseOver="hilite(10954)" onMouseOut="lolite()" href="../../../_variables/dbtablename.html">dbtablename</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a> ) );
<a name="l5477"><span class="linenum">5477</span></a>              <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l5478"><span class="linenum">5478</span></a>              <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5479"><span class="linenum">5479</span></a>  
<a name="l5480"><span class="linenum">5480</span></a>  <span class="comment">            // Check if this slug was already used by this item or not.</span>
<a name="l5481"><span class="linenum">5481</span></a>  <span class="comment">            // We need this check, because urltitle_validate() function will modify an existing urltitle only if it belongs to a different object</span>
<a name="l5482"><span class="linenum">5482</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('SlugCache')" href="../../../_variables/SlugCache.html">$SlugCache</a> = &amp; get_SlugCache();
<a name="l5483"><span class="linenum">5483</span></a>              <a class="var it1676" onMouseOver="hilite(1676)" onMouseOut="lolite()" onClick="logVariable('prev_Slug')" href="../../../_variables/prev_Slug.html">$prev_Slug</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('SlugCache')" href="../../../_variables/SlugCache.html">$SlugCache</a>-&gt;get_by_name( <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title'), false, false );
<a name="l5484"><span class="linenum">5484</span></a>              if( <a class="var it1676" onMouseOver="hilite(1676)" onMouseOut="lolite()" onClick="logVariable('prev_Slug')" href="../../../_variables/prev_Slug.html">$prev_Slug</a> )
<a name="l5485"><span class="linenum">5485</span></a>              { // A slug with this title already exists. It must belong to the same item!
<a name="l5486"><span class="linenum">5486</span></a>                  if( <a class="var it1676" onMouseOver="hilite(1676)" onMouseOut="lolite()" onClick="logVariable('prev_Slug')" href="../../../_variables/prev_Slug.html">$prev_Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('itm_ID') == <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('itm_ID') )
<a name="l5487"><span class="linenum">5487</span></a>                  {
<a name="l5488"><span class="linenum">5488</span></a>                      <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[] = <a class="var it1676" onMouseOver="hilite(1676)" onMouseOut="lolite()" onClick="logVariable('prev_Slug')" href="../../../_variables/prev_Slug.html">$prev_Slug</a>;
<a name="l5489"><span class="linenum">5489</span></a>                      continue;
<a name="l5490"><span class="linenum">5490</span></a>                  }
<a name="l5491"><span class="linenum">5491</span></a>                  else
<a name="l5492"><span class="linenum">5492</span></a>                  { // This case should never happen, because urltitle validate check this case. It is only an extra check.
<a name="l5493"><span class="linenum">5493</span></a>                      <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>('The slugs table is broken');
<a name="l5494"><span class="linenum">5494</span></a>                  }
<a name="l5495"><span class="linenum">5495</span></a>              }
<a name="l5496"><span class="linenum">5496</span></a>              else
<a name="l5497"><span class="linenum">5497</span></a>              { // No slug with such urltitle in DB, we can add this new one
<a name="l5498"><span class="linenum">5498</span></a>                  <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>[] = <a class="var it1658" onMouseOver="hilite(1658)" onMouseOut="lolite()" onClick="logVariable('new_Slug')" href="../../../_variables/new_Slug.html">$new_Slug</a>;
<a name="l5499"><span class="linenum">5499</span></a>              }
<a name="l5500"><span class="linenum">5500</span></a>          }
<a name="l5501"><span class="linenum">5501</span></a>  
<a name="l5502"><span class="linenum">5502</span></a>          return <a class="var it1670" onMouseOver="hilite(1670)" onMouseOut="lolite()" onClick="logVariable('edited_slugs')" href="../../../_variables/edited_slugs.html">$edited_slugs</a>;
<a name="l5503"><span class="linenum">5503</span></a>      }
<a name="l5504"><span class="linenum">5504</span></a>  
<a name="l5505"><span class="linenum">5505</span></a>  
<a name="l5506"><span class="linenum">5506</span></a>      <span class="comment">/**</span>
<a name="l5507"><span class="linenum">5507</span></a>  <span class="comment">     * Trigger event AfterItemDelete after calling parent method.</span>
<a name="l5508"><span class="linenum">5508</span></a>  <span class="comment">     *</span>
<a name="l5509"><span class="linenum">5509</span></a>  <span class="comment">     * @todo fp&gt; delete related stuff: comments, cats, file links...</span>
<a name="l5510"><span class="linenum">5510</span></a>  <span class="comment">     *</span>
<a name="l5511"><span class="linenum">5511</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l5512"><span class="linenum">5512</span></a>  <span class="comment">     */</span>
<a name="l5513"><span class="linenum">5513</span></a>  	function <a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>()
<a name="l5514"><span class="linenum">5514</span></a>      {
<a name="l5515"><span class="linenum">5515</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l5516"><span class="linenum">5516</span></a>  
<a name="l5517"><span class="linenum">5517</span></a>  <span class="comment">        // remember ID, because parent method resets it to 0</span>
<a name="l5518"><span class="linenum">5518</span></a>          <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('old_ID')" href="../../../_variables/old_ID.html">$old_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l5519"><span class="linenum">5519</span></a>  
<a name="l5520"><span class="linenum">5520</span></a>  <span class="comment">        // Load the blog</span>
<a name="l5521"><span class="linenum">5521</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l5522"><span class="linenum">5522</span></a>  
<a name="l5523"><span class="linenum">5523</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l5524"><span class="linenum">5524</span></a>  
<a name="l5525"><span class="linenum">5525</span></a>          if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = parent::<a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>() )
<a name="l5526"><span class="linenum">5526</span></a>          {
<a name="l5527"><span class="linenum">5527</span></a>  <span class="comment">            // re-set the ID for the Plugin event &amp; for a deleting of the prerendered content</span>
<a name="l5528"><span class="linenum">5528</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('old_ID')" href="../../../_variables/old_ID.html">$old_ID</a>;
<a name="l5529"><span class="linenum">5529</span></a>  
<a name="l5530"><span class="linenum">5530</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5531"><span class="linenum">5531</span></a>  
<a name="l5532"><span class="linenum">5532</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterItemDelete', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l5533"><span class="linenum">5533</span></a>  
<a name="l5534"><span class="linenum">5534</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = 0;
<a name="l5535"><span class="linenum">5535</span></a>  
<a name="l5536"><span class="linenum">5536</span></a>  <span class="comment">            // BLOCK CACHE INVALIDATION:</span>
<a name="l5537"><span class="linenum">5537</span></a>              <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'cont_coll_ID', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ); <span class="comment">// Content has changed</span>
<a name="l5538"><span class="linenum">5538</span></a>  
<a name="l5539"><span class="linenum">5539</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_featured')" href="../../../_functions/is_featured.html" onMouseOver="funcPopup(event,'is_featured')">is_featured</a>() )
<a name="l5540"><span class="linenum">5540</span></a>              { // Content of intro or featured post has changed
<a name="l5541"><span class="linenum">5541</span></a>                  <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'intro_feat_coll_ID', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5542"><span class="linenum">5542</span></a>              }
<a name="l5543"><span class="linenum">5543</span></a>  
<a name="l5544"><span class="linenum">5544</span></a>  <span class="comment">            // set_coll_ID // Settings have not changed</span>
<a name="l5545"><span class="linenum">5545</span></a>          }
<a name="l5546"><span class="linenum">5546</span></a>          else
<a name="l5547"><span class="linenum">5547</span></a>          {
<a name="l5548"><span class="linenum">5548</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l5549"><span class="linenum">5549</span></a>          }
<a name="l5550"><span class="linenum">5550</span></a>  
<a name="l5551"><span class="linenum">5551</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l5552"><span class="linenum">5552</span></a>      }
<a name="l5553"><span class="linenum">5553</span></a>  
<a name="l5554"><span class="linenum">5554</span></a>  
<a name="l5555"><span class="linenum">5555</span></a>      <span class="comment">/**</span>
<a name="l5556"><span class="linenum">5556</span></a>  <span class="comment">     * Quick and dirty &quot;excerpts should not stay empty&quot;.</span>
<a name="l5557"><span class="linenum">5557</span></a>  <span class="comment">     *</span>
<a name="l5558"><span class="linenum">5558</span></a>  <span class="comment">     * @todo have a maxlength param for excerpts in blog properties</span>
<a name="l5559"><span class="linenum">5559</span></a>  <span class="comment">     * @todo crop at word boundary, maybe even sentence boundary.</span>
<a name="l5560"><span class="linenum">5560</span></a>  <span class="comment">     *       This should get added to strmaxlen probably.</span>
<a name="l5561"><span class="linenum">5561</span></a>  <span class="comment">     *</span>
<a name="l5562"><span class="linenum">5562</span></a>  <span class="comment">     * @param int Maximum length</span>
<a name="l5563"><span class="linenum">5563</span></a>  <span class="comment">     * @param string Tail to use, when string gets cropped. Its length gets</span>
<a name="l5564"><span class="linenum">5564</span></a>  <span class="comment">     *               substracted from the total length (with HTML entities</span>
<a name="l5565"><span class="linenum">5565</span></a>  <span class="comment">     *               being decoded). Default is &quot;&amp;hellip;&quot; (HTML entity)</span>
<a name="l5566"><span class="linenum">5566</span></a>  <span class="comment">     * @return boolean true if excerpt has been changed</span>
<a name="l5567"><span class="linenum">5567</span></a>  <span class="comment">     */</span>
<a name="l5568"><span class="linenum">5568</span></a>  	function <a class="function" onClick="logFunction('update_excerpt')" href="../../../_functions/update_excerpt.html" onMouseOver="funcPopup(event,'update_excerpt')">update_excerpt</a>( <a class="var it1678" onMouseOver="hilite(1678)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a> = 254, <a class="var it1679" onMouseOver="hilite(1679)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> = '&amp;hellip;' )
<a name="l5569"><span class="linenum">5569</span></a>      {
<a name="l5570"><span class="linenum">5570</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt_autogenerated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt_autogenerated.html">excerpt_autogenerated</a> )
<a name="l5571"><span class="linenum">5571</span></a>          {    // We want to regenerate the excerpt from the content:
<a name="l5572"><span class="linenum">5572</span></a>              <a class="var it1463" onMouseOver="hilite(1463)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_autogenerated_excerpt')" href="../../../_functions/get_autogenerated_excerpt.html" onMouseOver="funcPopup(event,'get_autogenerated_excerpt')">get_autogenerated_excerpt</a>( <a class="var it1678" onMouseOver="hilite(1678)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a>, <a class="var it1679" onMouseOver="hilite(1679)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> );
<a name="l5573"><span class="linenum">5573</span></a>  
<a name="l5574"><span class="linenum">5574</span></a>              if( !empty(<a class="var it1463" onMouseOver="hilite(1463)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>) )
<a name="l5575"><span class="linenum">5575</span></a>              {    // We have something to act as an excerpt...
<a name="l5576"><span class="linenum">5576</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'excerpt', <a class="var it1463" onMouseOver="hilite(1463)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a> );
<a name="l5577"><span class="linenum">5577</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'excerpt_autogenerated', 1 );
<a name="l5578"><span class="linenum">5578</span></a>                  return true;
<a name="l5579"><span class="linenum">5579</span></a>              }
<a name="l5580"><span class="linenum">5580</span></a>          }
<a name="l5581"><span class="linenum">5581</span></a>  
<a name="l5582"><span class="linenum">5582</span></a>          return false;
<a name="l5583"><span class="linenum">5583</span></a>      }
<a name="l5584"><span class="linenum">5584</span></a>  
<a name="l5585"><span class="linenum">5585</span></a>  
<a name="l5586"><span class="linenum">5586</span></a>      <span class="comment">/**</span>
<a name="l5587"><span class="linenum">5587</span></a>  <span class="comment">     * Get autogenerated excerpt, derived from {@link Item::$content}.</span>
<a name="l5588"><span class="linenum">5588</span></a>  <span class="comment">     *</span>
<a name="l5589"><span class="linenum">5589</span></a>  <span class="comment">     * @param int Maximum length</span>
<a name="l5590"><span class="linenum">5590</span></a>  <span class="comment">     * @param string Tail to use, when string gets cropped. Its length gets</span>
<a name="l5591"><span class="linenum">5591</span></a>  <span class="comment">     *               substracted from the total length (with HTML entities</span>
<a name="l5592"><span class="linenum">5592</span></a>  <span class="comment">     *               being decoded). Default is &quot;&amp;hellip;&quot; (HTML entity)</span>
<a name="l5593"><span class="linenum">5593</span></a>  <span class="comment">     * @return string</span>
<a name="l5594"><span class="linenum">5594</span></a>  <span class="comment">     */</span>
<a name="l5595"><span class="linenum">5595</span></a>  	function <a class="function" onClick="logFunction('get_autogenerated_excerpt')" href="../../../_functions/get_autogenerated_excerpt.html" onMouseOver="funcPopup(event,'get_autogenerated_excerpt')">get_autogenerated_excerpt</a>( <a class="var it1678" onMouseOver="hilite(1678)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a> = 254, <a class="var it1679" onMouseOver="hilite(1679)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> = '&amp;hellip;' )
<a name="l5596"><span class="linenum">5596</span></a>      {
<a name="l5597"><span class="linenum">5597</span></a>  <span class="comment">        // Autogenerated excerpts should NEVER show anything after [teaserbreak] or after [pagebreak]</span>
<a name="l5598"><span class="linenum">5598</span></a>          <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content_parts')" href="../../../_functions/get_content_parts.html" onMouseOver="funcPopup(event,'get_content_parts')">get_content_parts</a>( array( 'disppage' =&gt; 1 ) );
<a name="l5599"><span class="linenum">5599</span></a>          <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>( <a class="var it1555" onMouseOver="hilite(1555)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> );
<a name="l5600"><span class="linenum">5600</span></a>  
<a name="l5601"><span class="linenum">5601</span></a>  <span class="comment">        // Remove inline images from excerpt // [image:123:caption:.class] [file:123:caption:.class] [inline:123:.class]</span>
<a name="l5602"><span class="linenum">5602</span></a>          <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/\[(image|file|inline):\d+:?[^\]]*\]/i', '', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l5603"><span class="linenum">5603</span></a>  
<a name="l5604"><span class="linenum">5604</span></a>          return <a class="function" onClick="logFunction('excerpt')" href="../../../_functions/excerpt.html" onMouseOver="funcPopup(event,'excerpt')">excerpt</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it1678" onMouseOver="hilite(1678)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a>, <a class="var it1679" onMouseOver="hilite(1679)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> );
<a name="l5605"><span class="linenum">5605</span></a>      }
<a name="l5606"><span class="linenum">5606</span></a>  
<a name="l5607"><span class="linenum">5607</span></a>  
<a name="l5608"><span class="linenum">5608</span></a>      <span class="comment">/**</span>
<a name="l5609"><span class="linenum">5609</span></a>  <span class="comment">     * Insert/Update post extracats</span>
<a name="l5610"><span class="linenum">5610</span></a>  <span class="comment">     *</span>
<a name="l5611"><span class="linenum">5611</span></a>  <span class="comment">     * @param string 'insert' | 'update'</span>
<a name="l5612"><span class="linenum">5612</span></a>  <span class="comment">     * @return boolean true on success | false one failure</span>
<a name="l5613"><span class="linenum">5613</span></a>  <span class="comment">     */</span>
<a name="l5614"><span class="linenum">5614</span></a>  	function <a class="function" onClick="logFunction('insert_update_extracats')" href="../../../_functions/insert_update_extracats.html" onMouseOver="funcPopup(event,'insert_update_extracats')">insert_update_extracats</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> )
<a name="l5615"><span class="linenum">5615</span></a>      {
<a name="l5616"><span class="linenum">5616</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l5617"><span class="linenum">5617</span></a>  
<a name="l5618"><span class="linenum">5618</span></a>          if( ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> ) )
<a name="l5619"><span class="linenum">5619</span></a>          { // Okay the extra cats are defined:
<a name="l5620"><span class="linenum">5620</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>( 'SERIALIZABLE' );
<a name="l5621"><span class="linenum">5621</span></a>  
<a name="l5622"><span class="linenum">5622</span></a>              <a class="var it1680" onMouseOver="hilite(1680)" onMouseOut="lolite()" onClick="logVariable('meta_count')" href="../../../_variables/meta_count.html">$meta_count</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( cat_ID ) FROM T_categories WHERE cat_meta = 1 AND cat_ID IN ('.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> ).')' );
<a name="l5623"><span class="linenum">5623</span></a>              if( <a class="var it1680" onMouseOver="hilite(1680)" onMouseOut="lolite()" onClick="logVariable('meta_count')" href="../../../_variables/meta_count.html">$meta_count</a> &gt; 0 )
<a name="l5624"><span class="linenum">5624</span></a>              {
<a name="l5625"><span class="linenum">5625</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l5626"><span class="linenum">5626</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Could not set the selected categories!'), 'error' );
<a name="l5627"><span class="linenum">5627</span></a>                  return false;
<a name="l5628"><span class="linenum">5628</span></a>              }
<a name="l5629"><span class="linenum">5629</span></a>              if( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'update' )
<a name="l5630"><span class="linenum">5630</span></a>              {
<a name="l5631"><span class="linenum">5631</span></a>  <span class="comment">                // delete previous extracats:</span>
<a name="l5632"><span class="linenum">5632</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_postcats WHERE postcat_post_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, 'delete previous extracats' );
<a name="l5633"><span class="linenum">5633</span></a>              }
<a name="l5634"><span class="linenum">5634</span></a>  
<a name="l5635"><span class="linenum">5635</span></a>  <span class="comment">            // insert new extracats:</span>
<a name="l5636"><span class="linenum">5636</span></a>              <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = &quot;INSERT INTO T_postcats( postcat_post_ID, postcat_cat_ID ) VALUES &quot;;
<a name="l5637"><span class="linenum">5637</span></a>              foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> as <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('extra_cat_ID')" href="../../../_variables/extra_cat_ID.html">$extra_cat_ID</a> )
<a name="l5638"><span class="linenum">5638</span></a>              {
<a name="l5639"><span class="linenum">5639</span></a>  <span class="comment">                //echo &quot;extracat: $extracat_ID &lt;br /&gt;&quot;;</span>
<a name="l5640"><span class="linenum">5640</span></a>                  <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> .= &quot;( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('extra_cat_ID')" href="../../../_variables/extra_cat_ID.html">$extra_cat_ID</a> ),&quot;;
<a name="l5641"><span class="linenum">5641</span></a>              }
<a name="l5642"><span class="linenum">5642</span></a>              <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 0, strlen( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> ) - 1 );
<a name="l5643"><span class="linenum">5643</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 'insert new extracats' );
<a name="l5644"><span class="linenum">5644</span></a>  
<a name="l5645"><span class="linenum">5645</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5646"><span class="linenum">5646</span></a>          }
<a name="l5647"><span class="linenum">5647</span></a>  
<a name="l5648"><span class="linenum">5648</span></a>          return true;
<a name="l5649"><span class="linenum">5649</span></a>      }
<a name="l5650"><span class="linenum">5650</span></a>  
<a name="l5651"><span class="linenum">5651</span></a>  
<a name="l5652"><span class="linenum">5652</span></a>      <span class="comment">/**</span>
<a name="l5653"><span class="linenum">5653</span></a>  <span class="comment">     * Save tags to DB</span>
<a name="l5654"><span class="linenum">5654</span></a>  <span class="comment">     *</span>
<a name="l5655"><span class="linenum">5655</span></a>  <span class="comment">     * @param string 'insert' | 'update'</span>
<a name="l5656"><span class="linenum">5656</span></a>  <span class="comment">     */</span>
<a name="l5657"><span class="linenum">5657</span></a>  	function <a class="function" onClick="logFunction('insert_update_tags')" href="../../../_functions/insert_update_tags.html" onMouseOver="funcPopup(event,'insert_update_tags')">insert_update_tags</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> )
<a name="l5658"><span class="linenum">5658</span></a>      {
<a name="l5659"><span class="linenum">5659</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l5660"><span class="linenum">5660</span></a>  
<a name="l5661"><span class="linenum">5661</span></a>          if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> ) )
<a name="l5662"><span class="linenum">5662</span></a>          { // Okay the tags are defined:
<a name="l5663"><span class="linenum">5663</span></a>  
<a name="l5664"><span class="linenum">5664</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l5665"><span class="linenum">5665</span></a>  
<a name="l5666"><span class="linenum">5666</span></a>              if( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'update' )
<a name="l5667"><span class="linenum">5667</span></a>              {    // delete previous tag associations:
<a name="l5668"><span class="linenum">5668</span></a>  <span class="comment">                // Note: actual tags never get deleted</span>
<a name="l5669"><span class="linenum">5669</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_items__itemtag
<a name="l5670"><span class="linenum">5670</span></a>                                              WHERE itag_itm_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, 'delete previous tags' );
<a name="l5671"><span class="linenum">5671</span></a>              }
<a name="l5672"><span class="linenum">5672</span></a>  
<a name="l5673"><span class="linenum">5673</span></a>              if( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> ) )
<a name="l5674"><span class="linenum">5674</span></a>              {
<a name="l5675"><span class="linenum">5675</span></a>  <span class="comment">                // Find the tags that are already in the DB</span>
<a name="l5676"><span class="linenum">5676</span></a>                  <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = 'SELECT tag_name
<a name="l5677"><span class="linenum">5677</span></a>                                          FROM T_items__tag
<a name="l5678"><span class="linenum">5678</span></a>                                       WHERE tag_name IN ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> ).')';
<a name="l5679"><span class="linenum">5679</span></a>                  <a class="var it1681" onMouseOver="hilite(1681)" onMouseOut="lolite()" onClick="logVariable('existing_tags')" href="../../../_variables/existing_tags.html">$existing_tags</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 0, 'Find existing tags' );
<a name="l5680"><span class="linenum">5680</span></a>  
<a name="l5681"><span class="linenum">5681</span></a>                  <a class="var it1682" onMouseOver="hilite(1682)" onMouseOut="lolite()" onClick="logVariable('new_tags')" href="../../../_variables/new_tags.html">$new_tags</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a>, <a class="var it1681" onMouseOver="hilite(1681)" onMouseOut="lolite()" onClick="logVariable('existing_tags')" href="../../../_variables/existing_tags.html">$existing_tags</a> );
<a name="l5682"><span class="linenum">5682</span></a>  
<a name="l5683"><span class="linenum">5683</span></a>                  if( !empty( <a class="var it1682" onMouseOver="hilite(1682)" onMouseOut="lolite()" onClick="logVariable('new_tags')" href="../../../_variables/new_tags.html">$new_tags</a> ) )
<a name="l5684"><span class="linenum">5684</span></a>                  { // insert new tags:
<a name="l5685"><span class="linenum">5685</span></a>                      <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = &quot;INSERT INTO T_items__tag( tag_name ) VALUES &quot;;
<a name="l5686"><span class="linenum">5686</span></a>                      foreach( <a class="var it1682" onMouseOver="hilite(1682)" onMouseOut="lolite()" onClick="logVariable('new_tags')" href="../../../_variables/new_tags.html">$new_tags</a> as <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> )
<a name="l5687"><span class="linenum">5687</span></a>                      {
<a name="l5688"><span class="linenum">5688</span></a>                          <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> .= '( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>).' ),';
<a name="l5689"><span class="linenum">5689</span></a>                      }
<a name="l5690"><span class="linenum">5690</span></a>                      <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 0, strlen( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> ) - 1 );
<a name="l5691"><span class="linenum">5691</span></a>                      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 'insert new tags' );
<a name="l5692"><span class="linenum">5692</span></a>                  }
<a name="l5693"><span class="linenum">5693</span></a>  
<a name="l5694"><span class="linenum">5694</span></a>  <span class="comment">                // ASSOC:</span>
<a name="l5695"><span class="linenum">5695</span></a>                  <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = 'INSERT INTO T_items__itemtag( itag_itm_ID, itag_tag_ID )
<a name="l5696"><span class="linenum">5696</span></a>                                    SELECT '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', tag_ID
<a name="l5697"><span class="linenum">5697</span></a>                                        FROM T_items__tag
<a name="l5698"><span class="linenum">5698</span></a>                                       WHERE tag_name IN ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> ).')';
<a name="l5699"><span class="linenum">5699</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 'Make tag associations!' );
<a name="l5700"><span class="linenum">5700</span></a>              }
<a name="l5701"><span class="linenum">5701</span></a>  
<a name="l5702"><span class="linenum">5702</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l5703"><span class="linenum">5703</span></a>          }
<a name="l5704"><span class="linenum">5704</span></a>      }
<a name="l5705"><span class="linenum">5705</span></a>  
<a name="l5706"><span class="linenum">5706</span></a>  
<a name="l5707"><span class="linenum">5707</span></a>      <span class="comment">/**</span>
<a name="l5708"><span class="linenum">5708</span></a>  <span class="comment">     * Get the User who is assigned to the Item.</span>
<a name="l5709"><span class="linenum">5709</span></a>  <span class="comment">     *</span>
<a name="l5710"><span class="linenum">5710</span></a>  <span class="comment">     * @return User|NULL NULL if no user is assigned.</span>
<a name="l5711"><span class="linenum">5711</span></a>  <span class="comment">     */</span>
<a name="l5712"><span class="linenum">5712</span></a>  	function <a class="function" onClick="logFunction('get_assigned_User')" href="../../../_functions/get_assigned_user.html" onMouseOver="funcPopup(event,'get_assigned_user')">get_assigned_User</a>()
<a name="l5713"><span class="linenum">5713</span></a>      {
<a name="l5714"><span class="linenum">5714</span></a>          if( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>) &amp;&amp; isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a>) )
<a name="l5715"><span class="linenum">5715</span></a>          {
<a name="l5716"><span class="linenum">5716</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l5717"><span class="linenum">5717</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_user_ID.html">assigned_user_ID</a> );
<a name="l5718"><span class="linenum">5718</span></a>          }
<a name="l5719"><span class="linenum">5719</span></a>  
<a name="l5720"><span class="linenum">5720</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>;
<a name="l5721"><span class="linenum">5721</span></a>      }
<a name="l5722"><span class="linenum">5722</span></a>  
<a name="l5723"><span class="linenum">5723</span></a>  
<a name="l5724"><span class="linenum">5724</span></a>      <span class="comment">/**</span>
<a name="l5725"><span class="linenum">5725</span></a>  <span class="comment">     * Get the User who edited the Item last time.</span>
<a name="l5726"><span class="linenum">5726</span></a>  <span class="comment">     *</span>
<a name="l5727"><span class="linenum">5727</span></a>  <span class="comment">     * @return User</span>
<a name="l5728"><span class="linenum">5728</span></a>  <span class="comment">     */</span>
<a name="l5729"><span class="linenum">5729</span></a>      function &amp; get_lastedit_User()
<a name="l5730"><span class="linenum">5730</span></a>      {
<a name="l5731"><span class="linenum">5731</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_User.html">lastedit_User</a> ) )
<a name="l5732"><span class="linenum">5732</span></a>          {
<a name="l5733"><span class="linenum">5733</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l5734"><span class="linenum">5734</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_User.html">lastedit_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_user_ID.html">lastedit_user_ID</a>, false, false );
<a name="l5735"><span class="linenum">5735</span></a>          }
<a name="l5736"><span class="linenum">5736</span></a>  
<a name="l5737"><span class="linenum">5737</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_User.html">lastedit_User</a>;
<a name="l5738"><span class="linenum">5738</span></a>      }
<a name="l5739"><span class="linenum">5739</span></a>  
<a name="l5740"><span class="linenum">5740</span></a>  
<a name="l5741"><span class="linenum">5741</span></a>      <span class="comment">/**</span>
<a name="l5742"><span class="linenum">5742</span></a>  <span class="comment">     * Get the User who created the Item.</span>
<a name="l5743"><span class="linenum">5743</span></a>  <span class="comment">     *</span>
<a name="l5744"><span class="linenum">5744</span></a>  <span class="comment">     * @return User</span>
<a name="l5745"><span class="linenum">5745</span></a>  <span class="comment">     */</span>
<a name="l5746"><span class="linenum">5746</span></a>      function &amp; get_creator_User()
<a name="l5747"><span class="linenum">5747</span></a>      {
<a name="l5748"><span class="linenum">5748</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>) )
<a name="l5749"><span class="linenum">5749</span></a>          {
<a name="l5750"><span class="linenum">5750</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l5751"><span class="linenum">5751</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_ID.html">creator_user_ID</a> );
<a name="l5752"><span class="linenum">5752</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Author.html">Author</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>;  <span class="comment">// deprecated</span>
<a name="l5753"><span class="linenum">5753</span></a>          }
<a name="l5754"><span class="linenum">5754</span></a>  
<a name="l5755"><span class="linenum">5755</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>;
<a name="l5756"><span class="linenum">5756</span></a>      }
<a name="l5757"><span class="linenum">5757</span></a>  
<a name="l5758"><span class="linenum">5758</span></a>  
<a name="l5759"><span class="linenum">5759</span></a>      <span class="comment">/**</span>
<a name="l5760"><span class="linenum">5760</span></a>  <span class="comment">     * Get login of the User who created the Item.</span>
<a name="l5761"><span class="linenum">5761</span></a>  <span class="comment">     *</span>
<a name="l5762"><span class="linenum">5762</span></a>  <span class="comment">     * @return string login</span>
<a name="l5763"><span class="linenum">5763</span></a>  <span class="comment">     */</span>
<a name="l5764"><span class="linenum">5764</span></a>  	function <a class="function" onClick="logFunction('get_creator_login')" href="../../../_functions/get_creator_login.html" onMouseOver="funcPopup(event,'get_creator_login')">get_creator_login</a>()
<a name="l5765"><span class="linenum">5765</span></a>      {
<a name="l5766"><span class="linenum">5766</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l5767"><span class="linenum">5767</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a> ) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a> ) )
<a name="l5768"><span class="linenum">5768</span></a>          {
<a name="l5769"><span class="linenum">5769</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;login;
<a name="l5770"><span class="linenum">5770</span></a>          }
<a name="l5771"><span class="linenum">5771</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_user_login.html">creator_user_login</a>;
<a name="l5772"><span class="linenum">5772</span></a>      }
<a name="l5773"><span class="linenum">5773</span></a>  
<a name="l5774"><span class="linenum">5774</span></a>  
<a name="l5775"><span class="linenum">5775</span></a>      <span class="comment">/**</span>
<a name="l5776"><span class="linenum">5776</span></a>  <span class="comment">     * Execute or schedule post(=after) processing tasks</span>
<a name="l5777"><span class="linenum">5777</span></a>  <span class="comment">     *</span>
<a name="l5778"><span class="linenum">5778</span></a>  <span class="comment">     * Includes notifications &amp; pings</span>
<a name="l5779"><span class="linenum">5779</span></a>  <span class="comment">     *</span>
<a name="l5780"><span class="linenum">5780</span></a>  <span class="comment">     * @param boolean a new post was just created or it was called after an update</span>
<a name="l5781"><span class="linenum">5781</span></a>  <span class="comment">     * @param boolean give more info messages (we want to avoid that when we save &amp; continue editing)</span>
<a name="l5782"><span class="linenum">5782</span></a>  <span class="comment">     */</span>
<a name="l5783"><span class="linenum">5783</span></a>  	function <a class="function" onClick="logFunction('handle_post_processing')" href="../../../_functions/handle_post_processing.html" onMouseOver="funcPopup(event,'handle_post_processing')">handle_post_processing</a>( <a class="var it1683" onMouseOver="hilite(1683)" onMouseOut="lolite()" onClick="logVariable('just_created')" href="../../../_variables/just_created.html">$just_created</a>, <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> = true )
<a name="l5784"><span class="linenum">5784</span></a>      {
<a name="l5785"><span class="linenum">5785</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it1684" onMouseOver="hilite(1684)" onMouseOut="lolite()" onClick="logVariable('posttypes_nopermanentURL')" href="../../../_variables/posttypes_nopermanentURL.html">$posttypes_nopermanentURL</a>;
<a name="l5786"><span class="linenum">5786</span></a>  
<a name="l5787"><span class="linenum">5787</span></a>          if( <a class="var it1683" onMouseOver="hilite(1683)" onMouseOut="lolite()" onClick="logVariable('just_created')" href="../../../_variables/just_created.html">$just_created</a> )
<a name="l5788"><span class="linenum">5788</span></a>          { // we must try to send moderation notifications for the newly created posts
<a name="l5789"><span class="linenum">5789</span></a>              <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_moderation_emails')" href="../../../_functions/send_moderation_emails.html" onMouseOver="funcPopup(event,'send_moderation_emails')">send_moderation_emails</a>();
<a name="l5790"><span class="linenum">5790</span></a>          }
<a name="l5791"><span class="linenum">5791</span></a>          else
<a name="l5792"><span class="linenum">5792</span></a>          { // Moderation notifications were not sent, so there are no already notified users
<a name="l5793"><span class="linenum">5793</span></a>              <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> = NULL;
<a name="l5794"><span class="linenum">5794</span></a>          }
<a name="l5795"><span class="linenum">5795</span></a>  
<a name="l5796"><span class="linenum">5796</span></a>          <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('outbound_notifications_mode');
<a name="l5797"><span class="linenum">5797</span></a>  
<a name="l5798"><span class="linenum">5798</span></a>          if( <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> == 'off' )
<a name="l5799"><span class="linenum">5799</span></a>          {    // Exit silently
<a name="l5800"><span class="linenum">5800</span></a>              return false;
<a name="l5801"><span class="linenum">5801</span></a>          }
<a name="l5802"><span class="linenum">5802</span></a>  
<a name="l5803"><span class="linenum">5803</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notifications_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notifications_status.html">notifications_status</a> == 'finished' )
<a name="l5804"><span class="linenum">5804</span></a>          { // pings have been done before
<a name="l5805"><span class="linenum">5805</span></a>              if( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> )
<a name="l5806"><span class="linenum">5806</span></a>              {
<a name="l5807"><span class="linenum">5807</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post had already pinged: skipping notifications...'), 'note' );
<a name="l5808"><span class="linenum">5808</span></a>              }
<a name="l5809"><span class="linenum">5809</span></a>              return false;
<a name="l5810"><span class="linenum">5810</span></a>          }
<a name="l5811"><span class="linenum">5811</span></a>  
<a name="l5812"><span class="linenum">5812</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notifications_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notifications_status.html">notifications_status</a> != 'noreq' )
<a name="l5813"><span class="linenum">5813</span></a>          { // pings have been done before
<a name="l5814"><span class="linenum">5814</span></a>  
<a name="l5815"><span class="linenum">5815</span></a>  <span class="comment">            // TODO: Check if issue_date has changed and reschedule</span>
<a name="l5816"><span class="linenum">5816</span></a>              if( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> )
<a name="l5817"><span class="linenum">5817</span></a>              {
<a name="l5818"><span class="linenum">5818</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post processing already pending...'), 'note' );
<a name="l5819"><span class="linenum">5819</span></a>              }
<a name="l5820"><span class="linenum">5820</span></a>              return false;
<a name="l5821"><span class="linenum">5821</span></a>          }
<a name="l5822"><span class="linenum">5822</span></a>  
<a name="l5823"><span class="linenum">5823</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'published' )
<a name="l5824"><span class="linenum">5824</span></a>          {
<a name="l5825"><span class="linenum">5825</span></a>  <span class="comment">            // TODO: discard any notification that may be pending!</span>
<a name="l5826"><span class="linenum">5826</span></a>              if( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> )
<a name="l5827"><span class="linenum">5827</span></a>              {
<a name="l5828"><span class="linenum">5828</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post not publicly published: skipping notifications...'), 'note' );
<a name="l5829"><span class="linenum">5829</span></a>              }
<a name="l5830"><span class="linenum">5830</span></a>              return false;
<a name="l5831"><span class="linenum">5831</span></a>          }
<a name="l5832"><span class="linenum">5832</span></a>  
<a name="l5833"><span class="linenum">5833</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, <a class="var it1684" onMouseOver="hilite(1684)" onMouseOut="lolite()" onClick="logVariable('posttypes_nopermanentURL')" href="../../../_variables/posttypes_nopermanentURL.html">$posttypes_nopermanentURL</a> ) )
<a name="l5834"><span class="linenum">5834</span></a>          {
<a name="l5835"><span class="linenum">5835</span></a>  <span class="comment">            // TODO: discard any notification that may be pending!</span>
<a name="l5836"><span class="linenum">5836</span></a>              if( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> )
<a name="l5837"><span class="linenum">5837</span></a>              {
<a name="l5838"><span class="linenum">5838</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This post type doesn\'t need notifications...'), 'note' );
<a name="l5839"><span class="linenum">5839</span></a>              }
<a name="l5840"><span class="linenum">5840</span></a>              return false;
<a name="l5841"><span class="linenum">5841</span></a>          }
<a name="l5842"><span class="linenum">5842</span></a>  
<a name="l5843"><span class="linenum">5843</span></a>          if( <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> == 'immediate' &amp;&amp; <a class="phpfunction" onClick="logFunction('strtotime')" href="../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a> ) &lt;= <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> )
<a name="l5844"><span class="linenum">5844</span></a>          {    // We want to do the post processing immediately:
<a name="l5845"><span class="linenum">5845</span></a>  <span class="comment">            // send outbound pings:</span>
<a name="l5846"><span class="linenum">5846</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_outbound_pings')" href="../../../_functions/send_outbound_pings.html" onMouseOver="funcPopup(event,'send_outbound_pings')">send_outbound_pings</a>( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> );
<a name="l5847"><span class="linenum">5847</span></a>  
<a name="l5848"><span class="linenum">5848</span></a>  <span class="comment">            // Send email notifications now!</span>
<a name="l5849"><span class="linenum">5849</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_email_notifications')" href="../../../_functions/send_email_notifications.html" onMouseOver="funcPopup(event,'send_email_notifications')">send_email_notifications</a>( false, <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> );
<a name="l5850"><span class="linenum">5850</span></a>  
<a name="l5851"><span class="linenum">5851</span></a>  <span class="comment">            // Record that processing has been done:</span>
<a name="l5852"><span class="linenum">5852</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notifications_status', 'finished' );
<a name="l5853"><span class="linenum">5853</span></a>          }
<a name="l5854"><span class="linenum">5854</span></a>          else
<a name="l5855"><span class="linenum">5855</span></a>          {    // We want asynchronous post processing. This applies to posts with date in future too.
<a name="l5856"><span class="linenum">5856</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You just published a post in the future. You must set your notifications to &lt;a %s&gt;Asynchronous&lt;/a&gt; so that b2evolution can send out notification when this post goes live.'),
<a name="l5857"><span class="linenum">5857</span></a>                      'href=&quot;http://b2evolution.net/man/after-each-post-settings&quot;' ), 'warning' );
<a name="l5858"><span class="linenum">5858</span></a>  
<a name="l5859"><span class="linenum">5859</span></a>  <span class="comment">            // CREATE OBJECT:</span>
<a name="l5860"><span class="linenum">5860</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '/cron/model/_cronjob.class.php', 'Cronjob' );
<a name="l5861"><span class="linenum">5861</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Cronjob')" href="../../../_classes/cronjob.html" onMouseOver="classPopup(event,'cronjob')">Cronjob</a>();
<a name="l5862"><span class="linenum">5862</span></a>  
<a name="l5863"><span class="linenum">5863</span></a>  <span class="comment">            // start datetime. We do not want to ping before the post is effectively published:</span>
<a name="l5864"><span class="linenum">5864</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'start_datetime', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a> );
<a name="l5865"><span class="linenum">5865</span></a>  
<a name="l5866"><span class="linenum">5866</span></a>  <span class="comment">            // no repeat.</span>
<a name="l5867"><span class="linenum">5867</span></a>  
<a name="l5868"><span class="linenum">5868</span></a>  <span class="comment">            // key:</span>
<a name="l5869"><span class="linenum">5869</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'key', 'send-post-notifications' );
<a name="l5870"><span class="linenum">5870</span></a>  
<a name="l5871"><span class="linenum">5871</span></a>  <span class="comment">            // params: specify which post this job is supposed to send notifications for:</span>
<a name="l5872"><span class="linenum">5872</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'params', array( 'item_ID' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l5873"><span class="linenum">5873</span></a>  
<a name="l5874"><span class="linenum">5874</span></a>  <span class="comment">            // Save cronjob to DB:</span>
<a name="l5875"><span class="linenum">5875</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l5876"><span class="linenum">5876</span></a>  
<a name="l5877"><span class="linenum">5877</span></a>  <span class="comment">            // Memorize the cron job ID which is going to handle this post:</span>
<a name="l5878"><span class="linenum">5878</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notifications_ctsk_ID', <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a onClick="logVariable('ID')" class="var it10926" onMouseOver="hilite(10926)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l5879"><span class="linenum">5879</span></a>  
<a name="l5880"><span class="linenum">5880</span></a>  <span class="comment">            // Record that processing has been scheduled:</span>
<a name="l5881"><span class="linenum">5881</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notifications_status', 'todo' );
<a name="l5882"><span class="linenum">5882</span></a>          }
<a name="l5883"><span class="linenum">5883</span></a>  
<a name="l5884"><span class="linenum">5884</span></a>  <span class="comment">        // Save the new processing status to DB, but do not update last edited by user, slug or post excerpt</span>
<a name="l5885"><span class="linenum">5885</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( false, false, false );
<a name="l5886"><span class="linenum">5886</span></a>  
<a name="l5887"><span class="linenum">5887</span></a>          return true;
<a name="l5888"><span class="linenum">5888</span></a>      }
<a name="l5889"><span class="linenum">5889</span></a>  
<a name="l5890"><span class="linenum">5890</span></a>  
<a name="l5891"><span class="linenum">5891</span></a>      <span class="comment">/**</span>
<a name="l5892"><span class="linenum">5892</span></a>  <span class="comment">     * Send post may need moderation notifications for those users who have rights to moderate this post, and would like to receive notifications</span>
<a name="l5893"><span class="linenum">5893</span></a>  <span class="comment">     *</span>
<a name="l5894"><span class="linenum">5894</span></a>  <span class="comment">     * @return array the notified user ids</span>
<a name="l5895"><span class="linenum">5895</span></a>  <span class="comment">     */</span>
<a name="l5896"><span class="linenum">5896</span></a>  	function <a class="function" onClick="logFunction('send_moderation_emails')" href="../../../_functions/send_moderation_emails.html" onMouseOver="funcPopup(event,'send_moderation_emails')">send_moderation_emails</a>()
<a name="l5897"><span class="linenum">5897</span></a>      {
<a name="l5898"><span class="linenum">5898</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l5899"><span class="linenum">5899</span></a>  
<a name="l5900"><span class="linenum">5900</span></a>  <span class="comment">        // Select all users who are post moderators in this Item's blog</span>
<a name="l5901"><span class="linenum">5901</span></a>          <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l5902"><span class="linenum">5902</span></a>  
<a name="l5903"><span class="linenum">5903</span></a>          <a class="var it1688" onMouseOver="hilite(1688)" onMouseOut="lolite()" onClick="logVariable('notify_condition')" href="../../../_variables/notify_condition.html">$notify_condition</a> = 'uset_value IS NOT NULL AND uset_value &lt;&gt; &quot;0&quot;';
<a name="l5904"><span class="linenum">5904</span></a>          if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'def_notify_post_moderation' ) )
<a name="l5905"><span class="linenum">5905</span></a>          {
<a name="l5906"><span class="linenum">5906</span></a>              <a class="var it1688" onMouseOver="hilite(1688)" onMouseOut="lolite()" onClick="logVariable('notify_condition')" href="../../../_variables/notify_condition.html">$notify_condition</a> = '( uset_value IS NULL OR ( '.<a class="var it1688" onMouseOver="hilite(1688)" onMouseOut="lolite()" onClick="logVariable('notify_condition')" href="../../../_variables/notify_condition.html">$notify_condition</a>.' ) )';
<a name="l5907"><span class="linenum">5907</span></a>          }
<a name="l5908"><span class="linenum">5908</span></a>  
<a name="l5909"><span class="linenum">5909</span></a>  <span class="comment">        // Select user_ids with the corresponding item edit permission on this item's blog</span>
<a name="l5910"><span class="linenum">5910</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l5911"><span class="linenum">5911</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, IF( grp_perm_blogs = &quot;editall&quot; OR user_ID = blog_owner_user_ID, &quot;all&quot;, IF( IFNULL( bloguser_perm_edit + 0, 0 ) &gt; IFNULL( bloggroup_perm_edit + 0, 0 ), bloguser_perm_edit, bloggroup_perm_edit ) ) as perm' );
<a name="l5912"><span class="linenum">5912</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l5913"><span class="linenum">5913</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_blogs <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> ( blog_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>.' )' );
<a name="l5914"><span class="linenum">5914</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_coll_user_perms <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (blog_advanced_perms &lt;&gt; 0 AND user_ID = bloguser_user_ID AND bloguser_blog_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>.' )' );
<a name="l5915"><span class="linenum">5915</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_coll_group_perms <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (blog_advanced_perms &lt;&gt; 0 AND user_grp_ID = bloggroup_group_ID AND bloggroup_blog_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>.' )' );
<a name="l5916"><span class="linenum">5916</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users__usersettings ON uset_user_ID = user_ID AND uset_name = &quot;notify_post_moderation&quot;' );
<a name="l5917"><span class="linenum">5917</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_groups ON grp_ID = user_grp_ID' );
<a name="l5918"><span class="linenum">5918</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( <a class="var it1688" onMouseOver="hilite(1688)" onMouseOut="lolite()" onClick="logVariable('notify_condition')" href="../../../_variables/notify_condition.html">$notify_condition</a> );
<a name="l5919"><span class="linenum">5919</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( bloguser_perm_edit IS NOT NULL AND bloguser_perm_edit &lt;&gt; &quot;no&quot; AND bloguser_perm_edit &lt;&gt; &quot;own&quot; )
<a name="l5920"><span class="linenum">5920</span></a>                  OR ( bloggroup_perm_edit IS NOT NULL AND bloggroup_perm_edit &lt;&gt; &quot;no&quot; AND bloggroup_perm_edit &lt;&gt; &quot;own&quot; )
<a name="l5921"><span class="linenum">5921</span></a>                  OR ( grp_perm_blogs = &quot;editall&quot; ) OR ( user_ID = blog_owner_user_ID )' );
<a name="l5922"><span class="linenum">5922</span></a>  
<a name="l5923"><span class="linenum">5923</span></a>          <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l5924"><span class="linenum">5924</span></a>  
<a name="l5925"><span class="linenum">5925</span></a>          <a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l5926"><span class="linenum">5926</span></a>          if( isset( <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a>[<a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10959" onMouseOver="hilite(10959)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] ) )
<a name="l5927"><span class="linenum">5927</span></a>          { // Don't notify the user who just created this Item
<a name="l5928"><span class="linenum">5928</span></a>              unset( <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a>[<a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10959" onMouseOver="hilite(10959)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] );
<a name="l5929"><span class="linenum">5929</span></a>          }
<a name="l5930"><span class="linenum">5930</span></a>  
<a name="l5931"><span class="linenum">5931</span></a>          if( empty( <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a> ) )
<a name="l5932"><span class="linenum">5932</span></a>          { // There are no moderator users who would like to receive notificaitons
<a name="l5933"><span class="linenum">5933</span></a>              return NULL;
<a name="l5934"><span class="linenum">5934</span></a>          }
<a name="l5935"><span class="linenum">5935</span></a>  
<a name="l5936"><span class="linenum">5936</span></a>  <span class="comment">        // Collect all notified User ID in this array</span>
<a name="l5937"><span class="linenum">5937</span></a>          <a class="var it1691" onMouseOver="hilite(1691)" onMouseOut="lolite()" onClick="logVariable('notfied_Users')" href="../../../_variables/notfied_Users.html">$notfied_Users</a> = array();
<a name="l5938"><span class="linenum">5938</span></a>  
<a name="l5939"><span class="linenum">5939</span></a>          <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('post_creator_level')" href="../../../_variables/post_creator_level.html">$post_creator_level</a> = <a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a>-&gt;<a onClick="logVariable('level')" class="var it10959" onMouseOver="hilite(10959)" onMouseOut="lolite()" href="../../../_variables/level.html">level</a>;
<a name="l5940"><span class="linenum">5940</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l5941"><span class="linenum">5941</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_list')" href="../../../_functions/load_list.html" onMouseOver="funcPopup(event,'load_list')">load_list</a>( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a> ) );
<a name="l5942"><span class="linenum">5942</span></a>  
<a name="l5943"><span class="linenum">5943</span></a>          foreach( <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('post_moderators')" href="../../../_variables/post_moderators.html">$post_moderators</a> as <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a> =&gt; <a class="var it459" onMouseOver="hilite(459)" onMouseOut="lolite()" onClick="logVariable('perm')" href="../../../_variables/perm.html">$perm</a> )
<a name="l5944"><span class="linenum">5944</span></a>          {
<a name="l5945"><span class="linenum">5945</span></a>              <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a> );
<a name="l5946"><span class="linenum">5946</span></a>              if( ( <a class="var it459" onMouseOver="hilite(459)" onMouseOut="lolite()" onClick="logVariable('perm')" href="../../../_variables/perm.html">$perm</a> == 'lt' ) &amp;&amp; ( <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;<a onClick="logVariable('level')" class="var it10960" onMouseOver="hilite(10960)" onMouseOut="lolite()" href="../../../_variables/level.html">level</a> &lt;= <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('post_creator_level')" href="../../../_variables/post_creator_level.html">$post_creator_level</a> ) )
<a name="l5947"><span class="linenum">5947</span></a>              { // User has no permission moderate this post
<a name="l5948"><span class="linenum">5948</span></a>                  continue;
<a name="l5949"><span class="linenum">5949</span></a>              }
<a name="l5950"><span class="linenum">5950</span></a>              if( ( <a class="var it459" onMouseOver="hilite(459)" onMouseOut="lolite()" onClick="logVariable('perm')" href="../../../_variables/perm.html">$perm</a> == 'le' ) &amp;&amp; ( <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;<a onClick="logVariable('level')" class="var it10960" onMouseOver="hilite(10960)" onMouseOut="lolite()" href="../../../_variables/level.html">level</a> &lt; <a class="var it1692" onMouseOver="hilite(1692)" onMouseOut="lolite()" onClick="logVariable('post_creator_level')" href="../../../_variables/post_creator_level.html">$post_creator_level</a> ) )
<a name="l5951"><span class="linenum">5951</span></a>              { // User has no permission moderate this post
<a name="l5952"><span class="linenum">5952</span></a>                  continue;
<a name="l5953"><span class="linenum">5953</span></a>              }
<a name="l5954"><span class="linenum">5954</span></a>  
<a name="l5955"><span class="linenum">5955</span></a>              <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('moderator_user_Group')" href="../../../_variables/moderator_user_Group.html">$moderator_user_Group</a> = <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;get_Group();
<a name="l5956"><span class="linenum">5956</span></a>              <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> = <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('moderator_user_Group')" href="../../../_variables/moderator_user_Group.html">$moderator_user_Group</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'post_moderation_notif', 'full' );
<a name="l5957"><span class="linenum">5957</span></a>  
<a name="l5958"><span class="linenum">5958</span></a>              <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> = array(
<a name="l5959"><span class="linenum">5959</span></a>                  'locale'         =&gt; <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;<a onClick="logVariable('locale')" class="var it10960" onMouseOver="hilite(10960)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a>,
<a name="l5960"><span class="linenum">5960</span></a>                  'notify_full'    =&gt; <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a>,
<a name="l5961"><span class="linenum">5961</span></a>                  'Item'           =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l5962"><span class="linenum">5962</span></a>                  'recipient_User' =&gt; <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>,
<a name="l5963"><span class="linenum">5963</span></a>                  'notify_type'    =&gt; 'moderator',
<a name="l5964"><span class="linenum">5964</span></a>              );
<a name="l5965"><span class="linenum">5965</span></a>  
<a name="l5966"><span class="linenum">5966</span></a>              <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>( <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;<a onClick="logVariable('locale')" class="var it10960" onMouseOver="hilite(10960)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a> );
<a name="l5967"><span class="linenum">5967</span></a>              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New post may need moderation:').' '.sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s created a new post on &quot;%s&quot;'), <a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a>-&gt;<a onClick="logVariable('login')" class="var it10959" onMouseOver="hilite(10959)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('shortname') );
<a name="l5968"><span class="linenum">5968</span></a>  <span class="comment">            // Send the email</span>
<a name="l5969"><span class="linenum">5969</span></a>              <a class="function" onClick="logFunction('send_mail_to_User')" href="../../../_functions/send_mail_to_user.html" onMouseOver="funcPopup(event,'send_mail_to_user')">send_mail_to_User</a>( <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a>, <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, 'post_new', <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a>, false, array( 'Reply-To' =&gt; <a class="var it1690" onMouseOver="hilite(1690)" onMouseOut="lolite()" onClick="logVariable('post_creator_User')" href="../../../_variables/post_creator_User.html">$post_creator_User</a>-&gt;<a onClick="logVariable('email')" class="var it10959" onMouseOver="hilite(10959)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a> ) );
<a name="l5970"><span class="linenum">5970</span></a>              <a class="function" onClick="logFunction('locale_restore_previous')" href="../../../_functions/locale_restore_previous.html" onMouseOver="funcPopup(event,'locale_restore_previous')">locale_restore_previous</a>();
<a name="l5971"><span class="linenum">5971</span></a>  
<a name="l5972"><span class="linenum">5972</span></a>  <span class="comment">            // A send notification email request to the user with $moderator_ID ID was processed</span>
<a name="l5973"><span class="linenum">5973</span></a>              <a class="var it1691" onMouseOver="hilite(1691)" onMouseOut="lolite()" onClick="logVariable('notfied_Users')" href="../../../_variables/notfied_Users.html">$notfied_Users</a>[] = <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a>;
<a name="l5974"><span class="linenum">5974</span></a>          }
<a name="l5975"><span class="linenum">5975</span></a>  
<a name="l5976"><span class="linenum">5976</span></a>          return <a class="var it1691" onMouseOver="hilite(1691)" onMouseOut="lolite()" onClick="logVariable('notfied_Users')" href="../../../_variables/notfied_Users.html">$notfied_Users</a>;
<a name="l5977"><span class="linenum">5977</span></a>      }
<a name="l5978"><span class="linenum">5978</span></a>  
<a name="l5979"><span class="linenum">5979</span></a>  
<a name="l5980"><span class="linenum">5980</span></a>      <span class="comment">/**</span>
<a name="l5981"><span class="linenum">5981</span></a>  <span class="comment">     * Send email notifications to subscribed users</span>
<a name="l5982"><span class="linenum">5982</span></a>  <span class="comment">     *</span>
<a name="l5983"><span class="linenum">5983</span></a>  <span class="comment">     * @todo fp&gt;&gt; shall we notify suscribers of blog were this is in extra-cat? blueyed&gt;&gt; IMHO yes.</span>
<a name="l5984"><span class="linenum">5984</span></a>  <span class="comment">     *</span>
<a name="l5985"><span class="linenum">5985</span></a>  <span class="comment">     * @param boolean Display notification messages or not</span>
<a name="l5986"><span class="linenum">5986</span></a>  <span class="comment">     * @param array Already notified user ids, or NULL if it is not the case</span>
<a name="l5987"><span class="linenum">5987</span></a>  <span class="comment">     */</span>
<a name="l5988"><span class="linenum">5988</span></a>  	function <a class="function" onClick="logFunction('send_email_notifications')" href="../../../_functions/send_email_notifications.html" onMouseOver="funcPopup(event,'send_email_notifications')">send_email_notifications</a>( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> = true, <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> = NULL )
<a name="l5989"><span class="linenum">5989</span></a>      {
<a name="l5990"><span class="linenum">5990</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>, <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l5991"><span class="linenum">5991</span></a>  
<a name="l5992"><span class="linenum">5992</span></a>          <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l5993"><span class="linenum">5993</span></a>  
<a name="l5994"><span class="linenum">5994</span></a>          if( ! <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_subscriptions' ) )
<a name="l5995"><span class="linenum">5995</span></a>          {    // Subscriptions not enabled!
<a name="l5996"><span class="linenum">5996</span></a>              return;
<a name="l5997"><span class="linenum">5997</span></a>          }
<a name="l5998"><span class="linenum">5998</span></a>  
<a name="l5999"><span class="linenum">5999</span></a>          if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l6000"><span class="linenum">6000</span></a>          {
<a name="l6001"><span class="linenum">6001</span></a>              echo &quot;&lt;div class=\&quot;panelinfo\&quot;&gt;\n&quot;;
<a name="l6002"><span class="linenum">6002</span></a>              echo '&lt;h3&gt;', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Notifying subscribed users...'), &quot;&lt;/h3&gt;\n&quot;;
<a name="l6003"><span class="linenum">6003</span></a>          }
<a name="l6004"><span class="linenum">6004</span></a>  
<a name="l6005"><span class="linenum">6005</span></a>  <span class="comment">        // Create condition to not select already notified modertor users</span>
<a name="l6006"><span class="linenum">6006</span></a>          <a class="var it1699" onMouseOver="hilite(1699)" onMouseOut="lolite()" onClick="logVariable('except_users_condition')" href="../../../_variables/except_users_condition.html">$except_users_condition</a> = empty( <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> ) ? '' : ' AND sub_user_ID NOT IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it1685" onMouseOver="hilite(1685)" onMouseOut="lolite()" onClick="logVariable('already_notified')" href="../../../_variables/already_notified.html">$already_notified</a> ).' )';
<a name="l6007"><span class="linenum">6007</span></a>  
<a name="l6008"><span class="linenum">6008</span></a>  <span class="comment">        // Get list of users who want to be notfied:</span>
<a name="l6009"><span class="linenum">6009</span></a>  <span class="comment">        // TODO: also use extra cats/blogs??</span>
<a name="l6010"><span class="linenum">6010</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT DISTINCT sub_user_ID
<a name="l6011"><span class="linenum">6011</span></a>                              FROM T_subscriptions
<a name="l6012"><span class="linenum">6012</span></a>                          WHERE sub_coll_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'
<a name="l6013"><span class="linenum">6013</span></a>                              AND sub_items &lt;&gt; 0'.<a class="var it1699" onMouseOver="hilite(1699)" onMouseOut="lolite()" onClick="logVariable('except_users_condition')" href="../../../_variables/except_users_condition.html">$except_users_condition</a>;
<a name="l6014"><span class="linenum">6014</span></a>          <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l6015"><span class="linenum">6015</span></a>  
<a name="l6016"><span class="linenum">6016</span></a>          if( empty( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> ) )
<a name="l6017"><span class="linenum">6017</span></a>          { // No-one to notify:
<a name="l6018"><span class="linenum">6018</span></a>              if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l6019"><span class="linenum">6019</span></a>              {
<a name="l6020"><span class="linenum">6020</span></a>                  echo '&lt;p&gt;', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No-one to notify.'), &quot;&lt;/p&gt;\n&lt;/div&gt;\n&quot;;
<a name="l6021"><span class="linenum">6021</span></a>              }
<a name="l6022"><span class="linenum">6022</span></a>              return false;
<a name="l6023"><span class="linenum">6023</span></a>          }
<a name="l6024"><span class="linenum">6024</span></a>  
<a name="l6025"><span class="linenum">6025</span></a>  <span class="comment">        // Load all users who will be notified</span>
<a name="l6026"><span class="linenum">6026</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l6027"><span class="linenum">6027</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_list')" href="../../../_functions/load_list.html" onMouseOver="funcPopup(event,'load_list')">load_list</a>( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> );
<a name="l6028"><span class="linenum">6028</span></a>  
<a name="l6029"><span class="linenum">6029</span></a>          <span class="comment">/*</span>
<a name="l6030"><span class="linenum">6030</span></a>  <span class="comment">         * We have a list of user IDs to notify:</span>
<a name="l6031"><span class="linenum">6031</span></a>  <span class="comment">         */</span>
<a name="l6032"><span class="linenum">6032</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l6033"><span class="linenum">6033</span></a>  
<a name="l6034"><span class="linenum">6034</span></a>  <span class="comment">        // Load a list with the blocked emails in cache</span>
<a name="l6035"><span class="linenum">6035</span></a>          <a class="function" onClick="logFunction('load_blocked_emails')" href="../../../_functions/load_blocked_emails.html" onMouseOver="funcPopup(event,'load_blocked_emails')">load_blocked_emails</a>( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> );
<a name="l6036"><span class="linenum">6036</span></a>  
<a name="l6037"><span class="linenum">6037</span></a>  <span class="comment">        // Send emails:</span>
<a name="l6038"><span class="linenum">6038</span></a>          <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('cache_by_locale')" href="../../../_variables/cache_by_locale.html">$cache_by_locale</a> = array();
<a name="l6039"><span class="linenum">6039</span></a>          foreach( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> as <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> )
<a name="l6040"><span class="linenum">6040</span></a>          {
<a name="l6041"><span class="linenum">6041</span></a>              <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, false, false );
<a name="l6042"><span class="linenum">6042</span></a>              if( empty( <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a> ) )
<a name="l6043"><span class="linenum">6043</span></a>              { // skip invalid users
<a name="l6044"><span class="linenum">6044</span></a>                  continue;
<a name="l6045"><span class="linenum">6045</span></a>              }
<a name="l6046"><span class="linenum">6046</span></a>  
<a name="l6047"><span class="linenum">6047</span></a>              <a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'email' );
<a name="l6048"><span class="linenum">6048</span></a>              if( empty( <a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a> ) )
<a name="l6049"><span class="linenum">6049</span></a>              { // skip users with empty email address
<a name="l6050"><span class="linenum">6050</span></a>                  continue;
<a name="l6051"><span class="linenum">6051</span></a>              }
<a name="l6052"><span class="linenum">6052</span></a>              <a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'locale' );
<a name="l6053"><span class="linenum">6053</span></a>              <a class="var it1705" onMouseOver="hilite(1705)" onMouseOut="lolite()" onClick="logVariable('notify_user_Group')" href="../../../_variables/notify_user_Group.html">$notify_user_Group</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;get_Group();
<a name="l6054"><span class="linenum">6054</span></a>  
<a name="l6055"><span class="linenum">6055</span></a>              <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> = <a class="var it1705" onMouseOver="hilite(1705)" onMouseOut="lolite()" onClick="logVariable('notify_user_Group')" href="../../../_variables/notify_user_Group.html">$notify_user_Group</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'post_subscription_notif', 'full' );
<a name="l6056"><span class="linenum">6056</span></a>              if( ! isset(<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('cache_by_locale')" href="../../../_variables/cache_by_locale.html">$cache_by_locale</a>[<a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a>]) )
<a name="l6057"><span class="linenum">6057</span></a>              { // No message for this locale generated yet:
<a name="l6058"><span class="linenum">6058</span></a>                  <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>( <a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a> );
<a name="l6059"><span class="linenum">6059</span></a>  
<a name="l6060"><span class="linenum">6060</span></a>                  <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('cache_by_locale')" href="../../../_variables/cache_by_locale.html">$cache_by_locale</a>[<a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a>]['subject']['short'] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s created a new post in blog &quot;%s&quot;'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ), <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('shortname') );
<a name="l6061"><span class="linenum">6061</span></a>  
<a name="l6062"><span class="linenum">6062</span></a>                  <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('cache_by_locale')" href="../../../_variables/cache_by_locale.html">$cache_by_locale</a>[<a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a>]['subject']['full'] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('[%s] New post: &quot;%s&quot;'), <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('shortname'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l6063"><span class="linenum">6063</span></a>  
<a name="l6064"><span class="linenum">6064</span></a>                  <a class="function" onClick="logFunction('locale_restore_previous')" href="../../../_functions/locale_restore_previous.html" onMouseOver="funcPopup(event,'locale_restore_previous')">locale_restore_previous</a>();
<a name="l6065"><span class="linenum">6065</span></a>              }
<a name="l6066"><span class="linenum">6066</span></a>  
<a name="l6067"><span class="linenum">6067</span></a>              <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> = array(
<a name="l6068"><span class="linenum">6068</span></a>                      'locale'         =&gt; <a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a>,
<a name="l6069"><span class="linenum">6069</span></a>                      'notify_full'    =&gt; <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a>,
<a name="l6070"><span class="linenum">6070</span></a>                      'Item'           =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l6071"><span class="linenum">6071</span></a>                      'recipient_User' =&gt; <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>,
<a name="l6072"><span class="linenum">6072</span></a>                      'notify_type'    =&gt; 'subscription',
<a name="l6073"><span class="linenum">6073</span></a>                  );
<a name="l6074"><span class="linenum">6074</span></a>  
<a name="l6075"><span class="linenum">6075</span></a>              if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> ) echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Notifying:').<a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a>.&quot;&lt;br /&gt;\n&quot;;
<a name="l6076"><span class="linenum">6076</span></a>              if( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &gt;= 2 )
<a name="l6077"><span class="linenum">6077</span></a>              {
<a name="l6078"><span class="linenum">6078</span></a>                  <a class="var it1706" onMouseOver="hilite(1706)" onMouseOut="lolite()" onClick="logVariable('message_content')" href="../../../_variables/message_content.html">$message_content</a> = <a class="function" onClick="logFunction('mail_template')" href="../../../_functions/mail_template.html" onMouseOver="funcPopup(event,'mail_template')">mail_template</a>( 'post_new', 'txt', <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> );
<a name="l6079"><span class="linenum">6079</span></a>                  echo &quot;&lt;p&gt;Sending notification to <a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a>:&lt;pre&gt;<a class="var it1706" onMouseOver="hilite(1706)" onMouseOut="lolite()" onClick="logVariable('message_content')" href="../../../_variables/message_content.html">$message_content</a>&lt;/pre&gt;&quot;;
<a name="l6080"><span class="linenum">6080</span></a>              }
<a name="l6081"><span class="linenum">6081</span></a>  
<a name="l6082"><span class="linenum">6082</span></a>              <a class="var it1707" onMouseOver="hilite(1707)" onMouseOut="lolite()" onClick="logVariable('subject_type')" href="../../../_variables/subject_type.html">$subject_type</a> = <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> ? 'full' : 'short';
<a name="l6083"><span class="linenum">6083</span></a>              <a class="function" onClick="logFunction('send_mail_to_User')" href="../../../_functions/send_mail_to_user.html" onMouseOver="funcPopup(event,'send_mail_to_user')">send_mail_to_User</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('cache_by_locale')" href="../../../_variables/cache_by_locale.html">$cache_by_locale</a>[<a class="var it1704" onMouseOver="hilite(1704)" onMouseOut="lolite()" onClick="logVariable('notify_locale')" href="../../../_variables/notify_locale.html">$notify_locale</a>]['subject'][<a class="var it1707" onMouseOver="hilite(1707)" onMouseOut="lolite()" onClick="logVariable('subject_type')" href="../../../_variables/subject_type.html">$subject_type</a>], 'post_new', <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> );
<a name="l6084"><span class="linenum">6084</span></a>  
<a name="l6085"><span class="linenum">6085</span></a>              <a class="function" onClick="logFunction('blocked_emails_memorize')" href="../../../_functions/blocked_emails_memorize.html" onMouseOver="funcPopup(event,'blocked_emails_memorize')">blocked_emails_memorize</a>( <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a onClick="logVariable('email')" class="var it10929" onMouseOver="hilite(10929)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a> );
<a name="l6086"><span class="linenum">6086</span></a>          }
<a name="l6087"><span class="linenum">6087</span></a>  
<a name="l6088"><span class="linenum">6088</span></a>          <a class="function" onClick="logFunction('blocked_emails_display')" href="../../../_functions/blocked_emails_display.html" onMouseOver="funcPopup(event,'blocked_emails_display')">blocked_emails_display</a>();
<a name="l6089"><span class="linenum">6089</span></a>  
<a name="l6090"><span class="linenum">6090</span></a>          if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> ) echo '&lt;p&gt;', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Done.'), &quot;&lt;/p&gt;\n&lt;/div&gt;\n&quot;;
<a name="l6091"><span class="linenum">6091</span></a>      }
<a name="l6092"><span class="linenum">6092</span></a>  
<a name="l6093"><span class="linenum">6093</span></a>  
<a name="l6094"><span class="linenum">6094</span></a>      <span class="comment">/**</span>
<a name="l6095"><span class="linenum">6095</span></a>  <span class="comment">     * Send outbound pings for a post</span>
<a name="l6096"><span class="linenum">6096</span></a>  <span class="comment">     *</span>
<a name="l6097"><span class="linenum">6097</span></a>  <span class="comment">     * @param boolean give more info messages (we want to avoid that when we save &amp; continue editing)</span>
<a name="l6098"><span class="linenum">6098</span></a>  <span class="comment">     */</span>
<a name="l6099"><span class="linenum">6099</span></a>  	function <a class="function" onClick="logFunction('send_outbound_pings')" href="../../../_functions/send_outbound_pings.html" onMouseOver="funcPopup(event,'send_outbound_pings')">send_outbound_pings</a>( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> = true )
<a name="l6100"><span class="linenum">6100</span></a>      {
<a name="l6101"><span class="linenum">6101</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>, <a class="var it1708" onMouseOver="hilite(1708)" onMouseOut="lolite()" onClick="logVariable('evonetsrv_host')" href="../../../_variables/evonetsrv_host.html">$evonetsrv_host</a>, <a class="var it1709" onMouseOver="hilite(1709)" onMouseOut="lolite()" onClick="logVariable('test_pings_for_real')" href="../../../_variables/test_pings_for_real.html">$test_pings_for_real</a>;
<a name="l6102"><span class="linenum">6102</span></a>  
<a name="l6103"><span class="linenum">6103</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('xmlrpc/model/_xmlrpc.funcs.php');
<a name="l6104"><span class="linenum">6104</span></a>  
<a name="l6105"><span class="linenum">6105</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l6106"><span class="linenum">6106</span></a>          <a class="var it1710" onMouseOver="hilite(1710)" onMouseOut="lolite()" onClick="logVariable('ping_plugins')" href="../../../_variables/ping_plugins.html">$ping_plugins</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'ping_plugins' ) );
<a name="l6107"><span class="linenum">6107</span></a>          <a class="var it1710" onMouseOver="hilite(1710)" onMouseOut="lolite()" onClick="logVariable('ping_plugins')" href="../../../_variables/ping_plugins.html">$ping_plugins</a> = empty( <a class="var it1710" onMouseOver="hilite(1710)" onMouseOut="lolite()" onClick="logVariable('ping_plugins')" href="../../../_variables/ping_plugins.html">$ping_plugins</a> ) ? array() :  <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'ping_plugins' ) ) );
<a name="l6108"><span class="linenum">6108</span></a>  
<a name="l6109"><span class="linenum">6109</span></a>  <span class="comment">        // init result</span>
<a name="l6110"><span class="linenum">6110</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = true;
<a name="l6111"><span class="linenum">6111</span></a>  
<a name="l6112"><span class="linenum">6112</span></a>          if( (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^http://localhost[/:]#', <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>)
<a name="l6113"><span class="linenum">6113</span></a>                  || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^\w+://[^/]+\.local/~', <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a> ) ) <span class="comment">/* domain ending in &quot;.local&quot; */</span>
<a name="l6114"><span class="linenum">6114</span></a>              &amp;&amp; <a class="var it1708" onMouseOver="hilite(1708)" onMouseOut="lolite()" onClick="logVariable('evonetsrv_host')" href="../../../_variables/evonetsrv_host.html">$evonetsrv_host</a> != 'localhost'    // OK if we are pinging locally anyway ;)
<a name="l6115"><span class="linenum">6115</span></a>              &amp;&amp; empty(<a class="var it1709" onMouseOver="hilite(1709)" onMouseOut="lolite()" onClick="logVariable('test_pings_for_real')" href="../../../_variables/test_pings_for_real.html">$test_pings_for_real</a>) )
<a name="l6116"><span class="linenum">6116</span></a>          {
<a name="l6117"><span class="linenum">6117</span></a>              if( <a class="var it1038" onMouseOver="hilite(1038)" onMouseOut="lolite()" onClick="logVariable('verbose')" href="../../../_variables/verbose.html">$verbose</a> )
<a name="l6118"><span class="linenum">6118</span></a>              {
<a name="l6119"><span class="linenum">6119</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Skipping pings (Running on localhost).'), 'note' );
<a name="l6120"><span class="linenum">6120</span></a>              }
<a name="l6121"><span class="linenum">6121</span></a>              return false;
<a name="l6122"><span class="linenum">6122</span></a>          }
<a name="l6123"><span class="linenum">6123</span></a>          else foreach( <a class="var it1710" onMouseOver="hilite(1710)" onMouseOut="lolite()" onClick="logVariable('ping_plugins')" href="../../../_variables/ping_plugins.html">$ping_plugins</a> as <a class="var it1711" onMouseOver="hilite(1711)" onMouseOut="lolite()" onClick="logVariable('plugin_code')" href="../../../_variables/plugin_code.html">$plugin_code</a> )
<a name="l6124"><span class="linenum">6124</span></a>          {
<a name="l6125"><span class="linenum">6125</span></a>              <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;get_by_code(<a class="var it1711" onMouseOver="hilite(1711)" onMouseOut="lolite()" onClick="logVariable('plugin_code')" href="../../../_variables/plugin_code.html">$plugin_code</a>);
<a name="l6126"><span class="linenum">6126</span></a>  
<a name="l6127"><span class="linenum">6127</span></a>              if( <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a> )
<a name="l6128"><span class="linenum">6128</span></a>              {
<a name="l6129"><span class="linenum">6129</span></a>                  <a class="var it1712" onMouseOver="hilite(1712)" onMouseOut="lolite()" onClick="logVariable('ping_messages')" href="../../../_variables/ping_messages.html">$ping_messages</a> = array();
<a name="l6130"><span class="linenum">6130</span></a>                  <a class="var it1712" onMouseOver="hilite(1712)" onMouseOut="lolite()" onClick="logVariable('ping_messages')" href="../../../_variables/ping_messages.html">$ping_messages</a>[] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pinging %s...'), <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ping_service_name')" class="var it10689" onMouseOver="hilite(10689)" onMouseOut="lolite()" href="../../../_variables/ping_service_name.html">ping_service_name</a> );
<a name="l6131"><span class="linenum">6131</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'xmlrpcresp' =&gt; NULL, 'display' =&gt; false );
<a name="l6132"><span class="linenum">6132</span></a>  
<a name="l6133"><span class="linenum">6133</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> &amp;&amp; ( <a class="var it1358" onMouseOver="hilite(1358)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('ItemSendPing')" href="../../../_functions/itemsendping.html" onMouseOver="funcPopup(event,'itemsendping')">ItemSendPing</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) );
<a name="l6134"><span class="linenum">6134</span></a>  
<a name="l6135"><span class="linenum">6135</span></a>                  if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xmlrpcresp'] ) )
<a name="l6136"><span class="linenum">6136</span></a>                  {
<a name="l6137"><span class="linenum">6137</span></a>                      if( <a class="phpfunction" onClick="logFunction('is_a')" href="../../../_functions/is_a.html" onMouseOver="phpfuncPopup(event,'is_a')">is_a</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xmlrpcresp'], 'xmlrpcresp' ) )
<a name="l6138"><span class="linenum">6138</span></a>                      {
<a name="l6139"><span class="linenum">6139</span></a>  <span class="comment">                        // dh&gt; TODO: let xmlrpc_displayresult() handle $Messages (e.g. &quot;error&quot;, but should be connected/after the &quot;Pinging %s...&quot; from above)</span>
<a name="l6140"><span class="linenum">6140</span></a>                          <a class="phpfunction" onClick="logFunction('ob_start')" href="../../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l6141"><span class="linenum">6141</span></a>                          <a class="function" onClick="logFunction('xmlrpc_displayresult')" href="../../../_functions/xmlrpc_displayresult.html" onMouseOver="funcPopup(event,'xmlrpc_displayresult')">xmlrpc_displayresult</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xmlrpcresp'], true );
<a name="l6142"><span class="linenum">6142</span></a>                          <a class="var it1712" onMouseOver="hilite(1712)" onMouseOut="lolite()" onClick="logVariable('ping_messages')" href="../../../_variables/ping_messages.html">$ping_messages</a>[] = <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../../../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>();
<a name="l6143"><span class="linenum">6143</span></a>                          <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../../../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l6144"><span class="linenum">6144</span></a>                      }
<a name="l6145"><span class="linenum">6145</span></a>                      else
<a name="l6146"><span class="linenum">6146</span></a>                      {
<a name="l6147"><span class="linenum">6147</span></a>                          <a class="var it1712" onMouseOver="hilite(1712)" onMouseOut="lolite()" onClick="logVariable('ping_messages')" href="../../../_variables/ping_messages.html">$ping_messages</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xmlrpcresp'];
<a name="l6148"><span class="linenum">6148</span></a>                      }
<a name="l6149"><span class="linenum">6149</span></a>                  }
<a name="l6150"><span class="linenum">6150</span></a>  
<a name="l6151"><span class="linenum">6151</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&lt;br /&gt;', <a class="var it1712" onMouseOver="hilite(1712)" onMouseOut="lolite()" onClick="logVariable('ping_messages')" href="../../../_variables/ping_messages.html">$ping_messages</a> ), 'note' );
<a name="l6152"><span class="linenum">6152</span></a>              }
<a name="l6153"><span class="linenum">6153</span></a>          }
<a name="l6154"><span class="linenum">6154</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l6155"><span class="linenum">6155</span></a>      }
<a name="l6156"><span class="linenum">6156</span></a>  
<a name="l6157"><span class="linenum">6157</span></a>  
<a name="l6158"><span class="linenum">6158</span></a>      <span class="comment">/**</span>
<a name="l6159"><span class="linenum">6159</span></a>  <span class="comment">     * Callback user for footer()</span>
<a name="l6160"><span class="linenum">6160</span></a>  <span class="comment">     */</span>
<a name="l6161"><span class="linenum">6161</span></a>  	function <a class="function" onClick="logFunction('replace_callback')" href="../../../_functions/replace_callback.html" onMouseOver="funcPopup(event,'replace_callback')">replace_callback</a>( <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> )
<a name="l6162"><span class="linenum">6162</span></a>      {
<a name="l6163"><span class="linenum">6163</span></a>          switch( <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[1] )
<a name="l6164"><span class="linenum">6164</span></a>          {
<a name="l6165"><span class="linenum">6165</span></a>              case 'perm_url':
<a name="l6166"><span class="linenum">6166</span></a>              case 'item_perm_url':
<a name="l6167"><span class="linenum">6167</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l6168"><span class="linenum">6168</span></a>  
<a name="l6169"><span class="linenum">6169</span></a>              case 'title':
<a name="l6170"><span class="linenum">6170</span></a>              case 'item_title':
<a name="l6171"><span class="linenum">6171</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>;
<a name="l6172"><span class="linenum">6172</span></a>  
<a name="l6173"><span class="linenum">6173</span></a>              case 'excerpt':
<a name="l6174"><span class="linenum">6174</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_excerpt2')" href="../../../_functions/get_excerpt2.html" onMouseOver="funcPopup(event,'get_excerpt2')">get_excerpt2</a>();
<a name="l6175"><span class="linenum">6175</span></a>  
<a name="l6176"><span class="linenum">6176</span></a>              case 'author':
<a name="l6177"><span class="linenum">6177</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('t_author');
<a name="l6178"><span class="linenum">6178</span></a>  
<a name="l6179"><span class="linenum">6179</span></a>              case 'author_login':
<a name="l6180"><span class="linenum">6180</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_creator_login')" href="../../../_functions/get_creator_login.html" onMouseOver="funcPopup(event,'get_creator_login')">get_creator_login</a>();
<a name="l6181"><span class="linenum">6181</span></a>  
<a name="l6182"><span class="linenum">6182</span></a>              default:
<a name="l6183"><span class="linenum">6183</span></a>                  return <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[1];
<a name="l6184"><span class="linenum">6184</span></a>          }
<a name="l6185"><span class="linenum">6185</span></a>      }
<a name="l6186"><span class="linenum">6186</span></a>  
<a name="l6187"><span class="linenum">6187</span></a>      <span class="comment">/**</span>
<a name="l6188"><span class="linenum">6188</span></a>  <span class="comment">     * Get a member param by its name</span>
<a name="l6189"><span class="linenum">6189</span></a>  <span class="comment">     *</span>
<a name="l6190"><span class="linenum">6190</span></a>  <span class="comment">     * @param mixed Name of parameter</span>
<a name="l6191"><span class="linenum">6191</span></a>  <span class="comment">     * @return mixed Value of parameter</span>
<a name="l6192"><span class="linenum">6192</span></a>  <span class="comment">     */</span>
<a name="l6193"><span class="linenum">6193</span></a>  	function <a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l6194"><span class="linenum">6194</span></a>      {
<a name="l6195"><span class="linenum">6195</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l6196"><span class="linenum">6196</span></a>          {
<a name="l6197"><span class="linenum">6197</span></a>              case 't_author':
<a name="l6198"><span class="linenum">6198</span></a>  <span class="comment">                // Text: author</span>
<a name="l6199"><span class="linenum">6199</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_creator_User();
<a name="l6200"><span class="linenum">6200</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/creator_User.html">creator_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'preferredname' );
<a name="l6201"><span class="linenum">6201</span></a>  
<a name="l6202"><span class="linenum">6202</span></a>              case 't_assigned_to':
<a name="l6203"><span class="linenum">6203</span></a>  <span class="comment">                // Text: assignee</span>
<a name="l6204"><span class="linenum">6204</span></a>                  if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assigned_User')" href="../../../_functions/get_assigned_user.html" onMouseOver="funcPopup(event,'get_assigned_user')">get_assigned_User</a>() )
<a name="l6205"><span class="linenum">6205</span></a>                  {
<a name="l6206"><span class="linenum">6206</span></a>                      return '';
<a name="l6207"><span class="linenum">6207</span></a>                  }
<a name="l6208"><span class="linenum">6208</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assigned_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assigned_User.html">assigned_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'preferredname' );
<a name="l6209"><span class="linenum">6209</span></a>  
<a name="l6210"><span class="linenum">6210</span></a>              case 't_status':
<a name="l6211"><span class="linenum">6211</span></a>  <span class="comment">                // Text status:</span>
<a name="l6212"><span class="linenum">6212</span></a>                  <a class="var it1428" onMouseOver="hilite(1428)" onMouseOut="lolite()" onClick="logVariable('post_statuses')" href="../../../_variables/post_statuses.html">$post_statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>();
<a name="l6213"><span class="linenum">6213</span></a>                  return <a class="var it1428" onMouseOver="hilite(1428)" onMouseOut="lolite()" onClick="logVariable('post_statuses')" href="../../../_variables/post_statuses.html">$post_statuses</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>];
<a name="l6214"><span class="linenum">6214</span></a>  
<a name="l6215"><span class="linenum">6215</span></a>              case 't_extra_status':
<a name="l6216"><span class="linenum">6216</span></a>                  <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('ItemStatusCache')" href="../../../_variables/ItemStatusCache.html">$ItemStatusCache</a> = &amp; get_ItemStatusCache();
<a name="l6217"><span class="linenum">6217</span></a>                  if( ! (<a class="var it1714" onMouseOver="hilite(1714)" onMouseOut="lolite()" onClick="logVariable('Element')" href="../../../_variables/Element.html">$Element</a> = &amp; <a class="var it1213" onMouseOver="hilite(1213)" onMouseOut="lolite()" onClick="logVariable('ItemStatusCache')" href="../../../_variables/ItemStatusCache.html">$ItemStatusCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pst_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pst_ID.html">pst_ID</a>, true, false ) ) )
<a name="l6218"><span class="linenum">6218</span></a>                  { // No status:
<a name="l6219"><span class="linenum">6219</span></a>                      return '';
<a name="l6220"><span class="linenum">6220</span></a>                  }
<a name="l6221"><span class="linenum">6221</span></a>                  return <a class="var it1714" onMouseOver="hilite(1714)" onMouseOut="lolite()" onClick="logVariable('Element')" href="../../../_variables/Element.html">$Element</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l6222"><span class="linenum">6222</span></a>  
<a name="l6223"><span class="linenum">6223</span></a>              case 't_type':
<a name="l6224"><span class="linenum">6224</span></a>  <span class="comment">                // Post type (name):</span>
<a name="l6225"><span class="linenum">6225</span></a>                  if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>) )
<a name="l6226"><span class="linenum">6226</span></a>                  {
<a name="l6227"><span class="linenum">6227</span></a>                      return '';
<a name="l6228"><span class="linenum">6228</span></a>                  }
<a name="l6229"><span class="linenum">6229</span></a>  
<a name="l6230"><span class="linenum">6230</span></a>                  <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a> = &amp; get_ItemTypeCache();
<a name="l6231"><span class="linenum">6231</span></a>                  <a class="var it1715" onMouseOver="hilite(1715)" onMouseOut="lolite()" onClick="logVariable('type_Element')" href="../../../_variables/type_Element.html">$type_Element</a> = &amp; <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a> );
<a name="l6232"><span class="linenum">6232</span></a>                  return <a class="var it1715" onMouseOver="hilite(1715)" onMouseOut="lolite()" onClick="logVariable('type_Element')" href="../../../_variables/type_Element.html">$type_Element</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l6233"><span class="linenum">6233</span></a>  
<a name="l6234"><span class="linenum">6234</span></a>              case 't_priority':
<a name="l6235"><span class="linenum">6235</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('priorities')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/priorities.html">priorities</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('priority')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/priority.html">priority</a> ];
<a name="l6236"><span class="linenum">6236</span></a>  
<a name="l6237"><span class="linenum">6237</span></a>              case 'pingsdone':
<a name="l6238"><span class="linenum">6238</span></a>  <span class="comment">                // Deprecated by fp 2006-08-21</span>
<a name="l6239"><span class="linenum">6239</span></a>                  return (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('post_notifications_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/post_notifications_status.html">post_notifications_status</a> == 'finished');
<a name="l6240"><span class="linenum">6240</span></a>  
<a name="l6241"><span class="linenum">6241</span></a>              case 'excerpt':
<a name="l6242"><span class="linenum">6242</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_excerpt2')" href="../../../_functions/get_excerpt2.html" onMouseOver="funcPopup(event,'get_excerpt2')">get_excerpt2</a>();
<a name="l6243"><span class="linenum">6243</span></a>          }
<a name="l6244"><span class="linenum">6244</span></a>  
<a name="l6245"><span class="linenum">6245</span></a>          return parent::<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> );
<a name="l6246"><span class="linenum">6246</span></a>      }
<a name="l6247"><span class="linenum">6247</span></a>  
<a name="l6248"><span class="linenum">6248</span></a>  
<a name="l6249"><span class="linenum">6249</span></a>      <span class="comment">/**</span>
<a name="l6250"><span class="linenum">6250</span></a>  <span class="comment">     * Assign the item to the first category we find in the requested collection</span>
<a name="l6251"><span class="linenum">6251</span></a>  <span class="comment">     *</span>
<a name="l6252"><span class="linenum">6252</span></a>  <span class="comment">     * @param integer $collection_ID</span>
<a name="l6253"><span class="linenum">6253</span></a>  <span class="comment">     */</span>
<a name="l6254"><span class="linenum">6254</span></a>  	function <a class="function" onClick="logFunction('assign_to_first_cat_for_collection')" href="../../../_functions/assign_to_first_cat_for_collection.html" onMouseOver="funcPopup(event,'assign_to_first_cat_for_collection')">assign_to_first_cat_for_collection</a>( <a class="var it1716" onMouseOver="hilite(1716)" onMouseOut="lolite()" onClick="logVariable('collection_ID')" href="../../../_variables/collection_ID.html">$collection_ID</a> )
<a name="l6255"><span class="linenum">6255</span></a>      {
<a name="l6256"><span class="linenum">6256</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6257"><span class="linenum">6257</span></a>  
<a name="l6258"><span class="linenum">6258</span></a>  <span class="comment">        // Get the first category ID for the collection ID param</span>
<a name="l6259"><span class="linenum">6259</span></a>          <a class="var it1397" onMouseOver="hilite(1397)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( '
<a name="l6260"><span class="linenum">6260</span></a>                  SELECT cat_ID
<a name="l6261"><span class="linenum">6261</span></a>                      FROM T_categories
<a name="l6262"><span class="linenum">6262</span></a>                   WHERE cat_blog_ID = '.<a class="var it1716" onMouseOver="hilite(1716)" onMouseOut="lolite()" onClick="logVariable('collection_ID')" href="../../../_variables/collection_ID.html">$collection_ID</a>.'
<a name="l6263"><span class="linenum">6263</span></a>                   ORDER BY cat_ID ASC
<a name="l6264"><span class="linenum">6264</span></a>                   LIMIT 1' );
<a name="l6265"><span class="linenum">6265</span></a>  
<a name="l6266"><span class="linenum">6266</span></a>  <span class="comment">        // Set to the item the first category we got</span>
<a name="l6267"><span class="linenum">6267</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'main_cat_ID', <a class="var it1397" onMouseOver="hilite(1397)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> );
<a name="l6268"><span class="linenum">6268</span></a>      }
<a name="l6269"><span class="linenum">6269</span></a>  
<a name="l6270"><span class="linenum">6270</span></a>  
<a name="l6271"><span class="linenum">6271</span></a>      <span class="comment">/**</span>
<a name="l6272"><span class="linenum">6272</span></a>  <span class="comment">     * Get the list of renderers for this Item.</span>
<a name="l6273"><span class="linenum">6273</span></a>  <span class="comment">     * @return array</span>
<a name="l6274"><span class="linenum">6274</span></a>  <span class="comment">     */</span>
<a name="l6275"><span class="linenum">6275</span></a>  	function <a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>()
<a name="l6276"><span class="linenum">6276</span></a>      {
<a name="l6277"><span class="linenum">6277</span></a>          return <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '.', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers.html">renderers</a> );
<a name="l6278"><span class="linenum">6278</span></a>      }
<a name="l6279"><span class="linenum">6279</span></a>  
<a name="l6280"><span class="linenum">6280</span></a>  
<a name="l6281"><span class="linenum">6281</span></a>      <span class="comment">/**</span>
<a name="l6282"><span class="linenum">6282</span></a>  <span class="comment">     * Get the list of validated renderers for this Item. This includes stealth plugins etc.</span>
<a name="l6283"><span class="linenum">6283</span></a>  <span class="comment">     * @return array List of validated renderer codes</span>
<a name="l6284"><span class="linenum">6284</span></a>  <span class="comment">     */</span>
<a name="l6285"><span class="linenum">6285</span></a>  	function <a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>()
<a name="l6286"><span class="linenum">6286</span></a>      {
<a name="l6287"><span class="linenum">6287</span></a>          if( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a>) )
<a name="l6288"><span class="linenum">6288</span></a>          {
<a name="l6289"><span class="linenum">6289</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l6290"><span class="linenum">6290</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('validate_renderer_list')" href="../../../_functions/validate_renderer_list.html" onMouseOver="funcPopup(event,'validate_renderer_list')">validate_renderer_list</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>(), array( 'Item' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l6291"><span class="linenum">6291</span></a>          }
<a name="l6292"><span class="linenum">6292</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a>;
<a name="l6293"><span class="linenum">6293</span></a>      }
<a name="l6294"><span class="linenum">6294</span></a>  
<a name="l6295"><span class="linenum">6295</span></a>  
<a name="l6296"><span class="linenum">6296</span></a>      <span class="comment">/**</span>
<a name="l6297"><span class="linenum">6297</span></a>  <span class="comment">     * Add a renderer (by code) to the Item.</span>
<a name="l6298"><span class="linenum">6298</span></a>  <span class="comment">     * @param string Renderer code to add for this item</span>
<a name="l6299"><span class="linenum">6299</span></a>  <span class="comment">     * @return boolean True if renderers have changed</span>
<a name="l6300"><span class="linenum">6300</span></a>  <span class="comment">     */</span>
<a name="l6301"><span class="linenum">6301</span></a>  	function <a class="function" onClick="logFunction('add_renderer')" href="../../../_functions/add_renderer.html" onMouseOver="funcPopup(event,'add_renderer')">add_renderer</a>( <a class="var it1718" onMouseOver="hilite(1718)" onMouseOut="lolite()" onClick="logVariable('renderer_code')" href="../../../_variables/renderer_code.html">$renderer_code</a> )
<a name="l6302"><span class="linenum">6302</span></a>      {
<a name="l6303"><span class="linenum">6303</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>();
<a name="l6304"><span class="linenum">6304</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1718" onMouseOver="hilite(1718)" onMouseOut="lolite()" onClick="logVariable('renderer_code')" href="../../../_variables/renderer_code.html">$renderer_code</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) )
<a name="l6305"><span class="linenum">6305</span></a>          {
<a name="l6306"><span class="linenum">6306</span></a>              return false;
<a name="l6307"><span class="linenum">6307</span></a>          }
<a name="l6308"><span class="linenum">6308</span></a>  
<a name="l6309"><span class="linenum">6309</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>[] = <a class="var it1718" onMouseOver="hilite(1718)" onMouseOut="lolite()" onClick="logVariable('renderer_code')" href="../../../_variables/renderer_code.html">$renderer_code</a>;
<a name="l6310"><span class="linenum">6310</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> );
<a name="l6311"><span class="linenum">6311</span></a>  
<a name="l6312"><span class="linenum">6312</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a> = NULL;
<a name="l6313"><span class="linenum">6313</span></a>          return true;
<a name="l6314"><span class="linenum">6314</span></a>      }
<a name="l6315"><span class="linenum">6315</span></a>  
<a name="l6316"><span class="linenum">6316</span></a>  
<a name="l6317"><span class="linenum">6317</span></a>      <span class="comment">/**</span>
<a name="l6318"><span class="linenum">6318</span></a>  <span class="comment">     * Remove a renderer (by code) from the Item.</span>
<a name="l6319"><span class="linenum">6319</span></a>  <span class="comment">     * @param string Renderer code to remove for this item</span>
<a name="l6320"><span class="linenum">6320</span></a>  <span class="comment">     * @return boolean True if renderers have changed</span>
<a name="l6321"><span class="linenum">6321</span></a>  <span class="comment">     */</span>
<a name="l6322"><span class="linenum">6322</span></a>  	function <a class="function" onClick="logFunction('remove_renderer')" href="../../../_functions/remove_renderer.html" onMouseOver="funcPopup(event,'remove_renderer')">remove_renderer</a>( <a class="var it1718" onMouseOver="hilite(1718)" onMouseOut="lolite()" onClick="logVariable('renderer_code')" href="../../../_variables/renderer_code.html">$renderer_code</a> )
<a name="l6323"><span class="linenum">6323</span></a>      {
<a name="l6324"><span class="linenum">6324</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = false;
<a name="l6325"><span class="linenum">6325</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>();
<a name="l6326"><span class="linenum">6326</span></a>          while( ( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( <a class="var it1718" onMouseOver="hilite(1718)" onMouseOut="lolite()" onClick="logVariable('renderer_code')" href="../../../_variables/renderer_code.html">$renderer_code</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) ) !== false )
<a name="l6327"><span class="linenum">6327</span></a>          {
<a name="l6328"><span class="linenum">6328</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = true;
<a name="l6329"><span class="linenum">6329</span></a>              unset(<a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>[<a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>]);
<a name="l6330"><span class="linenum">6330</span></a>          }
<a name="l6331"><span class="linenum">6331</span></a>  
<a name="l6332"><span class="linenum">6332</span></a>          if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> )
<a name="l6333"><span class="linenum">6333</span></a>          {
<a name="l6334"><span class="linenum">6334</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> );
<a name="l6335"><span class="linenum">6335</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a> = NULL;
<a name="l6336"><span class="linenum">6336</span></a>  <span class="comment">            //echo 'Removed renderer '.$renderer_code;</span>
<a name="l6337"><span class="linenum">6337</span></a>          }
<a name="l6338"><span class="linenum">6338</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l6339"><span class="linenum">6339</span></a>      }
<a name="l6340"><span class="linenum">6340</span></a>  
<a name="l6341"><span class="linenum">6341</span></a>  
<a name="l6342"><span class="linenum">6342</span></a>      <span class="comment">/**</span>
<a name="l6343"><span class="linenum">6343</span></a>  <span class="comment">     * Get the item tinyslug. If not exists -&gt; create new</span>
<a name="l6344"><span class="linenum">6344</span></a>  <span class="comment">     *</span>
<a name="l6345"><span class="linenum">6345</span></a>  <span class="comment">     * @return string|boolean tinyslug on success, false otherwise</span>
<a name="l6346"><span class="linenum">6346</span></a>  <span class="comment">     */</span>
<a name="l6347"><span class="linenum">6347</span></a>  	function <a class="function" onClick="logFunction('get_tinyslug')" href="../../../_functions/get_tinyslug.html" onMouseOver="funcPopup(event,'get_tinyslug')">get_tinyslug</a>()
<a name="l6348"><span class="linenum">6348</span></a>      {
<a name="l6349"><span class="linenum">6349</span></a>          global <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>;
<a name="l6350"><span class="linenum">6350</span></a>  
<a name="l6351"><span class="linenum">6351</span></a>          <a class="var it1719" onMouseOver="hilite(1719)" onMouseOut="lolite()" onClick="logVariable('tinyslug_ID')" href="../../../_variables/tinyslug_ID.html">$tinyslug_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tiny_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tiny_slug_ID.html">tiny_slug_ID</a>;
<a name="l6352"><span class="linenum">6352</span></a>          if( <a class="var it1719" onMouseOver="hilite(1719)" onMouseOut="lolite()" onClick="logVariable('tinyslug_ID')" href="../../../_variables/tinyslug_ID.html">$tinyslug_ID</a> != NULL )
<a name="l6353"><span class="linenum">6353</span></a>          { // the tiny slug for this item was already created
<a name="l6354"><span class="linenum">6354</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('SlugCache')" href="../../../_variables/SlugCache.html">$SlugCache</a> = &amp; get_SlugCache();
<a name="l6355"><span class="linenum">6355</span></a>              <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a> = &amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('SlugCache')" href="../../../_variables/SlugCache.html">$SlugCache</a>-&gt;get_by_ID( <a class="var it1719" onMouseOver="hilite(1719)" onMouseOut="lolite()" onClick="logVariable('tinyslug_ID')" href="../../../_variables/tinyslug_ID.html">$tinyslug_ID</a>, false, false );
<a name="l6356"><span class="linenum">6356</span></a>              return <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a> === false ? false : <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' );
<a name="l6357"><span class="linenum">6357</span></a>          }
<a name="l6358"><span class="linenum">6358</span></a>          elseif( ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &gt; 0 ) &amp;&amp; ( ! <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a> ) )
<a name="l6359"><span class="linenum">6359</span></a>          { // create new tiny Slug for this item
<a name="l6360"><span class="linenum">6360</span></a>  <span class="comment">            // Note: This may happen only in case of posts created before the tiny slug was introduced</span>
<a name="l6361"><span class="linenum">6361</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6362"><span class="linenum">6362</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'slugs/model/_slug.funcs.php' );
<a name="l6363"><span class="linenum">6363</span></a>  
<a name="l6364"><span class="linenum">6364</span></a>              <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Slug')" href="../../../_classes/slug.html" onMouseOver="classPopup(event,'slug')">Slug</a>();
<a name="l6365"><span class="linenum">6365</span></a>              <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="function" onClick="logFunction('getnext_tinyurl')" href="../../../_functions/getnext_tinyurl.html" onMouseOver="funcPopup(event,'getnext_tinyurl')">getnext_tinyurl</a>() );
<a name="l6366"><span class="linenum">6366</span></a>              <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'itm_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l6367"><span class="linenum">6367</span></a>              <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'type', 'item' );
<a name="l6368"><span class="linenum">6368</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l6369"><span class="linenum">6369</span></a>              if( ! <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() )
<a name="l6370"><span class="linenum">6370</span></a>              { // Slug dbinsert failed
<a name="l6371"><span class="linenum">6371</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l6372"><span class="linenum">6372</span></a>                  return false;
<a name="l6373"><span class="linenum">6373</span></a>              }
<a name="l6374"><span class="linenum">6374</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tiny_slug_ID', <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a onClick="logVariable('ID')" class="var it10828" onMouseOver="hilite(10828)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l6375"><span class="linenum">6375</span></a>  
<a name="l6376"><span class="linenum">6376</span></a>  <span class="comment">            // Update Item preserving mod date:</span>
<a name="l6377"><span class="linenum">6377</span></a>              if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( false ) )
<a name="l6378"><span class="linenum">6378</span></a>              { // Item dbupdate failed
<a name="l6379"><span class="linenum">6379</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l6380"><span class="linenum">6380</span></a>                  return false;
<a name="l6381"><span class="linenum">6381</span></a>              }
<a name="l6382"><span class="linenum">6382</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l6383"><span class="linenum">6383</span></a>  
<a name="l6384"><span class="linenum">6384</span></a>  <span class="comment">            // update last tinyurl value on database</span>
<a name="l6385"><span class="linenum">6385</span></a>  <span class="comment">            // Note: This doesn't have to be part of the above transaction, no problem if it doesn't succeed to update, or if override a previously updated value.</span>
<a name="l6386"><span class="linenum">6386</span></a>              global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l6387"><span class="linenum">6387</span></a>              <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'tinyurl', <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' ) );
<a name="l6388"><span class="linenum">6388</span></a>              <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l6389"><span class="linenum">6389</span></a>  
<a name="l6390"><span class="linenum">6390</span></a>              return <a class="var it1721" onMouseOver="hilite(1721)" onMouseOut="lolite()" onClick="logVariable('Slug')" href="../../../_variables/Slug.html">$Slug</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' );
<a name="l6391"><span class="linenum">6391</span></a>          }
<a name="l6392"><span class="linenum">6392</span></a>  
<a name="l6393"><span class="linenum">6393</span></a>          return false;
<a name="l6394"><span class="linenum">6394</span></a>      }
<a name="l6395"><span class="linenum">6395</span></a>  
<a name="l6396"><span class="linenum">6396</span></a>  
<a name="l6397"><span class="linenum">6397</span></a>      <span class="comment">/**</span>
<a name="l6398"><span class="linenum">6398</span></a>  <span class="comment">     * Get all slugs of this Item, except of tiny slug</span>
<a name="l6399"><span class="linenum">6399</span></a>  <span class="comment">     *</span>
<a name="l6400"><span class="linenum">6400</span></a>  <span class="comment">     * @param string Separator</span>
<a name="l6401"><span class="linenum">6401</span></a>  <span class="comment">     * @return string Slugs list</span>
<a name="l6402"><span class="linenum">6402</span></a>  <span class="comment">     */</span>
<a name="l6403"><span class="linenum">6403</span></a>  	function <a class="function" onClick="logFunction('get_slugs')" href="../../../_functions/get_slugs.html" onMouseOver="funcPopup(event,'get_slugs')">get_slugs</a>( <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a> = ', ' )
<a name="l6404"><span class="linenum">6404</span></a>      {
<a name="l6405"><span class="linenum">6405</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l6406"><span class="linenum">6406</span></a>          { // New creating Item
<a name="l6407"><span class="linenum">6407</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('urltitle');
<a name="l6408"><span class="linenum">6408</span></a>          }
<a name="l6409"><span class="linenum">6409</span></a>  
<a name="l6410"><span class="linenum">6410</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6411"><span class="linenum">6411</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>( 'Get slugs of the Item' );
<a name="l6412"><span class="linenum">6412</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'slug_title, IF( slug_ID = '.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('canonical_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/canonical_slug_ID.html">canonical_slug_ID</a> ).', 0, slug_ID ) AS slug_order_num' );
<a name="l6413"><span class="linenum">6413</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_slug' );
<a name="l6414"><span class="linenum">6414</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'slug_itm_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l6415"><span class="linenum">6415</span></a>          if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tiny_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tiny_slug_ID.html">tiny_slug_ID</a> ) )
<a name="l6416"><span class="linenum">6416</span></a>          { // Exclude tiny slug from list
<a name="l6417"><span class="linenum">6417</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'slug_ID != '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tiny_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tiny_slug_ID.html">tiny_slug_ID</a> ) );
<a name="l6418"><span class="linenum">6418</span></a>          }
<a name="l6419"><span class="linenum">6419</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'slug_order_num' );
<a name="l6420"><span class="linenum">6420</span></a>          <a class="var it1723" onMouseOver="hilite(1723)" onMouseOut="lolite()" onClick="logVariable('slugs')" href="../../../_variables/slugs.html">$slugs</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l6421"><span class="linenum">6421</span></a>  
<a name="l6422"><span class="linenum">6422</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a>, <a class="var it1723" onMouseOver="hilite(1723)" onMouseOut="lolite()" onClick="logVariable('slugs')" href="../../../_variables/slugs.html">$slugs</a> );
<a name="l6423"><span class="linenum">6423</span></a>      }
<a name="l6424"><span class="linenum">6424</span></a>  
<a name="l6425"><span class="linenum">6425</span></a>  
<a name="l6426"><span class="linenum">6426</span></a>      <span class="comment">/**</span>
<a name="l6427"><span class="linenum">6427</span></a>  <span class="comment">     * Get the item tiny url</span>
<a name="l6428"><span class="linenum">6428</span></a>  <span class="comment">     * @return string the tiny url on success, empty string otherwise</span>
<a name="l6429"><span class="linenum">6429</span></a>  <span class="comment">     */</span>
<a name="l6430"><span class="linenum">6430</span></a>  	function <a class="function" onClick="logFunction('get_tinyurl')" href="../../../_functions/get_tinyurl.html" onMouseOver="funcPopup(event,'get_tinyurl')">get_tinyurl</a>()
<a name="l6431"><span class="linenum">6431</span></a>      {
<a name="l6432"><span class="linenum">6432</span></a>          if( ( <a class="var it1724" onMouseOver="hilite(1724)" onMouseOut="lolite()" onClick="logVariable('tinyslug')" href="../../../_variables/tinyslug.html">$tinyslug</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tinyslug')" href="../../../_functions/get_tinyslug.html" onMouseOver="funcPopup(event,'get_tinyslug')">get_tinyslug</a>() ) == false )
<a name="l6433"><span class="linenum">6433</span></a>          {
<a name="l6434"><span class="linenum">6434</span></a>              return '';
<a name="l6435"><span class="linenum">6435</span></a>          }
<a name="l6436"><span class="linenum">6436</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l6437"><span class="linenum">6437</span></a>          return <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url'), '/'.<a class="var it1724" onMouseOver="hilite(1724)" onMouseOut="lolite()" onClick="logVariable('tinyslug')" href="../../../_variables/tinyslug.html">$tinyslug</a> );
<a name="l6438"><span class="linenum">6438</span></a>      }
<a name="l6439"><span class="linenum">6439</span></a>  
<a name="l6440"><span class="linenum">6440</span></a>  
<a name="l6441"><span class="linenum">6441</span></a>      <span class="comment">/**</span>
<a name="l6442"><span class="linenum">6442</span></a>  <span class="comment">     * Create and return the item tinyurl link.</span>
<a name="l6443"><span class="linenum">6443</span></a>  <span class="comment">     *</span>
<a name="l6444"><span class="linenum">6444</span></a>  <span class="comment">     * @param array Params:</span>
<a name="l6445"><span class="linenum">6445</span></a>  <span class="comment">     *  - 'before': to display before link</span>
<a name="l6446"><span class="linenum">6446</span></a>  <span class="comment">     *  - 'after': to display after link</span>
<a name="l6447"><span class="linenum">6447</span></a>  <span class="comment">     *  - 'text': link text</span>
<a name="l6448"><span class="linenum">6448</span></a>  <span class="comment">     *  - 'title': link title</span>
<a name="l6449"><span class="linenum">6449</span></a>  <span class="comment">     *  - 'class': class name</span>
<a name="l6450"><span class="linenum">6450</span></a>  <span class="comment">     *  - 'style': link style</span>
<a name="l6451"><span class="linenum">6451</span></a>  <span class="comment">     * @return string the tinyurl link on success, empty string otherwise</span>
<a name="l6452"><span class="linenum">6452</span></a>  <span class="comment">     */</span>
<a name="l6453"><span class="linenum">6453</span></a>  	function <a class="function" onClick="logFunction('get_tinyurl_link')" href="../../../_functions/get_tinyurl_link.html" onMouseOver="funcPopup(event,'get_tinyurl_link')">get_tinyurl_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6454"><span class="linenum">6454</span></a>      {
<a name="l6455"><span class="linenum">6455</span></a>          if( ( <a class="var it1724" onMouseOver="hilite(1724)" onMouseOut="lolite()" onClick="logVariable('tinyslug')" href="../../../_variables/tinyslug.html">$tinyslug</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tinyslug')" href="../../../_functions/get_tinyslug.html" onMouseOver="funcPopup(event,'get_tinyslug')">get_tinyslug</a>() ) == false )
<a name="l6456"><span class="linenum">6456</span></a>          {
<a name="l6457"><span class="linenum">6457</span></a>              return '';
<a name="l6458"><span class="linenum">6458</span></a>          }
<a name="l6459"><span class="linenum">6459</span></a>  
<a name="l6460"><span class="linenum">6460</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l6461"><span class="linenum">6461</span></a>          { // preview..
<a name="l6462"><span class="linenum">6462</span></a>              return false;
<a name="l6463"><span class="linenum">6463</span></a>          }
<a name="l6464"><span class="linenum">6464</span></a>  
<a name="l6465"><span class="linenum">6465</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l6466"><span class="linenum">6466</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6467"><span class="linenum">6467</span></a>                  'before'       =&gt; ' ',
<a name="l6468"><span class="linenum">6468</span></a>                  'after'        =&gt; ' ',
<a name="l6469"><span class="linenum">6469</span></a>                  'text'         =&gt; '#',
<a name="l6470"><span class="linenum">6470</span></a>                  'title'        =&gt; '#',
<a name="l6471"><span class="linenum">6471</span></a>                  'class'        =&gt; '',
<a name="l6472"><span class="linenum">6472</span></a>                  'style'           =&gt; '',
<a name="l6473"><span class="linenum">6473</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6474"><span class="linenum">6474</span></a>  
<a name="l6475"><span class="linenum">6475</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] == '#' )
<a name="l6476"><span class="linenum">6476</span></a>          {
<a name="l6477"><span class="linenum">6477</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This is a tinyurl you can copy/paste into twitter, emails and other places where you need a short link to this post' );
<a name="l6478"><span class="linenum">6478</span></a>          }
<a name="l6479"><span class="linenum">6479</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] == '#' )
<a name="l6480"><span class="linenum">6480</span></a>          {
<a name="l6481"><span class="linenum">6481</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'] = <a class="var it1724" onMouseOver="hilite(1724)" onMouseOut="lolite()" onClick="logVariable('tinyslug')" href="../../../_variables/tinyslug.html">$tinyslug</a>;
<a name="l6482"><span class="linenum">6482</span></a>          }
<a name="l6483"><span class="linenum">6483</span></a>  
<a name="l6484"><span class="linenum">6484</span></a>          <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tinyurl')" href="../../../_functions/get_tinyurl.html" onMouseOver="funcPopup(event,'get_tinyurl')">get_tinyurl</a>();
<a name="l6485"><span class="linenum">6485</span></a>  
<a name="l6486"><span class="linenum">6486</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l6487"><span class="linenum">6487</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../../../_variables/actionurl.html">$actionurl</a>;
<a name="l6488"><span class="linenum">6488</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot; title=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;';
<a name="l6489"><span class="linenum">6489</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l6490"><span class="linenum">6490</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' style=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'].'&quot;';
<a name="l6491"><span class="linenum">6491</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .=  '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'].'&lt;/a&gt;';
<a name="l6492"><span class="linenum">6492</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l6493"><span class="linenum">6493</span></a>  
<a name="l6494"><span class="linenum">6494</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l6495"><span class="linenum">6495</span></a>      }
<a name="l6496"><span class="linenum">6496</span></a>  
<a name="l6497"><span class="linenum">6497</span></a>  
<a name="l6498"><span class="linenum">6498</span></a>      <span class="comment">/**</span>
<a name="l6499"><span class="linenum">6499</span></a>  <span class="comment">     * Display the item tinyurl link</span>
<a name="l6500"><span class="linenum">6500</span></a>  <span class="comment">     */</span>
<a name="l6501"><span class="linenum">6501</span></a>  	function <a class="function" onClick="logFunction('tinyurl_link')" href="../../../_functions/tinyurl_link.html" onMouseOver="funcPopup(event,'tinyurl_link')">tinyurl_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6502"><span class="linenum">6502</span></a>      {
<a name="l6503"><span class="linenum">6503</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tinyurl_link')" href="../../../_functions/get_tinyurl_link.html" onMouseOver="funcPopup(event,'get_tinyurl_link')">get_tinyurl_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6504"><span class="linenum">6504</span></a>      }
<a name="l6505"><span class="linenum">6505</span></a>  
<a name="l6506"><span class="linenum">6506</span></a>  
<a name="l6507"><span class="linenum">6507</span></a>      <span class="comment">/**</span>
<a name="l6508"><span class="linenum">6508</span></a>  <span class="comment">     * Get an url to this item</span>
<a name="l6509"><span class="linenum">6509</span></a>  <span class="comment">     * @param string values:</span>
<a name="l6510"><span class="linenum">6510</span></a>  <span class="comment">     *         - 'admin_view': url to this item admin interface view</span>
<a name="l6511"><span class="linenum">6511</span></a>  <span class="comment">     *         - 'public_view': url to this item public interface view (permanent url)</span>
<a name="l6512"><span class="linenum">6512</span></a>  <span class="comment">     *         - 'edit': url to this item edit screen</span>
<a name="l6513"><span class="linenum">6513</span></a>  <span class="comment">     * @return string the url if exists, empty string otherwise</span>
<a name="l6514"><span class="linenum">6514</span></a>  <span class="comment">     */</span>
<a name="l6515"><span class="linenum">6515</span></a>  	function <a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> )
<a name="l6516"><span class="linenum">6516</span></a>      {
<a name="l6517"><span class="linenum">6517</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l6518"><span class="linenum">6518</span></a>          switch( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> )
<a name="l6519"><span class="linenum">6519</span></a>          {
<a name="l6520"><span class="linenum">6520</span></a>              case 'admin_view':
<a name="l6521"><span class="linenum">6521</span></a>                  return <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l6522"><span class="linenum">6522</span></a>              case 'public_view':
<a name="l6523"><span class="linenum">6523</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l6524"><span class="linenum">6524</span></a>              case 'edit':
<a name="l6525"><span class="linenum">6525</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_edit_url')" href="../../../_functions/get_edit_url.html" onMouseOver="funcPopup(event,'get_edit_url')">get_edit_url</a>();
<a name="l6526"><span class="linenum">6526</span></a>              default:
<a name="l6527"><span class="linenum">6527</span></a>                  return '';
<a name="l6528"><span class="linenum">6528</span></a>          }
<a name="l6529"><span class="linenum">6529</span></a>      }
<a name="l6530"><span class="linenum">6530</span></a>  
<a name="l6531"><span class="linenum">6531</span></a>  
<a name="l6532"><span class="linenum">6532</span></a>      <span class="comment">/**</span>
<a name="l6533"><span class="linenum">6533</span></a>  <span class="comment">     * Get the number of comments on this item</span>
<a name="l6534"><span class="linenum">6534</span></a>  <span class="comment">     *</span>
<a name="l6535"><span class="linenum">6535</span></a>  <span class="comment">     * @param string the status of counted comments</span>
<a name="l6536"><span class="linenum">6536</span></a>  <span class="comment">     * @return integer the number of comments</span>
<a name="l6537"><span class="linenum">6537</span></a>  <span class="comment">     */</span>
<a name="l6538"><span class="linenum">6538</span></a>  	function <a class="function" onClick="logFunction('get_number_of_comments')" href="../../../_functions/get_number_of_comments.html" onMouseOver="funcPopup(event,'get_number_of_comments')">get_number_of_comments</a>( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> = NULL )
<a name="l6539"><span class="linenum">6539</span></a>      {
<a name="l6540"><span class="linenum">6540</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6541"><span class="linenum">6541</span></a>  
<a name="l6542"><span class="linenum">6542</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( comment_ID )
<a name="l6543"><span class="linenum">6543</span></a>                  FROM T_comments
<a name="l6544"><span class="linenum">6544</span></a>                  WHERE comment_item_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l6545"><span class="linenum">6545</span></a>  
<a name="l6546"><span class="linenum">6546</span></a>          if( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> != NULL )
<a name="l6547"><span class="linenum">6547</span></a>          {
<a name="l6548"><span class="linenum">6548</span></a>              <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> .= ' AND comment_status = &quot;'.<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>.'&quot;';
<a name="l6549"><span class="linenum">6549</span></a>          }
<a name="l6550"><span class="linenum">6550</span></a>  
<a name="l6551"><span class="linenum">6551</span></a>          return <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l6552"><span class="linenum">6552</span></a>      }
<a name="l6553"><span class="linenum">6553</span></a>  
<a name="l6554"><span class="linenum">6554</span></a>  
<a name="l6555"><span class="linenum">6555</span></a>      <span class="comment">/**</span>
<a name="l6556"><span class="linenum">6556</span></a>  <span class="comment">     * Get the latest Comment on this Item</span>
<a name="l6557"><span class="linenum">6557</span></a>  <span class="comment">     *</span>
<a name="l6558"><span class="linenum">6558</span></a>  <span class="comment">     * @param string the status of the latest comment</span>
<a name="l6559"><span class="linenum">6559</span></a>  <span class="comment">     * @return Comment</span>
<a name="l6560"><span class="linenum">6560</span></a>  <span class="comment">     */</span>
<a name="l6561"><span class="linenum">6561</span></a>      function &amp; get_latest_Comment( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> = NULL )
<a name="l6562"><span class="linenum">6562</span></a>      {
<a name="l6563"><span class="linenum">6563</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6564"><span class="linenum">6564</span></a>  
<a name="l6565"><span class="linenum">6565</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('latest_Comment')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/latest_Comment.html">latest_Comment</a>) )
<a name="l6566"><span class="linenum">6566</span></a>          {
<a name="l6567"><span class="linenum">6567</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>( 'Get the latest Comment on the Item' );
<a name="l6568"><span class="linenum">6568</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'comment_ID' );
<a name="l6569"><span class="linenum">6569</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments' );
<a name="l6570"><span class="linenum">6570</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'comment_item_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l6571"><span class="linenum">6571</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'comment_type != &quot;meta&quot;' );
<a name="l6572"><span class="linenum">6572</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'comment_date DESC' );
<a name="l6573"><span class="linenum">6573</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('LIMIT')" href="../../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">LIMIT</a>( '1' );
<a name="l6574"><span class="linenum">6574</span></a>  
<a name="l6575"><span class="linenum">6575</span></a>              if( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> != NULL )
<a name="l6576"><span class="linenum">6576</span></a>              {
<a name="l6577"><span class="linenum">6577</span></a>                  <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'comment_status = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ) );
<a name="l6578"><span class="linenum">6578</span></a>              }
<a name="l6579"><span class="linenum">6579</span></a>  
<a name="l6580"><span class="linenum">6580</span></a>              if( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../_variables/comment_ID.html">$comment_ID</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) )
<a name="l6581"><span class="linenum">6581</span></a>              {
<a name="l6582"><span class="linenum">6582</span></a>                  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l6583"><span class="linenum">6583</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('latest_Comment')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/latest_Comment.html">latest_Comment</a> = &amp; <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l6584"><span class="linenum">6584</span></a>              }
<a name="l6585"><span class="linenum">6585</span></a>          }
<a name="l6586"><span class="linenum">6586</span></a>  
<a name="l6587"><span class="linenum">6587</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('latest_Comment')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/latest_Comment.html">latest_Comment</a>;
<a name="l6588"><span class="linenum">6588</span></a>      }
<a name="l6589"><span class="linenum">6589</span></a>  
<a name="l6590"><span class="linenum">6590</span></a>  
<a name="l6591"><span class="linenum">6591</span></a>      <span class="comment">/**</span>
<a name="l6592"><span class="linenum">6592</span></a>  <span class="comment">     * Get the ratings of comments on this item</span>
<a name="l6593"><span class="linenum">6593</span></a>  <span class="comment">     *</span>
<a name="l6594"><span class="linenum">6594</span></a>  <span class="comment">     * @retrun array of [ ratings, active ratings ] for this comment</span>
<a name="l6595"><span class="linenum">6595</span></a>  <span class="comment">     */</span>
<a name="l6596"><span class="linenum">6596</span></a>  	function <a class="function" onClick="logFunction('get_ratings')" href="../../../_functions/get_ratings.html" onMouseOver="funcPopup(event,'get_ratings')">get_ratings</a>()
<a name="l6597"><span class="linenum">6597</span></a>      {
<a name="l6598"><span class="linenum">6598</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l6599"><span class="linenum">6599</span></a>  
<a name="l6600"><span class="linenum">6600</span></a>  <span class="comment">        // Count each published comments rating grouped by active/expired status and by rating value</span>
<a name="l6601"><span class="linenum">6601</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT comment_rating, <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( comment_ID ) AS cnt,
<a name="l6602"><span class="linenum">6602</span></a>                      IF( iset_value IS NULL OR iset_value = &quot;&quot; OR TIMESTAMPDIFF(SECOND, comment_date, '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) ).') &lt; iset_value, &quot;active&quot;, &quot;expired&quot; ) as expiry_status
<a name="l6603"><span class="linenum">6603</span></a>                          FROM T_comments
<a name="l6604"><span class="linenum">6604</span></a>                          LEFT JOIN T_items__item_settings ON iset_item_ID = comment_item_ID AND iset_name = &quot;comment_expiry_delay&quot;
<a name="l6605"><span class="linenum">6605</span></a>                          WHERE comment_item_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.' AND comment_status = &quot;published&quot;
<a name="l6606"><span class="linenum">6606</span></a>                          GROUP BY expiry_status, comment_rating
<a name="l6607"><span class="linenum">6607</span></a>                          ORDER BY comment_rating DESC';
<a name="l6608"><span class="linenum">6608</span></a>          <a class="var it1725" onMouseOver="hilite(1725)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../_variables/results.html">$results</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l6609"><span class="linenum">6609</span></a>  
<a name="l6610"><span class="linenum">6610</span></a>  <span class="comment">        // init rating arrays</span>
<a name="l6611"><span class="linenum">6611</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a> = array();
<a name="l6612"><span class="linenum">6612</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['total'] = 0;
<a name="l6613"><span class="linenum">6613</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['summary'] = 0;
<a name="l6614"><span class="linenum">6614</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['unrated'] = 0;
<a name="l6615"><span class="linenum">6615</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a> = array();
<a name="l6616"><span class="linenum">6616</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['total'] = 0;
<a name="l6617"><span class="linenum">6617</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['summary'] = 0;
<a name="l6618"><span class="linenum">6618</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['unrated'] = 0;
<a name="l6619"><span class="linenum">6619</span></a>  
<a name="l6620"><span class="linenum">6620</span></a>          if( empty( <a class="var it1725" onMouseOver="hilite(1725)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../_variables/results.html">$results</a> ) )
<a name="l6621"><span class="linenum">6621</span></a>          { // No rating at all
<a name="l6622"><span class="linenum">6622</span></a>              <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['all_ratings'] = 0;
<a name="l6623"><span class="linenum">6623</span></a>              <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['all_ratings'] = 0;
<a name="l6624"><span class="linenum">6624</span></a>              return array( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>, <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a> );
<a name="l6625"><span class="linenum">6625</span></a>          }
<a name="l6626"><span class="linenum">6626</span></a>  
<a name="l6627"><span class="linenum">6627</span></a>  <span class="comment">        // Init all ratings count to 0</span>
<a name="l6628"><span class="linenum">6628</span></a>          for( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>=5; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>&gt;=1; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-- )
<a name="l6629"><span class="linenum">6629</span></a>          {
<a name="l6630"><span class="linenum">6630</span></a>              <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] = 0;
<a name="l6631"><span class="linenum">6631</span></a>              <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] = 0;
<a name="l6632"><span class="linenum">6632</span></a>          }
<a name="l6633"><span class="linenum">6633</span></a>  
<a name="l6634"><span class="linenum">6634</span></a>  <span class="comment">        // Count active and overall rating values</span>
<a name="l6635"><span class="linenum">6635</span></a>          foreach(<a class="var it1725" onMouseOver="hilite(1725)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../_variables/results.html">$results</a> as <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>)
<a name="l6636"><span class="linenum">6636</span></a>          {
<a name="l6637"><span class="linenum">6637</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> = ( <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('comment_rating')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/comment_rating.html">comment_rating</a> == 0 ) ? 'unrated' : <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('comment_rating')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/comment_rating.html">comment_rating</a>;
<a name="l6638"><span class="linenum">6638</span></a>              <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>] += <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a>;
<a name="l6639"><span class="linenum">6639</span></a>              <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['total'] += <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a>;
<a name="l6640"><span class="linenum">6640</span></a>              <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['summary'] += ( <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a> * <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('comment_rating')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/comment_rating.html">comment_rating</a> );
<a name="l6641"><span class="linenum">6641</span></a>              if( <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('expiry_status')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/expiry_status.html">expiry_status</a> == 'active' )
<a name="l6642"><span class="linenum">6642</span></a>              { // this rating is not expired yet
<a name="l6643"><span class="linenum">6643</span></a>                  <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>] = <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a>;
<a name="l6644"><span class="linenum">6644</span></a>                  <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['total'] += <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a>;
<a name="l6645"><span class="linenum">6645</span></a>                  <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['summary'] += ( <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('cnt')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/cnt.html">cnt</a> * <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>-&gt;<a onClick="logVariable('comment_rating')" class="var it10961" onMouseOver="hilite(10961)" onMouseOut="lolite()" href="../../../_variables/comment_rating.html">comment_rating</a> );
<a name="l6646"><span class="linenum">6646</span></a>              }
<a name="l6647"><span class="linenum">6647</span></a>          }
<a name="l6648"><span class="linenum">6648</span></a>  
<a name="l6649"><span class="linenum">6649</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['all_ratings'] = <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['total'] - <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>['unrated'];
<a name="l6650"><span class="linenum">6650</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['all_ratings'] = <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['total'] - <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a>['unrated'];
<a name="l6651"><span class="linenum">6651</span></a>  
<a name="l6652"><span class="linenum">6652</span></a>          return array( <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('ratings')" href="../../../_variables/ratings.html">$ratings</a>, <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('active_ratings')" href="../../../_variables/active_ratings.html">$active_ratings</a> );
<a name="l6653"><span class="linenum">6653</span></a>      }
<a name="l6654"><span class="linenum">6654</span></a>  
<a name="l6655"><span class="linenum">6655</span></a>  
<a name="l6656"><span class="linenum">6656</span></a>       <span class="comment">/**</span>
<a name="l6657"><span class="linenum">6657</span></a>  <span class="comment">     * Get a setting.</span>
<a name="l6658"><span class="linenum">6658</span></a>  <span class="comment">     *</span>
<a name="l6659"><span class="linenum">6659</span></a>  <span class="comment">     * @return string|false|NULL value as string on success; NULL if not found; false in case of error</span>
<a name="l6660"><span class="linenum">6660</span></a>  <span class="comment">     */</span>
<a name="l6661"><span class="linenum">6661</span></a>  	function <a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l6662"><span class="linenum">6662</span></a>      {
<a name="l6663"><span class="linenum">6663</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_ItemSettings')" href="../../../_functions/load_itemsettings.html" onMouseOver="funcPopup(event,'load_itemsettings')">load_ItemSettings</a>();
<a name="l6664"><span class="linenum">6664</span></a>  
<a name="l6665"><span class="linenum">6665</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> );
<a name="l6666"><span class="linenum">6666</span></a>      }
<a name="l6667"><span class="linenum">6667</span></a>  
<a name="l6668"><span class="linenum">6668</span></a>  
<a name="l6669"><span class="linenum">6669</span></a>      <span class="comment">/**</span>
<a name="l6670"><span class="linenum">6670</span></a>  <span class="comment">     * Set a setting.</span>
<a name="l6671"><span class="linenum">6671</span></a>  <span class="comment">     *</span>
<a name="l6672"><span class="linenum">6672</span></a>  <span class="comment">     * @return boolean true, if the value has been set, false if it has not changed.</span>
<a name="l6673"><span class="linenum">6673</span></a>  <span class="comment">     */</span>
<a name="l6674"><span class="linenum">6674</span></a>  	function <a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> = false )
<a name="l6675"><span class="linenum">6675</span></a>      {
<a name="l6676"><span class="linenum">6676</span></a>  <span class="comment">        // Make sure item settings are loaded</span>
<a name="l6677"><span class="linenum">6677</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_ItemSettings')" href="../../../_functions/load_itemsettings.html" onMouseOver="funcPopup(event,'load_itemsettings')">load_ItemSettings</a>();
<a name="l6678"><span class="linenum">6678</span></a>  
<a name="l6679"><span class="linenum">6679</span></a>          if( <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> &amp;&amp; empty(<a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) )
<a name="l6680"><span class="linenum">6680</span></a>          {
<a name="l6681"><span class="linenum">6681</span></a>              <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = NULL;
<a name="l6682"><span class="linenum">6682</span></a>          }
<a name="l6683"><span class="linenum">6683</span></a>  
<a name="l6684"><span class="linenum">6684</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> );
<a name="l6685"><span class="linenum">6685</span></a>      }
<a name="l6686"><span class="linenum">6686</span></a>  
<a name="l6687"><span class="linenum">6687</span></a>  
<a name="l6688"><span class="linenum">6688</span></a>      <span class="comment">/**</span>
<a name="l6689"><span class="linenum">6689</span></a>  <span class="comment">     * Delete a setting.</span>
<a name="l6690"><span class="linenum">6690</span></a>  <span class="comment">     *</span>
<a name="l6691"><span class="linenum">6691</span></a>  <span class="comment">     * @return boolean true, if the value has been set, false if it has not changed.</span>
<a name="l6692"><span class="linenum">6692</span></a>  <span class="comment">     */</span>
<a name="l6693"><span class="linenum">6693</span></a>  	function <a class="function" onClick="logFunction('delete_setting')" href="../../../_functions/delete_setting.html" onMouseOver="funcPopup(event,'delete_setting')">delete_setting</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l6694"><span class="linenum">6694</span></a>      {
<a name="l6695"><span class="linenum">6695</span></a>  <span class="comment">         // Make sure item settings are loaded</span>
<a name="l6696"><span class="linenum">6696</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_ItemSettings')" href="../../../_functions/load_itemsettings.html" onMouseOver="funcPopup(event,'load_itemsettings')">load_ItemSettings</a>();
<a name="l6697"><span class="linenum">6697</span></a>  
<a name="l6698"><span class="linenum">6698</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> );
<a name="l6699"><span class="linenum">6699</span></a>      }
<a name="l6700"><span class="linenum">6700</span></a>  
<a name="l6701"><span class="linenum">6701</span></a>  
<a name="l6702"><span class="linenum">6702</span></a>      <span class="comment">/**</span>
<a name="l6703"><span class="linenum">6703</span></a>  <span class="comment">     * Make sure item settings are loaded.</span>
<a name="l6704"><span class="linenum">6704</span></a>  <span class="comment">     */</span>
<a name="l6705"><span class="linenum">6705</span></a>  	function <a class="function" onClick="logFunction('load_ItemSettings')" href="../../../_functions/load_itemsettings.html" onMouseOver="funcPopup(event,'load_itemsettings')">load_ItemSettings</a>()
<a name="l6706"><span class="linenum">6706</span></a>      {
<a name="l6707"><span class="linenum">6707</span></a>          if( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a>) )
<a name="l6708"><span class="linenum">6708</span></a>          {
<a name="l6709"><span class="linenum">6709</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_itemsettings.class.php', 'ItemSettings' );
<a name="l6710"><span class="linenum">6710</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemSettings')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemSettings.html">ItemSettings</a> = <span class="keyword">new </span><a class="class" onClick="logClass('ItemSettings')" href="../../../_classes/itemsettings.html" onMouseOver="classPopup(event,'itemsettings')">ItemSettings</a>();
<a name="l6711"><span class="linenum">6711</span></a>          }
<a name="l6712"><span class="linenum">6712</span></a>      }
<a name="l6713"><span class="linenum">6713</span></a>  
<a name="l6714"><span class="linenum">6714</span></a>  
<a name="l6715"><span class="linenum">6715</span></a>      <span class="comment">/**</span>
<a name="l6716"><span class="linenum">6716</span></a>  <span class="comment">     * Display location of current Item</span>
<a name="l6717"><span class="linenum">6717</span></a>  <span class="comment">     *</span>
<a name="l6718"><span class="linenum">6718</span></a>  <span class="comment">     * @param string Text before location</span>
<a name="l6719"><span class="linenum">6719</span></a>  <span class="comment">     * @param string Text after location</span>
<a name="l6720"><span class="linenum">6720</span></a>  <span class="comment">     * @param string Separator</span>
<a name="l6721"><span class="linenum">6721</span></a>  <span class="comment">     */</span>
<a name="l6722"><span class="linenum">6722</span></a>  	function <a class="function" onClick="logFunction('location')" href="../../../_functions/location.html" onMouseOver="funcPopup(event,'location')">location</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a> = ', ' )
<a name="l6723"><span class="linenum">6723</span></a>      {
<a name="l6724"><span class="linenum">6724</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a> = array();
<a name="l6725"><span class="linenum">6725</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_city')" href="../../../_functions/get_city.html" onMouseOver="funcPopup(event,'get_city')">get_city</a>();
<a name="l6726"><span class="linenum">6726</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_subregion')" href="../../../_functions/get_subregion.html" onMouseOver="funcPopup(event,'get_subregion')">get_subregion</a>();
<a name="l6727"><span class="linenum">6727</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_region')" href="../../../_functions/get_region.html" onMouseOver="funcPopup(event,'get_region')">get_region</a>();
<a name="l6728"><span class="linenum">6728</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_country')" href="../../../_functions/get_country.html" onMouseOver="funcPopup(event,'get_country')">get_country</a>();
<a name="l6729"><span class="linenum">6729</span></a>  
<a name="l6730"><span class="linenum">6730</span></a>  <span class="comment">        // Delete empty elements</span>
<a name="l6731"><span class="linenum">6731</span></a>          <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a> = <a class="phpfunction" onClick="logFunction('array_filter')" href="../../../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a>);
<a name="l6732"><span class="linenum">6732</span></a>  
<a name="l6733"><span class="linenum">6733</span></a>          if( !empty( <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a> ) )
<a name="l6734"><span class="linenum">6734</span></a>          {    // Display location
<a name="l6735"><span class="linenum">6735</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l6736"><span class="linenum">6736</span></a>  
<a name="l6737"><span class="linenum">6737</span></a>              echo <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a>, <a class="var it869" onMouseOver="hilite(869)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../../_variables/location.html">$location</a> );
<a name="l6738"><span class="linenum">6738</span></a>  
<a name="l6739"><span class="linenum">6739</span></a>              echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l6740"><span class="linenum">6740</span></a>          }
<a name="l6741"><span class="linenum">6741</span></a>      }
<a name="l6742"><span class="linenum">6742</span></a>  
<a name="l6743"><span class="linenum">6743</span></a>  
<a name="l6744"><span class="linenum">6744</span></a>      <span class="comment">/**</span>
<a name="l6745"><span class="linenum">6745</span></a>  <span class="comment">     * Get country of current Item</span>
<a name="l6746"><span class="linenum">6746</span></a>  <span class="comment">     *</span>
<a name="l6747"><span class="linenum">6747</span></a>  <span class="comment">     * @param array params</span>
<a name="l6748"><span class="linenum">6748</span></a>  <span class="comment">     * @return string Country name</span>
<a name="l6749"><span class="linenum">6749</span></a>  <span class="comment">     */</span>
<a name="l6750"><span class="linenum">6750</span></a>  	function <a class="function" onClick="logFunction('get_country')" href="../../../_functions/get_country.html" onMouseOver="funcPopup(event,'get_country')">get_country</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6751"><span class="linenum">6751</span></a>      {
<a name="l6752"><span class="linenum">6752</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l6753"><span class="linenum">6753</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6754"><span class="linenum">6754</span></a>                  'before' =&gt; '',
<a name="l6755"><span class="linenum">6755</span></a>                  'after'  =&gt; '',
<a name="l6756"><span class="linenum">6756</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6757"><span class="linenum">6757</span></a>  
<a name="l6758"><span class="linenum">6758</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l6759"><span class="linenum">6759</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ctry_ID.html">ctry_ID</a> == 0 || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('country_visible')" href="../../../_functions/country_visible.html" onMouseOver="funcPopup(event,'country_visible')">country_visible</a>() )
<a name="l6760"><span class="linenum">6760</span></a>          {    // Country is not defined for current Item OR Counries are hidden
<a name="l6761"><span class="linenum">6761</span></a>              return;
<a name="l6762"><span class="linenum">6762</span></a>          }
<a name="l6763"><span class="linenum">6763</span></a>  
<a name="l6764"><span class="linenum">6764</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_country.class.php', 'Country' );
<a name="l6765"><span class="linenum">6765</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a> = &amp; get_CountryCache();
<a name="l6766"><span class="linenum">6766</span></a>  
<a name="l6767"><span class="linenum">6767</span></a>          if( <a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a> = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l6768"><span class="linenum">6768</span></a>          {    // Display country name
<a name="l6769"><span class="linenum">6769</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l6770"><span class="linenum">6770</span></a>  
<a name="l6771"><span class="linenum">6771</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l6772"><span class="linenum">6772</span></a>  
<a name="l6773"><span class="linenum">6773</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l6774"><span class="linenum">6774</span></a>  
<a name="l6775"><span class="linenum">6775</span></a>              return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l6776"><span class="linenum">6776</span></a>          }
<a name="l6777"><span class="linenum">6777</span></a>      }
<a name="l6778"><span class="linenum">6778</span></a>  
<a name="l6779"><span class="linenum">6779</span></a>  
<a name="l6780"><span class="linenum">6780</span></a>      <span class="comment">/**</span>
<a name="l6781"><span class="linenum">6781</span></a>  <span class="comment">     * Get region of current Item</span>
<a name="l6782"><span class="linenum">6782</span></a>  <span class="comment">     *</span>
<a name="l6783"><span class="linenum">6783</span></a>  <span class="comment">     * @param array params</span>
<a name="l6784"><span class="linenum">6784</span></a>  <span class="comment">     * @return string Region name</span>
<a name="l6785"><span class="linenum">6785</span></a>  <span class="comment">     */</span>
<a name="l6786"><span class="linenum">6786</span></a>  	function <a class="function" onClick="logFunction('get_region')" href="../../../_functions/get_region.html" onMouseOver="funcPopup(event,'get_region')">get_region</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6787"><span class="linenum">6787</span></a>      {
<a name="l6788"><span class="linenum">6788</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l6789"><span class="linenum">6789</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6790"><span class="linenum">6790</span></a>                  'before' =&gt; '',
<a name="l6791"><span class="linenum">6791</span></a>                  'after'  =&gt; '',
<a name="l6792"><span class="linenum">6792</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6793"><span class="linenum">6793</span></a>  
<a name="l6794"><span class="linenum">6794</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l6795"><span class="linenum">6795</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rgn_ID.html">rgn_ID</a> == 0 || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('region_visible')" href="../../../_functions/region_visible.html" onMouseOver="funcPopup(event,'region_visible')">region_visible</a>() )
<a name="l6796"><span class="linenum">6796</span></a>          {    // Region is not defined for current Item
<a name="l6797"><span class="linenum">6797</span></a>              return;
<a name="l6798"><span class="linenum">6798</span></a>          }
<a name="l6799"><span class="linenum">6799</span></a>  
<a name="l6800"><span class="linenum">6800</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_region.class.php', 'Region' );
<a name="l6801"><span class="linenum">6801</span></a>          <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('RegionCache')" href="../../../_variables/RegionCache.html">$RegionCache</a> = &amp; get_RegionCache();
<a name="l6802"><span class="linenum">6802</span></a>  
<a name="l6803"><span class="linenum">6803</span></a>          if( <a class="var it1729" onMouseOver="hilite(1729)" onMouseOut="lolite()" onClick="logVariable('Region')" href="../../../_variables/Region.html">$Region</a> = <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('RegionCache')" href="../../../_variables/RegionCache.html">$RegionCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rgn_ID.html">rgn_ID</a> ) )
<a name="l6804"><span class="linenum">6804</span></a>          {    // Display region name
<a name="l6805"><span class="linenum">6805</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l6806"><span class="linenum">6806</span></a>  
<a name="l6807"><span class="linenum">6807</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it1729" onMouseOver="hilite(1729)" onMouseOut="lolite()" onClick="logVariable('Region')" href="../../../_variables/Region.html">$Region</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l6808"><span class="linenum">6808</span></a>  
<a name="l6809"><span class="linenum">6809</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l6810"><span class="linenum">6810</span></a>  
<a name="l6811"><span class="linenum">6811</span></a>              return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l6812"><span class="linenum">6812</span></a>          }
<a name="l6813"><span class="linenum">6813</span></a>      }
<a name="l6814"><span class="linenum">6814</span></a>  
<a name="l6815"><span class="linenum">6815</span></a>  
<a name="l6816"><span class="linenum">6816</span></a>      <span class="comment">/**</span>
<a name="l6817"><span class="linenum">6817</span></a>  <span class="comment">     * Get subregion of current Item</span>
<a name="l6818"><span class="linenum">6818</span></a>  <span class="comment">     *</span>
<a name="l6819"><span class="linenum">6819</span></a>  <span class="comment">     * @param array params</span>
<a name="l6820"><span class="linenum">6820</span></a>  <span class="comment">     * @return string Subregion name</span>
<a name="l6821"><span class="linenum">6821</span></a>  <span class="comment">     */</span>
<a name="l6822"><span class="linenum">6822</span></a>  	function <a class="function" onClick="logFunction('get_subregion')" href="../../../_functions/get_subregion.html" onMouseOver="funcPopup(event,'get_subregion')">get_subregion</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6823"><span class="linenum">6823</span></a>      {
<a name="l6824"><span class="linenum">6824</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l6825"><span class="linenum">6825</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6826"><span class="linenum">6826</span></a>                  'before' =&gt; '',
<a name="l6827"><span class="linenum">6827</span></a>                  'after'  =&gt; '',
<a name="l6828"><span class="linenum">6828</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6829"><span class="linenum">6829</span></a>  
<a name="l6830"><span class="linenum">6830</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l6831"><span class="linenum">6831</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/subrg_ID.html">subrg_ID</a> == 0 || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('subregion_visible')" href="../../../_functions/subregion_visible.html" onMouseOver="funcPopup(event,'subregion_visible')">subregion_visible</a>() )
<a name="l6832"><span class="linenum">6832</span></a>          {    // Subregion is not defined for current Item
<a name="l6833"><span class="linenum">6833</span></a>              return;
<a name="l6834"><span class="linenum">6834</span></a>          }
<a name="l6835"><span class="linenum">6835</span></a>  
<a name="l6836"><span class="linenum">6836</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_subregion.class.php', 'Subregion' );
<a name="l6837"><span class="linenum">6837</span></a>          <a class="var it418" onMouseOver="hilite(418)" onMouseOut="lolite()" onClick="logVariable('SubregionCache')" href="../../../_variables/SubregionCache.html">$SubregionCache</a> = &amp; get_SubregionCache();
<a name="l6838"><span class="linenum">6838</span></a>  
<a name="l6839"><span class="linenum">6839</span></a>          if( <a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('Subregion')" href="../../../_variables/Subregion.html">$Subregion</a> = <a class="var it418" onMouseOver="hilite(418)" onMouseOut="lolite()" onClick="logVariable('SubregionCache')" href="../../../_variables/SubregionCache.html">$SubregionCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/subrg_ID.html">subrg_ID</a> ) )
<a name="l6840"><span class="linenum">6840</span></a>          {    // Display subregion name
<a name="l6841"><span class="linenum">6841</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l6842"><span class="linenum">6842</span></a>  
<a name="l6843"><span class="linenum">6843</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('Subregion')" href="../../../_variables/Subregion.html">$Subregion</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l6844"><span class="linenum">6844</span></a>  
<a name="l6845"><span class="linenum">6845</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l6846"><span class="linenum">6846</span></a>  
<a name="l6847"><span class="linenum">6847</span></a>              return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l6848"><span class="linenum">6848</span></a>          }
<a name="l6849"><span class="linenum">6849</span></a>      }
<a name="l6850"><span class="linenum">6850</span></a>  
<a name="l6851"><span class="linenum">6851</span></a>  
<a name="l6852"><span class="linenum">6852</span></a>      <span class="comment">/**</span>
<a name="l6853"><span class="linenum">6853</span></a>  <span class="comment">     * Get city of current Item</span>
<a name="l6854"><span class="linenum">6854</span></a>  <span class="comment">     *</span>
<a name="l6855"><span class="linenum">6855</span></a>  <span class="comment">     * @param array params</span>
<a name="l6856"><span class="linenum">6856</span></a>  <span class="comment">     * @return string City name + postcode</span>
<a name="l6857"><span class="linenum">6857</span></a>  <span class="comment">     */</span>
<a name="l6858"><span class="linenum">6858</span></a>  	function <a class="function" onClick="logFunction('get_city')" href="../../../_functions/get_city.html" onMouseOver="funcPopup(event,'get_city')">get_city</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6859"><span class="linenum">6859</span></a>      {
<a name="l6860"><span class="linenum">6860</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l6861"><span class="linenum">6861</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6862"><span class="linenum">6862</span></a>                  'before' =&gt; '',
<a name="l6863"><span class="linenum">6863</span></a>                  'after'  =&gt; '',
<a name="l6864"><span class="linenum">6864</span></a>                  'template' =&gt; '<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>$ (<a class="var it1731" onMouseOver="hilite(1731)" onMouseOut="lolite()" onClick="logVariable('postcode')" href="../../../_variables/postcode.html">$postcode</a>$)', // <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>$ - City name; <a class="var it1731" onMouseOver="hilite(1731)" onMouseOut="lolite()" onClick="logVariable('postcode')" href="../../../_variables/postcode.html">$postcode</a>$ - City postcode
<a name="l6865"><span class="linenum">6865</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6866"><span class="linenum">6866</span></a>  
<a name="l6867"><span class="linenum">6867</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l6868"><span class="linenum">6868</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('city_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/city_ID.html">city_ID</a> == 0 || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('city_visible')" href="../../../_functions/city_visible.html" onMouseOver="funcPopup(event,'city_visible')">city_visible</a>() )
<a name="l6869"><span class="linenum">6869</span></a>          {    // City is not defined for current Item
<a name="l6870"><span class="linenum">6870</span></a>              return;
<a name="l6871"><span class="linenum">6871</span></a>          }
<a name="l6872"><span class="linenum">6872</span></a>  
<a name="l6873"><span class="linenum">6873</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_city.class.php', 'City' );
<a name="l6874"><span class="linenum">6874</span></a>          <a class="var it419" onMouseOver="hilite(419)" onMouseOut="lolite()" onClick="logVariable('CityCache')" href="../../../_variables/CityCache.html">$CityCache</a> = &amp; get_CityCache();
<a name="l6875"><span class="linenum">6875</span></a>  
<a name="l6876"><span class="linenum">6876</span></a>          if( <a class="var it1732" onMouseOver="hilite(1732)" onMouseOut="lolite()" onClick="logVariable('City')" href="../../../_variables/City.html">$City</a> = <a class="var it419" onMouseOver="hilite(419)" onMouseOut="lolite()" onClick="logVariable('CityCache')" href="../../../_variables/CityCache.html">$CityCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('city_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/city_ID.html">city_ID</a> ) )
<a name="l6877"><span class="linenum">6877</span></a>          {    // Display city info
<a name="l6878"><span class="linenum">6878</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l6879"><span class="linenum">6879</span></a>  
<a name="l6880"><span class="linenum">6880</span></a>              <a class="var it1733" onMouseOver="hilite(1733)" onMouseOut="lolite()" onClick="logVariable('city_tamplates')" href="../../../_variables/city_tamplates.html">$city_tamplates</a> = array( '<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>$', '<a class="var it1731" onMouseOver="hilite(1731)" onMouseOut="lolite()" onClick="logVariable('postcode')" href="../../../_variables/postcode.html">$postcode</a>$' );
<a name="l6881"><span class="linenum">6881</span></a>              <a class="var it1734" onMouseOver="hilite(1734)" onMouseOut="lolite()" onClick="logVariable('city_data')" href="../../../_variables/city_data.html">$city_data</a> = array( <a class="var it1732" onMouseOver="hilite(1732)" onMouseOut="lolite()" onClick="logVariable('City')" href="../../../_variables/City.html">$City</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it1732" onMouseOver="hilite(1732)" onMouseOut="lolite()" onClick="logVariable('City')" href="../../../_variables/City.html">$City</a>-&gt;<a class="function" onClick="logFunction('get_postcode')" href="../../../_functions/get_postcode.html" onMouseOver="funcPopup(event,'get_postcode')">get_postcode</a>() );
<a name="l6882"><span class="linenum">6882</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it1733" onMouseOver="hilite(1733)" onMouseOut="lolite()" onClick="logVariable('city_tamplates')" href="../../../_variables/city_tamplates.html">$city_tamplates</a>, <a class="var it1734" onMouseOver="hilite(1734)" onMouseOut="lolite()" onClick="logVariable('city_data')" href="../../../_variables/city_data.html">$city_data</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['template'] );
<a name="l6883"><span class="linenum">6883</span></a>  
<a name="l6884"><span class="linenum">6884</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l6885"><span class="linenum">6885</span></a>  
<a name="l6886"><span class="linenum">6886</span></a>              return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l6887"><span class="linenum">6887</span></a>          }
<a name="l6888"><span class="linenum">6888</span></a>      }
<a name="l6889"><span class="linenum">6889</span></a>  
<a name="l6890"><span class="linenum">6890</span></a>  
<a name="l6891"><span class="linenum">6891</span></a>      <span class="comment">/**</span>
<a name="l6892"><span class="linenum">6892</span></a>  <span class="comment">     * Get item revision</span>
<a name="l6893"><span class="linenum">6893</span></a>  <span class="comment">     *</span>
<a name="l6894"><span class="linenum">6894</span></a>  <span class="comment">     * @param integer Revision ID</span>
<a name="l6895"><span class="linenum">6895</span></a>  <span class="comment">     * @return object Revision</span>
<a name="l6896"><span class="linenum">6896</span></a>  <span class="comment">     */</span>
<a name="l6897"><span class="linenum">6897</span></a>  	function <a class="function" onClick="logFunction('get_revision')" href="../../../_functions/get_revision.html" onMouseOver="funcPopup(event,'get_revision')">get_revision</a>( <a class="var it1672" onMouseOver="hilite(1672)" onMouseOut="lolite()" onClick="logVariable('iver_ID')" href="../../../_variables/iver_ID.html">$iver_ID</a> = 0 )
<a name="l6898"><span class="linenum">6898</span></a>      {
<a name="l6899"><span class="linenum">6899</span></a>          if( <a class="var it1672" onMouseOver="hilite(1672)" onMouseOut="lolite()" onClick="logVariable('iver_ID')" href="../../../_variables/iver_ID.html">$iver_ID</a> &gt; 0 )
<a name="l6900"><span class="linenum">6900</span></a>          {    // Get revision from archive
<a name="l6901"><span class="linenum">6901</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l6902"><span class="linenum">6902</span></a>  
<a name="l6903"><span class="linenum">6903</span></a>              <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l6904"><span class="linenum">6904</span></a>              <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '*' );
<a name="l6905"><span class="linenum">6905</span></a>              <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__version' );
<a name="l6906"><span class="linenum">6906</span></a>              <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'iver_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1672" onMouseOver="hilite(1672)" onMouseOut="lolite()" onClick="logVariable('iver_ID')" href="../../../_variables/iver_ID.html">$iver_ID</a> ) );
<a name="l6907"><span class="linenum">6907</span></a>              <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'iver_itm_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l6908"><span class="linenum">6908</span></a>              <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('Revision')" href="../../../_variables/Revision.html">$Revision</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it1735" onMouseOver="hilite(1735)" onMouseOut="lolite()" onClick="logVariable('revision_SQL')" href="../../../_variables/revision_SQL.html">$revision_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l6909"><span class="linenum">6909</span></a>          }
<a name="l6910"><span class="linenum">6910</span></a>          else
<a name="l6911"><span class="linenum">6911</span></a>          {    // Get current version
<a name="l6912"><span class="linenum">6912</span></a>              <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('Revision')" href="../../../_variables/Revision.html">$Revision</a> = (object) array(
<a name="l6913"><span class="linenum">6913</span></a>                  'iver_ID'            =&gt; 0,
<a name="l6914"><span class="linenum">6914</span></a>                  'iver_edit_datetime' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a>,
<a name="l6915"><span class="linenum">6915</span></a>                  'iver_edit_user_ID'  =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/lastedit_user_ID.html">lastedit_user_ID</a>,
<a name="l6916"><span class="linenum">6916</span></a>                  'iver_status'        =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>,
<a name="l6917"><span class="linenum">6917</span></a>                  'iver_title'         =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>,
<a name="l6918"><span class="linenum">6918</span></a>                  'iver_content'       =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;content
<a name="l6919"><span class="linenum">6919</span></a>              );
<a name="l6920"><span class="linenum">6920</span></a>          }
<a name="l6921"><span class="linenum">6921</span></a>  
<a name="l6922"><span class="linenum">6922</span></a>          return <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('Revision')" href="../../../_variables/Revision.html">$Revision</a>;
<a name="l6923"><span class="linenum">6923</span></a>      }
<a name="l6924"><span class="linenum">6924</span></a>  
<a name="l6925"><span class="linenum">6925</span></a>  
<a name="l6926"><span class="linenum">6926</span></a>      <span class="comment">/**</span>
<a name="l6927"><span class="linenum">6927</span></a>  <span class="comment">     * Check if item is locked</span>
<a name="l6928"><span class="linenum">6928</span></a>  <span class="comment">     *</span>
<a name="l6929"><span class="linenum">6929</span></a>  <span class="comment">     * @return boolean TRUE - if item is locked</span>
<a name="l6930"><span class="linenum">6930</span></a>  <span class="comment">     */</span>
<a name="l6931"><span class="linenum">6931</span></a>  	function <a class="function" onClick="logFunction('is_locked')" href="../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()
<a name="l6932"><span class="linenum">6932</span></a>      {
<a name="l6933"><span class="linenum">6933</span></a>          if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a> ) )
<a name="l6934"><span class="linenum">6934</span></a>          { // item lock status was already set
<a name="l6935"><span class="linenum">6935</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a>;
<a name="l6936"><span class="linenum">6936</span></a>          }
<a name="l6937"><span class="linenum">6937</span></a>  
<a name="l6938"><span class="linenum">6938</span></a>  <span class="comment">        // Get item chapters to check lock status, but use cached chapters array instead of db query</span>
<a name="l6939"><span class="linenum">6939</span></a>          <a class="var it1738" onMouseOver="hilite(1738)" onMouseOut="lolite()" onClick="logVariable('item_chapters')" href="../../../_variables/item_chapters.html">$item_chapters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>();
<a name="l6940"><span class="linenum">6940</span></a>  
<a name="l6941"><span class="linenum">6941</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1738" onMouseOver="hilite(1738)" onMouseOut="lolite()" onClick="logVariable('item_chapters')" href="../../../_variables/item_chapters.html">$item_chapters</a> ) )
<a name="l6942"><span class="linenum">6942</span></a>          { // Presuppose that all category is locked, we will change this value if only one category is not locked
<a name="l6943"><span class="linenum">6943</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a> = true;
<a name="l6944"><span class="linenum">6944</span></a>              foreach( <a class="var it1738" onMouseOver="hilite(1738)" onMouseOut="lolite()" onClick="logVariable('item_chapters')" href="../../../_variables/item_chapters.html">$item_chapters</a> as <a class="var it1739" onMouseOver="hilite(1739)" onMouseOut="lolite()" onClick="logVariable('item_Chapter')" href="../../../_variables/item_Chapter.html">$item_Chapter</a> )
<a name="l6945"><span class="linenum">6945</span></a>              { // Check if all item categories is locked
<a name="l6946"><span class="linenum">6946</span></a>                  if( !<a class="var it1739" onMouseOver="hilite(1739)" onMouseOut="lolite()" onClick="logVariable('item_Chapter')" href="../../../_variables/item_Chapter.html">$item_Chapter</a>-&gt;<a onClick="logVariable('lock')" class="var it10962" onMouseOver="hilite(10962)" onMouseOut="lolite()" href="../../../_variables/lock.html">lock</a> )
<a name="l6947"><span class="linenum">6947</span></a>                  { // This category is not locked so the item is not locked either
<a name="l6948"><span class="linenum">6948</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a> = false;
<a name="l6949"><span class="linenum">6949</span></a>                      break;
<a name="l6950"><span class="linenum">6950</span></a>                  }
<a name="l6951"><span class="linenum">6951</span></a>              }
<a name="l6952"><span class="linenum">6952</span></a>          }
<a name="l6953"><span class="linenum">6953</span></a>          else
<a name="l6954"><span class="linenum">6954</span></a>          { // If no category was set yet ( e.g. in case of <span class="keyword">new </span><a class="class" onClick="logClass('item')" href="../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a> create ), the Item can't be locked
<a name="l6955"><span class="linenum">6955</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a> = false;
<a name="l6956"><span class="linenum">6956</span></a>          }
<a name="l6957"><span class="linenum">6957</span></a>  
<a name="l6958"><span class="linenum">6958</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('is_locked')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/is_locked.html">is_locked</a>;
<a name="l6959"><span class="linenum">6959</span></a>      }
<a name="l6960"><span class="linenum">6960</span></a>  
<a name="l6961"><span class="linenum">6961</span></a>  
<a name="l6962"><span class="linenum">6962</span></a>      <span class="comment">/**</span>
<a name="l6963"><span class="linenum">6963</span></a>  <span class="comment">     * Convert inline file tags like [image|file:123:link title:.css_class_name] or [inline:123:.css_class_name] into HTML img tags</span>
<a name="l6964"><span class="linenum">6964</span></a>  <span class="comment">     *</span>
<a name="l6965"><span class="linenum">6965</span></a>  <span class="comment">     * @param string Source content</span>
<a name="l6966"><span class="linenum">6966</span></a>  <span class="comment">     * @param array Params</span>
<a name="l6967"><span class="linenum">6967</span></a>  <span class="comment">     * @return string Content</span>
<a name="l6968"><span class="linenum">6968</span></a>  <span class="comment">     */</span>
<a name="l6969"><span class="linenum">6969</span></a>  	function <a class="function" onClick="logFunction('render_inline_files')" href="../../../_functions/render_inline_files.html" onMouseOver="funcPopup(event,'render_inline_files')">render_inline_files</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6970"><span class="linenum">6970</span></a>      {
<a name="l6971"><span class="linenum">6971</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['check_code_block'] ) &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['check_code_block'] &amp;&amp; ( ( <a class="phpfunction" onClick="logFunction('stristr')" href="../../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;code' ) !== false ) || ( <a class="phpfunction" onClick="logFunction('stristr')" href="../../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;pre' ) !== false ) ) )
<a name="l6972"><span class="linenum">6972</span></a>          { // Call <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('render_inline_files')" href="../../../_functions/render_inline_files.html" onMouseOver="funcPopup(event,'render_inline_files')">render_inline_files</a>() on everything outside code/pre:
<a name="l6973"><span class="linenum">6973</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['check_code_block'] = false;
<a name="l6974"><span class="linenum">6974</span></a>              <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>,
<a name="l6975"><span class="linenum">6975</span></a>                  '~&lt;(code|pre)[^&gt;]*&gt;.*?&lt;/\1&gt;~is',
<a name="l6976"><span class="linenum">6976</span></a>                  array( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'render_inline_files' ), array( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) );
<a name="l6977"><span class="linenum">6977</span></a>              return <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l6978"><span class="linenum">6978</span></a>          }
<a name="l6979"><span class="linenum">6979</span></a>  
<a name="l6980"><span class="linenum">6980</span></a>  <span class="comment">        // No code/pre blocks, replace on the whole thing</span>
<a name="l6981"><span class="linenum">6981</span></a>  
<a name="l6982"><span class="linenum">6982</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6983"><span class="linenum">6983</span></a>                  'before'              =&gt; '&lt;div&gt;',
<a name="l6984"><span class="linenum">6984</span></a>                  'before_image'        =&gt; '&lt;div class=&quot;image_block&quot;&gt;',
<a name="l6985"><span class="linenum">6985</span></a>                  'before_image_legend' =&gt; '&lt;div class=&quot;image_legend&quot;&gt;',
<a name="l6986"><span class="linenum">6986</span></a>                  'after_image_legend'  =&gt; '&lt;/div&gt;',
<a name="l6987"><span class="linenum">6987</span></a>                  'after_image'         =&gt; '&lt;/div&gt;',
<a name="l6988"><span class="linenum">6988</span></a>                  'after'               =&gt; '&lt;/div&gt;',
<a name="l6989"><span class="linenum">6989</span></a>                  'image_size'          =&gt; 'fit-400x320',
<a name="l6990"><span class="linenum">6990</span></a>                  'image_link_to'       =&gt; 'original', // Can be 'orginal' (image) or 'single' (this post)
<a name="l6991"><span class="linenum">6991</span></a>                  'limit'               =&gt; 1000, // Max # of images displayed
<a name="l6992"><span class="linenum">6992</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6993"><span class="linenum">6993</span></a>  
<a name="l6994"><span class="linenum">6994</span></a>  <span class="comment">        // Find all matches with inline tags</span>
<a name="l6995"><span class="linenum">6995</span></a>          <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( '/\[(image|file|inline):(\d+)(:?)([^\]]*)\]/i', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a> );
<a name="l6996"><span class="linenum">6996</span></a>  
<a name="l6997"><span class="linenum">6997</span></a>          if( !empty( <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[0] ) )
<a name="l6998"><span class="linenum">6998</span></a>          { // There are inline tags in the content
<a name="l6999"><span class="linenum">6999</span></a>  
<a name="l7000"><span class="linenum">7000</span></a>              if( !isset( <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> ) )
<a name="l7001"><span class="linenum">7001</span></a>              { // Get list of attached Links only first time
<a name="l7002"><span class="linenum">7002</span></a>                  <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l7003"><span class="linenum">7003</span></a>                  <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['limit'], 'inline' );
<a name="l7004"><span class="linenum">7004</span></a>              }
<a name="l7005"><span class="linenum">7005</span></a>  
<a name="l7006"><span class="linenum">7006</span></a>              if( empty( <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a> ) )
<a name="l7007"><span class="linenum">7007</span></a>              { // This Item has not the inline attached files, Exit here
<a name="l7008"><span class="linenum">7008</span></a>                  return <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l7009"><span class="linenum">7009</span></a>              }
<a name="l7010"><span class="linenum">7010</span></a>  
<a name="l7011"><span class="linenum">7011</span></a>              foreach( <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[0] as <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> =&gt; <a class="var it1741" onMouseOver="hilite(1741)" onMouseOut="lolite()" onClick="logVariable('current_link_tag')" href="../../../_variables/current_link_tag.html">$current_link_tag</a> )
<a name="l7012"><span class="linenum">7012</span></a>              {
<a name="l7013"><span class="linenum">7013</span></a>                  <a class="var it1742" onMouseOver="hilite(1742)" onMouseOut="lolite()" onClick="logVariable('inline_type')" href="../../../_variables/inline_type.html">$inline_type</a> = <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[1][<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>]; <span class="comment">// image|file|inline</span>
<a name="l7014"><span class="linenum">7014</span></a>                  <a class="var it1743" onMouseOver="hilite(1743)" onMouseOut="lolite()" onClick="logVariable('current_link_ID')" href="../../../_variables/current_link_ID.html">$current_link_ID</a> = (int)<a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[2][<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>];
<a name="l7015"><span class="linenum">7015</span></a>                  if( empty( <a class="var it1743" onMouseOver="hilite(1743)" onMouseOut="lolite()" onClick="logVariable('current_link_ID')" href="../../../_variables/current_link_ID.html">$current_link_ID</a> ) )
<a name="l7016"><span class="linenum">7016</span></a>                  { // Invalid link ID, Go to next match
<a name="l7017"><span class="linenum">7017</span></a>                      continue;
<a name="l7018"><span class="linenum">7018</span></a>                  }
<a name="l7019"><span class="linenum">7019</span></a>                  if( ! ( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a> = &amp; <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../../_variables/LinkList.html">$LinkList</a>-&gt;get_by_field( 'link_ID', <a class="var it1743" onMouseOver="hilite(1743)" onMouseOut="lolite()" onClick="logVariable('current_link_ID')" href="../../../_variables/current_link_ID.html">$current_link_ID</a> ) ) )
<a name="l7020"><span class="linenum">7020</span></a>                  { // Link is not found by ID
<a name="l7021"><span class="linenum">7021</span></a>                      continue;
<a name="l7022"><span class="linenum">7022</span></a>                  }
<a name="l7023"><span class="linenum">7023</span></a>  
<a name="l7024"><span class="linenum">7024</span></a>                  if( ! ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = &amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;get_File() ) )
<a name="l7025"><span class="linenum">7025</span></a>                  { // No File object
<a name="l7026"><span class="linenum">7026</span></a>                      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l7027"><span class="linenum">7027</span></a>                      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Link ID#%d of item #%d does not have a file object!', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a onClick="logVariable('ID')" class="var it10745" onMouseOver="hilite(10745)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l7028"><span class="linenum">7028</span></a>                      continue;
<a name="l7029"><span class="linenum">7029</span></a>                  }
<a name="l7030"><span class="linenum">7030</span></a>  
<a name="l7031"><span class="linenum">7031</span></a>                  if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l7032"><span class="linenum">7032</span></a>                  { // File doesn't exist
<a name="l7033"><span class="linenum">7033</span></a>                      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l7034"><span class="linenum">7034</span></a>                      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to item #%d does not exist (%s)!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l7035"><span class="linenum">7035</span></a>                      continue;
<a name="l7036"><span class="linenum">7036</span></a>                  }
<a name="l7037"><span class="linenum">7037</span></a>  
<a name="l7038"><span class="linenum">7038</span></a>                  <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l7039"><span class="linenum">7039</span></a>                  <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a> = array();
<a name="l7040"><span class="linenum">7040</span></a>                  if( ! empty( <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[3][<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] ) )
<a name="l7041"><span class="linenum">7041</span></a>                  {
<a name="l7042"><span class="linenum">7042</span></a>  <span class="comment">                    // Get the inline params: caption and class</span>
<a name="l7043"><span class="linenum">7043</span></a>                      <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ':.', <a class="var it1740" onMouseOver="hilite(1740)" onMouseOut="lolite()" onClick="logVariable('inlines')" href="../../../_variables/inlines.html">$inlines</a>[4][<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] );
<a name="l7044"><span class="linenum">7044</span></a>  
<a name="l7045"><span class="linenum">7045</span></a>                      if( ! empty( <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[0] ) )
<a name="l7046"><span class="linenum">7046</span></a>                      { // Image caption is set, so overwrite the image link title
<a name="l7047"><span class="linenum">7047</span></a>                          if( <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[0] == '-' )
<a name="l7048"><span class="linenum">7048</span></a>                          { // Image caption display is disabled
<a name="l7049"><span class="linenum">7049</span></a>                              <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['image_link_title'] = '';
<a name="l7050"><span class="linenum">7050</span></a>                              <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['hide_image_link_title'] = true;
<a name="l7051"><span class="linenum">7051</span></a>                          }
<a name="l7052"><span class="linenum">7052</span></a>                          else
<a name="l7053"><span class="linenum">7053</span></a>                          { // New image caption was set
<a name="l7054"><span class="linenum">7054</span></a>                              <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['image_link_title'] = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[0] );
<a name="l7055"><span class="linenum">7055</span></a>                          }
<a name="l7056"><span class="linenum">7056</span></a>  
<a name="l7057"><span class="linenum">7057</span></a>                          <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['image_desc'] = <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['image_link_title'];
<a name="l7058"><span class="linenum">7058</span></a>                          <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] = <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[0];
<a name="l7059"><span class="linenum">7059</span></a>                      }
<a name="l7060"><span class="linenum">7060</span></a>  
<a name="l7061"><span class="linenum">7061</span></a>                      <a class="var it1747" onMouseOver="hilite(1747)" onMouseOut="lolite()" onClick="logVariable('class_index')" href="../../../_variables/class_index.html">$class_index</a> = ( <a class="var it1742" onMouseOver="hilite(1742)" onMouseOut="lolite()" onClick="logVariable('inline_type')" href="../../../_variables/inline_type.html">$inline_type</a> == 'inline' ) ? 0 : 1; <span class="comment">// [inline] tag doesn't have a caption, so 0 index is for class param</span>
<a name="l7062"><span class="linenum">7062</span></a>                      if( ! empty( <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[ <a class="var it1747" onMouseOver="hilite(1747)" onMouseOut="lolite()" onClick="logVariable('class_index')" href="../../../_variables/class_index.html">$class_index</a> ] ) )
<a name="l7063"><span class="linenum">7063</span></a>                      { // A class name is set for the inline tags
<a name="l7064"><span class="linenum">7064</span></a>                          <a class="var it1748" onMouseOver="hilite(1748)" onMouseOut="lolite()" onClick="logVariable('image_extraclass')" href="../../../_variables/image_extraclass.html">$image_extraclass</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '.', ' ', <a class="var it1746" onMouseOver="hilite(1746)" onMouseOut="lolite()" onClick="logVariable('inline_params')" href="../../../_variables/inline_params.html">$inline_params</a>[ <a class="var it1747" onMouseOver="hilite(1747)" onMouseOut="lolite()" onClick="logVariable('class_index')" href="../../../_variables/class_index.html">$class_index</a> ] ) ) );
<a name="l7065"><span class="linenum">7065</span></a>                          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('#^[A-Za-z0-9\s\-_]+$#', <a class="var it1748" onMouseOver="hilite(1748)" onMouseOut="lolite()" onClick="logVariable('image_extraclass')" href="../../../_variables/image_extraclass.html">$image_extraclass</a> ) )
<a name="l7066"><span class="linenum">7066</span></a>                          { // Overwrite 'before_image' setting to add an extra class name
<a name="l7067"><span class="linenum">7067</span></a>                              <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['before_image'] = '&lt;div class=&quot;image_block '.<a class="var it1748" onMouseOver="hilite(1748)" onMouseOut="lolite()" onClick="logVariable('image_extraclass')" href="../../../_variables/image_extraclass.html">$image_extraclass</a>.'&quot;&gt;';
<a name="l7068"><span class="linenum">7068</span></a>  <span class="comment">                            // 'after_image' setting must be also defined, becuase it may be different than the default '&lt;/div&gt;'</span>
<a name="l7069"><span class="linenum">7069</span></a>                              <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a>['after_image'] = '&lt;/div&gt;';
<a name="l7070"><span class="linenum">7070</span></a>  
<a name="l7071"><span class="linenum">7071</span></a>  <span class="comment">                            // Set class for file inline tags</span>
<a name="l7072"><span class="linenum">7072</span></a>                              <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['class'] = <a class="var it1748" onMouseOver="hilite(1748)" onMouseOut="lolite()" onClick="logVariable('image_extraclass')" href="../../../_variables/image_extraclass.html">$image_extraclass</a>;
<a name="l7073"><span class="linenum">7073</span></a>                          }
<a name="l7074"><span class="linenum">7074</span></a>                      }
<a name="l7075"><span class="linenum">7075</span></a>                  }
<a name="l7076"><span class="linenum">7076</span></a>  
<a name="l7077"><span class="linenum">7077</span></a>                  if( <a class="var it1742" onMouseOver="hilite(1742)" onMouseOut="lolite()" onClick="logVariable('inline_type')" href="../../../_variables/inline_type.html">$inline_type</a> == 'image' &amp;&amp; <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l7078"><span class="linenum">7078</span></a>                  { // Generate the IMG tag with all the alt, title and desc if available
<a name="l7079"><span class="linenum">7079</span></a>                      <a class="var it1749" onMouseOver="hilite(1749)" onMouseOut="lolite()" onClick="logVariable('link_tag')" href="../../../_variables/link_tag.html">$link_tag</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attached_image_tag')" href="../../../_functions/get_attached_image_tag.html" onMouseOver="funcPopup(event,'get_attached_image_tag')">get_attached_image_tag</a>( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>, <a class="var it1744" onMouseOver="hilite(1744)" onMouseOut="lolite()" onClick="logVariable('current_image_params')" href="../../../_variables/current_image_params.html">$current_image_params</a> );
<a name="l7080"><span class="linenum">7080</span></a>                  }
<a name="l7081"><span class="linenum">7081</span></a>                  elseif( <a class="var it1742" onMouseOver="hilite(1742)" onMouseOut="lolite()" onClick="logVariable('inline_type')" href="../../../_variables/inline_type.html">$inline_type</a> == 'inline' )
<a name="l7082"><span class="linenum">7082</span></a>                  { // Generate simple IMG tag with original image size
<a name="l7083"><span class="linenum">7083</span></a>                      if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l7084"><span class="linenum">7084</span></a>                      { // Only when file is really image file
<a name="l7085"><span class="linenum">7085</span></a>                          <a class="var it1749" onMouseOver="hilite(1749)" onMouseOut="lolite()" onClick="logVariable('link_tag')" href="../../../_variables/link_tag.html">$link_tag</a> = '&lt;img src=&quot;'.<a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>().'&quot;'
<a name="l7086"><span class="linenum">7086</span></a>                              .( empty( <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['class'] ) ? '' : ' class=&quot;'.<a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['class'].'&quot;' )
<a name="l7087"><span class="linenum">7087</span></a>                              .' /&gt;';
<a name="l7088"><span class="linenum">7088</span></a>                      }
<a name="l7089"><span class="linenum">7089</span></a>                      else
<a name="l7090"><span class="linenum">7090</span></a>                      { // Display original inline tag when file is not image
<a name="l7091"><span class="linenum">7091</span></a>                          <a class="var it1749" onMouseOver="hilite(1749)" onMouseOut="lolite()" onClick="logVariable('link_tag')" href="../../../_variables/link_tag.html">$link_tag</a> = <a class="var it1741" onMouseOver="hilite(1741)" onMouseOut="lolite()" onClick="logVariable('current_link_tag')" href="../../../_variables/current_link_tag.html">$current_link_tag</a>;
<a name="l7092"><span class="linenum">7092</span></a>                      }
<a name="l7093"><span class="linenum">7093</span></a>                  }
<a name="l7094"><span class="linenum">7094</span></a>                  else
<a name="l7095"><span class="linenum">7095</span></a>                  { // Display icon+caption if file is not an image
<a name="l7096"><span class="linenum">7096</span></a>                      if( empty( <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] ) )
<a name="l7097"><span class="linenum">7097</span></a>                      { // Use real file name as title when it is not defined for inline tag
<a name="l7098"><span class="linenum">7098</span></a>                          <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../../_variables/file_title.html">$file_title</a> = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'title' );
<a name="l7099"><span class="linenum">7099</span></a>                          <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] = ' '.( empty( <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../../_variables/file_title.html">$file_title</a> ) ? <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() : <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../../_variables/file_title.html">$file_title</a> );
<a name="l7100"><span class="linenum">7100</span></a>                      }
<a name="l7101"><span class="linenum">7101</span></a>                      elseif( <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] == '-' )
<a name="l7102"><span class="linenum">7102</span></a>                      { // Don't display a title in this case, Only file icon will be displayed
<a name="l7103"><span class="linenum">7103</span></a>                          <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] = '';
<a name="l7104"><span class="linenum">7104</span></a>                      }
<a name="l7105"><span class="linenum">7105</span></a>                      else
<a name="l7106"><span class="linenum">7106</span></a>                      { // Add a space between file icon and title
<a name="l7107"><span class="linenum">7107</span></a>                          <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'] = ' '.<a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'];
<a name="l7108"><span class="linenum">7108</span></a>                      }
<a name="l7109"><span class="linenum">7109</span></a>                      <a class="var it1749" onMouseOver="hilite(1749)" onMouseOut="lolite()" onClick="logVariable('link_tag')" href="../../../_variables/link_tag.html">$link_tag</a> = '&lt;a href=&quot;'.<a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>().'&quot;'
<a name="l7110"><span class="linenum">7110</span></a>                          .( empty( <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['class'] ) ? '' : ' class=&quot;'.<a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['class'].'&quot;' )
<a name="l7111"><span class="linenum">7111</span></a>                          .'&gt;'.<a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a> ).<a class="var it1745" onMouseOver="hilite(1745)" onMouseOut="lolite()" onClick="logVariable('current_file_params')" href="../../../_variables/current_file_params.html">$current_file_params</a>['title'].'&lt;/a&gt;';
<a name="l7112"><span class="linenum">7112</span></a>                  }
<a name="l7113"><span class="linenum">7113</span></a>  
<a name="l7114"><span class="linenum">7114</span></a>  <span class="comment">                // Replace inline image tag with HTML img tag</span>
<a name="l7115"><span class="linenum">7115</span></a>                  <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it1741" onMouseOver="hilite(1741)" onMouseOut="lolite()" onClick="logVariable('current_link_tag')" href="../../../_variables/current_link_tag.html">$current_link_tag</a>, <a class="var it1749" onMouseOver="hilite(1749)" onMouseOut="lolite()" onClick="logVariable('link_tag')" href="../../../_variables/link_tag.html">$link_tag</a>, <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l7116"><span class="linenum">7116</span></a>              }
<a name="l7117"><span class="linenum">7117</span></a>          }
<a name="l7118"><span class="linenum">7118</span></a>  
<a name="l7119"><span class="linenum">7119</span></a>          return <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l7120"><span class="linenum">7120</span></a>      }
<a name="l7121"><span class="linenum">7121</span></a>  
<a name="l7122"><span class="linenum">7122</span></a>  
<a name="l7123"><span class="linenum">7123</span></a>  	function <a class="function" onClick="logFunction('set_last_touched_ts')" href="../../../_functions/set_last_touched_ts.html" onMouseOver="funcPopup(event,'set_last_touched_ts')">set_last_touched_ts</a>()
<a name="l7124"><span class="linenum">7124</span></a>      {
<a name="l7125"><span class="linenum">7125</span></a>          global <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l7126"><span class="linenum">7126</span></a>  
<a name="l7127"><span class="linenum">7127</span></a>          if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l7128"><span class="linenum">7128</span></a>          {
<a name="l7129"><span class="linenum">7129</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_content_read_status')" href="../../../_functions/load_content_read_status.html" onMouseOver="funcPopup(event,'load_content_read_status')">load_content_read_status</a>();
<a name="l7130"><span class="linenum">7130</span></a>          }
<a name="l7131"><span class="linenum">7131</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'last_touched_ts', 'date', <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) );
<a name="l7132"><span class="linenum">7132</span></a>      }
<a name="l7133"><span class="linenum">7133</span></a>  
<a name="l7134"><span class="linenum">7134</span></a>  
<a name="l7135"><span class="linenum">7135</span></a>      <span class="comment">/**</span>
<a name="l7136"><span class="linenum">7136</span></a>  <span class="comment">     * Update field last_touched_ts</span>
<a name="l7137"><span class="linenum">7137</span></a>  <span class="comment">     *</span>
<a name="l7138"><span class="linenum">7138</span></a>  <span class="comment">     * @param boolean Use transaction</span>
<a name="l7139"><span class="linenum">7139</span></a>  <span class="comment">     * @param boolean Use FALSE to update only the categories</span>
<a name="l7140"><span class="linenum">7140</span></a>  <span class="comment">     */</span>
<a name="l7141"><span class="linenum">7141</span></a>  	function <a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> = true, <a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('update_item_date')" href="../../../_variables/update_item_date.html">$update_item_date</a> = true )
<a name="l7142"><span class="linenum">7142</span></a>      {
<a name="l7143"><span class="linenum">7143</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l7144"><span class="linenum">7144</span></a>          {
<a name="l7145"><span class="linenum">7145</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l7146"><span class="linenum">7146</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l7147"><span class="linenum">7147</span></a>          }
<a name="l7148"><span class="linenum">7148</span></a>  
<a name="l7149"><span class="linenum">7149</span></a>          if( <a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('update_item_date')" href="../../../_variables/update_item_date.html">$update_item_date</a> )
<a name="l7150"><span class="linenum">7150</span></a>          {
<a name="l7151"><span class="linenum">7151</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_last_touched_ts')" href="../../../_functions/set_last_touched_ts.html" onMouseOver="funcPopup(event,'set_last_touched_ts')">set_last_touched_ts</a>();
<a name="l7152"><span class="linenum">7152</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( false, false, false );
<a name="l7153"><span class="linenum">7153</span></a>          }
<a name="l7154"><span class="linenum">7154</span></a>  
<a name="l7155"><span class="linenum">7155</span></a>  <span class="comment">        // Also update last touched date of all categories of this Item</span>
<a name="l7156"><span class="linenum">7156</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>();
<a name="l7157"><span class="linenum">7157</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> ) &gt; 0 )
<a name="l7158"><span class="linenum">7158</span></a>          {
<a name="l7159"><span class="linenum">7159</span></a>              foreach( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> as <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> )
<a name="l7160"><span class="linenum">7160</span></a>              {
<a name="l7161"><span class="linenum">7161</span></a>                  <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l7162"><span class="linenum">7162</span></a>                  while( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> )
<a name="l7163"><span class="linenum">7163</span></a>                  { // Update all parent chapters recursively
<a name="l7164"><span class="linenum">7164</span></a>                      <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;get_parent_Chapter();
<a name="l7165"><span class="linenum">7165</span></a>                      if( ! empty( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> ) )
<a name="l7166"><span class="linenum">7166</span></a>                      {
<a name="l7167"><span class="linenum">7167</span></a>                          <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l7168"><span class="linenum">7168</span></a>                      }
<a name="l7169"><span class="linenum">7169</span></a>                  }
<a name="l7170"><span class="linenum">7170</span></a>              }
<a name="l7171"><span class="linenum">7171</span></a>          }
<a name="l7172"><span class="linenum">7172</span></a>  
<a name="l7173"><span class="linenum">7173</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l7174"><span class="linenum">7174</span></a>          {
<a name="l7175"><span class="linenum">7175</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l7176"><span class="linenum">7176</span></a>          }
<a name="l7177"><span class="linenum">7177</span></a>      }
<a name="l7178"><span class="linenum">7178</span></a>  
<a name="l7179"><span class="linenum">7179</span></a>  
<a name="l7180"><span class="linenum">7180</span></a>      <span class="comment">/**</span>
<a name="l7181"><span class="linenum">7181</span></a>  <span class="comment">     * Update field uprs_read_post_ts for current User</span>
<a name="l7182"><span class="linenum">7182</span></a>  <span class="comment">     *</span>
<a name="l7183"><span class="linenum">7183</span></a>  <span class="comment">     * @param boolean TRUE to update a post read timestamp</span>
<a name="l7184"><span class="linenum">7184</span></a>  <span class="comment">     * @param boolean TRUE to update a comments read timestamp</span>
<a name="l7185"><span class="linenum">7185</span></a>  <span class="comment">     */</span>
<a name="l7186"><span class="linenum">7186</span></a>  	function <a class="function" onClick="logFunction('update_read_timestamps')" href="../../../_functions/update_read_timestamps.html" onMouseOver="funcPopup(event,'update_read_timestamps')">update_read_timestamps</a>( <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> = true, <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('read_comments')" href="../../../_variables/read_comments.html">$read_comments</a> = true )
<a name="l7187"><span class="linenum">7187</span></a>      {
<a name="l7188"><span class="linenum">7188</span></a>          if( ! <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> &amp;&amp; ! <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('read_comments')" href="../../../_variables/read_comments.html">$read_comments</a> )
<a name="l7189"><span class="linenum">7189</span></a>          { // Nothing to update
<a name="l7190"><span class="linenum">7190</span></a>              return;
<a name="l7191"><span class="linenum">7191</span></a>          }
<a name="l7192"><span class="linenum">7192</span></a>  
<a name="l7193"><span class="linenum">7193</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == 0 )
<a name="l7194"><span class="linenum">7194</span></a>          { // Item is not saved in DB
<a name="l7195"><span class="linenum">7195</span></a>              return;
<a name="l7196"><span class="linenum">7196</span></a>          }
<a name="l7197"><span class="linenum">7197</span></a>  
<a name="l7198"><span class="linenum">7198</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l7199"><span class="linenum">7199</span></a>          { // User is not logged in
<a name="l7200"><span class="linenum">7200</span></a>              return;
<a name="l7201"><span class="linenum">7201</span></a>          }
<a name="l7202"><span class="linenum">7202</span></a>  
<a name="l7203"><span class="linenum">7203</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l7204"><span class="linenum">7204</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'track_unread_content' ) )
<a name="l7205"><span class="linenum">7205</span></a>          {    // The tracking of unread content is turned off for the collection
<a name="l7206"><span class="linenum">7206</span></a>              return;
<a name="l7207"><span class="linenum">7207</span></a>          }
<a name="l7208"><span class="linenum">7208</span></a>  
<a name="l7209"><span class="linenum">7209</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>;
<a name="l7210"><span class="linenum">7210</span></a>  
<a name="l7211"><span class="linenum">7211</span></a>          <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> = <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> );
<a name="l7212"><span class="linenum">7212</span></a>  
<a name="l7213"><span class="linenum">7213</span></a>          <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_read_date')" href="../../../_functions/get_read_date.html" onMouseOver="funcPopup(event,'get_read_date')">get_read_date</a>();
<a name="l7214"><span class="linenum">7214</span></a>  
<a name="l7215"><span class="linenum">7215</span></a>          if( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> == <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> )
<a name="l7216"><span class="linenum">7216</span></a>          {    // The read status is already updated, Don't repeat it:
<a name="l7217"><span class="linenum">7217</span></a>              return;
<a name="l7218"><span class="linenum">7218</span></a>          }
<a name="l7219"><span class="linenum">7219</span></a>  
<a name="l7220"><span class="linenum">7220</span></a>          if( ! empty( <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> ) )
<a name="l7221"><span class="linenum">7221</span></a>          {    // Update the read status:
<a name="l7222"><span class="linenum">7222</span></a>              <a class="var it1756" onMouseOver="hilite(1756)" onMouseOut="lolite()" onClick="logVariable('update_fields')" href="../../../_variables/update_fields.html">$update_fields</a> = '';
<a name="l7223"><span class="linenum">7223</span></a>              if( <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> )
<a name="l7224"><span class="linenum">7224</span></a>              {    // Update a post read timestamp:
<a name="l7225"><span class="linenum">7225</span></a>                  <a class="var it1756" onMouseOver="hilite(1756)" onMouseOut="lolite()" onClick="logVariable('update_fields')" href="../../../_variables/update_fields.html">$update_fields</a> = 'uprs_read_post_ts = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l7226"><span class="linenum">7226</span></a>              }
<a name="l7227"><span class="linenum">7227</span></a>              if( <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('read_comments')" href="../../../_variables/read_comments.html">$read_comments</a> )
<a name="l7228"><span class="linenum">7228</span></a>              {    // Update a comments read timestamp:
<a name="l7229"><span class="linenum">7229</span></a>                  if( <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> )
<a name="l7230"><span class="linenum">7230</span></a>                  {
<a name="l7231"><span class="linenum">7231</span></a>                      <a class="var it1756" onMouseOver="hilite(1756)" onMouseOut="lolite()" onClick="logVariable('update_fields')" href="../../../_variables/update_fields.html">$update_fields</a> .= ', ';
<a name="l7232"><span class="linenum">7232</span></a>                  }
<a name="l7233"><span class="linenum">7233</span></a>                  <a class="var it1756" onMouseOver="hilite(1756)" onMouseOut="lolite()" onClick="logVariable('update_fields')" href="../../../_variables/update_fields.html">$update_fields</a> .= 'uprs_read_comment_ts = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l7234"><span class="linenum">7234</span></a>              }
<a name="l7235"><span class="linenum">7235</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_users__postreadstatus
<a name="l7236"><span class="linenum">7236</span></a>                    SET '.<a class="var it1756" onMouseOver="hilite(1756)" onMouseOut="lolite()" onClick="logVariable('update_fields')" href="../../../_variables/update_fields.html">$update_fields</a>.'
<a name="l7237"><span class="linenum">7237</span></a>                  WHERE uprs_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).'
<a name="l7238"><span class="linenum">7238</span></a>                    AND uprs_post_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l7239"><span class="linenum">7239</span></a>          }
<a name="l7240"><span class="linenum">7240</span></a>          else
<a name="l7241"><span class="linenum">7241</span></a>          {    // Insert new read status:
<a name="l7242"><span class="linenum">7242</span></a>              <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('insert_fields')" href="../../../_variables/insert_fields.html">$insert_fields</a> = '';
<a name="l7243"><span class="linenum">7243</span></a>              <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('insert_values')" href="../../../_variables/insert_values.html">$insert_values</a> = '';
<a name="l7244"><span class="linenum">7244</span></a>              if( <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> )
<a name="l7245"><span class="linenum">7245</span></a>              {    // Update a post read timestamp:
<a name="l7246"><span class="linenum">7246</span></a>                  <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('insert_fields')" href="../../../_variables/insert_fields.html">$insert_fields</a> = 'uprs_read_post_ts';
<a name="l7247"><span class="linenum">7247</span></a>                  <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('insert_values')" href="../../../_variables/insert_values.html">$insert_values</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l7248"><span class="linenum">7248</span></a>              }
<a name="l7249"><span class="linenum">7249</span></a>              if( <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('read_comments')" href="../../../_variables/read_comments.html">$read_comments</a> )
<a name="l7250"><span class="linenum">7250</span></a>              {    // Update a comments read timestamp:
<a name="l7251"><span class="linenum">7251</span></a>                  if( <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('read_post')" href="../../../_variables/read_post.html">$read_post</a> )
<a name="l7252"><span class="linenum">7252</span></a>                  {
<a name="l7253"><span class="linenum">7253</span></a>                      <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('insert_fields')" href="../../../_variables/insert_fields.html">$insert_fields</a> .= ', ';
<a name="l7254"><span class="linenum">7254</span></a>                      <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('insert_values')" href="../../../_variables/insert_values.html">$insert_values</a> .= ', ';
<a name="l7255"><span class="linenum">7255</span></a>                  }
<a name="l7256"><span class="linenum">7256</span></a>                  <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('insert_fields')" href="../../../_variables/insert_fields.html">$insert_fields</a> .= 'uprs_read_comment_ts';
<a name="l7257"><span class="linenum">7257</span></a>                  <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('insert_values')" href="../../../_variables/insert_values.html">$insert_values</a> .= <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l7258"><span class="linenum">7258</span></a>              }
<a name="l7259"><span class="linenum">7259</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'INSERT INTO T_users__postreadstatus ( uprs_user_ID, uprs_post_ID, '.<a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('insert_fields')" href="../../../_variables/insert_fields.html">$insert_fields</a>.' )
<a name="l7260"><span class="linenum">7260</span></a>                  VALUES ( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).', '.<a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('insert_values')" href="../../../_variables/insert_values.html">$insert_values</a>.' )' );
<a name="l7261"><span class="linenum">7261</span></a>          }
<a name="l7262"><span class="linenum">7262</span></a>  
<a name="l7263"><span class="linenum">7263</span></a>  <span class="comment">        // Update the cached date:</span>
<a name="l7264"><span class="linenum">7264</span></a>          <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] = <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>;
<a name="l7265"><span class="linenum">7265</span></a>      }
<a name="l7266"><span class="linenum">7266</span></a>  
<a name="l7267"><span class="linenum">7267</span></a>  
<a name="l7268"><span class="linenum">7268</span></a>      <span class="comment">/**</span>
<a name="l7269"><span class="linenum">7269</span></a>  <span class="comment">     * Load timestamp when this post content was read by the current User</span>
<a name="l7270"><span class="linenum">7270</span></a>  <span class="comment">     */</span>
<a name="l7271"><span class="linenum">7271</span></a>  	function <a class="function" onClick="logFunction('load_content_read_status')" href="../../../_functions/load_content_read_status.html" onMouseOver="funcPopup(event,'load_content_read_status')">load_content_read_status</a>()
<a name="l7272"><span class="linenum">7272</span></a>      {
<a name="l7273"><span class="linenum">7273</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l7274"><span class="linenum">7274</span></a>          {
<a name="l7275"><span class="linenum">7275</span></a>              return;
<a name="l7276"><span class="linenum">7276</span></a>          }
<a name="l7277"><span class="linenum">7277</span></a>  
<a name="l7278"><span class="linenum">7278</span></a>          if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_read_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_read_status.html">content_read_status</a> ) )
<a name="l7279"><span class="linenum">7279</span></a>          {
<a name="l7280"><span class="linenum">7280</span></a>              return;
<a name="l7281"><span class="linenum">7281</span></a>          }
<a name="l7282"><span class="linenum">7282</span></a>  
<a name="l7283"><span class="linenum">7283</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content_read_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content_read_status.html">content_read_status</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_read_status')" href="../../../_functions/get_read_status.html" onMouseOver="funcPopup(event,'get_read_status')">get_read_status</a>();
<a name="l7284"><span class="linenum">7284</span></a>      }
<a name="l7285"><span class="linenum">7285</span></a>  
<a name="l7286"><span class="linenum">7286</span></a>  
<a name="l7287"><span class="linenum">7287</span></a>      <span class="comment">/**</span>
<a name="l7288"><span class="linenum">7288</span></a>  <span class="comment">     * Get the read status of this post and its comments for current User</span>
<a name="l7289"><span class="linenum">7289</span></a>  <span class="comment">     *</span>
<a name="l7290"><span class="linenum">7290</span></a>  <span class="comment">     * @return string 'read' - when current User already read this post</span>
<a name="l7291"><span class="linenum">7291</span></a>  <span class="comment">     *                'updated' - current user didn't read some new changes</span>
<a name="l7292"><span class="linenum">7292</span></a>  <span class="comment">     *                'new' - the post is new for current user</span>
<a name="l7293"><span class="linenum">7293</span></a>  <span class="comment">     */</span>
<a name="l7294"><span class="linenum">7294</span></a>  	function <a class="function" onClick="logFunction('get_read_status')" href="../../../_functions/get_read_status.html" onMouseOver="funcPopup(event,'get_read_status')">get_read_status</a>()
<a name="l7295"><span class="linenum">7295</span></a>      {
<a name="l7296"><span class="linenum">7296</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == 0 )
<a name="l7297"><span class="linenum">7297</span></a>          { // Item is not saved in DB
<a name="l7298"><span class="linenum">7298</span></a>              return 'read';
<a name="l7299"><span class="linenum">7299</span></a>          }
<a name="l7300"><span class="linenum">7300</span></a>  
<a name="l7301"><span class="linenum">7301</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l7302"><span class="linenum">7302</span></a>          { // User is not logged in
<a name="l7303"><span class="linenum">7303</span></a>              return 'read';
<a name="l7304"><span class="linenum">7304</span></a>          }
<a name="l7305"><span class="linenum">7305</span></a>  
<a name="l7306"><span class="linenum">7306</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l7307"><span class="linenum">7307</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'track_unread_content' ) )
<a name="l7308"><span class="linenum">7308</span></a>          {    // The tracking of unread content is turned off for the collection
<a name="l7309"><span class="linenum">7309</span></a>              return 'read';
<a name="l7310"><span class="linenum">7310</span></a>          }
<a name="l7311"><span class="linenum">7311</span></a>  
<a name="l7312"><span class="linenum">7312</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l7313"><span class="linenum">7313</span></a>  
<a name="l7314"><span class="linenum">7314</span></a>          <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_read_date')" href="../../../_functions/get_read_date.html" onMouseOver="funcPopup(event,'get_read_date')">get_read_date</a>();
<a name="l7315"><span class="linenum">7315</span></a>  
<a name="l7316"><span class="linenum">7316</span></a>          if( empty( <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> ) )
<a name="l7317"><span class="linenum">7317</span></a>          {    // This post is recent for current user
<a name="l7318"><span class="linenum">7318</span></a>              return 'new';
<a name="l7319"><span class="linenum">7319</span></a>          }
<a name="l7320"><span class="linenum">7320</span></a>  
<a name="l7321"><span class="linenum">7321</span></a>  <span class="comment">        // In theory, it would be more safe to use this comparison:</span>
<a name="l7322"><span class="linenum">7322</span></a>  <span class="comment">        // if( $read_date &gt; $this-&gt;last_touched_ts )</span>
<a name="l7323"><span class="linenum">7323</span></a>  <span class="comment">        // But until we have milli- or micro-second precision on timestamps, we decided it was a better trade-off to never see our own edits as unread. So we use:</span>
<a name="l7324"><span class="linenum">7324</span></a>          if( <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('read_date')" href="../../../_variables/read_date.html">$read_date</a> &gt;= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last_touched_ts')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/last_touched_ts.html">last_touched_ts</a> )
<a name="l7325"><span class="linenum">7325</span></a>          {    // This post was read by current user
<a name="l7326"><span class="linenum">7326</span></a>              return 'read';
<a name="l7327"><span class="linenum">7327</span></a>          }
<a name="l7328"><span class="linenum">7328</span></a>  
<a name="l7329"><span class="linenum">7329</span></a>  <span class="comment">        // This post is Unread by current user</span>
<a name="l7330"><span class="linenum">7330</span></a>          return 'updated';
<a name="l7331"><span class="linenum">7331</span></a>      }
<a name="l7332"><span class="linenum">7332</span></a>  
<a name="l7333"><span class="linenum">7333</span></a>  
<a name="l7334"><span class="linenum">7334</span></a>      <span class="comment">/**</span>
<a name="l7335"><span class="linenum">7335</span></a>  <span class="comment">     * Get the read dates from DB or from Cached array of this post for current User</span>
<a name="l7336"><span class="linenum">7336</span></a>  <span class="comment">     *</span>
<a name="l7337"><span class="linenum">7337</span></a>  <span class="comment">     * @return string The read date of this post</span>
<a name="l7338"><span class="linenum">7338</span></a>  <span class="comment">     */</span>
<a name="l7339"><span class="linenum">7339</span></a>  	function <a class="function" onClick="logFunction('get_read_date')" href="../../../_functions/get_read_date.html" onMouseOver="funcPopup(event,'get_read_date')">get_read_date</a>()
<a name="l7340"><span class="linenum">7340</span></a>      {
<a name="l7341"><span class="linenum">7341</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>;
<a name="l7342"><span class="linenum">7342</span></a>  
<a name="l7343"><span class="linenum">7343</span></a>          if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a> ) )
<a name="l7344"><span class="linenum">7344</span></a>          { // Init array first time
<a name="l7345"><span class="linenum">7345</span></a>              <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a> = array();
<a name="l7346"><span class="linenum">7346</span></a>          }
<a name="l7347"><span class="linenum">7347</span></a>  
<a name="l7348"><span class="linenum">7348</span></a>          if( !isset( <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] ) )
<a name="l7349"><span class="linenum">7349</span></a>          { // Get the read post date only one time from DB and store it in cache array
<a name="l7350"><span class="linenum">7350</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l7351"><span class="linenum">7351</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'uprs_read_post_ts' );
<a name="l7352"><span class="linenum">7352</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users__postreadstatus' );
<a name="l7353"><span class="linenum">7353</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'uprs_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l7354"><span class="linenum">7354</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'uprs_post_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l7355"><span class="linenum">7355</span></a>              <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l7356"><span class="linenum">7356</span></a>          }
<a name="l7357"><span class="linenum">7357</span></a>  
<a name="l7358"><span class="linenum">7358</span></a>          if( ! isset( <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] ) )
<a name="l7359"><span class="linenum">7359</span></a>          {    // Init empty read date:
<a name="l7360"><span class="linenum">7360</span></a>              <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] = 0;
<a name="l7361"><span class="linenum">7361</span></a>          }
<a name="l7362"><span class="linenum">7362</span></a>  
<a name="l7363"><span class="linenum">7363</span></a>          return <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('user_post_read_statuses')" href="../../../_variables/user_post_read_statuses.html">$user_post_read_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ];
<a name="l7364"><span class="linenum">7364</span></a>      }
<a name="l7365"><span class="linenum">7365</span></a>  
<a name="l7366"><span class="linenum">7366</span></a>  
<a name="l7367"><span class="linenum">7367</span></a>      <span class="comment">/**</span>
<a name="l7368"><span class="linenum">7368</span></a>  <span class="comment">     * Display the icon if this post is unread by current User</span>
<a name="l7369"><span class="linenum">7369</span></a>  <span class="comment">     *</span>
<a name="l7370"><span class="linenum">7370</span></a>  <span class="comment">     * @param array Params</span>
<a name="l7371"><span class="linenum">7371</span></a>  <span class="comment">     */</span>
<a name="l7372"><span class="linenum">7372</span></a>  	function <a class="function" onClick="logFunction('display_unread_status')" href="../../../_functions/display_unread_status.html" onMouseOver="funcPopup(event,'display_unread_status')">display_unread_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l7373"><span class="linenum">7373</span></a>      {
<a name="l7374"><span class="linenum">7374</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l7375"><span class="linenum">7375</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'track_unread_content' ) )
<a name="l7376"><span class="linenum">7376</span></a>          {    // The tracking of unread content is turned off for the collection
<a name="l7377"><span class="linenum">7377</span></a>              return;
<a name="l7378"><span class="linenum">7378</span></a>          }
<a name="l7379"><span class="linenum">7379</span></a>  
<a name="l7380"><span class="linenum">7380</span></a>  <span class="comment">        // Set titles by Blog type:</span>
<a name="l7381"><span class="linenum">7381</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'type' ) == 'forum' )
<a name="l7382"><span class="linenum">7382</span></a>          {
<a name="l7383"><span class="linenum">7383</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('title_new')" href="../../../_variables/title_new.html">$title_new</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New topic');
<a name="l7384"><span class="linenum">7384</span></a>              <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('title_updated')" href="../../../_variables/title_updated.html">$title_updated</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Updated topic');
<a name="l7385"><span class="linenum">7385</span></a>          }
<a name="l7386"><span class="linenum">7386</span></a>          else
<a name="l7387"><span class="linenum">7387</span></a>          {
<a name="l7388"><span class="linenum">7388</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('title_new')" href="../../../_variables/title_new.html">$title_new</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New post');
<a name="l7389"><span class="linenum">7389</span></a>              <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('title_updated')" href="../../../_variables/title_updated.html">$title_updated</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Updated post');
<a name="l7390"><span class="linenum">7390</span></a>          }
<a name="l7391"><span class="linenum">7391</span></a>  
<a name="l7392"><span class="linenum">7392</span></a>  <span class="comment">        // Merge params</span>
<a name="l7393"><span class="linenum">7393</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l7394"><span class="linenum">7394</span></a>                  'before'        =&gt; ' ',
<a name="l7395"><span class="linenum">7395</span></a>                  'after'         =&gt; '',
<a name="l7396"><span class="linenum">7396</span></a>                  'class'         =&gt; 'track_content',
<a name="l7397"><span class="linenum">7397</span></a>                  'title_new'     =&gt; <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('title_new')" href="../../../_variables/title_new.html">$title_new</a>,
<a name="l7398"><span class="linenum">7398</span></a>                  'title_updated' =&gt; <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('title_updated')" href="../../../_variables/title_updated.html">$title_updated</a>,
<a name="l7399"><span class="linenum">7399</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l7400"><span class="linenum">7400</span></a>  
<a name="l7401"><span class="linenum">7401</span></a>          switch( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_read_status')" href="../../../_functions/get_read_status.html" onMouseOver="funcPopup(event,'get_read_status')">get_read_status</a>() )
<a name="l7402"><span class="linenum">7402</span></a>          {
<a name="l7403"><span class="linenum">7403</span></a>              case 'new':
<a name="l7404"><span class="linenum">7404</span></a>  <span class="comment">                // This post is new for the current User, it was never opened</span>
<a name="l7405"><span class="linenum">7405</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l7406"><span class="linenum">7406</span></a>                  echo <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'bullet_orange', 'imgtag', array( 'title' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_new'], 'class' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) );
<a name="l7407"><span class="linenum">7407</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l7408"><span class="linenum">7408</span></a>                  break;
<a name="l7409"><span class="linenum">7409</span></a>  
<a name="l7410"><span class="linenum">7410</span></a>              case 'updated':
<a name="l7411"><span class="linenum">7411</span></a>  <span class="comment">                // The last updates of this post was not read by the current User</span>
<a name="l7412"><span class="linenum">7412</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l7413"><span class="linenum">7413</span></a>                  echo <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'bullet_brown', 'imgtag', array( 'title' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_updated'], 'class' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) );
<a name="l7414"><span class="linenum">7414</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l7415"><span class="linenum">7415</span></a>                  break;
<a name="l7416"><span class="linenum">7416</span></a>  
<a name="l7417"><span class="linenum">7417</span></a>              case 'read':
<a name="l7418"><span class="linenum">7418</span></a>              default:
<a name="l7419"><span class="linenum">7419</span></a>  <span class="comment">                // Don't display status icons if user already have read this post</span>
<a name="l7420"><span class="linenum">7420</span></a>                  break;
<a name="l7421"><span class="linenum">7421</span></a>          }
<a name="l7422"><span class="linenum">7422</span></a>      }
<a name="l7423"><span class="linenum">7423</span></a>  
<a name="l7424"><span class="linenum">7424</span></a>  
<a name="l7425"><span class="linenum">7425</span></a>      <span class="comment">/**</span>
<a name="l7426"><span class="linenum">7426</span></a>  <span class="comment">     * Check if item has a goal to insert a hit into DB</span>
<a name="l7427"><span class="linenum">7427</span></a>  <span class="comment">     *</span>
<a name="l7428"><span class="linenum">7428</span></a>  <span class="comment">     * @return boolean TRUE if goal hit was inser</span>
<a name="l7429"><span class="linenum">7429</span></a>  <span class="comment">     */</span>
<a name="l7430"><span class="linenum">7430</span></a>  	function <a class="function" onClick="logFunction('check_goal')" href="../../../_functions/check_goal.html" onMouseOver="funcPopup(event,'check_goal')">check_goal</a>()
<a name="l7431"><span class="linenum">7431</span></a>      {
<a name="l7432"><span class="linenum">7432</span></a>          <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'goal_ID' );
<a name="l7433"><span class="linenum">7433</span></a>  
<a name="l7434"><span class="linenum">7434</span></a>          if( empty( <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a> ) )
<a name="l7435"><span class="linenum">7435</span></a>          { // Item has no goal ID
<a name="l7436"><span class="linenum">7436</span></a>              return false;
<a name="l7437"><span class="linenum">7437</span></a>          }
<a name="l7438"><span class="linenum">7438</span></a>  
<a name="l7439"><span class="linenum">7439</span></a>          <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('GoalCache')" href="../../../_variables/GoalCache.html">$GoalCache</a> = &amp; get_GoalCache();
<a name="l7440"><span class="linenum">7440</span></a>          if( ( <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('Goal')" href="../../../_variables/Goal.html">$Goal</a> = <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('GoalCache')" href="../../../_variables/GoalCache.html">$GoalCache</a>-&gt;get_by_ID( <a class="var it1506" onMouseOver="hilite(1506)" onMouseOut="lolite()" onClick="logVariable('goal_ID')" href="../../../_variables/goal_ID.html">$goal_ID</a>, false, false ) ) === false )
<a name="l7441"><span class="linenum">7441</span></a>          { // Goal ID is incorrect
<a name="l7442"><span class="linenum">7442</span></a>              return false;
<a name="l7443"><span class="linenum">7443</span></a>          }
<a name="l7444"><span class="linenum">7444</span></a>  
<a name="l7445"><span class="linenum">7445</span></a>          global <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l7446"><span class="linenum">7446</span></a>  
<a name="l7447"><span class="linenum">7447</span></a>  <span class="comment">        // We need to log the HIT now! Because we need the hit ID!</span>
<a name="l7448"><span class="linenum">7448</span></a>          <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>();
<a name="l7449"><span class="linenum">7449</span></a>  
<a name="l7450"><span class="linenum">7450</span></a>  <span class="comment">        // Record a goal hit:</span>
<a name="l7451"><span class="linenum">7451</span></a>          return <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'INSERT INTO T_track__goalhit
<a name="l7452"><span class="linenum">7452</span></a>                     ( ghit_goal_ID, ghit_hit_ID, ghit_params )
<a name="l7453"><span class="linenum">7453</span></a>              VALUES ( '.<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('Goal')" href="../../../_variables/Goal.html">$Goal</a>-&gt;<a onClick="logVariable('ID')" class="var it10710" onMouseOver="hilite(10710)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', '.<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>-&gt;<a onClick="logVariable('ID')" class="var it10691" onMouseOver="hilite(10691)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( 'item_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).' )',
<a name="l7454"><span class="linenum">7454</span></a>              'Record goal hit of item #'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l7455"><span class="linenum">7455</span></a>      }
<a name="l7456"><span class="linenum">7456</span></a>  
<a name="l7457"><span class="linenum">7457</span></a>  
<a name="l7458"><span class="linenum">7458</span></a>      <span class="comment">/**</span>
<a name="l7459"><span class="linenum">7459</span></a>  <span class="comment">     * Get link to edit post type</span>
<a name="l7460"><span class="linenum">7460</span></a>  <span class="comment">     *</span>
<a name="l7461"><span class="linenum">7461</span></a>  <span class="comment">     * @param string What attibute to return:</span>
<a name="l7462"><span class="linenum">7462</span></a>  <span class="comment">     *                    'link' - html tag &lt;a&gt;</span>
<a name="l7463"><span class="linenum">7463</span></a>  <span class="comment">     *                    'url' - URL</span>
<a name="l7464"><span class="linenum">7464</span></a>  <span class="comment">     *                    'onclick' - javascript event onclick</span>
<a name="l7465"><span class="linenum">7465</span></a>  <span class="comment">     * @param string Link text</span>
<a name="l7466"><span class="linenum">7466</span></a>  <span class="comment">     * @param string Link title</span>
<a name="l7467"><span class="linenum">7467</span></a>  <span class="comment">     * @return string</span>
<a name="l7468"><span class="linenum">7468</span></a>  <span class="comment">     */</span>
<a name="l7469"><span class="linenum">7469</span></a>  	function <a class="function" onClick="logFunction('get_type_edit_link')" href="../../../_functions/get_type_edit_link.html" onMouseOver="funcPopup(event,'get_type_edit_link')">get_type_edit_link</a>( <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../../../_variables/attr.html">$attr</a> = 'link', <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = '', <a class="var it1575" onMouseOver="hilite(1575)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../_variables/link_title.html">$link_title</a> = '' )
<a name="l7470"><span class="linenum">7470</span></a>      {
<a name="l7471"><span class="linenum">7471</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l7472"><span class="linenum">7472</span></a>  
<a name="l7473"><span class="linenum">7473</span></a>  <span class="comment">        // Check if current user can edit the type of this item</span>
<a name="l7474"><span class="linenum">7474</span></a>          <a class="var it1763" onMouseOver="hilite(1763)" onMouseOut="lolite()" onClick="logVariable('has_perm_edit')" href="../../../_variables/has_perm_edit.html">$has_perm_edit</a> = <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l7475"><span class="linenum">7475</span></a>  
<a name="l7476"><span class="linenum">7476</span></a>          if( <a class="var it1763" onMouseOver="hilite(1763)" onMouseOut="lolite()" onClick="logVariable('has_perm_edit')" href="../../../_variables/has_perm_edit.html">$has_perm_edit</a> )
<a name="l7477"><span class="linenum">7477</span></a>          { // Initialize url params only when current user has a permission to edit this
<a name="l7478"><span class="linenum">7478</span></a>              if( <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../../../_variables/attr.html">$attr</a> != 'onclick' )
<a name="l7479"><span class="linenum">7479</span></a>              { // Init an url
<a name="l7480"><span class="linenum">7480</span></a>                  if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &gt; 0 )
<a name="l7481"><span class="linenum">7481</span></a>                  {    // URL when item is editing:
<a name="l7482"><span class="linenum">7482</span></a>                      <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=edit_type&amp;amp;post_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l7483"><span class="linenum">7483</span></a>                  }
<a name="l7484"><span class="linenum">7484</span></a>                  elseif( <a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'p' ) &gt; 0 )
<a name="l7485"><span class="linenum">7485</span></a>                  {    // URL when item is duplicating:
<a name="l7486"><span class="linenum">7486</span></a>                      <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=new_type&amp;amp;p='.<a class="function" onClick="logFunction('get_param')" href="../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'p' );
<a name="l7487"><span class="linenum">7487</span></a>                  }
<a name="l7488"><span class="linenum">7488</span></a>                  else
<a name="l7489"><span class="linenum">7489</span></a>                  {    // URL when item is creating:
<a name="l7490"><span class="linenum">7490</span></a>                      <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=new_type';
<a name="l7491"><span class="linenum">7491</span></a>                  }
<a name="l7492"><span class="linenum">7492</span></a>              }
<a name="l7493"><span class="linenum">7493</span></a>  
<a name="l7494"><span class="linenum">7494</span></a>              if( <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../../../_variables/attr.html">$attr</a> != 'url' )
<a name="l7495"><span class="linenum">7495</span></a>              { // Init an event 'onclick'
<a name="l7496"><span class="linenum">7496</span></a>                  <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('attr_onclick')" href="../../../_variables/attr_onclick.html">$attr_onclick</a> = 'return <a class="function" onClick="logFunction('b2edit_type')" href="../../../_functions/b2edit_type.html" onMouseOver="funcPopup(event,'b2edit_type')">b2edit_type</a>( \''.<a class="function" onClick="logFunction('TS_')" href="../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Do you want to save your changes before changing the Post Type?').'\','
<a name="l7497"><span class="linenum">7497</span></a>                      .' \''.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'\','
<a name="l7498"><span class="linenum">7498</span></a>                      .' \''.( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &gt; 0 ? 'edit_type' : 'new_type' ).'\' );';
<a name="l7499"><span class="linenum">7499</span></a>              }
<a name="l7500"><span class="linenum">7500</span></a>          }
<a name="l7501"><span class="linenum">7501</span></a>  
<a name="l7502"><span class="linenum">7502</span></a>          switch( <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('attr')" href="../../../_variables/attr.html">$attr</a> )
<a name="l7503"><span class="linenum">7503</span></a>          {
<a name="l7504"><span class="linenum">7504</span></a>              case 'link':
<a name="l7505"><span class="linenum">7505</span></a>                  if( empty( <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a> ) )
<a name="l7506"><span class="linenum">7506</span></a>                  { // No perm to edit item type
<a name="l7507"><span class="linenum">7507</span></a>                      return <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>;
<a name="l7508"><span class="linenum">7508</span></a>                  }
<a name="l7509"><span class="linenum">7509</span></a>                  else
<a name="l7510"><span class="linenum">7510</span></a>                  { // Current user can edit this item
<a name="l7511"><span class="linenum">7511</span></a>                      return '&lt;a href=&quot;'.<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a>.'&quot; onclick=&quot;'.<a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('attr_onclick')" href="../../../_variables/attr_onclick.html">$attr_onclick</a>.'&quot; title=&quot;'.<a class="var it1575" onMouseOver="hilite(1575)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../_variables/link_title.html">$link_title</a>.'&quot; class=&quot;post_type_link&quot;&gt;'.<a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>.'&lt;/a&gt;';
<a name="l7512"><span class="linenum">7512</span></a>                  }
<a name="l7513"><span class="linenum">7513</span></a>                  break;
<a name="l7514"><span class="linenum">7514</span></a>  
<a name="l7515"><span class="linenum">7515</span></a>              case 'onclick':
<a name="l7516"><span class="linenum">7516</span></a>                  return empty( <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('attr_onclick')" href="../../../_variables/attr_onclick.html">$attr_onclick</a> ) ? '' : <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('attr_onclick')" href="../../../_variables/attr_onclick.html">$attr_onclick</a>;
<a name="l7517"><span class="linenum">7517</span></a>                  break;
<a name="l7518"><span class="linenum">7518</span></a>  
<a name="l7519"><span class="linenum">7519</span></a>              case 'url':
<a name="l7520"><span class="linenum">7520</span></a>                  return empty( <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a> ) ? '' : <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('attr_href')" href="../../../_variables/attr_href.html">$attr_href</a>;
<a name="l7521"><span class="linenum">7521</span></a>                  break;
<a name="l7522"><span class="linenum">7522</span></a>          }
<a name="l7523"><span class="linenum">7523</span></a>      }
<a name="l7524"><span class="linenum">7524</span></a>  
<a name="l7525"><span class="linenum">7525</span></a>  
<a name="l7526"><span class="linenum">7526</span></a>      <span class="comment">/**</span>
<a name="l7527"><span class="linenum">7527</span></a>  <span class="comment">     * Get the ItemType object for the Item.</span>
<a name="l7528"><span class="linenum">7528</span></a>  <span class="comment">     *</span>
<a name="l7529"><span class="linenum">7529</span></a>  <span class="comment">     * @return object ItemType</span>
<a name="l7530"><span class="linenum">7530</span></a>  <span class="comment">     */</span>
<a name="l7531"><span class="linenum">7531</span></a>      function &amp; get_ItemType()
<a name="l7532"><span class="linenum">7532</span></a>      {
<a name="l7533"><span class="linenum">7533</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemType')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemType.html">ItemType</a> ) )
<a name="l7534"><span class="linenum">7534</span></a>          {
<a name="l7535"><span class="linenum">7535</span></a>              <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a> = &amp; get_ItemTypeCache();
<a name="l7536"><span class="linenum">7536</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemType')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemType.html">ItemType</a> = &amp; <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, false, false );
<a name="l7537"><span class="linenum">7537</span></a>          }
<a name="l7538"><span class="linenum">7538</span></a>  
<a name="l7539"><span class="linenum">7539</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemType')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemType.html">ItemType</a>;
<a name="l7540"><span class="linenum">7540</span></a>      }
<a name="l7541"><span class="linenum">7541</span></a>  
<a name="l7542"><span class="linenum">7542</span></a>  
<a name="l7543"><span class="linenum">7543</span></a>      <span class="comment">/**</span>
<a name="l7544"><span class="linenum">7544</span></a>  <span class="comment">     * Get setting of the post type</span>
<a name="l7545"><span class="linenum">7545</span></a>  <span class="comment">     *</span>
<a name="l7546"><span class="linenum">7546</span></a>  <span class="comment">     * @param string Setting name</span>
<a name="l7547"><span class="linenum">7547</span></a>  <span class="comment">     * @return string Setting value</span>
<a name="l7548"><span class="linenum">7548</span></a>  <span class="comment">     */</span>
<a name="l7549"><span class="linenum">7549</span></a>  	function <a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> )
<a name="l7550"><span class="linenum">7550</span></a>      {
<a name="l7551"><span class="linenum">7551</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_ItemType() )
<a name="l7552"><span class="linenum">7552</span></a>          { // Unknown post type
<a name="l7553"><span class="linenum">7553</span></a>              return false;
<a name="l7554"><span class="linenum">7554</span></a>          }
<a name="l7555"><span class="linenum">7555</span></a>  
<a name="l7556"><span class="linenum">7556</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemType')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemType.html">ItemType</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> );
<a name="l7557"><span class="linenum">7557</span></a>      }
<a name="l7558"><span class="linenum">7558</span></a>  
<a name="l7559"><span class="linenum">7559</span></a>  
<a name="l7560"><span class="linenum">7560</span></a>      <span class="comment">/**</span>
<a name="l7561"><span class="linenum">7561</span></a>  <span class="comment">     * Get custom fields of post type</span>
<a name="l7562"><span class="linenum">7562</span></a>  <span class="comment">     *</span>
<a name="l7563"><span class="linenum">7563</span></a>  <span class="comment">     * @param string Type of custom field: 'all', 'varchar', 'double'</span>
<a name="l7564"><span class="linenum">7564</span></a>  <span class="comment">     * @return array</span>
<a name="l7565"><span class="linenum">7565</span></a>  <span class="comment">     */</span>
<a name="l7566"><span class="linenum">7566</span></a>  	function <a class="function" onClick="logFunction('get_type_custom_fields')" href="../../../_functions/get_type_custom_fields.html" onMouseOver="funcPopup(event,'get_type_custom_fields')">get_type_custom_fields</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = 'all' )
<a name="l7567"><span class="linenum">7567</span></a>      {
<a name="l7568"><span class="linenum">7568</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_ItemType() )
<a name="l7569"><span class="linenum">7569</span></a>          { // Unknown post type
<a name="l7570"><span class="linenum">7570</span></a>              return array();
<a name="l7571"><span class="linenum">7571</span></a>          }
<a name="l7572"><span class="linenum">7572</span></a>  
<a name="l7573"><span class="linenum">7573</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ItemType')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ItemType.html">ItemType</a>-&gt;<a class="function" onClick="logFunction('get_custom_fields')" href="../../../_functions/get_custom_fields.html" onMouseOver="funcPopup(event,'get_custom_fields')">get_custom_fields</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> );
<a name="l7574"><span class="linenum">7574</span></a>      }
<a name="l7575"><span class="linenum">7575</span></a>  
<a name="l7576"><span class="linenum">7576</span></a>  
<a name="l7577"><span class="linenum">7577</span></a>      <span class="comment">/**</span>
<a name="l7578"><span class="linenum">7578</span></a>  <span class="comment">     * Check if post type is enabled for the post collection</span>
<a name="l7579"><span class="linenum">7579</span></a>  <span class="comment">     *</span>
<a name="l7580"><span class="linenum">7580</span></a>  <span class="comment">     * @return boolean</span>
<a name="l7581"><span class="linenum">7581</span></a>  <span class="comment">     */</span>
<a name="l7582"><span class="linenum">7582</span></a>  	function <a class="function" onClick="logFunction('is_type_enabled')" href="../../../_functions/is_type_enabled.html" onMouseOver="funcPopup(event,'is_type_enabled')">is_type_enabled</a>()
<a name="l7583"><span class="linenum">7583</span></a>      {
<a name="l7584"><span class="linenum">7584</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('ityp_ID')" href="../../../_variables/ityp_ID.html">$ityp_ID</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'ityp_ID' ) );
<a name="l7585"><span class="linenum">7585</span></a>  
<a name="l7586"><span class="linenum">7586</span></a>          if( empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('ityp_ID')" href="../../../_variables/ityp_ID.html">$ityp_ID</a> ) )
<a name="l7587"><span class="linenum">7587</span></a>          {
<a name="l7588"><span class="linenum">7588</span></a>              return false;
<a name="l7589"><span class="linenum">7589</span></a>          }
<a name="l7590"><span class="linenum">7590</span></a>  
<a name="l7591"><span class="linenum">7591</span></a>          <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l7592"><span class="linenum">7592</span></a>  
<a name="l7593"><span class="linenum">7593</span></a>          return <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('is_item_type_enabled')" href="../../../_functions/is_item_type_enabled.html" onMouseOver="funcPopup(event,'is_item_type_enabled')">is_item_type_enabled</a>( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('ityp_ID')" href="../../../_variables/ityp_ID.html">$ityp_ID</a> );
<a name="l7594"><span class="linenum">7594</span></a>      }
<a name="l7595"><span class="linenum">7595</span></a>  
<a name="l7596"><span class="linenum">7596</span></a>  
<a name="l7597"><span class="linenum">7597</span></a>      <span class="comment">/**</span>
<a name="l7598"><span class="linenum">7598</span></a>  <span class="comment">     * Check if item allows the statuses for the comments (closed or disabled)</span>
<a name="l7599"><span class="linenum">7599</span></a>  <span class="comment">     *</span>
<a name="l7600"><span class="linenum">7600</span></a>  <span class="comment">     * @return boolean TRUE when item can has the comment status different of 'opened'</span>
<a name="l7601"><span class="linenum">7601</span></a>  <span class="comment">     */</span>
<a name="l7602"><span class="linenum">7602</span></a>  	function <a class="function" onClick="logFunction('allow_comment_statuses')" href="../../../_functions/allow_comment_statuses.html" onMouseOver="funcPopup(event,'allow_comment_statuses')">allow_comment_statuses</a>()
<a name="l7603"><span class="linenum">7603</span></a>      {
<a name="l7604"><span class="linenum">7604</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_comments' ) )
<a name="l7605"><span class="linenum">7605</span></a>          { // The comments are not allowed for this post type
<a name="l7606"><span class="linenum">7606</span></a>              return false;
<a name="l7607"><span class="linenum">7607</span></a>          }
<a name="l7608"><span class="linenum">7608</span></a>  
<a name="l7609"><span class="linenum">7609</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_closing_comments' ) &amp;&amp; ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'allow_disabling_comments' ) )
<a name="l7610"><span class="linenum">7610</span></a>          { // The statuses 'closed' &amp; 'disabled' are not allowed for comments of this post type
<a name="l7611"><span class="linenum">7611</span></a>              return false;
<a name="l7612"><span class="linenum">7612</span></a>          }
<a name="l7613"><span class="linenum">7613</span></a>  
<a name="l7614"><span class="linenum">7614</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l7615"><span class="linenum">7615</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_comments' ) == 'never' )
<a name="l7616"><span class="linenum">7616</span></a>          { // The comments are not allowed by Blog
<a name="l7617"><span class="linenum">7617</span></a>              return false;
<a name="l7618"><span class="linenum">7618</span></a>          }
<a name="l7619"><span class="linenum">7619</span></a>  
<a name="l7620"><span class="linenum">7620</span></a>          return true;
<a name="l7621"><span class="linenum">7621</span></a>      }
<a name="l7622"><span class="linenum">7622</span></a>  
<a name="l7623"><span class="linenum">7623</span></a>  
<a name="l7624"><span class="linenum">7624</span></a>      <span class="comment">/**</span>
<a name="l7625"><span class="linenum">7625</span></a>  <span class="comment">     * Country is visible for defining</span>
<a name="l7626"><span class="linenum">7626</span></a>  <span class="comment">     *</span>
<a name="l7627"><span class="linenum">7627</span></a>  <span class="comment">     * @return boolean TRUE if users can define a country for posts of current blog</span>
<a name="l7628"><span class="linenum">7628</span></a>  <span class="comment">     */</span>
<a name="l7629"><span class="linenum">7629</span></a>  	function <a class="function" onClick="logFunction('country_visible')" href="../../../_functions/country_visible.html" onMouseOver="funcPopup(event,'country_visible')">country_visible</a>()
<a name="l7630"><span class="linenum">7630</span></a>      {
<a name="l7631"><span class="linenum">7631</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_country' ) != 'never' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('region_visible')" href="../../../_functions/region_visible.html" onMouseOver="funcPopup(event,'region_visible')">region_visible</a>();
<a name="l7632"><span class="linenum">7632</span></a>      }
<a name="l7633"><span class="linenum">7633</span></a>  
<a name="l7634"><span class="linenum">7634</span></a>  
<a name="l7635"><span class="linenum">7635</span></a>      <span class="comment">/**</span>
<a name="l7636"><span class="linenum">7636</span></a>  <span class="comment">     * Region is visible for defining</span>
<a name="l7637"><span class="linenum">7637</span></a>  <span class="comment">     *</span>
<a name="l7638"><span class="linenum">7638</span></a>  <span class="comment">     * @return boolean TRUE if users can define a region for this post</span>
<a name="l7639"><span class="linenum">7639</span></a>  <span class="comment">     */</span>
<a name="l7640"><span class="linenum">7640</span></a>  	function <a class="function" onClick="logFunction('region_visible')" href="../../../_functions/region_visible.html" onMouseOver="funcPopup(event,'region_visible')">region_visible</a>()
<a name="l7641"><span class="linenum">7641</span></a>      {
<a name="l7642"><span class="linenum">7642</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_region' ) != 'never' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('subregion_visible')" href="../../../_functions/subregion_visible.html" onMouseOver="funcPopup(event,'subregion_visible')">subregion_visible</a>();
<a name="l7643"><span class="linenum">7643</span></a>      }
<a name="l7644"><span class="linenum">7644</span></a>  
<a name="l7645"><span class="linenum">7645</span></a>  
<a name="l7646"><span class="linenum">7646</span></a>      <span class="comment">/**</span>
<a name="l7647"><span class="linenum">7647</span></a>  <span class="comment">     * Subregion is visible for defining</span>
<a name="l7648"><span class="linenum">7648</span></a>  <span class="comment">     *</span>
<a name="l7649"><span class="linenum">7649</span></a>  <span class="comment">     * @return boolean TRUE if users can define a subregion for this post</span>
<a name="l7650"><span class="linenum">7650</span></a>  <span class="comment">     */</span>
<a name="l7651"><span class="linenum">7651</span></a>  	function <a class="function" onClick="logFunction('subregion_visible')" href="../../../_functions/subregion_visible.html" onMouseOver="funcPopup(event,'subregion_visible')">subregion_visible</a>()
<a name="l7652"><span class="linenum">7652</span></a>      {
<a name="l7653"><span class="linenum">7653</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_sub_region' ) != 'never' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('city_visible')" href="../../../_functions/city_visible.html" onMouseOver="funcPopup(event,'city_visible')">city_visible</a>();
<a name="l7654"><span class="linenum">7654</span></a>      }
<a name="l7655"><span class="linenum">7655</span></a>  
<a name="l7656"><span class="linenum">7656</span></a>  
<a name="l7657"><span class="linenum">7657</span></a>      <span class="comment">/**</span>
<a name="l7658"><span class="linenum">7658</span></a>  <span class="comment">     * City is visible for defining</span>
<a name="l7659"><span class="linenum">7659</span></a>  <span class="comment">     *</span>
<a name="l7660"><span class="linenum">7660</span></a>  <span class="comment">     * @return boolean TRUE if users can define a city for this post</span>
<a name="l7661"><span class="linenum">7661</span></a>  <span class="comment">     */</span>
<a name="l7662"><span class="linenum">7662</span></a>  	function <a class="function" onClick="logFunction('city_visible')" href="../../../_functions/city_visible.html" onMouseOver="funcPopup(event,'city_visible')">city_visible</a>()
<a name="l7663"><span class="linenum">7663</span></a>      {
<a name="l7664"><span class="linenum">7664</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_city' ) != 'never';
<a name="l7665"><span class="linenum">7665</span></a>      }
<a name="l7666"><span class="linenum">7666</span></a>  
<a name="l7667"><span class="linenum">7667</span></a>  
<a name="l7668"><span class="linenum">7668</span></a>      <span class="comment">/**</span>
<a name="l7669"><span class="linenum">7669</span></a>  <span class="comment">     * Get the parent Item</span>
<a name="l7670"><span class="linenum">7670</span></a>  <span class="comment">     *</span>
<a name="l7671"><span class="linenum">7671</span></a>  <span class="comment">     * @return object Item</span>
<a name="l7672"><span class="linenum">7672</span></a>  <span class="comment">     */</span>
<a name="l7673"><span class="linenum">7673</span></a>      function &amp; get_parent_Item()
<a name="l7674"><span class="linenum">7674</span></a>      {
<a name="l7675"><span class="linenum">7675</span></a>          if( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a> ) )
<a name="l7676"><span class="linenum">7676</span></a>          {    // Return the initialized parent Item:
<a name="l7677"><span class="linenum">7677</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a>;
<a name="l7678"><span class="linenum">7678</span></a>          }
<a name="l7679"><span class="linenum">7679</span></a>  
<a name="l7680"><span class="linenum">7680</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_ID.html">parent_ID</a> ) )
<a name="l7681"><span class="linenum">7681</span></a>          {    // No defined parent Item
<a name="l7682"><span class="linenum">7682</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a> = NULL;
<a name="l7683"><span class="linenum">7683</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a>;
<a name="l7684"><span class="linenum">7684</span></a>          }
<a name="l7685"><span class="linenum">7685</span></a>  
<a name="l7686"><span class="linenum">7686</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type_setting')" href="../../../_functions/get_type_setting.html" onMouseOver="funcPopup(event,'get_type_setting')">get_type_setting</a>( 'use_parent' ) == 'never' )
<a name="l7687"><span class="linenum">7687</span></a>          {    // Parent Item is not allowed for current item type
<a name="l7688"><span class="linenum">7688</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a> = NULL;
<a name="l7689"><span class="linenum">7689</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a>;
<a name="l7690"><span class="linenum">7690</span></a>          }
<a name="l7691"><span class="linenum">7691</span></a>  
<a name="l7692"><span class="linenum">7692</span></a>          <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l7693"><span class="linenum">7693</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a> = &amp; <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_ID.html">parent_ID</a>, false, false );
<a name="l7694"><span class="linenum">7694</span></a>  
<a name="l7695"><span class="linenum">7695</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent_Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/parent_Item.html">parent_Item</a>;
<a name="l7696"><span class="linenum">7696</span></a>      }
<a name="l7697"><span class="linenum">7697</span></a>  }
<a name="l7698"><span class="linenum">7698</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'publish_link': ['publish_link', '', [['inc/items/model','_item.class.php',4200],['inc/comments/model','_comment.class.php',2068]], 2],
'get_status_permvalue': ['get_status_permvalue', 'Get the integer value of a status permission The status permissions are stored as a set, and each status has an integer value also ', [['inc/users/model','_user.funcs.php',1929]], 30],
'get_edit_url': ['get_edit_url', 'Get URL to edit a post if user has edit rights. ', [['inc/items/model','_item.class.php',3991],['inc/links/model','_linkcomment.class.php',167],['inc/links/model','_linkitem.class.php',220],['inc/chapters/model','_chapter.class.php',687],['inc/links/model','_linkuser.class.php',171]], 7],
'attachment_files': ['attachment_files', '', [['inc/items/model','_item.class.php',3155]], 0],
'commit': ['commit', 'For any bytes that are currently buffered inside the stream, force them off the buffer. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',97],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',223],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',116],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',90],['inc/_ext/swift/classes/Swift','InputByteStream.php',41],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',178],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',71],['inc/_core/model/db','_db.class.php',1589]], 135],
'excerpt': ['excerpt', 'Display excerpt of an item. ', [['inc/items/model','_item.class.php',1668],['inc/_core','_misc.funcs.php',424]], 14],
'get_full_path': ['get_full_path', 'Get the full path (directory and name) to the file. ', [['inc/files/model','_file.class.php',638]], 48],
'get_identity_link': ['get_identity_link', 'Get User identity link, which is a composite of user avatar and login, both point to the specific user profile tab. ', [['inc/users/model','_user.class.php',1426]], 34],
'copy_link': ['copy_link', 'Template tag ', [['inc/items/model','_item.class.php',3934]], 1],
'disp': ['disp', 'Display a member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',861],['inc/_core/model','_messages.class.php',152],['inc/_core/model','_log.class.php',241],['inc/_core/model','_log.class.php',597]], 66],
'add_navigation_param': ['add_navigation_param', 'Add nav_target param into the end of the url, but only if it is necessary ', [['inc/items/model','_itemlight.class.php',530]], 8],
'is_same_url': ['is_same_url', 'Compare two given URLs, if they are the same. This converts all urlencoded chars (e.g. "%AA") to lowercase. It appears that some webservers use lowercase for the chars (Apache), while others use uppercase (lighttpd). ', [['inc/_core','_url.funcs.php',805]], 11],
'get_number_of_comments': ['get_number_of_comments', 'Get the number of comments on this item ', [['inc/items/model','_item.class.php',6532],['inc/collections/model','_blog.class.php',3152]], 2],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['inc/_core/model/db','_db.class.php',952]], 166],
'trackback_url': ['trackback_url', 'Template function: displays url to use to trackback this item ', [['inc/items/model','_item.class.php',4708],['skins_fallback_v5','_wp_compatibility.inc.php',167]], 3],
'deadline_date': ['deadline_date', 'Template function: display deadline date (datetime) of Item ', [['inc/items/model','_item.class.php',2285]], 1],
'get_feedback_title': ['get_feedback_title', 'Get text depending on number of comments ', [['inc/items/model','_item.class.php',3439]], 2],
'get_read_status': ['get_read_status', 'Get the read status of this post and its comments for current User ', [['inc/items/model','_item.class.php',7287]], 7],
'get_renderers_validated': ['get_renderers_validated', 'Get the list of validated renderers for this Item. This includes stealth plugins etc. ', [['inc/items/model','_item.class.php',6281],['inc/messaging/model','_message.class.php',698],['inc/comments/model','_comment.class.php',2922]], 30],
'get_read_date': ['get_read_date', 'Get the read dates from DB or from Cached array of this post for current User ', [['inc/items/model','_item.class.php',7334]], 2],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'content_extension': ['content_extension', 'Display content extension of item (part after "[teaserbreak]") ', [['inc/items/model','_item.class.php',1929]], 7],
'get_blog_id': ['get_blog_id', '', [['inc/items/model','_itemlight.class.php',789]], 38],
'load_blog': ['load_blog', 'Set Blog ', [['inc/links/model','_linkcomment.class.php',131],['inc/links/model','_linkitem.class.php',187],['inc/chapters/model','_chapter.class.php',474],['inc/links/model','_linkuser.class.php',139],['inc/items/model','_itemlight.class.php',1413]], 69],
'more_link': ['more_link', 'Template tag ', [['inc/items/model','_item.class.php',2172]], 8],
'itemsendping': ['itemsendping', 'Send a ping to the configured service. ', [['plugins','_generic_ping.plugin.php',163],['inc/plugins','_plugin.class.php',1555],['plugins','_ping_b2evonet.plugin.php',60],['plugins/twitter_plugin','_twitter.plugin.php',130],['plugins','_ping_pingomatic.plugin.php',59]], 1],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'wordcount': ['wordcount', 'Template function: Display the number of words in the post ', [['inc/items/model','_item.class.php',4861]], 1],
'get_tag': ['get_tag', 'Get a complete tag (IMG or A HREF) pointing to the file of this link. ', [['inc/links/model','_link.class.php',173],['inc/files/model','_file.class.php',1054]], 23],
'add_renderer': ['add_renderer', 'Add a renderer (by code) to the Item. ', [['inc/items/model','_item.class.php',6296]], 1],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'get_ratings': ['get_ratings', '', [['inc/items/model','_item.class.php',6596]], 1],
'where': ['where', '', [['inc/_core/model/db','_sql.class.php',242]], 288],
'get_trackback_url': ['get_trackback_url', 'Template function: get url to use to trackback this item ', [['inc/items/model','_item.class.php',4717]], 1],
'insert_update_tags': ['insert_update_tags', 'Save tags to DB ', [['inc/items/model','_item.class.php',5652]], 2],
'mail_template': ['mail_template', 'Get a mail message text by template name ', [['inc/_core','_misc.funcs.php',3720]], 7],
'images': ['images', 'Display the images linked to the current Item ', [['inc/items/model','_item.class.php',2678]], 52],
'item': ['item', 'Constructor ', [['inc/items/model','_item.class.php',265]], 110],
'is_type_enabled': ['is_type_enabled', 'Check if post type is enabled for the post collection ', [['inc/items/model','_item.class.php',7577]], 1],
'param_error': ['param_error', 'Add an error for a variable, either to the Form\'s field and/or the global {@link $Messages} object. ', [['inc/_core','_param.funcs.php',1524]], 148],
'get_creator_login': ['get_creator_login', '', [['inc/items/model','_item.class.php',5764]], 5],
'get_param': ['get_param', 'Get the value of a param. ', [['inc/_core','_param.funcs.php',1694],['inc/widgets/model','_widget.class.php',343]], 340],
'get_delete_link': ['get_delete_link', 'Gets button for deleting the Item if user has proper rights ', [['inc/items/model','_item.class.php',3729]], 2],
'get_row': ['get_row', 'Get one row from the DB. ', [['inc/_core/model/db','_db.class.php',987]], 60],
'is_audio': ['is_audio', 'Is the File an audio file? ', [['inc/files/model','_file.class.php',477]], 1],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'content_teaser': ['content_teaser', 'Display content teaser of item (will stop at "[teaserbreak]" ', [['inc/items/model','_item.class.php',1808]], 7],
'get_page_links': ['get_page_links', 'Get a link to pages for multi-page items ', [['inc/items/model','_item.class.php',2516]], 1],
'location': ['location', 'Display location of current Item ', [['inc/items/model','_item.class.php',6715]], 12],
'is_image': ['is_image', 'Is the File an image? ', [['inc/files/model','_file.class.php',460]], 28],
'get_feedback_feed_url': ['get_feedback_feed_url', 'Get URL to display the post comments in an XML feed. ', [['inc/items/model','_item.class.php',3215]], 2],
'delete_link': ['delete_link', 'Displays button for deleting the Item if user has proper rights ', [['inc/items/model','_item.class.php',3806],['inc/comments/model','_comment.class.php',1449]], 10],
'get_content_excerpt': ['get_content_excerpt', 'This is like a teaser with no HTML and a cropping. ', [['inc/items/model','_item.class.php',1791]], 1],
'get_status_raw': ['get_status_raw', 'Get raw status ', [['inc/items/model','_item.class.php',4581]], 2],
'dbdelete': ['dbdelete', 'Trigger event AfterItemDelete after calling parent method. ', [['inc/items/model','_item.class.php',5506],['inc/_core/model/dataobjects','_dataobject.class.php',591],['inc/users/model','_user.class.php',3376],['inc/messaging/model','_message.class.php',582],['inc/messaging/model','_thread.class.php',444],['inc/items/model','_itemtype.class.php',451],['inc/files/model','_filetype.class.php',271],['inc/collections/model','_blog.class.php',2664],['inc/comments/model','_comment.class.php',3872],['inc/users/model','_group.class.php',497]], 62],
'blocked_emails_memorize': ['blocked_emails_memorize', 'Memorize the blocked emails in cache array in order to display the message ', [['inc/tools/model','_email.funcs.php',428]], 2],
'get_styled_status': ['get_styled_status', 'Get template for the styled status of comment or item ', [['inc/comments/model','_comment.funcs.php',1442]], 4],
'count_view': ['count_view', 'Increase view counter ', [['inc/items/model','_item.class.php',2014]], 0],
'check_item_perm_edit': ['check_item_perm_edit', 'Check permission for editing of the item by current user ', [['inc/items/model','_item.funcs.php',2913]], 4],
'tags': ['tags', 'Display tags for Item ', [['inc/items/model','_item.class.php',4621]], 31],
'itemlight': ['itemlight', 'Constructor ', [['inc/items/model','_itemlight.class.php',113]], 2],
'limit': ['limit', '', [['inc/_core/model/db','_sql.class.php',343]], 30],
'param_check_login': ['param_check_login', '', [['inc/_core','_param.funcs.php',783]], 1],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['inc/_core/model/db','_sql.class.php',247]], 369],
'set_last_touched_ts': ['set_last_touched_ts', '', [['inc/items/model','_item.class.php',7123]], 3],
'is_special': ['is_special', 'Check if this post type is special( reserved in system ) ', [['inc/items/model','_itemtype.class.php',533],['inc/items/model','_itemlight.class.php',218]], 8],
'get_anchor_id': ['get_anchor_id', '', [['inc/items/model','_item.class.php',967]], 4],
'tinyurl_link': ['tinyurl_link', 'Display the item tinyurl link ', [['inc/items/model','_item.class.php',6498]], 1],
'assign_to': ['assign_to', 'Assign user to the item by user ID or by user login ', [['inc/items/model','_item.class.php',428]], 2],
'itemapplyasrenderer': ['itemapplyasrenderer', 'Event handler: Does your Plugin want to apply as a renderer for the item? ', [['inc/plugins','_plugin.class.php',1584]], 1],
'b2edit_type': ['b2edit_type', 'Submits the form after clicking on link to change item type ', [['rsc/js','backoffice.js',312]], 1],
'get_content_teaser': ['get_content_teaser', 'Template function: get content teaser of item (will stop at "[teaserbreak]") ', [['inc/items/model','_item.class.php',1832]], 3],
'echo_disabled_comments': ['echo_disabled_comments', 'Display disabled comment form ', [['inc/comments/model','_comment.funcs.php',570]], 1],
'get_chapters': ['get_chapters', 'Get chapters by collection ID and parent ID ', [['inc/chapters/model','_chaptercache.class.php',346],['inc/items/model','_itemlight.class.php',610]], 14],
'author': ['author', 'Template function: display author/creator of item ', [['inc/items/model','_item.class.php',505],['inc/comments/model','_comment.class.php',917]], 48],
'get_assigned_user_options': ['get_assigned_user_options', 'Get list of assigned user options ', [['inc/items/model','_item.class.php',1006]], 0],
'get_user_register_url': ['get_user_register_url', 'Get a user registration url ', [['inc/users/model','_user.funcs.php',630]], 6],
'get_subregion': ['get_subregion', 'Get subregion of current Item ', [['inc/items/model','_item.class.php',6816]], 1],
'locale_temp_switch': ['locale_temp_switch', 'Template function: Temporarily switch to this post\'s locale or to current blog\'s locale depending on setting ', [['inc/items/model','_itemlight.class.php',919],['inc/locales','_locale.funcs.php',250]], 62],
'get_type_setting': ['get_type_setting', '', [['inc/items/model','_item.class.php',7549]], 106],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'getnext_tinyurl': ['getnext_tinyurl', '', [['inc/slugs/model','_slug.funcs.php',195]], 3],
'highest_publish_link': ['highest_publish_link', 'Provide link to publish a post to the highest available public status for the current User ', [['inc/items/model','_item.class.php',4134]], 0],
'allow_comment_statuses': ['allow_comment_statuses', 'Check if item allows the statuses for the comments (closed or disabled) ', [['inc/items/model','_item.class.php',7597]], 7],
'assigned_to': ['assigned_to', 'Template function: display assignee of item ', [['inc/items/model','_item.class.php',985]], 1],
'get_player': ['get_player', 'Get HTML code to display a flash audio player for playback of a given URL. ', [['inc/items/model','_item.class.php',4732]], 2],
'on': ['on', '', [['rsc/js/bootstrap','typeahead.bundle.js',739]], 619],
'param_check_html': ['param_check_html', 'Checks for sanitized code. ', [['inc/_core','_param.funcs.php',2080]], 12],
'get_prerendered_content': ['get_prerendered_content', 'Get the prerendered content. If it has not been generated yet, it will. ', [['inc/items/model','_item.class.php',1452],['inc/messaging/model','_message.class.php',735],['inc/comments/model','_comment.class.php',2490]], 7],
'can_comment': ['can_comment', 'Template function: Check if user can leave comment on this post or display error ', [['inc/items/model','_item.class.php',1151]], 17],
'send_email_notifications': ['send_email_notifications', 'Send email notifications to subscribed users ', [['inc/items/model','_item.class.php',5980],['inc/messaging/model','_message.class.php',608],['inc/comments/model','_comment.class.php',3369]], 7],
'render': ['render', 'Renders a diff. ', [['inc/_ext/phpsvnclient/ext/Diff/Diff','Renderer.php',67],['inc/plugins/model','_plugins.class.php',1264]], 31],
'get_content_page': ['get_content_page', 'Get a specific page to display (from the prerendered cache) ', [['inc/items/model','_item.class.php',1760]], 2],
'get_status': ['get_status', 'Get status of item ', [['inc/items/model','_item.class.php',4443],['inc/comments/model','_comment.class.php',3127],['inc/cron/model','_cronjob.class.php',161]], 7],
'locale_restore_previous': ['locale_restore_previous', 'Restore the locale in use before the switch ', [['inc/locales','_locale.funcs.php',281]], 61],
'edit_link': ['edit_link', 'Template tag ', [['inc/items/model','_item.class.php',4037],['inc/comments/model','_comment.class.php',1290]], 36],
'get_msgform_url': ['get_msgform_url', 'Get message form url ', [['inc/users/model','_user.class.php',1921]], 3],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'can_rate': ['can_rate', 'Template function: Check if user can rate this post ', [['inc/items/model','_item.class.php',1441]], 12],
'exists': ['exists', 'Does the File/folder exist on disk? ', [['inc/files/model','_file.class.php',434]], 36],
'anchor_id': ['anchor_id', 'Template tag ', [['inc/items/model','_item.class.php',976]], 36],
'update_read_timestamps': ['update_read_timestamps', 'Update field uprs_read_post_ts for current User ', [['inc/items/model','_item.class.php',7180]], 1],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'get_blog_member_option_list': ['get_blog_member_option_list', 'Loads cache with blog memeber, then display form option list with cache contents ', [['inc/users/model','_usercache.class.php',345]], 1],
'rollback': ['rollback', 'Rollback current transaction ', [['inc/_core/model/db','_db.class.php',1625]], 48],
'get_gallery': ['get_gallery', '', [['inc/files/model','_file.class.php',1209]], 1],
'get_size': ['get_size', 'Get file/dir size in bytes. ', [['inc/files/model','_file.class.php',756]], 6],
'can_receive_pings': ['can_receive_pings', 'Return true if trackbacks and pingbacks are allowed ', [['inc/items/model','_item.class.php',3427]], 5],
'get_tinyurl_link': ['get_tinyurl_link', 'Create and return the item tinyurl link. ', [['inc/items/model','_item.class.php',6441]], 2],
'xmlrpc_displayresult': ['xmlrpc_displayresult', 'Echo the XML-RPC call Result and optionally log into file ', [['inc/_core','_misc.funcs.php',2104]], 1],
'param_check_number': ['param_check_number', 'Checks if the param is an integer (no float, e.g. 3.14). ', [['inc/_core','_param.funcs.php',581]], 31],
'get_postcode': ['get_postcode', 'Get postcode. ', [['inc/regional/model','_city.class.php',132]], 1],
'trigger_event': ['trigger_event', 'Call all plugins for a given event. ', [['inc/plugins/model','_plugins.class.php',817]], 130],
'filter_contents': ['filter_contents', 'Filter (post) contents by calling the relevant filter plugins. ', [['inc/plugins/model','_plugins_admin.class.php',1533]], 3],
'get_type_edit_link': ['get_type_edit_link', 'Get link to edit post type ', [['inc/items/model','_item.class.php',7458]], 2],
'files': ['files', 'Display the attachments/files linked to the current Item ', [['inc/items/model','_item.class.php',2904]], 7],
'param_check_url': ['param_check_url', 'Check that a given param is a valid URL ', [['inc/_core','_param.funcs.php',804]], 13],
'get_country': ['get_country', 'Get country of current Item ', [['inc/items/model','_item.class.php',6744]], 1],
'delete_setting': ['delete_setting', 'Delete a setting. ', [['inc/items/model','_item.class.php',6688],['inc/collections/model','_blog.class.php',2237]], 3],
'from_add': ['from_add', 'Extends the FROM clause. ', [['inc/_core/model/db','_sql.class.php',226]], 200],
'action_icon': ['action_icon', 'Generate requested action icon depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1071],['inc/_core','_misc.funcs.php',3977]], 289],
'get_excerpt2': ['get_excerpt2', 'Template tag: get excerpt 2 (Full version) This full version may auto-generate an excerpt if it is found to be empty. ', [['inc/items/model','_item.class.php',1711]], 4],
'get_copy_link': ['get_copy_link', 'Provide link to copy a post if user has edit rights ', [['inc/items/model','_item.class.php',3824]], 6],
'get_msgform_possibility': ['get_msgform_possibility', 'Get messaging possibilities between current user and $this user ', [['inc/users/model','_user.class.php',3078]], 13],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'msgform_link_assigned': ['msgform_link_assigned', 'Template function: Provide link to message form for this Item\'s assigned User. ', [['inc/items/model','_item.class.php',2450]], 0],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'title': ['title', 'Template function: display title for item and link to related URL ', [['inc/items/model','_itemlight.class.php',1154]], 58],
'load_list': ['load_list', 'Load a list of objects into the cache. ', [['inc/_core/model/dataobjects','_dataobjectcache.class.php',213]], 21],
'urltitle_validate': ['urltitle_validate', '', [['inc/items/model','_item.funcs.php',326]], 9],
'get_images': ['get_images', 'Get block of images linked to the current Item ', [['inc/items/model','_item.class.php',2690]], 8],
'get_publish_link': ['get_publish_link', 'Provide link to publish a post if user has edit rights ', [['inc/items/model','_item.class.php',4086],['inc/comments/model','_comment.class.php',1952]], 1],
'update_slugs': ['update_slugs', 'Create new slugs with validated title !!!private!!! This function should be called only from Item dbupdate() function ', [['inc/items/model','_item.class.php',5452]], 1],
'send_outbound_pings': ['send_outbound_pings', 'Send outbound pings for a post ', [['inc/items/model','_item.class.php',6094]], 2],
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',982]], 128],
'url_crumb': ['url_crumb', 'Create a crumb param to be passed in action urls... ', [['inc/_core','_url.funcs.php',597]], 281],
'has_feedback': ['has_feedback', 'Return true if there is any feedback of given type. ', [['inc/items/model','_item.class.php',3396]], 0],
'anchor': ['anchor', 'Template function: display anchor for permalinks to refer to. ', [['inc/items/model','_item.class.php',953],['inc/comments/model','_comment.class.php',719]], 9],
'replace_content_outcode': ['replace_content_outcode', 'Replace content outside blocks <code></code>, <pre></pre> and markdown codeblocks ', [['inc/_core','_misc.funcs.php',868]], 18],
'can_attach': ['can_attach', 'Template function: Check if user can attach files to this post comments ', [['inc/items/model','_item.class.php',1287]], 11],
'countries_exist': ['countries_exist', 'Check the existing countries in DB ', [['inc/regional/model','_regional.funcs.php',547]], 2],
'display_unread_status': ['display_unread_status', 'Display the icon if this post is unread by current User ', [['inc/items/model','_item.class.php',7367]], 4],
'set_creator_by_login': ['set_creator_by_login', 'Set creator user ', [['inc/items/model','_item.class.php',413]], 2],
'delete': ['delete', '', [['inc/_ext/pclzip','pclzip.lib.php',1007],['inc/plugins/model','_pluginusersettings.class.php',89],['inc/settings/model','_abstractsettings.class.php',504],['inc/users/model','_usersettings.class.php',209],['inc/sessions/model','_session.class.php',483],['inc/plugins/model','_pluginsettings.class.php',65],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',168],['inc/users/model','_groupsettings.class.php',181]], 99],
'set_tags_from_string': ['set_tags_from_string', 'Split tags by comma or semicolon ', [['inc/items/model','_item.class.php',2349]], 41],
'get_edit_link': ['get_edit_link', 'Provide link to edit a post if user has edit rights ', [['inc/items/model','_item.class.php',3944],['inc/chapters/model','_chapter.class.php',734]], 17],
'has_content_parts': ['has_content_parts', 'Does the post have different content parts (teaser/extension, divided by "[teaserbreak]")? This is also true for posts that have images with "aftermore" position. ', [['inc/items/model','_item.class.php',2260]], 11],
'get_metakeywords': ['get_metakeywords', 'Get the meta keyword tag ', [['inc/items/model','_item.class.php',2339]], 1],
'set_creator_user': ['set_creator_user', 'Set the Author of the Item. ', [['inc/items/model','_item.class.php',4987]], 6],
'get_type_custom_fields': ['get_type_custom_fields', 'Get custom fields of post type ', [['inc/items/model','_item.class.php',7560]], 9],
'subregions_exist': ['subregions_exist', 'Check the existing subregions for selected region ', [['inc/regional/model','_regional.funcs.php',596]], 3],
'load_custom_field_value': ['load_custom_field_value', 'Load item custom field value by index ', [['inc/items/model','_item.class.php',2026]], 2],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'compare_items_by_title': ['compare_items_by_title', 'Compare two Items based on the title ', [['inc/items/model','_item.class.php',368]], 0],
'is_intro': ['is_intro', 'Check if this post type is used for intro posts ', [['inc/items/model','_itemtype.class.php',571],['inc/items/model','_itemlight.class.php',232]], 45],
'get_custom_field_value': ['get_custom_field_value', 'Get item custom field value by index ', [['inc/items/model','_item.class.php',2052]], 0],
'permanent_url': ['permanent_url', 'Template function: display permalink to this comment ', [['inc/comments/model','_comment.class.php',2400],['inc/items/model','_itemlight.class.php',1052]], 9],
'generic_ctp_number': ['generic_ctp_number', 'Generic comments/trackbacks/pingbacks counting ', [['inc/comments/model','_comment.funcs.php',21]], 21],
'get_files': ['get_files', 'Get block of attachments/files linked to the current Item ', [['inc/items/model','_item.class.php',2916]], 1],
'send_moderation_emails': ['send_moderation_emails', 'Send post may need moderation notifications for those users who have rights to moderate this post, and would like to receive notifications ', [['inc/items/model','_item.class.php',5891]], 1],
'load_blocked_emails': ['load_blocked_emails', 'Load the blocked emails from DB in cache ', [['inc/tools/model','_email.funcs.php',306]], 2],
'get_format_status': ['get_format_status', 'Get status of item in a formatted way, following a provided template ', [['inc/items/model','_item.class.php',4515]], 3],
'div_classes': ['div_classes', 'Output classes for the Item <div> ', [['inc/items/model','_item.class.php',4554]], 27],
'get_name': ['get_name', 'Get name of widget ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',63],['plugins/twitter_plugin/twitteroauth','oauth.php',102],['plugins/twitter_plugin/twitteroauth','oauth.php',128],['plugins/twitter_plugin/twitteroauth','oauth.php',155],['inc/widgets/widgets','_coll_page_list.widget.php',77],['inc/items/model','_itemstatus.class.php',77],['inc/widgets/widgets','_coll_logo.widget.php',48],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',48],['inc/widgets/widgets','_online_users.widget.php',48],['inc/regional/model','_country.class.php',119],['inc/widgets/widgets','_user_login.widget.php',49],['inc/skins/model','_skin.class.php',137],['inc/widgets/widgets','_linkblog.widget.php',76],['inc/widgets/widgets','_coll_related_post_list.widget.php',76],['inc/widgets/widgets','_coll_item_list.widget.php',247],['inc/items/model','_itemtype.class.php',379],['inc/widgets/widgets','_user_links.widget.php',48],['inc/widgets/widgets','_coll_featured_intro.widget.php',128],['inc/regional/model','_subregion.class.php',131],['inc/widgets/widgets','_coll_search_form.widget.php',48],['inc/widgets/widgets','_coll_longdesc.widget.php',48],['inc/widgets/widgets','_content_hierarchy.widget.php',93],['inc/widgets/widgets','_coll_tagline.widget.php',48],['inc/widgets/widgets','_coll_current_filters.widget.php',49],['inc/widgets/widgets','_coll_category_list.widget.php',49],['inc/widgets/widgets','_org_members.widget.php',48],['inc/collections/model','_blog.class.php',2802],['inc/widgets/widgets','_coll_comment_list.widget.php',102],['inc/widgets/widgets','_member_count.widget.php',48],['inc/users/model','_userfield.class.php',279],['inc/widgets/widgets','_coll_link_list.widget.php',76],['inc/widgets/widgets','_menu_link.widget.php',84],['inc/widgets/widgets','_free_html.widget.php',48],['inc/widgets/widgets','_breadcrumb_path.widget.php',76],['inc/regional/model','_city.class.php',121],['inc/widgets/widgets','_image.widget.php',48],['inc/users/model','_group.class.php',448],['inc/regional/model','_currency.class.php',120],['inc/widgets/widgets','_profile_menu_link.widget.php',48],['inc/widgets/widgets','_coll_media_index.widget.php',156],['inc/widgets/model','_widget.class.php',157],['inc/widgets/widgets','_colls_list_owner.widget.php',48],['inc/widgets/widgets','_user_tools.widget.php',225],['inc/widgets/widgets','_coll_common_links.widget.php',52],['inc/widgets/widgets','_msg_menu_link.widget.php',54],['inc/widgets/widgets','_user_avatars.widget.php',150],['inc/widgets/widgets','_coll_xml_feeds.widget.php',48],['inc/regional/model','_region.class.php',114],['inc/chapters/model','_chapter.class.php',618],['inc/antispam/model','_iprange.class.php',128],['inc/sessions/model','_goalcat.class.php',78],['inc/widgets/widgets','_coll_avatar.widget.php',49],['inc/widgets/widgets','_coll_post_list.widget.php',76],['inc/files/model','_file.class.php',574],['inc/sessions/model','_goal.class.php',195],['inc/widgets/widgets','_user_register.widget.php',49],['inc/widgets/widgets','_colls_list_public.widget.php',48],['inc/users/model','_userfieldgroup.class.php',97],['inc/users/model','_organization.class.php',88],['inc/widgets/widgets','_coll_title.widget.php',69]], 114],
'status': ['status', 'Template function: display status of item ', [['inc/items/model','_item.class.php',4489],['inc/comments/model','_comment.class.php',3180]], 6],
'render_inline_files': ['render_inline_files', 'Convert inline file tags like [image|file:123:link title:.css_class_name] or [inline:123:.css_class_name] into HTML img tags ', [['inc/items/model','_item.class.php',6962]], 3],
'priority': ['priority', 'Template function: display priority of item ', [['inc/items/model','_item.class.php',4396]], 1],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['inc/collections/model','_blog.funcs.php',953]], 87],
'get_assoc': ['get_assoc', 'Function to get the second column from the cached result indexed by the first column ', [['inc/_core/model/db','_db.class.php',1057]], 60],
'get_number_of_images': ['get_number_of_images', 'Get a number of images linked to the current Item ', [['inc/items/model','_item.class.php',2883]], 2],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'get_tempskin_url': ['get_tempskin_url', 'Get URL to display the blog with a temporary skin. ', [['inc/collections/model','_blog.class.php',1761]], 3],
'feedback_moderation': ['feedback_moderation', 'Template function: Displays feeback moderation info ', [['inc/items/model','_item.class.php',3614]], 0],
'param_date': ['param_date', 'Sets a date parameter by converting locale date (if valid) to ISO date. ', [['inc/_core','_param.funcs.php',928]], 20],
'is_locked': ['is_locked', 'Check if item is locked ', [['inc/items/model','_item.class.php',6926]], 10],
'split_pages': ['split_pages', 'Make sure, the pages have been obtained (and split up_ from prerendered cache. ', [['inc/items/model','_item.class.php',1740]], 2],
'handle_post_processing': ['handle_post_processing', 'Execute or schedule post(=after) processing tasks ', [['inc/items/model','_item.class.php',5775]], 9],
'order_by': ['order_by', '', [['inc/_core/model/db','_sql.class.php',321]], 85],
'param_check_not_empty': ['param_check_not_empty', '', [['inc/_core','_param.funcs.php',564]], 53],
'deadline_time': ['deadline_time', 'Template function: display deadline time (datetime) of Item ', [['inc/items/model','_item.class.php',2300]], 0],
'insert': ['insert', 'Create a new Item/Post and insert it into the DB ', [['inc/items/model','_item.class.php',5035]], 80],
'isset_param': ['isset_param', 'Check if a parameter is set or not ', [['inc/_core','_param.funcs.php',2527]], 1],
'get_renderer_checkboxes': ['get_renderer_checkboxes', 'Get checkable list of renderers ', [['inc/items/model','_item.class.php',4413],['inc/plugins/model','_plugins.class.php',2027]], 16],
'check_user_status': ['check_user_status', 'Check if current User status permit the give action ', [['inc/users/model','_user.funcs.php',51]], 19],
'get_metadesc': ['get_metadesc', 'Get the meta description tag ', [['inc/items/model','_item.class.php',2330]], 1],
'insert_update_extracats': ['insert_update_extracats', 'Insert/Update post extracats ', [['inc/items/model','_item.class.php',5608]], 2],
'list': ['list', '', [['rsc/js/bootstrap','typeahead.bundle.js',156]], 105],
'content': ['content', 'DEPRECATED ', [['inc/items/model','_item.class.php',1914],['inc/comments/model','_comment.class.php',2618]], 14],
'get_list_by_event': ['get_list_by_event', '', [['inc/plugins/model','_plugins.class.php',1638]], 10],
'select': ['select', 'Set SELECT clause ', [['inc/_core/model/db','_sql.class.php',196],['inc/_core/ui/forms','_form.class.php',2189],['inc/_core/model/db','_db.class.php',454]], 475],
'check_goal': ['check_goal', 'Check if item has a goal to insert a hit into DB ', [['inc/items/model','_item.class.php',7425]], 1],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'get_attachments_limit': ['get_attachments_limit', 'Get how much files user can attach on this post yet ', [['inc/items/model','_item.class.php',1419]], 2],
'get_duration_title': ['get_duration_title', 'Get a title of duration ', [['inc/_core','_misc.funcs.php',1654]], 2],
'param_duration': ['param_duration', 'Get total seconds from the following fields: months, days, hours, minutes, seconds ', [['inc/_core','_param.funcs.php',515]], 9],
'is_featured': ['is_featured', 'Is this a featured post (any intro post will return false even if it\'s checked as "featured") ', [['inc/items/model','_itemlight.class.php',243]], 9],
'mysql2date': ['mysql2date', 'Format a MYSQL date. ', [['inc/_core','_misc.funcs.php',1302]], 45],
'get_cover_image_url': ['get_cover_image_url', 'Get URL of a first cover image ', [['inc/items/model','_item.class.php',2841]], 0],
'locale_timefmt': ['locale_timefmt', 'Returns the current locale\'s default time format ', [['inc/locales','_locale.funcs.php',404]], 17],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'get_assigned_user': ['get_assigned_user', 'Get the User who is assigned to the Item. ', [['inc/items/model','_item.class.php',5707]], 3],
'update_excerpt': ['update_excerpt', 'Quick and dirty "excerpts should not stay empty". ', [['inc/items/model','_item.class.php',5555]], 3],
'compare_items_by_order': ['compare_items_by_order', 'Compare two Items based on the order field ', [['inc/items/model','_item.class.php',386]], 0],
'form_date': ['form_date', '', [['inc/_core','_misc.funcs.php',4611]], 32],
'url_link': ['url_link', 'Template function: Display link to item related url. ', [['inc/items/model','_item.class.php',4747]], 7],
'get_revision': ['get_revision', 'Get item revision ', [['inc/items/model','_item.class.php',6891]], 4],
'get_tags': ['get_tags', 'Retrieves all tags from published posts ', [['inc/collections/model','_blog.funcs.php',835]], 12],
'format_status': ['format_status', 'Display status of item in a formatted way, following a provided template ', [['inc/items/model','_item.class.php',4539],['inc/comments/model','_comment.class.php',3205]], 38],
'region_visible': ['region_visible', 'Region is visible for defining ', [['inc/items/model','_item.class.php',7635]], 7],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'get_permanent_url': ['get_permanent_url', 'Generate permalink to this comment. ', [['inc/comments/model','_comment.class.php',2372],['inc/chapters/model','_chapter.class.php',379],['inc/items/model','_itemlight.class.php',376]], 155],
'split_outcode': ['split_outcode', 'Split a content by separators outside <code> and <pre> blocks ', [['inc/_core','_misc.funcs.php',934]], 3],
'get_feedback_url': ['get_feedback_url', 'Get URL to display the post comments. ', [['inc/items/model','_item.class.php',3228]], 9],
'dbinsert_test': ['dbinsert_test', 'Insert new item in test mode, Use this function only in test tool to create very much items at one time ', [['inc/items/model','_item.class.php',5220]], 1],
'get_star_rating': ['get_star_rating', 'Get rating as 5 stars ', [['inc/_core','_template.funcs.php',1935]], 2],
'get_views': ['get_views', 'Template function: Display the number of times the Item has been viewed ', [['inc/items/model','_item.class.php',4870]], 0],
'validate_renderer_list': ['validate_renderer_list', '', [['inc/plugins/model','_plugins.class.php',1909]], 10],
'trackback_rdf': ['trackback_rdf', 'Template function: Displays trackback autodiscovery information ', [['inc/items/model','_item.class.php',4672]], 0],
'get_content_extension': ['get_content_extension', 'Template function: get content extension of item (part after "[teaserbreak]") ', [['inc/items/model','_item.class.php',1955]], 1],
'country_visible': ['country_visible', 'Country is visible for defining ', [['inc/items/model','_item.class.php',7624]], 3],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'set_setting': ['set_setting', 'Set a setting. ', [['inc/items/model','_item.class.php',6669],['inc/skins/model','_skin.class.php',749],['inc/collections/model','_blog.class.php',2218]], 221],
'date2mysql': ['date2mysql', 'Convert timestamp to MySQL/ISO format. ', [['inc/_core','_misc.funcs.php',1226]], 63],
'get_copy_url': ['get_copy_url', 'Get URL to copy a post if user has edit rights. ', [['inc/items/model','_item.class.php',3883]], 2],
'get_view_link': ['get_view_link', 'Get Link to view the file (either with viewer of with browser, etc...) ', [['inc/files/model','_file.class.php',1921]], 16],
'url_add_tail': ['url_add_tail', 'Add a tail (starting with "/") at the end of an URL before any params (starting with "?") ', [['inc/_core','_url.funcs.php',575]], 38],
'update_renderers_from_plugins': ['update_renderers_from_plugins', 'Trigger {@link Plugin::ItemApplyAsRenderer()} event and adjust renderers according to return value. ', [['inc/items/model','_item.class.php',1628]], 4],
'get_write_item_url': ['get_write_item_url', 'Get url to write a new Post ', [['inc/collections/model','_blog.class.php',3242]], 8],
'feedback_feed_link': ['feedback_feed_link', 'Template function: Displays link to the feed for comments on this item ', [['inc/items/model','_item.class.php',3180]], 1],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'get_titletag': ['get_titletag', 'Get the title for the <title> tag ', [['inc/items/model','_item.class.php',2315]], 1],
'post': ['post', 'POST wrapper for oAuthRequest. ', [['plugins/twitter_plugin/twitteroauth','twitteroauth.php',157]], 35],
'param_time': ['param_time', 'Sets a time parameter with the value from the request of the var argument or of the concat of the var argument_h: var argument_mn: var argument_s , except if param is already set! ', [['inc/_core','_param.funcs.php',1139]], 9],
'city_visible': ['city_visible', 'City is visible for defining ', [['inc/items/model','_item.class.php',7657]], 4],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['inc/_core','_misc.funcs.php',5028]], 118],
'load_funcs': ['load_funcs', '', [['inc/_core','_misc.funcs.php',158]], 242],
'utf8_strip_tags': ['utf8_strip_tags', 'utf8_strip_tags( ) ', [['inc/_ext','_portable_utf8.php',1104]], 9],
'begin': ['begin', 'BEGIN A TRANSCATION ', [['inc/_core/model/db','_db.class.php',1537]], 114],
'get_autogenerated_excerpt': ['get_autogenerated_excerpt', 'Get autogenerated excerpt, derived from {@link Item::$content}. ', [['inc/items/model','_item.class.php',5586]], 3],
'callback_on_non_matching_blocks': ['callback_on_non_matching_blocks', 'Split $text into blocks by using $pattern and call $callback on the non-matching blocks. ', [['inc/_core','_misc.funcs.php',810]], 22],
'get_more_link': ['get_more_link', 'Display more link ', [['inc/items/model','_item.class.php',2181]], 1],
'bpost_count_words': ['bpost_count_words', 'Returns the number of the words in a string, sans HTML ', [['inc/items/model','_item.funcs.php',531]], 4],
'check_blog_settings': ['check_blog_settings', 'Check if current user is allowed for several action in this post\'s blog ', [['inc/items/model','_item.class.php',1253]], 4],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['inc/collections/model','_blog.class.php',1128]], 94],
'get_attachments_number': ['get_attachments_number', 'Get a number of attachments on this post ', [['inc/items/model','_item.class.php',1380]], 2],
'msgform_link': ['msgform_link', 'Template function: Provide link to message form for this Item\'s author. ', [['inc/items/model','_item.class.php',2387],['inc/users/model','_user.class.php',3661],['inc/comments/model','_comment.class.php',2310]], 7],
'custom': ['custom', 'Display custom field ', [['inc/items/model','_item.class.php',2068]], 0],
'get_single_url': ['get_single_url', 'Generate a single post link for the item ', [['inc/items/model','_itemlight.class.php',254]], 4],
'load_content_read_status': ['load_content_read_status', 'Load timestamp when this post content was read by the current User ', [['inc/items/model','_item.class.php',7268]], 1],
'blocked_emails_display': ['blocked_emails_display', 'Display the blocked emails from cache array ', [['inc/tools/model','_email.funcs.php',460]], 2],
'get_deprecate_link': ['get_deprecate_link', 'Provide link to deprecate a post if user has edit rights ', [['inc/items/model','_item.class.php',4329],['inc/comments/model','_comment.class.php',1553]], 2],
'get_attachment_filelist': ['get_attachment_filelist', 'Get list of attached files ', [['inc/links/model','_linkowner.class.php',257]], 3],
'get_attachment_linklist': ['get_attachment_linklist', 'Get list of attached Links ', [['inc/links/model','_linkowner.class.php',314]], 7],
'status_raw': ['status_raw', 'Output raw status. ', [['inc/items/model','_item.class.php',4592]], 6],
'modules_call_method': ['modules_call_method', 'Call a method for all modules in a row ', [['inc/_core','_misc.funcs.php',33]], 26],
'bytesreadable': ['bytesreadable', 'Converts bytes to readable bytes/kb/mb/gb, like "12.45mb" ', [['inc/files/model','_file.funcs.php',32]], 22],
'is_item_type_enabled': ['is_item_type_enabled', 'Check if item type is enabled for this collection ', [['inc/collections/model','_blog.class.php',3548]], 4],
'views': ['views', 'Template function: Display a phrase about the number of Item views. ', [['inc/items/model','_item.class.php',4893]], 0],
'get_title': ['get_title', 'Get title of comment, e.g. "Comment from: Foo Bar" ', [['inc/comments/model','_comment.class.php',2877],['skins_adm','_adminUI_general.class.php',314],['inc/widgets/widgets','_coll_xml_feeds.widget.php',109],['inc/items/model','_itemlight.class.php',1166]], 29],
'get_attached_image_tag': ['get_attached_image_tag', 'Get an attached image tag with lightbox reference ', [['inc/items/model','_item.class.php',2608]], 2],
'custom_fields': ['custom_fields', 'Display all custom fields of current Item ', [['inc/items/model','_item.class.php',2122]], 4],
'subregion_visible': ['subregion_visible', 'Subregion is visible for defining ', [['inc/items/model','_item.class.php',7646]], 4],
'get_rating_summary': ['get_rating_summary', 'Get table with rating summary ', [['inc/items/model','_item.class.php',3560]], 1],
'has_failed_transaction': ['has_failed_transaction', 'Check if some nesed transaction failed ', [['inc/_core/model/db','_db.class.php',1651]], 1],
'send_mail_to_user': ['send_mail_to_user', 'Sends an email to User ', [['inc/_core','_misc.funcs.php',3584]], 14],
'check_and_clear_inline_files': ['check_and_clear_inline_files', 'Check if the post contains inline file placeholders without corresponding attachemnt file. Removes the invalid inline file placeholders from the item content. ', [['inc/items/model','_item.class.php',1326]], 2],
'set_creator_location': ['set_creator_location', 'Set the Item location from the current user. Use to create a new post. ', [['inc/items/model','_item.class.php',5001]], 8],
'load_itemsettings': ['load_itemsettings', 'Make sure item settings are loaded. ', [['inc/items/model','_item.class.php',6702]], 4],
'get_login_url': ['get_login_url', 'Get url to login ', [['inc/users/model','_user.funcs.php',178]], 23],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['inc/items/model','_itemlistlight.class.php',324],['inc/items/model','_item.class.php',570],['inc/widgets/widgets','_coll_tag_cloud.widget.php',37],['inc/tools/model','_emailaddress.class.php',90],['inc/email_campaigns/model','_emailcampaign.class.php',186],['inc/maintenance/model','_backup.class.php',159],['inc/items/model','_itemstatus.class.php',63],['inc/sessions/model','_domain.class.php',54],['inc/regional/model','_country.class.php',70],['inc/users/model','_user.class.php',341],['inc/skins/model','_skin.class.php',158],['inc/comments/model','_commentlist.class.php',253],['inc/messaging/model','_message.class.php',124],['inc/users/model','_userlist.class.php',260],['inc/messaging/model','_thread.class.php',186],['inc/items/model','_itemtype.class.php',148],['inc/regional/model','_subregion.class.php',78],['inc/files/model','_filetype.class.php',61],['inc/collections/model','_blog.class.php',375],['inc/cron/model','_cronjob.class.php',107],['inc/users/model','_userfield.class.php',172],['inc/regional/model','_city.class.php',68],['inc/slugs/model','_slug.class.php',94],['inc/users/model','_group.class.php',122],['inc/users/model','_invitation.class.php',69],['inc/regional/model','_currency.class.php',62],['inc/widgets/model','_widget.class.php',138],['inc/regional/model','_region.class.php',66],['inc/chapters/model','_chapter.class.php',286],['inc/antispam/model','_iprange.class.php',86],['inc/sessions/model','_goalcat.class.php',59],['inc/items/model','_itemtag.class.php',75],['inc/sessions/model','_goal.class.php',112],['inc/users/model','_userfieldgroup.class.php',64],['inc/users/model','_organization.class.php',67]], 82],
'parent_link': ['parent_link', 'Template function: Display link to parent of this item. ', [['inc/items/model','_item.class.php',4816]], 1],
'remove_renderer': ['remove_renderer', 'Remove a renderer (by code) from the Item. ', [['inc/items/model','_item.class.php',6317]], 1],
'feedback_link': ['feedback_link', 'Template function: Displays link to feedback page (under some conditions) ', [['inc/items/model','_item.class.php',3245]], 19],
'cities_exist': ['cities_exist', 'Check the existing cities for selected country, region & subregion ', [['inc/regional/model','_regional.funcs.php',622]], 3],
'get_feedback_link': ['get_feedback_link', 'Get a link to feedback page (under some conditions) ', [['inc/items/model','_item.class.php',3256]], 1],
'get_content_parts': ['get_content_parts', 'Get content parts (split by "[teaserbreak]"). ', [['inc/items/model','_item.class.php',1889]], 4],
'get_region': ['get_region', 'Get region of current Item ', [['inc/items/model','_item.class.php',6780]], 1],
'get_url': ['get_url', 'Get an url to this item ', [['inc/items/model','_item.class.php',6507],['inc/skins/model','_skin.class.php',737],['inc/comments/model','_comment.funcs.php',1333],['inc/files/model','_file.class.php',651]], 38],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['inc/skins/model','_skin.class.php',1162],['inc/plugins','_plugin.class.php',2847],['inc/locales','_locale.funcs.php',233]], 236],
'get_download_url': ['get_download_url', 'Get an url to download file ', [['inc/links/model','_link.class.php',245]], 3],
'get_custom_fields': ['get_custom_fields', 'Get the custom feilds ', [['inc/items/model','_itemtype.class.php',609]], 3],
'get_tinyurl': ['get_tinyurl', 'Get the item tiny url ', [['inc/items/model','_item.class.php',6426]], 3],
'footer': ['footer', 'Template tag: display footer for the current Item. ', [['inc/items/model','_item.class.php',3676]], 8],
'set_renderers': ['set_renderers', 'Set the renderers of the Item. ', [['inc/items/model','_item.class.php',4975],['inc/messaging/model','_message.class.php',723],['inc/comments/model','_comment.class.php',2947]], 12],
'locale_datefmt': ['locale_datefmt', 'Returns the current locale\'s default date format ', [['inc/locales','_locale.funcs.php',385]], 71],
'extra_status': ['extra_status', 'Template function: display extra status of item ', [['inc/items/model','_item.class.php',4601]], 1],
'deprecate_link': ['deprecate_link', 'Display link to deprecate a post if user has edit rights ', [['inc/items/model','_item.class.php',4370],['inc/comments/model','_comment.class.php',1725]], 3],
'get_slugs': ['get_slugs', 'Get all slugs of this Item, except of tiny slug ', [['inc/items/model','_item.class.php',6397]], 2],
'get_tinyslug': ['get_tinyslug', 'Get the item tinyslug. If not exists -> create new ', [['inc/items/model','_item.class.php',6342]], 2],
'update_last_touched_date': ['update_last_touched_date', 'Update field last_touched_ts ', [['inc/items/model','_item.class.php',7135],['inc/links/model','_linkcomment.class.php',185],['inc/links/model','_linkitem.class.php',239],['inc/comments/model','_comment.class.php',4052],['inc/links/model','_linkowner.class.php',393],['inc/chapters/model','_chapter.class.php',658]], 19],
'renderer_checkboxes': ['renderer_checkboxes', 'Template function: display checkable list of renderers ', [['inc/items/model','_item.class.php',4432],['inc/comments/model','_comment.class.php',2852]], 7],
'get_highest_publish_status': ['get_highest_publish_status', 'Get the highest public status and action button label of a new post or comment in the given blog what the current User may create. We assume here that the User should be able to create a post/comment with at least the lowest level status. ', [['inc/collections/model','_blog.funcs.php',768]], 10],
'get_activate_info_url': ['get_activate_info_url', 'Get url to show user activate info screen ', [['inc/users/model','_user.funcs.php',286]], 21],
'skin_include': ['skin_include', 'Template tag. Include a sub-template at the current position ', [['inc/skins','_skin.funcs.php',1714]], 394],
'get_next_status': ['get_next_status', 'Get next status to publish/restrict to this item TODO: asimo>Refactor this with Comment->get_next_status() ', [['inc/items/model','_item.class.php',4047],['inc/comments/model','_comment.class.php',1908]], 12],
'page_links': ['page_links', 'Template tag ', [['inc/items/model','_itemlistlight.class.php',1723],['inc/items/model','_item.class.php',2484],['inc/comments/model','_commentlist.class.php',637]], 10],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'get_fallback_files': ['get_fallback_files', 'Get array of the Files that are used as "Fallback" for the selected File ', [['inc/items/model','_item.class.php',3065]], 1],
'prepare_item_content': ['prepare_item_content', 'Prepare item content ', [['inc/items/model','_item.funcs.php',3225]], 4],
'invalidate_key': ['invalidate_key', 'Invalidate a special key ', [['inc/_core/model','_blockcache.class.php',69]], 14],
'assign_to_first_cat_for_collection': ['assign_to_first_cat_for_collection', 'Assign the item to the first category we find in the requested collection ', [['inc/items/model','_item.class.php',6249]], 0],
'get_tag_link': ['get_tag_link', 'Get a link (<a href>) to the tag page of a given tag. ', [['inc/collections/model','_blog.class.php',1514]], 2],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'get_prefetch_itemlist_ids': ['get_prefetch_itemlist_ids', '', [['inc/items/model','_itemlight.class.php',1476]], 1],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'trigger_event_first_true': ['trigger_event_first_true', 'Call all plugins for a given event, until the first one returns true. ', [['inc/plugins/model','_plugins.class.php',852]], 17],
'regions_exist': ['regions_exist', 'Check the existing regions for selected country ', [['inc/regional/model','_regional.funcs.php',566]], 3],
'get_renderers': ['get_renderers', 'Get the list of renderers for this Item. ', [['inc/items/model','_item.class.php',6271],['inc/messaging/model','_message.class.php',713],['inc/comments/model','_comment.class.php',2937]], 8],
'replace_callback': ['replace_callback', 'Callback user for footer() ', [['inc/items/model','_item.class.php',6158],['inc/_core/ui','_uiwidget.class.php',172],['inc/_core/ui','_uiwidget.class.php',1100],['inc/collections/model','_blog.class.php',1807],['inc/_core/ui/results','_results.class.php',1761],['plugins','_autolinks.plugin.php',499],['plugins','_gmcode.plugin.php',115]], 3],
'delete_prerendered_content': ['delete_prerendered_content', 'Unset any prerendered content for this item (in PHP cache). ', [['inc/items/model','_item.class.php',1606],['inc/messaging/model','_message.class.php',824],['inc/comments/model','_comment.class.php',2583]], 2],
'can_see_comments': ['can_see_comments', 'Check if user can see comments on this post, which he cannot if they are disabled for the Item or never allowed for the blog. ', [['inc/items/model','_item.class.php',1020]], 7],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5108],['inc/_core/model/dataobjects','_dataobject.class.php',470],['inc/users/model','_user.class.php',3187],['inc/skins/model','_skin.class.php',438],['inc/items/model','_itemtype.class.php',405],['inc/files/model','_filetype.class.php',213],['inc/tools/model','_syslog.class.php',58],['inc/collections/model','_blog.class.php',2272],['inc/comments/model','_comment.class.php',3815],['inc/users/model','_group.class.php',459],['inc/widgets/model','_widget.class.php',829],['inc/chapters/model','_chapter.class.php',532],['inc/files/model','_file.class.php',1784]], 99],
'get_city': ['get_city', 'Get city of current Item ', [['inc/items/model','_item.class.php',6852]], 1],
'lastedit_user': ['lastedit_user', 'Template function: display user who edited the item last time ', [['inc/items/model','_item.class.php',533]], 2],
'get_rating_table': ['get_rating_table', 'Get table from ratings data ', [['inc/items/model','_item.class.php',3510]], 2],
'next_status_link': ['next_status_link', 'Display next Publish/Restrict to link ', [['inc/items/model','_item.class.php',4216],['inc/comments/model','_comment.class.php',2136]], 12],
'get_caturl': ['get_caturl', 'Get category permanent url by category ID ', [['inc/collections/model','_category.funcs.php',121]], 4],
'param_errors_detected': ['param_errors_detected', 'Check if there have been validation errors ', [['inc/_core','_param.funcs.php',1480]], 61],
'ob_get_contents': ['ob_get_contents', '', [], 9],
'count': ['count', '', [], 928],
'strtotime': ['strtotime', '', [], 46],
'defined': ['defined', '', [], 962],
'ob_end_clean': ['ob_end_clean', '', [], 13],
'ob_start': ['ob_start', '', [], 45],
'preg_replace_callback': ['preg_replace_callback', '', [], 41],
'preg_split': ['preg_split', '', [], 41],
'log': ['log', '', [], 89],
'strip_tags': ['strip_tags', '', [], 53],
'func_num_args': ['func_num_args', '', [], 8],
'htmlspecialchars': ['htmlspecialchars', '', [], 152],
'is_null': ['is_null', '', [], 299],
'max': ['max', '', [], 216],
'rawurlencode': ['rawurlencode', '', [], 137],
'strcmp': ['strcmp', '', [], 110],
'preg_replace': ['preg_replace', '', [], 325],
'array_map': ['array_map', '', [], 41],
'explode': ['explode', '', [], 263],
'preg_match': ['preg_match', '', [], 423],
'preg_match_all': ['preg_match_all', '', [], 38],
'is_array': ['is_array', '', [], 311],
'array_search': ['array_search', '', [], 30],
'trim': ['trim', '', [], 398],
'intval': ['intval', '', [], 221],
'array_filter': ['array_filter', '', [], 4],
'array_merge': ['array_merge', '', [], 702],
'array_keys': ['array_keys', '', [], 94],
'strpos': ['strpos', '', [], 347],
'ceil': ['ceil', '', [], 96],
'is_dir': ['is_dir', '', [], 92],
'in_array': ['in_array', '', [], 417],
'array_shift': ['array_shift', '', [], 62],
'is_bool': ['is_bool', '', [], 1],
'func_get_args': ['func_get_args', '', [], 13],
'array_unique': ['array_unique', '', [], 38],
'str_replace': ['str_replace', '', [], 531],
'substr': ['substr', '', [], 745],
'number_format': ['number_format', '', [], 21],
'stristr': ['stristr', '', [], 22],
'is_a': ['is_a', '', [], 39],
'array_diff': ['array_diff', '', [], 31],
'date': ['date', '', [], 446],
'implode': ['implode', '', [], 571]};
CLASS_DATA={
'item': ['item', 'Item Class ', [['inc/items/model','_item.class.php',25]], 97],
'cronjob': ['cronjob', 'Cronjob ', [['inc/cron/model','_cronjob.class.php',18]], 5],
'comment': ['comment', 'Comment Class ', [['inc/comments/model','_comment.class.php',19]], 122],
'linkitem': ['linkitem', 'LinkItem Class ', [['inc/links/model','_linkitem.class.php',16]], 31],
'sql': ['sql', 'SQL class: help constructing queries ', [['inc/_core/model/db','_sql.class.php',17]], 334],
'itemlight': ['itemlight', 'ItemLight Class ', [['inc/items/model','_itemlight.class.php',20]], 2],
'itemsettings': ['itemsettings', 'Class to handle the settings for collections/items ', [['inc/items/model','_itemsettings.class.php',20]], 1],
'slug': ['slug', 'Slug Class ', [['inc/slugs/model','_slug.class.php',21]], 40],
'blockcache': ['blockcache', 'Block Cache. ', [['inc/_core/model','_blockcache.class.php',19]], 16]};
CONST_DATA={
'OBJECT': ['OBJECT', '', [['inc/_core/model/db','_db.class.php',49]], 54],
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
