<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/items/model/_itemquery.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/items/model';
filename='_itemquery.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/items/model/</a> -> <a href="_itemquery.class.php.html">_itemquery.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_itemquery.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_itemquery.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the ItemQuery class.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> *</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * @package evocore</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> */</span>
<a name="l14"><span class="linenum">  14</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/db/_sql.class.php', 'SQL' );
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * ItemQuery: help constructing queries on Items</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package evocore</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> */</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('ItemQuery')" href="../../../_classes/itemquery.html" onMouseOver="classPopup(event,'itemquery')">ItemQuery</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>
<a name="l23"><span class="linenum">  23</span></a>  {
<a name="l24"><span class="linenum">  24</span></a>      var <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../../_variables/p.html">$p</a>;
<a name="l25"><span class="linenum">  25</span></a>      var <a class="var it6304" onMouseOver="hilite(6304)" onMouseOut="lolite()" onClick="logVariable('pl')" href="../../../_variables/pl.html">$pl</a>;
<a name="l26"><span class="linenum">  26</span></a>      var <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l27"><span class="linenum">  27</span></a>      var <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l28"><span class="linenum">  28</span></a>      var <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>;
<a name="l29"><span class="linenum">  29</span></a>      var <a class="var it991" onMouseOver="hilite(991)" onMouseOut="lolite()" onClick="logVariable('catsel')" href="../../../_variables/catsel.html">$catsel</a>;
<a name="l30"><span class="linenum">  30</span></a>      var <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../_variables/show_statuses.html">$show_statuses</a>;
<a name="l31"><span class="linenum">  31</span></a>      var <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a>;
<a name="l32"><span class="linenum">  32</span></a>      var <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>;
<a name="l33"><span class="linenum">  33</span></a>      var <a class="var it4247" onMouseOver="hilite(4247)" onMouseOut="lolite()" onClick="logVariable('author_login')" href="../../../_variables/author_login.html">$author_login</a>;
<a name="l34"><span class="linenum">  34</span></a>      var <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('assignees')" href="../../../_variables/assignees.html">$assignees</a>;
<a name="l35"><span class="linenum">  35</span></a>      var <a class="var it6305" onMouseOver="hilite(6305)" onMouseOut="lolite()" onClick="logVariable('assignees_login')" href="../../../_variables/assignees_login.html">$assignees_login</a>;
<a name="l36"><span class="linenum">  36</span></a>      var <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a>;
<a name="l37"><span class="linenum">  37</span></a>      var <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a>;
<a name="l38"><span class="linenum">  38</span></a>      var <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('dstart')" href="../../../_variables/dstart.html">$dstart</a>;
<a name="l39"><span class="linenum">  39</span></a>      var <a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>;
<a name="l40"><span class="linenum">  40</span></a>      var <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a>;
<a name="l41"><span class="linenum">  41</span></a>      var <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a>;
<a name="l42"><span class="linenum">  42</span></a>      var <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a>;
<a name="l43"><span class="linenum">  43</span></a>      var <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a>;
<a name="l44"><span class="linenum">  44</span></a>      var <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a>;
<a name="l45"><span class="linenum">  45</span></a>      var <a class="var it2046" onMouseOver="hilite(2046)" onMouseOut="lolite()" onClick="logVariable('exact')" href="../../../_variables/exact.html">$exact</a>;
<a name="l46"><span class="linenum">  46</span></a>      var <a class="var it381" onMouseOver="hilite(381)" onMouseOut="lolite()" onClick="logVariable('featured')" href="../../../_variables/featured.html">$featured</a>;
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * Constructor.</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @param string Name of table in database</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @param string Prefix of fields in the table</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @param string Name of the ID field (including prefix)</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>  	function <a class="function" onClick="logFunction('ItemQuery')" href="../../../_functions/itemquery.html" onMouseOver="funcPopup(event,'itemquery')">ItemQuery</a>( <a class="var it1659" onMouseOver="hilite(1659)" onMouseOut="lolite()" onClick="logVariable('dbtablename')" href="../../../_variables/dbtablename.html">$dbtablename</a>, <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a> = '', <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a> )
<a name="l57"><span class="linenum">  57</span></a>      {
<a name="l58"><span class="linenum">  58</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbtablename.html">dbtablename</a> = <a class="var it1659" onMouseOver="hilite(1659)" onMouseOut="lolite()" onClick="logVariable('dbtablename')" href="../../../_variables/dbtablename.html">$dbtablename</a>;
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a> = <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>;
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a> = <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a>;
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbtablename.html">dbtablename</a> );
<a name="l63"><span class="linenum">  63</span></a>      }
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      <span class="comment">/**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * Restrict to a specific post</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     */</span>
<a name="l69"><span class="linenum">  69</span></a>  	function <a class="function" onClick="logFunction('where_ID')" href="../../../_functions/where_id.html" onMouseOver="funcPopup(event,'where_id')">where_ID</a>( <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../../_variables/p.html">$p</a> = '', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '' )
<a name="l70"><span class="linenum">  70</span></a>      {
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = false;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('p')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/p.html">p</a> = <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../../_variables/p.html">$p</a>;
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">        // if a post number is specified, load that post</span>
<a name="l77"><span class="linenum">  77</span></a>          if( !empty(<a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../../_variables/p.html">$p</a>) )
<a name="l78"><span class="linenum">  78</span></a>          {
<a name="l79"><span class="linenum">  79</span></a>              if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('p')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/p.html">p</a>, 0, 1 ) == '-' )
<a name="l80"><span class="linenum">  80</span></a>              {    // Starts with MINUS sign:
<a name="l81"><span class="linenum">  81</span></a>                  <a class="var it6308" onMouseOver="hilite(6308)" onMouseOut="lolite()" onClick="logVariable('eq_p')" href="../../../_variables/eq_p.html">$eq_p</a> = ' &lt;&gt; ';
<a name="l82"><span class="linenum">  82</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('p')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/p.html">p</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('p')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/p.html">p</a>, 1 );
<a name="l83"><span class="linenum">  83</span></a>              }
<a name="l84"><span class="linenum">  84</span></a>              else
<a name="l85"><span class="linenum">  85</span></a>              {
<a name="l86"><span class="linenum">  86</span></a>                  <a class="var it6308" onMouseOver="hilite(6308)" onMouseOut="lolite()" onClick="logVariable('eq_p')" href="../../../_variables/eq_p.html">$eq_p</a> = ' = ';
<a name="l87"><span class="linenum">  87</span></a>              }
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.<a class="var it6308" onMouseOver="hilite(6308)" onMouseOut="lolite()" onClick="logVariable('eq_p')" href="../../../_variables/eq_p.html">$eq_p</a>.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('p')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/p.html">p</a>) );
<a name="l90"><span class="linenum">  90</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = true;
<a name="l91"><span class="linenum">  91</span></a>          }
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">        // if a post urltitle is specified, load that post</span>
<a name="l94"><span class="linenum">  94</span></a>          if( !empty( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) )
<a name="l95"><span class="linenum">  95</span></a>          {
<a name="l96"><span class="linenum">  96</span></a>              if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>, 0, 1 ) == '-' )
<a name="l97"><span class="linenum">  97</span></a>              {    // Starts with MINUS sign:
<a name="l98"><span class="linenum">  98</span></a>                  <a class="var it6309" onMouseOver="hilite(6309)" onMouseOut="lolite()" onClick="logVariable('eq_title')" href="../../../_variables/eq_title.html">$eq_title</a> = ' &lt;&gt; ';
<a name="l99"><span class="linenum">  99</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>, 1 );
<a name="l100"><span class="linenum"> 100</span></a>              }
<a name="l101"><span class="linenum"> 101</span></a>              else
<a name="l102"><span class="linenum"> 102</span></a>              {
<a name="l103"><span class="linenum"> 103</span></a>                  <a class="var it6309" onMouseOver="hilite(6309)" onMouseOut="lolite()" onClick="logVariable('eq_title')" href="../../../_variables/eq_title.html">$eq_title</a> = ' = ';
<a name="l104"><span class="linenum"> 104</span></a>              }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l107"><span class="linenum"> 107</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'urltitle'.<a class="var it6309" onMouseOver="hilite(6309)" onMouseOut="lolite()" onClick="logVariable('eq_title')" href="../../../_variables/eq_title.html">$eq_title</a>.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>) );
<a name="l108"><span class="linenum"> 108</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = true;
<a name="l109"><span class="linenum"> 109</span></a>          }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l112"><span class="linenum"> 112</span></a>      }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>      <span class="comment">/**</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * Restrict to a specific list of posts</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>  	function <a class="function" onClick="logFunction('where_ID_list')" href="../../../_functions/where_id_list.html" onMouseOver="funcPopup(event,'where_id_list')">where_ID_list</a>( <a class="var it6304" onMouseOver="hilite(6304)" onMouseOut="lolite()" onClick="logVariable('pl')" href="../../../_variables/pl.html">$pl</a> = '' )
<a name="l119"><span class="linenum"> 119</span></a>      {
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = false;
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a> = <a class="var it6304" onMouseOver="hilite(6304)" onMouseOut="lolite()" onClick="logVariable('pl')" href="../../../_variables/pl.html">$pl</a>;
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>          if( empty( <a class="var it6304" onMouseOver="hilite(6304)" onMouseOut="lolite()" onClick="logVariable('pl')" href="../../../_variables/pl.html">$pl</a> ) ) return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>; <span class="comment">// nothing to do</span>
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>          if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a>, 0, 1 ) == '-' )
<a name="l127"><span class="linenum"> 127</span></a>          {    // List starts with MINUS sign:
<a name="l128"><span class="linenum"> 128</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'NOT IN';
<a name="l129"><span class="linenum"> 129</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a>, 1 );
<a name="l130"><span class="linenum"> 130</span></a>          }
<a name="l131"><span class="linenum"> 131</span></a>          else
<a name="l132"><span class="linenum"> 132</span></a>          {
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'IN';
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it6310" onMouseOver="hilite(6310)" onMouseOut="lolite()" onClick="logVariable('p_ID_array')" href="../../../_variables/p_ID_array.html">$p_ID_array</a> = array();
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it6311" onMouseOver="hilite(6311)" onMouseOut="lolite()" onClick="logVariable('p_id_list')" href="../../../_variables/p_id_list.html">$p_id_list</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a> );
<a name="l138"><span class="linenum"> 138</span></a>          foreach( <a class="var it6311" onMouseOver="hilite(6311)" onMouseOut="lolite()" onClick="logVariable('p_id_list')" href="../../../_variables/p_id_list.html">$p_id_list</a> as <a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('p_id')" href="../../../_variables/p_id.html">$p_id</a> )
<a name="l139"><span class="linenum"> 139</span></a>          {
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it6310" onMouseOver="hilite(6310)" onMouseOut="lolite()" onClick="logVariable('p_ID_array')" href="../../../_variables/p_ID_array.html">$p_ID_array</a>[] = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('p_id')" href="../../../_variables/p_id.html">$p_id</a> );<span class="comment">// make sure they're all numbers</span>
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it6310" onMouseOver="hilite(6310)" onMouseOut="lolite()" onClick="logVariable('p_ID_array')" href="../../../_variables/p_ID_array.html">$p_ID_array</a> );
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.' '.<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a>.'( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pl')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/pl.html">pl</a>.' )' );
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = true;
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Restrict to specific collection/chapters (blog/categories)</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     *</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * @param integer</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * @param string List of cats to restrict to</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * @param array Array of cats to restrict to</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     */</span>
<a name="l159"><span class="linenum"> 159</span></a>  	function <a class="function" onClick="logFunction('where_chapter')" href="../../../_functions/where_chapter.html" onMouseOver="funcPopup(event,'where_chapter')">where_chapter</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> = '', <a class="var it991" onMouseOver="hilite(991)" onMouseOut="lolite()" onClick="logVariable('catsel')" href="../../../_variables/catsel.html">$catsel</a> = array() )
<a name="l160"><span class="linenum"> 160</span></a>      {
<a name="l161"><span class="linenum"> 161</span></a>          global <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>; <span class="comment">// this is required for the cat_req() callback in compile_cat_array()</span>
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>);    <span class="comment">// Extra security</span>
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">        // Save for future use (permission checks..)</span>
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a> = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_postcats ON '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.' = postcat_post_ID
<a name="l169"><span class="linenum"> 169</span></a>                                              INNER JOIN T_categories ON postcat_cat_ID = cat_ID' );
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it3226" onMouseOver="hilite(3226)" onMouseOut="lolite()" onClick="logVariable('current_Blog')" href="../../../_variables/current_Blog.html">$current_Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3226" onMouseOver="hilite(3226)" onMouseOut="lolite()" onClick="logVariable('current_Blog')" href="../../../_variables/current_Blog.html">$current_Blog</a>-&gt;<a class="function" onClick="logFunction('get_sql_where_aggregate_coll_IDs')" href="../../../_functions/get_sql_where_aggregate_coll_ids.html" onMouseOver="funcPopup(event,'get_sql_where_aggregate_coll_ids')">get_sql_where_aggregate_coll_IDs</a>('cat_blog_ID') );
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a> = NULL;
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a> = NULL;
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">        // Compile the real category list to use:</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">        // TODO: allow to pass the compiled vars directly to this class</span>
<a name="l182"><span class="linenum"> 182</span></a>          <a class="function" onClick="logFunction('compile_cat_array')" href="../../../_functions/compile_cat_array.html" onMouseOver="funcPopup(event,'compile_cat_array')">compile_cat_array</a>( <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, <a class="var it991" onMouseOver="hilite(991)" onMouseOut="lolite()" onClick="logVariable('catsel')" href="../../../_variables/catsel.html">$catsel</a>, <span class="comment">/* by ref */</span> <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>, <span class="comment">/* by ref */</span> <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a>, <span class="comment">/* TODO $blog == 1 ? 0 : */</span> <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>          if( ! empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>) )
<a name="l185"><span class="linenum"> 185</span></a>          {    // We want to restict to some cats:
<a name="l186"><span class="linenum"> 186</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>              if( <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a> == '-' )
<a name="l189"><span class="linenum"> 189</span></a>              {
<a name="l190"><span class="linenum"> 190</span></a>                  <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'NOT IN';
<a name="l191"><span class="linenum"> 191</span></a>              }
<a name="l192"><span class="linenum"> 192</span></a>              else
<a name="l193"><span class="linenum"> 193</span></a>              {
<a name="l194"><span class="linenum"> 194</span></a>                  <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'IN';
<a name="l195"><span class="linenum"> 195</span></a>              }
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it6312" onMouseOver="hilite(6312)" onMouseOut="lolite()" onClick="logVariable('whichcat')" href="../../../_variables/whichcat.html">$whichcat</a> = 'postcat_cat_ID '. <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a>.' ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a> ). ') ';
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">            // echo $whichcat;</span>
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it6312" onMouseOver="hilite(6312)" onMouseOut="lolite()" onClick="logVariable('whichcat')" href="../../../_variables/whichcat.html">$whichcat</a> );
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>              if( <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a> == '*' )
<a name="l202"><span class="linenum"> 202</span></a>              { // We want the categories combined! (i-e posts must be in ALL requested cats)
<a name="l203"><span class="linenum"> 203</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('GROUP_BY')" href="../../../_functions/group_by.html" onMouseOver="funcPopup(event,'group_by')">GROUP_BY</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.' HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(postcat_cat_ID) = '.<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>) );
<a name="l204"><span class="linenum"> 204</span></a>              }
<a name="l205"><span class="linenum"> 205</span></a>          }
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      <span class="comment">/**</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * Restrict to specific collection/chapters (blog/categories)</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     *</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @param Blog</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @param array</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @param string</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * @param string 'wide' to search in extra cats too</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     *               'main' for main cat only</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     *               'extra' for extra cats only</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @param string Collection IDs</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     */</span>
<a name="l220"><span class="linenum"> 220</span></a>  	function <a class="function" onClick="logFunction('where_chapter2')" href="../../../_functions/where_chapter2.html" onMouseOver="funcPopup(event,'where_chapter2')">where_chapter2</a>( &amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>, <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a>, <a class="var it6313" onMouseOver="hilite(6313)" onMouseOut="lolite()" onClick="logVariable('cat_focus')" href="../../../_variables/cat_focus.html">$cat_focus</a> = 'wide', <a class="var it6314" onMouseOver="hilite(6314)" onMouseOut="lolite()" onClick="logVariable('coll_IDs')" href="../../../_variables/coll_IDs.html">$coll_IDs</a> = NULL )
<a name="l221"><span class="linenum"> 221</span></a>      {
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">        // Save for future use (permission checks..)</span>
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cat_array')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/cat_array.html">cat_array</a> = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>;
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cat_modifier')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/cat_modifier.html">cat_modifier</a> = <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a>;
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>          if( <a class="var it6313" onMouseOver="hilite(6313)" onMouseOut="lolite()" onClick="logVariable('cat_focus')" href="../../../_variables/cat_focus.html">$cat_focus</a> == 'wide' || <a class="var it6313" onMouseOver="hilite(6313)" onMouseOut="lolite()" onClick="logVariable('cat_focus')" href="../../../_variables/cat_focus.html">$cat_focus</a> == 'extra' )
<a name="l229"><span class="linenum"> 229</span></a>          {
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it6315" onMouseOver="hilite(6315)" onMouseOut="lolite()" onClick="logVariable('sql_join_categories')" href="../../../_variables/sql_join_categories.html">$sql_join_categories</a> = ( <a class="var it6313" onMouseOver="hilite(6313)" onMouseOut="lolite()" onClick="logVariable('cat_focus')" href="../../../_variables/cat_focus.html">$cat_focus</a> == 'extra' ) ? ' AND post_main_cat_ID != cat_ID' : '';
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_postcats ON '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.' = postcat_post_ID
<a name="l232"><span class="linenum"> 232</span></a>                                                  INNER JOIN T_categories ON postcat_cat_ID = cat_ID'.<a class="var it6315" onMouseOver="hilite(6315)" onMouseOut="lolite()" onClick="logVariable('sql_join_categories')" href="../../../_variables/sql_join_categories.html">$sql_join_categories</a> );
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">            // fp&gt; we try to restrict as close as possible to the posts but I don't know if it matters</span>
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it6316" onMouseOver="hilite(6316)" onMouseOut="lolite()" onClick="logVariable('cat_ID_field')" href="../../../_variables/cat_ID_field.html">$cat_ID_field</a> = 'postcat_cat_ID';
<a name="l235"><span class="linenum"> 235</span></a>          }
<a name="l236"><span class="linenum"> 236</span></a>          else
<a name="l237"><span class="linenum"> 237</span></a>          {
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_categories ON post_main_cat_ID = cat_ID' );
<a name="l239"><span class="linenum"> 239</span></a>              <a class="var it6316" onMouseOver="hilite(6316)" onMouseOut="lolite()" onClick="logVariable('cat_ID_field')" href="../../../_variables/cat_ID_field.html">$cat_ID_field</a> = 'post_main_cat_ID';
<a name="l240"><span class="linenum"> 240</span></a>          }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>          if( ! empty( <a class="var it6314" onMouseOver="hilite(6314)" onMouseOut="lolite()" onClick="logVariable('coll_IDs')" href="../../../_variables/coll_IDs.html">$coll_IDs</a> ) )
<a name="l243"><span class="linenum"> 243</span></a>          { // Force to aggregate the collection IDs from current param and not from blog setting
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_sql_where_aggregate_coll_IDs')" href="../../../_functions/get_sql_where_aggregate_coll_ids.html" onMouseOver="funcPopup(event,'get_sql_where_aggregate_coll_ids')">get_sql_where_aggregate_coll_IDs</a>( 'cat_blog_ID', <a class="var it6314" onMouseOver="hilite(6314)" onMouseOut="lolite()" onClick="logVariable('coll_IDs')" href="../../../_variables/coll_IDs.html">$coll_IDs</a> ) );
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>          elseif( <a class="var it6313" onMouseOver="hilite(6313)" onMouseOut="lolite()" onClick="logVariable('cat_focus')" href="../../../_variables/cat_focus.html">$cat_focus</a> == 'main' )
<a name="l247"><span class="linenum"> 247</span></a>          { // We are requesting a narrow search
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cat_blog_ID = '.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>          else
<a name="l251"><span class="linenum"> 251</span></a>          { // Aggregate the collections IDs from blog setting
<a name="l252"><span class="linenum"> 252</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_sql_where_aggregate_coll_IDs')" href="../../../_functions/get_sql_where_aggregate_coll_ids.html" onMouseOver="funcPopup(event,'get_sql_where_aggregate_coll_ids')">get_sql_where_aggregate_coll_IDs</a>( 'cat_blog_ID' ) );
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>          if( ! empty(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>) )
<a name="l257"><span class="linenum"> 257</span></a>          {    // We want to restict to some cats:
<a name="l258"><span class="linenum"> 258</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>              if( <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a> == '-' )
<a name="l261"><span class="linenum"> 261</span></a>              {
<a name="l262"><span class="linenum"> 262</span></a>                  <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'NOT IN';
<a name="l263"><span class="linenum"> 263</span></a>              }
<a name="l264"><span class="linenum"> 264</span></a>              else
<a name="l265"><span class="linenum"> 265</span></a>              {
<a name="l266"><span class="linenum"> 266</span></a>                  <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'IN';
<a name="l267"><span class="linenum"> 267</span></a>              }
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it6312" onMouseOver="hilite(6312)" onMouseOut="lolite()" onClick="logVariable('whichcat')" href="../../../_variables/whichcat.html">$whichcat</a> = <a class="var it6316" onMouseOver="hilite(6316)" onMouseOut="lolite()" onClick="logVariable('cat_ID_field')" href="../../../_variables/cat_ID_field.html">$cat_ID_field</a>.' '.<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a>.' ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a> ). ') ';
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">            // echo $whichcat;</span>
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it6312" onMouseOver="hilite(6312)" onMouseOut="lolite()" onClick="logVariable('whichcat')" href="../../../_variables/whichcat.html">$whichcat</a> );
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>              if( <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('cat_modifier')" href="../../../_variables/cat_modifier.html">$cat_modifier</a> == '*' )
<a name="l274"><span class="linenum"> 274</span></a>              { // We want the categories combined! (i-e posts must be in ALL requested cats)
<a name="l275"><span class="linenum"> 275</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('GROUP_BY')" href="../../../_functions/group_by.html" onMouseOver="funcPopup(event,'group_by')">GROUP_BY</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbIDname.html">dbIDname</a>.' HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>('.<a class="var it6316" onMouseOver="hilite(6316)" onMouseOut="lolite()" onClick="logVariable('cat_ID_field')" href="../../../_variables/cat_ID_field.html">$cat_ID_field</a>.') = '.<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../_variables/cat_array.html">$cat_array</a>) );
<a name="l276"><span class="linenum"> 276</span></a>              }
<a name="l277"><span class="linenum"> 277</span></a>          }
<a name="l278"><span class="linenum"> 278</span></a>      }
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      <span class="comment">/**</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * Restrict to the visibility/sharing statuses we want to show</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     *</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * @param array Restrict to these statuses</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @param string What blogs should be used to check the status permissions:</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     *               - Empty string to use current blog setting</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     *               - A list separated by ','</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     *               - Value '*' to use all blogs</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     *               - Value '-' to use only current blog without aggregated blog</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     */</span>
<a name="l291"><span class="linenum"> 291</span></a>  	function <a class="function" onClick="logFunction('where_visibility')" href="../../../_functions/where_visibility.html" onMouseOver="funcPopup(event,'where_visibility')">where_visibility</a>( <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> = NULL )
<a name="l292"><span class="linenum"> 292</span></a>      {
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('show_statuses')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/show_statuses.html">show_statuses</a> = <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../_variables/show_statuses.html">$show_statuses</a>;
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>          if( ! isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a> ) )
<a name="l296"><span class="linenum"> 296</span></a>          {
<a name="l297"><span class="linenum"> 297</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Status restriction requires to work with a specific blog first.' );
<a name="l298"><span class="linenum"> 298</span></a>          }
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>          if( empty( <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> ) &amp;&amp; ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a> ) )
<a name="l301"><span class="linenum"> 301</span></a>          { // Blog IDs are not defined, Use them depending on current collection setting
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">            // NOTE! collection can be 0, for example, on disp=usercomments|useritems where we display data from all collections</span>
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l304"><span class="linenum"> 304</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a> );
<a name="l305"><span class="linenum"> 305</span></a>              <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'aggregate_coll_IDs' );
<a name="l306"><span class="linenum"> 306</span></a>          }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it6317" onMouseOver="hilite(6317)" onMouseOut="lolite()" onClick="logVariable('blog_IDs')" href="../../../_variables/blog_IDs.html">$blog_IDs</a> = array();
<a name="l309"><span class="linenum"> 309</span></a>          if( empty( <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> ) || <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> == '-' )
<a name="l310"><span class="linenum"> 310</span></a>          { // Get status restriction only for current blog
<a name="l311"><span class="linenum"> 311</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="function" onClick="logFunction('statuses_where_clause')" href="../../../_functions/statuses_where_clause.html" onMouseOver="funcPopup(event,'statuses_where_clause')">statuses_where_clause</a>( <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog.html">blog</a>, 'blog_post!', true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a> ) );
<a name="l312"><span class="linenum"> 312</span></a>              return; <span class="comment">// Exit here, because we don't need to check the permissions for multiple blogs</span>
<a name="l313"><span class="linenum"> 313</span></a>          }
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">        // Check status permission for multiple blogs</span>
<a name="l316"><span class="linenum"> 316</span></a>          if( <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> == '*' )
<a name="l317"><span class="linenum"> 317</span></a>          { // Get the status restrictions for all blogs
<a name="l318"><span class="linenum"> 318</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l319"><span class="linenum"> 319</span></a>              <a class="var it6317" onMouseOver="hilite(6317)" onMouseOut="lolite()" onClick="logVariable('blog_IDs')" href="../../../_variables/blog_IDs.html">$blog_IDs</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( 'SELECT blog_ID FROM T_blogs ORDER BY blog_ID' );
<a name="l320"><span class="linenum"> 320</span></a>          }
<a name="l321"><span class="linenum"> 321</span></a>          else
<a name="l322"><span class="linenum"> 322</span></a>          { // Get the status restrictions for several blogs
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it6317" onMouseOver="hilite(6317)" onMouseOut="lolite()" onClick="logVariable('blog_IDs')" href="../../../_variables/blog_IDs.html">$blog_IDs</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it5505" onMouseOver="hilite(5505)" onMouseOut="lolite()" onClick="logVariable('aggregate_coll_IDs')" href="../../../_variables/aggregate_coll_IDs.html">$aggregate_coll_IDs</a> );
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>          <a class="var it6318" onMouseOver="hilite(6318)" onMouseOut="lolite()" onClick="logVariable('status_restrictions')" href="../../../_variables/status_restrictions.html">$status_restrictions</a> = array();
<a name="l327"><span class="linenum"> 327</span></a>          foreach( <a class="var it6317" onMouseOver="hilite(6317)" onMouseOut="lolite()" onClick="logVariable('blog_IDs')" href="../../../_variables/blog_IDs.html">$blog_IDs</a> as <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l328"><span class="linenum"> 328</span></a>          { // Check status permission for each blog separately
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it6318" onMouseOver="hilite(6318)" onMouseOut="lolite()" onClick="logVariable('status_restrictions')" href="../../../_variables/status_restrictions.html">$status_restrictions</a>[] = 'cat_blog_ID='.<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>.' AND '.<a class="function" onClick="logFunction('statuses_where_clause')" href="../../../_functions/statuses_where_clause.html" onMouseOver="funcPopup(event,'statuses_where_clause')">statuses_where_clause</a>( <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, 'blog_post!', true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a> );
<a name="l330"><span class="linenum"> 330</span></a>          }
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' ) OR ( ', <a class="var it6318" onMouseOver="hilite(6318)" onMouseOut="lolite()" onClick="logVariable('status_restrictions')" href="../../../_variables/status_restrictions.html">$status_restrictions</a> ).' )' );
<a name="l333"><span class="linenum"> 333</span></a>      }
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>      <span class="comment">/**</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * Restrict to the featured/non featured posts if requested</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     *</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * @param boolean|NULL Restrict to featured</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     */</span>
<a name="l341"><span class="linenum"> 341</span></a>  	function <a class="function" onClick="logFunction('where_featured')" href="../../../_functions/where_featured.html" onMouseOver="funcPopup(event,'where_featured')">where_featured</a>( <a class="var it381" onMouseOver="hilite(381)" onMouseOut="lolite()" onClick="logVariable('featured')" href="../../../_variables/featured.html">$featured</a> = NULL )
<a name="l342"><span class="linenum"> 342</span></a>      {
<a name="l343"><span class="linenum"> 343</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> = <a class="var it381" onMouseOver="hilite(381)" onMouseOut="lolite()" onClick="logVariable('featured')" href="../../../_variables/featured.html">$featured</a>;
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> ) )
<a name="l346"><span class="linenum"> 346</span></a>          { // no restriction
<a name="l347"><span class="linenum"> 347</span></a>              return;
<a name="l348"><span class="linenum"> 348</span></a>          }
<a name="l349"><span class="linenum"> 349</span></a>          elseif( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> ) )
<a name="l350"><span class="linenum"> 350</span></a>          { // restrict to featured
<a name="l351"><span class="linenum"> 351</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'featured &lt;&gt; 0' );
<a name="l352"><span class="linenum"> 352</span></a>          }
<a name="l353"><span class="linenum"> 353</span></a>          else
<a name="l354"><span class="linenum"> 354</span></a>          { // restrict to NON featured
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'featured = 0' );
<a name="l356"><span class="linenum"> 356</span></a>          }
<a name="l357"><span class="linenum"> 357</span></a>      }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>      <span class="comment">/**</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * Restrict to specific tags</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     *</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * @param string List of tags to restrict to</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     */</span>
<a name="l365"><span class="linenum"> 365</span></a>  	function <a class="function" onClick="logFunction('where_tags')" href="../../../_functions/where_tags.html" onMouseOver="funcPopup(event,'where_tags')">where_tags</a>( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> )
<a name="l366"><span class="linenum"> 366</span></a>      {
<a name="l367"><span class="linenum"> 367</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> = <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a>;
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>          if( empty( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> ) )
<a name="l372"><span class="linenum"> 372</span></a>          {
<a name="l373"><span class="linenum"> 373</span></a>              return;
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> );
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_items__itemtag ON post_ID = itag_itm_ID
<a name="l379"><span class="linenum"> 379</span></a>                                  INNER JOIN T_items__tag <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (itag_tag_ID = tag_ID AND tag_name IN ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a>).') )' );
<a name="l380"><span class="linenum"> 380</span></a>      }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>      <span class="comment">/**</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * Restrict to specific authors by users IDs</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     *</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * @param string List of authors IDs to restrict to (must have been previously validated)</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     */</span>
<a name="l388"><span class="linenum"> 388</span></a>  	function <a class="function" onClick="logFunction('where_author')" href="../../../_functions/where_author.html" onMouseOver="funcPopup(event,'where_author')">where_author</a>( <a class="var it6319" onMouseOver="hilite(6319)" onMouseOut="lolite()" onClick="logVariable('author_IDs')" href="../../../_variables/author_IDs.html">$author_IDs</a> )
<a name="l389"><span class="linenum"> 389</span></a>      {
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a> = <a class="var it6319" onMouseOver="hilite(6319)" onMouseOut="lolite()" onClick="logVariable('author_IDs')" href="../../../_variables/author_IDs.html">$author_IDs</a>;
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a> ) )
<a name="l393"><span class="linenum"> 393</span></a>          {
<a name="l394"><span class="linenum"> 394</span></a>              return;
<a name="l395"><span class="linenum"> 395</span></a>          }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>          if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a>, 0, 1 ) == '-' )
<a name="l398"><span class="linenum"> 398</span></a>          { // Exclude the users IF a list starts with MINUS sign:
<a name="l399"><span class="linenum"> 399</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'NOT IN';
<a name="l400"><span class="linenum"> 400</span></a>              <a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a>, 1 );
<a name="l401"><span class="linenum"> 401</span></a>          }
<a name="l402"><span class="linenum"> 402</span></a>          else
<a name="l403"><span class="linenum"> 403</span></a>          { // Include the users:
<a name="l404"><span class="linenum"> 404</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'IN';
<a name="l405"><span class="linenum"> 405</span></a>              <a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a>;
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'creator_user_ID '.<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a>.' ( '.<a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a>.' )' );
<a name="l409"><span class="linenum"> 409</span></a>      }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>      <span class="comment">/**</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * Restrict to specific authors by users logins</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     *</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @param string List of authors logins to restrict to (must have been previously validated)</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     */</span>
<a name="l417"><span class="linenum"> 417</span></a>  	function <a class="function" onClick="logFunction('where_author_logins')" href="../../../_functions/where_author_logins.html" onMouseOver="funcPopup(event,'where_author_logins')">where_author_logins</a>( <a class="var it6320" onMouseOver="hilite(6320)" onMouseOut="lolite()" onClick="logVariable('author_logins')" href="../../../_variables/author_logins.html">$author_logins</a> )
<a name="l418"><span class="linenum"> 418</span></a>      {
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_login.html">author_login</a> = <a class="var it6320" onMouseOver="hilite(6320)" onMouseOut="lolite()" onClick="logVariable('author_logins')" href="../../../_variables/author_logins.html">$author_logins</a>;
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_login.html">author_login</a> ) )
<a name="l422"><span class="linenum"> 422</span></a>          {
<a name="l423"><span class="linenum"> 423</span></a>              return;
<a name="l424"><span class="linenum"> 424</span></a>          }
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>          if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_login.html">author_login</a>, 0, 1 ) == '-' )
<a name="l427"><span class="linenum"> 427</span></a>          { // Exclude the users IF a list starts with MINUS sign:
<a name="l428"><span class="linenum"> 428</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'NOT IN';
<a name="l429"><span class="linenum"> 429</span></a>              <a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a> = <a class="function" onClick="logFunction('get_users_IDs_by_logins')" href="../../../_functions/get_users_ids_by_logins.html" onMouseOver="funcPopup(event,'get_users_ids_by_logins')">get_users_IDs_by_logins</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_login.html">author_login</a>, 1 ) );
<a name="l430"><span class="linenum"> 430</span></a>          }
<a name="l431"><span class="linenum"> 431</span></a>          else
<a name="l432"><span class="linenum"> 432</span></a>          { // Include the users:
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a> = 'IN';
<a name="l434"><span class="linenum"> 434</span></a>              <a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a> = <a class="function" onClick="logFunction('get_users_IDs_by_logins')" href="../../../_functions/get_users_ids_by_logins.html" onMouseOver="funcPopup(event,'get_users_ids_by_logins')">get_users_IDs_by_logins</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_login')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_login.html">author_login</a> );
<a name="l435"><span class="linenum"> 435</span></a>          }
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>          if( ! empty( <a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a> ) )
<a name="l438"><span class="linenum"> 438</span></a>          {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'creator_user_ID '.<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('eq')" href="../../../_variables/eq.html">$eq</a>.' ( '.<a class="var it3681" onMouseOver="hilite(3681)" onMouseOut="lolite()" onClick="logVariable('users_IDs')" href="../../../_variables/users_IDs.html">$users_IDs</a>.' )' );
<a name="l440"><span class="linenum"> 440</span></a>          }
<a name="l441"><span class="linenum"> 441</span></a>      }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>      <span class="comment">/**</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * Restrict to specific assignees by users IDs</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     *</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * @param string List of assignees IDs to restrict to (must have been previously validated)</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * @param string List of assignees logins to restrict to (must have been previously validated)</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     */</span>
<a name="l450"><span class="linenum"> 450</span></a>  	function <a class="function" onClick="logFunction('where_assignees')" href="../../../_functions/where_assignees.html" onMouseOver="funcPopup(event,'where_assignees')">where_assignees</a>( <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('assignees')" href="../../../_variables/assignees.html">$assignees</a>, <a class="var it6321" onMouseOver="hilite(6321)" onMouseOut="lolite()" onClick="logVariable('assignees_logins')" href="../../../_variables/assignees_logins.html">$assignees_logins</a> = '' )
<a name="l451"><span class="linenum"> 451</span></a>      {
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a> = <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('assignees')" href="../../../_variables/assignees.html">$assignees</a>;
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a> ) )
<a name="l455"><span class="linenum"> 455</span></a>          {
<a name="l456"><span class="linenum"> 456</span></a>              return;
<a name="l457"><span class="linenum"> 457</span></a>          }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a> == '-' )
<a name="l460"><span class="linenum"> 460</span></a>          {    // List is ONLY a MINUS sign (we want only those not assigned)
<a name="l461"><span class="linenum"> 461</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IS NULL' );
<a name="l462"><span class="linenum"> 462</span></a>          }
<a name="l463"><span class="linenum"> 463</span></a>          elseif( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a>, 0, 1 ) == '-' )
<a name="l464"><span class="linenum"> 464</span></a>          {    // List starts with MINUS sign:
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IS NULL
<a name="l466"><span class="linenum"> 466</span></a>                                OR '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID NOT IN ('.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a>, 1 ).') )' );
<a name="l467"><span class="linenum"> 467</span></a>          }
<a name="l468"><span class="linenum"> 468</span></a>          else
<a name="l469"><span class="linenum"> 469</span></a>          {
<a name="l470"><span class="linenum"> 470</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IN ('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees.html">assignees</a>.')' );
<a name="l471"><span class="linenum"> 471</span></a>          }
<a name="l472"><span class="linenum"> 472</span></a>      }
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>      <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * Restrict to specific assignees by users logins</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     *</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @param string List of assignees logins to restrict to (must have been previously validated)</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     */</span>
<a name="l480"><span class="linenum"> 480</span></a>  	function <a class="function" onClick="logFunction('where_assignees_logins')" href="../../../_functions/where_assignees_logins.html" onMouseOver="funcPopup(event,'where_assignees_logins')">where_assignees_logins</a>( <a class="var it6321" onMouseOver="hilite(6321)" onMouseOut="lolite()" onClick="logVariable('assignees_logins')" href="../../../_variables/assignees_logins.html">$assignees_logins</a> )
<a name="l481"><span class="linenum"> 481</span></a>      {
<a name="l482"><span class="linenum"> 482</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a> = <a class="var it6321" onMouseOver="hilite(6321)" onMouseOut="lolite()" onClick="logVariable('assignees_logins')" href="../../../_variables/assignees_logins.html">$assignees_logins</a>;
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a> ) )
<a name="l485"><span class="linenum"> 485</span></a>          {
<a name="l486"><span class="linenum"> 486</span></a>              return;
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a> == '-' )
<a name="l490"><span class="linenum"> 490</span></a>          {    // List is ONLY a MINUS sign (we want only those not assigned)
<a name="l491"><span class="linenum"> 491</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IS NULL' );
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>          elseif( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a>, 0, 1 ) == '-' )
<a name="l494"><span class="linenum"> 494</span></a>          {    // List starts with MINUS sign:
<a name="l495"><span class="linenum"> 495</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IS NULL
<a name="l496"><span class="linenum"> 496</span></a>                                OR '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID NOT IN ('.<a class="function" onClick="logFunction('get_users_IDs_by_logins')" href="../../../_functions/get_users_ids_by_logins.html" onMouseOver="funcPopup(event,'get_users_ids_by_logins')">get_users_IDs_by_logins</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a>, 1 ) ).') )' );
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>          else
<a name="l499"><span class="linenum"> 499</span></a>          {
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID IN ('.<a class="function" onClick="logFunction('get_users_IDs_by_logins')" href="../../../_functions/get_users_ids_by_logins.html" onMouseOver="funcPopup(event,'get_users_ids_by_logins')">get_users_IDs_by_logins</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignees_logins')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/assignees_logins.html">assignees_logins</a> ).')' );
<a name="l501"><span class="linenum"> 501</span></a>          }
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>      <span class="comment">/**</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     * Restrict to specific assignee or author</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     *</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     * @param integer assignee or author to restrict to (must have been previously validated)</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     */</span>
<a name="l510"><span class="linenum"> 510</span></a>  	function <a class="function" onClick="logFunction('where_author_assignee')" href="../../../_functions/where_author_assignee.html" onMouseOver="funcPopup(event,'where_author_assignee')">where_author_assignee</a>( <a class="var it6322" onMouseOver="hilite(6322)" onMouseOut="lolite()" onClick="logVariable('author_assignee')" href="../../../_variables/author_assignee.html">$author_assignee</a> )
<a name="l511"><span class="linenum"> 511</span></a>      {
<a name="l512"><span class="linenum"> 512</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_assignee')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_assignee.html">author_assignee</a> = <a class="var it6322" onMouseOver="hilite(6322)" onMouseOut="lolite()" onClick="logVariable('author_assignee')" href="../../../_variables/author_assignee.html">$author_assignee</a>;
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>          if( empty( <a class="var it6322" onMouseOver="hilite(6322)" onMouseOut="lolite()" onClick="logVariable('author_assignee')" href="../../../_variables/author_assignee.html">$author_assignee</a> ) )
<a name="l515"><span class="linenum"> 515</span></a>          {
<a name="l516"><span class="linenum"> 516</span></a>              return;
<a name="l517"><span class="linenum"> 517</span></a>          }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'creator_user_ID = '. <a class="var it6322" onMouseOver="hilite(6322)" onMouseOut="lolite()" onClick="logVariable('author_assignee')" href="../../../_variables/author_assignee.html">$author_assignee</a>.' OR '.
<a name="l520"><span class="linenum"> 520</span></a>                                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'assigned_user_ID = '.<a class="var it6322" onMouseOver="hilite(6322)" onMouseOut="lolite()" onClick="logVariable('author_assignee')" href="../../../_variables/author_assignee.html">$author_assignee</a>.' )' );
<a name="l521"><span class="linenum"> 521</span></a>      }
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>      <span class="comment">/**</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     * Restrict to specific locale</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     *</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * @param string locale to restrict to ('all' if you don't want to restrict)</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     */</span>
<a name="l529"><span class="linenum"> 529</span></a>  	function <a class="function" onClick="logFunction('where_locale')" href="../../../_functions/where_locale.html" onMouseOver="funcPopup(event,'where_locale')">where_locale</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a> )
<a name="l530"><span class="linenum"> 530</span></a>      {
<a name="l531"><span class="linenum"> 531</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>          if( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a> == 'all' )
<a name="l534"><span class="linenum"> 534</span></a>          {
<a name="l535"><span class="linenum"> 535</span></a>              return;
<a name="l536"><span class="linenum"> 536</span></a>          }
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'locale LIKE '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a>.'%') );
<a name="l539"><span class="linenum"> 539</span></a>      }
<a name="l540"><span class="linenum"> 540</span></a>  
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>      <span class="comment">/**</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     * Restrict to specific (exetnded) statuses</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     *</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     * @param string List of assignees to restrict to (must have been previously validated)</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     */</span>
<a name="l547"><span class="linenum"> 547</span></a>  	function <a class="function" onClick="logFunction('where_statuses')" href="../../../_functions/where_statuses.html" onMouseOver="funcPopup(event,'where_statuses')">where_statuses</a>( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> )
<a name="l548"><span class="linenum"> 548</span></a>      {
<a name="l549"><span class="linenum"> 549</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('statuses')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/statuses.html">statuses</a> = <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a>;
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>          if( empty( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> ) )
<a name="l552"><span class="linenum"> 552</span></a>          {
<a name="l553"><span class="linenum"> 553</span></a>              return;
<a name="l554"><span class="linenum"> 554</span></a>          }
<a name="l555"><span class="linenum"> 555</span></a>  
<a name="l556"><span class="linenum"> 556</span></a>          if( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> == '-' )
<a name="l557"><span class="linenum"> 557</span></a>          {    // List is ONLY a MINUS sign (we want only those not assigned)
<a name="l558"><span class="linenum"> 558</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'pst_ID IS NULL' );
<a name="l559"><span class="linenum"> 559</span></a>          }
<a name="l560"><span class="linenum"> 560</span></a>          elseif( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a>, 0, 1 ) == '-' )
<a name="l561"><span class="linenum"> 561</span></a>          {    // List starts with MINUS sign:
<a name="l562"><span class="linenum"> 562</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'pst_ID IS NULL
<a name="l563"><span class="linenum"> 563</span></a>                                OR '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'pst_ID NOT IN ('.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a>, 1 ).') )' );
<a name="l564"><span class="linenum"> 564</span></a>          }
<a name="l565"><span class="linenum"> 565</span></a>          else
<a name="l566"><span class="linenum"> 566</span></a>          {
<a name="l567"><span class="linenum"> 567</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'pst_ID IN ('.<a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a>.')' );
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>      }
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * Restrict to specific post types</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     *</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * @param string List of types to restrict to (must have been previously validated)</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     */</span>
<a name="l577"><span class="linenum"> 577</span></a>  	function <a class="function" onClick="logFunction('where_types')" href="../../../_functions/where_types.html" onMouseOver="funcPopup(event,'where_types')">where_types</a>( <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a> )
<a name="l578"><span class="linenum"> 578</span></a>      {
<a name="l579"><span class="linenum"> 579</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/types.html">types</a> = <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a>;
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>          if( empty( <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a> ) )
<a name="l582"><span class="linenum"> 582</span></a>          {
<a name="l583"><span class="linenum"> 583</span></a>              return;
<a name="l584"><span class="linenum"> 584</span></a>          }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>          if( <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a> == '-' )
<a name="l587"><span class="linenum"> 587</span></a>          {    // List is ONLY a MINUS sign (we want only those not assigned)
<a name="l588"><span class="linenum"> 588</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'ityp_ID IS NULL' );
<a name="l589"><span class="linenum"> 589</span></a>          }
<a name="l590"><span class="linenum"> 590</span></a>          elseif( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a>, 0, 1 ) == '-' )
<a name="l591"><span class="linenum"> 591</span></a>          {    // List starts with MINUS sign:
<a name="l592"><span class="linenum"> 592</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'ityp_ID IS NULL
<a name="l593"><span class="linenum"> 593</span></a>                                OR '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'ityp_ID NOT IN ('.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a>, 1 ).') )' );
<a name="l594"><span class="linenum"> 594</span></a>          }
<a name="l595"><span class="linenum"> 595</span></a>          else
<a name="l596"><span class="linenum"> 596</span></a>          {
<a name="l597"><span class="linenum"> 597</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'ityp_ID IN ('.<a class="var it380" onMouseOver="hilite(380)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a>.')' );
<a name="l598"><span class="linenum"> 598</span></a>          }
<a name="l599"><span class="linenum"> 599</span></a>      }
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>      <span class="comment">/**</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * Restricts the datestart param to a specific date range.</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     *</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">     * Start date gets restricted to minutes only (to make the query more</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     * cachable).</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">     *</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">     * Priorities:</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     *  -dstart and/or dstop</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     *  -week + m</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     *  -m</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * @todo  -dstart + x days</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * @see ItemList2::get_advertised_start_date()</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     *</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @param string YYYYMMDDHHMMSS (everything after YYYY is optional) or ''</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     * @param integer week number or ''</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     * @param string YYYYMMDDHHMMSS to start at, '' for first available</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">     * @param string YYYYMMDDHHMMSS to stop at</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">     * @param mixed Do not show posts before this timestamp, can be 'now'</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">     * @param mixed Do not show posts after this timestamp, can be 'now'</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     */</span>
<a name="l622"><span class="linenum"> 622</span></a>  	function <a class="function" onClick="logFunction('where_datestart')" href="../../../_functions/where_datestart.html" onMouseOver="funcPopup(event,'where_datestart')">where_datestart</a>( <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a> = '', <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../_variables/w.html">$w</a> = '', <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('dstart')" href="../../../_variables/dstart.html">$dstart</a> = '', <a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a> = '', <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a> = '', <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a> = 'now' )
<a name="l623"><span class="linenum"> 623</span></a>      {
<a name="l624"><span class="linenum"> 624</span></a>          global <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('m')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/m.html">m</a> = <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>;
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('w')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/w.html">w</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../_variables/w.html">$w</a>;
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dstart')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dstart.html">dstart</a> = <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('dstart')" href="../../../_variables/dstart.html">$dstart</a>;
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dstop')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dstop.html">dstop</a> = <a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>;
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timestamp_min')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/timestamp_min.html">timestamp_min</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a>;
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timestamp_max')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/timestamp_max.html">timestamp_max</a> = <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a>;
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it6323" onMouseOver="hilite(6323)" onMouseOut="lolite()" onClick="logVariable('start_is_set')" href="../../../_variables/start_is_set.html">$start_is_set</a> = false;
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it6324" onMouseOver="hilite(6324)" onMouseOut="lolite()" onClick="logVariable('stop_is_set')" href="../../../_variables/stop_is_set.html">$stop_is_set</a> = false;
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">        // if a start date is specified in the querystring, crop anything before</span>
<a name="l639"><span class="linenum"> 639</span></a>          if( !empty(<a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('dstart')" href="../../../_variables/dstart.html">$dstart</a>) )
<a name="l640"><span class="linenum"> 640</span></a>          {
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">            // Add trailing 0s: YYYYMMDDHHMMSS</span>
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a> = <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('dstart')" href="../../../_variables/dstart.html">$dstart</a>.'00000000000000';  <span class="comment">// TODO: this is NOT correct, should be 0101 for month</span>
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">            // Start date in MySQL format: seconds get omitted (rounded to lower to minute for caching purposes)</span>
<a name="l645"><span class="linenum"> 645</span></a>              <a class="var it1382" onMouseOver="hilite(1382)" onMouseOut="lolite()" onClick="logVariable('dstart_mysql')" href="../../../_variables/dstart_mysql.html">$dstart_mysql</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a>,0,4).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a>,4,2).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a>,6,2).' '
<a name="l646"><span class="linenum"> 646</span></a>                                              .<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a>,8,2).':'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1381" onMouseOver="hilite(1381)" onMouseOut="lolite()" onClick="logVariable('dstart0')" href="../../../_variables/dstart0.html">$dstart0</a>,10,2);
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart &gt;= '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1382" onMouseOver="hilite(1382)" onMouseOut="lolite()" onClick="logVariable('dstart_mysql')" href="../../../_variables/dstart_mysql.html">$dstart_mysql</a> ).'
<a name="l649"><span class="linenum"> 649</span></a>                                                      OR ( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datedeadline IS NULL AND '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart &gt;= '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1382" onMouseOver="hilite(1382)" onMouseOut="lolite()" onClick="logVariable('dstart_mysql')" href="../../../_variables/dstart_mysql.html">$dstart_mysql</a> ).' )' );
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it6323" onMouseOver="hilite(6323)" onMouseOut="lolite()" onClick="logVariable('start_is_set')" href="../../../_variables/start_is_set.html">$start_is_set</a> = true;
<a name="l652"><span class="linenum"> 652</span></a>          }
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">        // if a stop date is specified in the querystring, crop anything before</span>
<a name="l656"><span class="linenum"> 656</span></a>          if( !empty(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>) )
<a name="l657"><span class="linenum"> 657</span></a>          {
<a name="l658"><span class="linenum"> 658</span></a>              switch( strlen( <a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a> ) )
<a name="l659"><span class="linenum"> 659</span></a>              {
<a name="l660"><span class="linenum"> 660</span></a>                  case '4':
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">                    // We have only year, add one to year</span>
<a name="l662"><span class="linenum"> 662</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = (<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>+1).'-01-01 00:00:00';
<a name="l663"><span class="linenum"> 663</span></a>                      break;
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>                  case '6':
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">                    // We have year month, add one to month</span>
<a name="l667"><span class="linenum"> 667</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>(&quot;Y-m-d H:i:s &quot;, <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>(0, 0, 0, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,4,2)+1, 01, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,0,4)));
<a name="l668"><span class="linenum"> 668</span></a>                      break;
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>                  case '8':
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">                    // We have year mounth day, add one to day</span>
<a name="l672"><span class="linenum"> 672</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>(&quot;Y-m-d H:i:s &quot;, <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>(0, 0, 0, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,4,2), (<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,6,2) + 1 ), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,0,4)));
<a name="l673"><span class="linenum"> 673</span></a>                      break;
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>                  case '10':
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">                    // We have year mounth day hour, add one to hour</span>
<a name="l677"><span class="linenum"> 677</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>(&quot;Y-m-d H:i:s &quot;, <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( ( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,8,2) + 1 ), 0, 0, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,4,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,6,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,0,4)));
<a name="l678"><span class="linenum"> 678</span></a>                      break;
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>                  case '12':
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">                    // We have year mounth day hour minute, add one to minute</span>
<a name="l682"><span class="linenum"> 682</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>(&quot;Y-m-d H:i:s &quot;, <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,8,2), ( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,8,2) + 1 ), 0, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,4,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,6,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,0,4)));
<a name="l683"><span class="linenum"> 683</span></a>                      break;
<a name="l684"><span class="linenum"> 684</span></a>  
<a name="l685"><span class="linenum"> 685</span></a>                  default:
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment">                    // add one to second</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">                    // Stop date in MySQL format: seconds get omitted (rounded to lower to minute for caching purposes)</span>
<a name="l688"><span class="linenum"> 688</span></a>                      <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,0,4).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,4,2).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,6,2).' '
<a name="l689"><span class="linenum"> 689</span></a>                                              .<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,8,2).':'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6306" onMouseOver="hilite(6306)" onMouseOut="lolite()" onClick="logVariable('dstop')" href="../../../_variables/dstop.html">$dstop</a>,10,2);
<a name="l690"><span class="linenum"> 690</span></a>              }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart &lt; '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6325" onMouseOver="hilite(6325)" onMouseOut="lolite()" onClick="logVariable('dstop_mysql')" href="../../../_variables/dstop_mysql.html">$dstop_mysql</a> ) ); <span class="comment">// NOT &lt;= comparator because we compare to the superior stop date</span>
<a name="l693"><span class="linenum"> 693</span></a>  
<a name="l694"><span class="linenum"> 694</span></a>              <a class="var it6324" onMouseOver="hilite(6324)" onMouseOut="lolite()" onClick="logVariable('stop_is_set')" href="../../../_variables/stop_is_set.html">$stop_is_set</a> = true;
<a name="l695"><span class="linenum"> 695</span></a>          }
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>          if( !<a class="var it6323" onMouseOver="hilite(6323)" onMouseOut="lolite()" onClick="logVariable('start_is_set')" href="../../../_variables/start_is_set.html">$start_is_set</a> || !<a class="var it6324" onMouseOver="hilite(6324)" onMouseOut="lolite()" onClick="logVariable('stop_is_set')" href="../../../_variables/stop_is_set.html">$stop_is_set</a> )
<a name="l699"><span class="linenum"> 699</span></a>          {
<a name="l700"><span class="linenum"> 700</span></a>  
<a name="l701"><span class="linenum"> 701</span></a>              if( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../_variables/w.html">$w</a>)  // Note: week # can be 0
<a name="l702"><span class="linenum"> 702</span></a>                      &amp;&amp; strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) == 4 )
<a name="l703"><span class="linenum"> 703</span></a>              { // If a week number is specified (with a year)
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">                // Note: we use PHP to calculate week boundaries in order to handle weeks</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">                // that overlap 2 years properly, even when start on week is monday (which MYSQL won't handle properly)</span>
<a name="l707"><span class="linenum"> 707</span></a>                  <a class="var it6326" onMouseOver="hilite(6326)" onMouseOut="lolite()" onClick="logVariable('start_date_for_week')" href="../../../_variables/start_date_for_week.html">$start_date_for_week</a> = <a class="function" onClick="logFunction('get_start_date_for_week')" href="../../../_functions/get_start_date_for_week.html" onMouseOver="funcPopup(event,'get_start_date_for_week')">get_start_date_for_week</a>( <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../_variables/w.html">$w</a>, <a class="function" onClick="logFunction('locale_startofweek')" href="../../../_functions/locale_startofweek.html" onMouseOver="funcPopup(event,'locale_startofweek')">locale_startofweek</a>() );
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.&quot;datestart &gt;= '&quot;.<a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d',<a class="var it6326" onMouseOver="hilite(6326)" onMouseOut="lolite()" onClick="logVariable('start_date_for_week')" href="../../../_variables/start_date_for_week.html">$start_date_for_week</a>).&quot;'&quot; );
<a name="l710"><span class="linenum"> 710</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.&quot;datestart &lt; '&quot;.<a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d',<a class="var it6326" onMouseOver="hilite(6326)" onMouseOut="lolite()" onClick="logVariable('start_date_for_week')" href="../../../_variables/start_date_for_week.html">$start_date_for_week</a>+604800 ).&quot;'&quot; ); <span class="comment">// + 7 days</span>
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>                  <a class="var it6323" onMouseOver="hilite(6323)" onMouseOut="lolite()" onClick="logVariable('start_is_set')" href="../../../_variables/start_is_set.html">$start_is_set</a> = true;
<a name="l713"><span class="linenum"> 713</span></a>                  <a class="var it6324" onMouseOver="hilite(6324)" onMouseOut="lolite()" onClick="logVariable('stop_is_set')" href="../../../_variables/stop_is_set.html">$stop_is_set</a> = true;
<a name="l714"><span class="linenum"> 714</span></a>              }
<a name="l715"><span class="linenum"> 715</span></a>              elseif( !empty(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) )
<a name="l716"><span class="linenum"> 716</span></a>              {    // We want to restrict on an interval:
<a name="l717"><span class="linenum"> 717</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(YEAR FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,0,4)) );
<a name="l718"><span class="linenum"> 718</span></a>                  if( strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) &gt; 5 )
<a name="l719"><span class="linenum"> 719</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(MONTH FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,4,2)) );
<a name="l720"><span class="linenum"> 720</span></a>                  if( strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) &gt; 7 )
<a name="l721"><span class="linenum"> 721</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(DAY FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,6,2)) );
<a name="l722"><span class="linenum"> 722</span></a>                  if( strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) &gt; 9 )
<a name="l723"><span class="linenum"> 723</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(HOUR FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,8,2)) );
<a name="l724"><span class="linenum"> 724</span></a>                  if( strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) &gt; 11 )
<a name="l725"><span class="linenum"> 725</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(MINUTE FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,10,2)) );
<a name="l726"><span class="linenum"> 726</span></a>                  if( strlen(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) &gt; 13 )
<a name="l727"><span class="linenum"> 727</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '<a class="phpfunction" onClick="logFunction('EXTRACT')" href="../../../_functions/extract.html" onMouseOver="phpfuncPopup(event,'extract')">EXTRACT</a>(SECOND FROM '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart)='.<a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,12,2)) );
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>                  <a class="var it6323" onMouseOver="hilite(6323)" onMouseOut="lolite()" onClick="logVariable('start_is_set')" href="../../../_variables/start_is_set.html">$start_is_set</a> = true;
<a name="l730"><span class="linenum"> 730</span></a>                  <a class="var it6324" onMouseOver="hilite(6324)" onMouseOut="lolite()" onClick="logVariable('stop_is_set')" href="../../../_variables/stop_is_set.html">$stop_is_set</a> = true;
<a name="l731"><span class="linenum"> 731</span></a>              }
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>          }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">        // TODO: start + x days</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // TODO: stop - x days</span>
<a name="l738"><span class="linenum"> 738</span></a>  
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">        // SILENT limits!</span>
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">        // Timestamp limits:</span>
<a name="l743"><span class="linenum"> 743</span></a>          if( <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a> == 'now' )
<a name="l744"><span class="linenum"> 744</span></a>          {
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">            // echo 'hide past';</span>
<a name="l746"><span class="linenum"> 746</span></a>              <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l747"><span class="linenum"> 747</span></a>          }
<a name="l748"><span class="linenum"> 748</span></a>          if( !empty(<a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a>) )
<a name="l749"><span class="linenum"> 749</span></a>          { // Hide posts before
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">            // echo 'hide before '.$timestamp_min;</span>
<a name="l751"><span class="linenum"> 751</span></a>              <a class="var it6327" onMouseOver="hilite(6327)" onMouseOut="lolite()" onClick="logVariable('date_min')" href="../../../_variables/date_min.html">$date_min</a> = <a class="function" onClick="logFunction('remove_seconds')" href="../../../_functions/remove_seconds.html" onMouseOver="funcPopup(event,'remove_seconds')">remove_seconds</a>( <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('timestamp_min')" href="../../../_variables/timestamp_min.html">$timestamp_min</a> + <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a> );
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart &gt;= '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6327" onMouseOver="hilite(6327)" onMouseOut="lolite()" onClick="logVariable('date_min')" href="../../../_variables/date_min.html">$date_min</a> ) );
<a name="l753"><span class="linenum"> 753</span></a>          }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>          if( <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a> == 'now' )
<a name="l756"><span class="linenum"> 756</span></a>          {
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">            // echo 'hide future';</span>
<a name="l758"><span class="linenum"> 758</span></a>              <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l759"><span class="linenum"> 759</span></a>          }
<a name="l760"><span class="linenum"> 760</span></a>          if( !empty(<a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a>) )
<a name="l761"><span class="linenum"> 761</span></a>          { // Hide posts after
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">            // echo 'after';</span>
<a name="l763"><span class="linenum"> 763</span></a>              <a class="var it6328" onMouseOver="hilite(6328)" onMouseOut="lolite()" onClick="logVariable('date_max')" href="../../../_variables/date_max.html">$date_max</a> = <a class="function" onClick="logFunction('remove_seconds')" href="../../../_functions/remove_seconds.html" onMouseOver="funcPopup(event,'remove_seconds')">remove_seconds</a>( <a class="var it312" onMouseOver="hilite(312)" onMouseOut="lolite()" onClick="logVariable('timestamp_max')" href="../../../_variables/timestamp_max.html">$timestamp_max</a> + <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a> );
<a name="l764"><span class="linenum"> 764</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datestart &lt;= '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6328" onMouseOver="hilite(6328)" onMouseOut="lolite()" onClick="logVariable('date_max')" href="../../../_variables/date_max.html">$date_max</a> ) );
<a name="l765"><span class="linenum"> 765</span></a>          }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>      }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>  
<a name="l770"><span class="linenum"> 770</span></a>      <span class="comment">/**</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">     * Restricts creation date to a specific date range.</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">     *</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">      * @param mixed Do not show posts CREATED after this timestamp</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">     */</span>
<a name="l775"><span class="linenum"> 775</span></a>  	function <a class="function" onClick="logFunction('where_datecreated')" href="../../../_functions/where_datecreated.html" onMouseOver="funcPopup(event,'where_datecreated')">where_datecreated</a>( <a class="var it6329" onMouseOver="hilite(6329)" onMouseOut="lolite()" onClick="logVariable('timestamp_created_max')" href="../../../_variables/timestamp_created_max.html">$timestamp_created_max</a> = 'now' )
<a name="l776"><span class="linenum"> 776</span></a>      {
<a name="l777"><span class="linenum"> 777</span></a>          global <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>          if( !empty(<a class="var it6329" onMouseOver="hilite(6329)" onMouseOut="lolite()" onClick="logVariable('timestamp_created_max')" href="../../../_variables/timestamp_created_max.html">$timestamp_created_max</a>) )
<a name="l780"><span class="linenum"> 780</span></a>          { // Hide posts after
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">            // echo 'after';</span>
<a name="l782"><span class="linenum"> 782</span></a>              <a class="var it6328" onMouseOver="hilite(6328)" onMouseOut="lolite()" onClick="logVariable('date_max')" href="../../../_variables/date_max.html">$date_max</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s', <a class="var it6329" onMouseOver="hilite(6329)" onMouseOut="lolite()" onClick="logVariable('timestamp_created_max')" href="../../../_variables/timestamp_created_max.html">$timestamp_created_max</a> + <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a> );
<a name="l783"><span class="linenum"> 783</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'datecreated &lt;= '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6328" onMouseOver="hilite(6328)" onMouseOut="lolite()" onClick="logVariable('date_max')" href="../../../_variables/date_max.html">$date_max</a> ) );
<a name="l784"><span class="linenum"> 784</span></a>          }
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>      }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>      <span class="comment">/**</span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">     * Restrict with keywords</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment">     *</span>
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">     * @param string Keyword search string</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">     * @param string Search for entire phrase or for individual words: 'OR', 'AND', 'sentence'(or '1')</span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">     * @param string Require exact match of title or contents  does NOT apply to tags which are always an EXACT match</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">     * @param string Scope of keyword search string: 'title', 'content'</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">     */</span>
<a name="l797"><span class="linenum"> 797</span></a>  	function <a class="function" onClick="logFunction('where_keywords')" href="../../../_functions/where_keywords.html" onMouseOver="funcPopup(event,'where_keywords')">where_keywords</a>( <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a>, <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a>, <a class="var it2046" onMouseOver="hilite(2046)" onMouseOut="lolite()" onClick="logVariable('exact')" href="../../../_variables/exact.html">$exact</a>, <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a> = 'title,content' )
<a name="l798"><span class="linenum"> 798</span></a>      {
<a name="l799"><span class="linenum"> 799</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l800"><span class="linenum"> 800</span></a>  
<a name="l801"><span class="linenum"> 801</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('keywords')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/keywords.html">keywords</a> = <a class="function" onClick="logFunction('utf8_trim')" href="../../../_functions/utf8_trim.html" onMouseOver="funcPopup(event,'utf8_trim')">utf8_trim</a>( <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> );
<a name="l802"><span class="linenum"> 802</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('keyword_scope')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/keyword_scope.html">keyword_scope</a> = <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a>;
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('phrase')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/phrase.html">phrase</a> = <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a>;
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exact')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/exact.html">exact</a> = <a class="var it2046" onMouseOver="hilite(2046)" onMouseOut="lolite()" onClick="logVariable('exact')" href="../../../_variables/exact.html">$exact</a>;
<a name="l805"><span class="linenum"> 805</span></a>  
<a name="l806"><span class="linenum"> 806</span></a>          if( empty( <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> ) )
<a name="l807"><span class="linenum"> 807</span></a>          { // Nothing to search, Exit here:
<a name="l808"><span class="linenum"> 808</span></a>              return;
<a name="l809"><span class="linenum"> 809</span></a>          }
<a name="l810"><span class="linenum"> 810</span></a>  
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a> = array();
<a name="l812"><span class="linenum"> 812</span></a>  
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment">        // Determine what fields should be used in search:</span>
<a name="l814"><span class="linenum"> 814</span></a>          <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a> = array();
<a name="l815"><span class="linenum"> 815</span></a>          <a class="var it6332" onMouseOver="hilite(6332)" onMouseOut="lolite()" onClick="logVariable('keyword_scopes')" href="../../../_variables/keyword_scopes.html">$keyword_scopes</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a> );
<a name="l816"><span class="linenum"> 816</span></a>          foreach( <a class="var it6332" onMouseOver="hilite(6332)" onMouseOut="lolite()" onClick="logVariable('keyword_scopes')" href="../../../_variables/keyword_scopes.html">$keyword_scopes</a> as <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a> )
<a name="l817"><span class="linenum"> 817</span></a>          {
<a name="l818"><span class="linenum"> 818</span></a>              switch( <a class="var it6307" onMouseOver="hilite(6307)" onMouseOut="lolite()" onClick="logVariable('keyword_scope')" href="../../../_variables/keyword_scope.html">$keyword_scope</a> )
<a name="l819"><span class="linenum"> 819</span></a>              {
<a name="l820"><span class="linenum"> 820</span></a>                  case 'title':
<a name="l821"><span class="linenum"> 821</span></a>                      <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'title';
<a name="l822"><span class="linenum"> 822</span></a>                      break;
<a name="l823"><span class="linenum"> 823</span></a>  
<a name="l824"><span class="linenum"> 824</span></a>                  case 'content':
<a name="l825"><span class="linenum"> 825</span></a>                      <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbprefix.html">dbprefix</a>.'content';
<a name="l826"><span class="linenum"> 826</span></a>                      break;
<a name="l827"><span class="linenum"> 827</span></a>  
<a name="l828"><span class="linenum"> 828</span></a>                  case 'tags':
<a name="l829"><span class="linenum"> 829</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_items__itemtag ON post_ID = itag_itm_ID' );
<a name="l830"><span class="linenum"> 830</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_items__tag ON itag_tag_ID = tag_ID' );
<a name="l831"><span class="linenum"> 831</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('GROUP_BY')" href="../../../_functions/group_by.html" onMouseOver="funcPopup(event,'group_by')">GROUP_BY</a>( 'post_ID' );
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">                    // Tags are always an EXACT match:</span>
<a name="l833"><span class="linenum"> 833</span></a>                      <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a>[] = 'tag_name = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> );
<a name="l834"><span class="linenum"> 834</span></a>                      break;
<a name="l835"><span class="linenum"> 835</span></a>  
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">                // TODO: add more.</span>
<a name="l837"><span class="linenum"> 837</span></a>              }
<a name="l838"><span class="linenum"> 838</span></a>          }
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>          if( empty( <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a> ) &amp;&amp; empty( <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a> ) )
<a name="l841"><span class="linenum"> 841</span></a>          {    // No correct fields to search, Exit here:
<a name="l842"><span class="linenum"> 842</span></a>              return;
<a name="l843"><span class="linenum"> 843</span></a>          }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">        // Set sql operator depending on parameter:</span>
<a name="l846"><span class="linenum"> 846</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a> ), array( 'or', '1', 'sentence' ) ) )
<a name="l847"><span class="linenum"> 847</span></a>          {
<a name="l848"><span class="linenum"> 848</span></a>              <a class="var it6333" onMouseOver="hilite(6333)" onMouseOut="lolite()" onClick="logVariable('operator_sql')" href="../../../_variables/operator_sql.html">$operator_sql</a> = 'OR';
<a name="l849"><span class="linenum"> 849</span></a>          }
<a name="l850"><span class="linenum"> 850</span></a>          else
<a name="l851"><span class="linenum"> 851</span></a>          {
<a name="l852"><span class="linenum"> 852</span></a>              <a class="var it6333" onMouseOver="hilite(6333)" onMouseOut="lolite()" onClick="logVariable('operator_sql')" href="../../../_variables/operator_sql.html">$operator_sql</a> =  'AND';
<a name="l853"><span class="linenum"> 853</span></a>          }
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>          if( ! empty( <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a> ) )
<a name="l856"><span class="linenum"> 856</span></a>          {    // Do search if at least one field is requested:
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>              if( <a class="var it2046" onMouseOver="hilite(2046)" onMouseOut="lolite()" onClick="logVariable('exact')" href="../../../_variables/exact.html">$exact</a> )
<a name="l859"><span class="linenum"> 859</span></a>              {    // We want exact match of each search field:
<a name="l860"><span class="linenum"> 860</span></a>                  <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a> = '';
<a name="l861"><span class="linenum"> 861</span></a>              }
<a name="l862"><span class="linenum"> 862</span></a>              else
<a name="l863"><span class="linenum"> 863</span></a>              {    // The words/sentence are/is to be included in the each search field:
<a name="l864"><span class="linenum"> 864</span></a>                  <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a> = '%';
<a name="l865"><span class="linenum"> 865</span></a>              }
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>              if( <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a> == '1' || <a class="var it2045" onMouseOver="hilite(2045)" onMouseOut="lolite()" onClick="logVariable('phrase')" href="../../../_variables/phrase.html">$phrase</a> == 'sentence' )
<a name="l868"><span class="linenum"> 868</span></a>              {    // Sentence search:
<a name="l869"><span class="linenum"> 869</span></a>                  foreach( <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a> as <a class="var it2194" onMouseOver="hilite(2194)" onMouseOut="lolite()" onClick="logVariable('search_field')" href="../../../_variables/search_field.html">$search_field</a> )
<a name="l870"><span class="linenum"> 870</span></a>                  {
<a name="l871"><span class="linenum"> 871</span></a>                      <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a>[] = <a class="var it2194" onMouseOver="hilite(2194)" onMouseOut="lolite()" onClick="logVariable('search_field')" href="../../../_variables/search_field.html">$search_field</a>.' LIKE '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a>.<a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a>.<a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a> );
<a name="l872"><span class="linenum"> 872</span></a>                  }
<a name="l873"><span class="linenum"> 873</span></a>              }
<a name="l874"><span class="linenum"> 874</span></a>              else
<a name="l875"><span class="linenum"> 875</span></a>              {    // Word search:
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">                // Put spaces instead of commas:</span>
<a name="l878"><span class="linenum"> 878</span></a>                  <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/, +/', ',', <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> );
<a name="l879"><span class="linenum"> 879</span></a>                  <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> = <a class="function" onClick="logFunction('utf8_trim')" href="../../../_functions/utf8_trim.html" onMouseOver="funcPopup(event,'utf8_trim')">utf8_trim</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( ',', '&quot;' ), ' ', <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> ) );
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">                // Split by each word:</span>
<a name="l882"><span class="linenum"> 882</span></a>                  <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( '/\s+/', <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> );
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>                  foreach( <a class="var it1407" onMouseOver="hilite(1407)" onMouseOut="lolite()" onClick="logVariable('keywords')" href="../../../_variables/keywords.html">$keywords</a> as <a class="var it1409" onMouseOver="hilite(1409)" onMouseOut="lolite()" onClick="logVariable('keyword')" href="../../../_variables/keyword.html">$keyword</a> )
<a name="l885"><span class="linenum"> 885</span></a>                  {
<a name="l886"><span class="linenum"> 886</span></a>                      <a class="var it6334" onMouseOver="hilite(6334)" onMouseOut="lolite()" onClick="logVariable('search_field_sql')" href="../../../_variables/search_field_sql.html">$search_field_sql</a> = array();
<a name="l887"><span class="linenum"> 887</span></a>                      foreach( <a class="var it6331" onMouseOver="hilite(6331)" onMouseOut="lolite()" onClick="logVariable('search_fields')" href="../../../_variables/search_fields.html">$search_fields</a> as <a class="var it2194" onMouseOver="hilite(2194)" onMouseOut="lolite()" onClick="logVariable('search_field')" href="../../../_variables/search_field.html">$search_field</a> )
<a name="l888"><span class="linenum"> 888</span></a>                      {
<a name="l889"><span class="linenum"> 889</span></a>                          <a class="var it6334" onMouseOver="hilite(6334)" onMouseOut="lolite()" onClick="logVariable('search_field_sql')" href="../../../_variables/search_field_sql.html">$search_field_sql</a>[] = <a class="var it2194" onMouseOver="hilite(2194)" onMouseOut="lolite()" onClick="logVariable('search_field')" href="../../../_variables/search_field.html">$search_field</a>.' LIKE '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a>.<a class="var it1409" onMouseOver="hilite(1409)" onMouseOut="lolite()" onClick="logVariable('keyword')" href="../../../_variables/keyword.html">$keyword</a>.<a class="var it1561" onMouseOver="hilite(1561)" onMouseOut="lolite()" onClick="logVariable('mask')" href="../../../_variables/mask.html">$mask</a> );
<a name="l890"><span class="linenum"> 890</span></a>                      }
<a name="l891"><span class="linenum"> 891</span></a>                      <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a>[] = '( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' OR ', <a class="var it6334" onMouseOver="hilite(6334)" onMouseOut="lolite()" onClick="logVariable('search_field_sql')" href="../../../_variables/search_field_sql.html">$search_field_sql</a> ).' )';
<a name="l892"><span class="linenum"> 892</span></a>                  }
<a name="l893"><span class="linenum"> 893</span></a>              }
<a name="l894"><span class="linenum"> 894</span></a>          }
<a name="l895"><span class="linenum"> 895</span></a>  
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">        // Concat the searches:</span>
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a> = '( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' '.<a class="var it6333" onMouseOver="hilite(6333)" onMouseOut="lolite()" onClick="logVariable('operator_sql')" href="../../../_variables/operator_sql.html">$operator_sql</a>.' ', <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a> ).' )';
<a name="l898"><span class="linenum"> 898</span></a>  
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it6330" onMouseOver="hilite(6330)" onMouseOut="lolite()" onClick="logVariable('search_sql')" href="../../../_variables/search_sql.html">$search_sql</a> );
<a name="l900"><span class="linenum"> 900</span></a>      }
<a name="l901"><span class="linenum"> 901</span></a>  
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  }
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'remove_seconds': ['remove_seconds', 'Get datetime rounded to lower minute. This is meant to remove seconds and leverage MySQL\'s query cache by having SELECT queries remain identical for 60 seconds instead of just 1. ', [['inc/_core','_misc.funcs.php',1601]], 6],
'utf8_trim': ['utf8_trim', 'utf8_trim( ) ', [['inc/_ext','_portable_utf8.php',1355]], 10],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'group_by': ['group_by', '', [['inc/_core/model/db','_sql.class.php',290]], 60],
'where_visibility': ['where_visibility', 'Restrict to the visibility/sharing statuses we want to show ', [['inc/items/model','_itemquery.class.php',281]], 10],
'itemquery': ['itemquery', 'Constructor. ', [['inc/items/model','_itemquery.class.php',49]], 10],
'where_datecreated': ['where_datecreated', 'Restricts creation date to a specific date range. ', [['inc/items/model','_itemquery.class.php',770]], 1],
'where_datestart': ['where_datestart', 'Restricts the datestart param to a specific date range. ', [['inc/items/model','_itemquery.class.php',602]], 10],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'where_locale': ['where_locale', 'Restrict to specific locale ', [['inc/items/model','_itemquery.class.php',524]], 2],
'where_author_logins': ['where_author_logins', 'Restrict to specific authors by users logins ', [['inc/items/model','_itemquery.class.php',412]], 2],
'where_assignees': ['where_assignees', 'Restrict to specific assignees by users IDs ', [['inc/items/model','_itemquery.class.php',444]], 4],
'where_chapter2': ['where_chapter2', 'Restrict to specific collection/chapters (blog/categories) ', [['inc/items/model','_itemquery.class.php',209]], 6],
'where_id': ['where_id', 'Restrict to a specific comment ', [['inc/comments/model','_commentquery.class.php',64],['inc/items/model','_itemquery.class.php',66]], 4],
'where_tags': ['where_tags', 'Restrict to specific tags ', [['inc/items/model','_itemquery.class.php',360]], 1],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'where_chapter': ['where_chapter', 'Restrict to specific collection/chapters (blog/categories) ', [['inc/items/model','_itemquery.class.php',152]], 4],
'where_author': ['where_author', 'Restrict to specific authors ', [['inc/comments/model','_commentquery.class.php',193],['inc/items/model','_itemquery.class.php',383]], 6],
'where_id_list': ['where_id_list', 'Restrict to a specific list of comments ', [['inc/comments/model','_commentquery.class.php',96],['inc/items/model','_itemquery.class.php',115]], 2],
'where_statuses': ['where_statuses', 'Restrict to specific statuses ', [['inc/comments/model','_commentquery.class.php',373],['inc/items/model','_itemquery.class.php',542]], 5],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'get_start_date_for_week': ['get_start_date_for_week', '', [['inc/_core','_misc.funcs.php',1551]], 3],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['inc/_core/model/db','_sql.class.php',247]], 369],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'compile_cat_array': ['compile_cat_array', 'Compiles the cat array from $cat (recursive + optional modifiers) and $catsel[] (non recursive) ', [['inc/collections/model','_category.funcs.php',251]], 4],
'get_users_ids_by_logins': ['get_users_ids_by_logins', 'Get IDs of users by logins separated by comma Used to filter the posts by authors and assigned users ', [['inc/users/model','_user.funcs.php',4587]], 6],
'where_assignees_logins': ['where_assignees_logins', 'Restrict to specific assignees by users logins ', [['inc/items/model','_itemquery.class.php',475]], 2],
'where_featured': ['where_featured', 'Restrict to the featured/non featured posts if requested ', [['inc/items/model','_itemquery.class.php',336]], 1],
'where_keywords': ['where_keywords', 'Restrict with keywords ', [['inc/comments/model','_commentquery.class.php',438],['inc/_core/model/db','_sql.class.php',369],['inc/items/model','_itemquery.class.php',789],['inc/users/model','_userquery.class.php',157]], 10],
'on': ['on', '', [['rsc/js/bootstrap','typeahead.bundle.js',739]], 619],
'where_types': ['where_types', 'Restrict to specific post types ', [['inc/comments/model','_commentquery.class.php',410],['inc/items/model','_itemquery.class.php',572]], 8],
'statuses_where_clause': ['statuses_where_clause', 'Construct the where clause to limit retrieved posts/comment on their status ', [['inc/items/model','_item.funcs.php',672]], 9],
'get_sql_where_aggregate_coll_ids': ['get_sql_where_aggregate_coll_ids', 'Get SQL expression to match the list of aggregates collection IDs. ', [['inc/collections/model','_blog.class.php',3075]], 7],
'locale_startofweek': ['locale_startofweek', 'Returns the current locale\'s start of week ', [['inc/locales','_locale.funcs.php',432]], 11],
'where_author_assignee': ['where_author_assignee', 'Restrict to specific assignee or author ', [['inc/items/model','_itemquery.class.php',505]], 1],
'from_add': ['from_add', 'Extends the FROM clause. ', [['inc/_core/model/db','_sql.class.php',226]], 200],
'implode': ['implode', '', [], 571],
'date': ['date', '', [], 446],
'substr': ['substr', '', [], 745],
'str_replace': ['str_replace', '', [], 531],
'in_array': ['in_array', '', [], 417],
'intval': ['intval', '', [], 221],
'time': ['time', '', [], 76],
'strtolower': ['strtolower', '', [], 202],
'preg_replace': ['preg_replace', '', [], 325],
'explode': ['explode', '', [], 263],
'mktime': ['mktime', '', [], 44],
'defined': ['defined', '', [], 962],
'is_null': ['is_null', '', [], 299],
'preg_split': ['preg_split', '', [], 41],
'extract': ['extract', '', [], 60],
'count': ['count', '', [], 928]};
CLASS_DATA={
'sql': ['sql', 'SQL class: help constructing queries ', [['inc/_core/model/db','_sql.class.php',17]], 334],
'itemquery': ['itemquery', 'ItemQuery: help constructing queries on Items ', [['inc/items/model','_itemquery.class.php',18]], 10]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
